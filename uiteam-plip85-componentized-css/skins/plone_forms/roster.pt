<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

<metal:block fill-slot="top_slot"
             tal:define="dummy python:request.set('disable_border',1)" />

<body>


    <div metal:fill-slot="main"
          tal:define="members mtool/getRoster;
                      Batch python:modules['Products.CMFPlone'].Batch;
                      DateTime python:modules['DateTime'].DateTime;
                      b_start python:request.get('b_start', 0);
                      getHomeUrl nocall:mtool/getHomeUrl;
                      getPersonalPortrait nocall:mtool/getPersonalPortrait;">

        <h1 i18n:translate="heading_member_listing">Member Listing</h1>

		<p i18n:translate="description_member_listing">
        A list of the visible members.
        </p>

		<form name="search_results" action="#" method="post"
              tal:condition="members"
              tal:define="batch python:Batch(members, 20, int(b_start), orphan=1)">

		<p>
        <span i18n:translate="label_visible_members">Visible Members</span>:
        <strong tal:content="python:len(members)">number of members</strong>
        </p>

        <!-- Navigation -->
        <div metal:use-macro="here/batch_macros/macros/navigation" />

        <div>
        <metal:block tal:repeat="result batch">
            <span class="card" tal:define="home python: getHomeUrl(result['id'], verifyPermission=1);
                                           portrait python: getPersonalPortrait(result['id']);">
                <a href="#" tal:attributes="href home">
                  <img src="#" alt="" tal:replace="structure python:portrait.tag(width=75, height=100, border=0)" />
                  <br />
                  <span tal:content="python:result['id']"> member id</span>
                </a>
                <br />
            </span>
        </metal:block>
        </div>

        <!-- Navigation -->
        <div metal:use-macro="here/batch_macros/macros/navigation" />

        </form>
	<div class="spacer">&nbsp;</div>
    </div>
</body>
</html>
