<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

<metal:block metal:fill-slot="head_slot">
  <tal:block tal:define="dummy python:request.set('enable_border',1)" />
</metal:block>

<body>

<span tal:condition="nothing"
      tal:define="has_edit_priv nocall: here/edit">
  This span ensures that the visitor has edit privilege, by fetching - but
  not displaying - the protected issue.edit method.
</span>

<span tal:condition="nothing">
  Template description: Basic view of issue characteristics and transcript.
</span>

<div metal:fill-slot="header"
     tal:define="global collector_issue_header_present python: 1">

    <h1 i18n:translate="heading_edit_collector_issue">
    Edit Collector Issue
    </h1>

    <div id="description" i18n:translate="description_edit_collector_issue">
    Use this form to edit the data of an existing issue. Do not use this form
    to follow up or change the workflow status of an issue - use the issue follow
    up form for that.
    </div>

</div>

<div metal:fill-slot="main">

  <div tal:condition="not: collector_issue_header_present|nothing">
    <!-- Master template has no "header" macro... -->
    <div metal:use-macro="here/collector_macros/macros/issue_header">
      ISSUE HEADER
    </div>
  </div>

<form class="group"
        method="post"
        enctype="multipart/form-data"
        action=""
        tal:attributes="action string:${here/absolute_url}/collector_issue_edit"
        >

    <span class="legend" i18n:translate="legend_issue_details">Issue details</span>


    <div class="row">
        <div class="label" i18n:translate="label_title">Title</div>
        <div class="field">
            <input name="title" value="TITLE" size="65"
                   tal:attributes="value python: here.Title()" />
        </div>
    </div>

    <div class="row">
        <div class="label" i18n:translate="label_security">Security</div>
        <div class="field">
            <input class="noborder" id="security_related_checkbox"
                   type="checkbox"
                   name="security_related:int"
                   value="1"
                   tal:attributes="checked here/security_related" />
	    <label for="security_related_checkbox" i18n:translate="label_security_related">Security related</label>
        </div>
    </div>

    <div class="row">
        <div class="label" i18n:translate="label_description">Description</div>
        <div class="field">
            <textarea name="description:text" rows="4" cols="60"
                      tal:content="here/description"></textarea>
        </div>
    </div>

    <div class="row">
        <div class="label" i18n:translate="label_from_name">From (name)</div>
        <div class="field">
              <input name="submitter_name" value="NAME" size="25"
                     tal:attributes="value python: here.submitter_name" />
        </div>
    </div>

    <div class="row">
        <div class="label" i18n:translate="label_from_login_name">From (login name)</div>
        <div class="field">
            <input name="submitter_id" value="ID" size="25"
                   tal:attributes="value python: here.submitter_id" />
        </div>
    </div>

    <div class="row">
        <div class="label" i18n:translate="label_from_alt_email">From (alt. email)</div>
        <div class="field">
                  <input name="submitter_email" value="EMAIL" size="25"
                         tal:attributes="value here/submitter_email|nothing" />
        </div>
    </div>

    <div class="row">
        <div class="label" i18n:translate="label_topic">Topic</div>
        <div class="field">
            <select name="topic">
                <option value=""
                        tal:repeat="it here/aq_parent/topics"
                        tal:attributes="value it;
                                        selected python: here.topic == it"
                        tal:content="python: it.capitalize()">
                </option>
            </select>
        </div>
    </div>

    <div class="row">
        <div class="label" i18n:translate="label_classification">Classification</div>
        <div class="field">
            <select name="classification">
                <option value=""
                        tal:repeat="it here/aq_parent/classifications"
                        tal:attributes="value it;
                                        selected python: here.classification
                                                         == it"
                        tal:content="python: it.capitalize()">
                </option>
            </select>
        </div>
    </div>


    <div class="row">
        <div class="label" i18n:translate="label_importance">Importance</div>
        <div class="field">
            <select name="importance">
                <option value=""
                        tal:repeat="it here/aq_parent/importances"
                        tal:attributes="value it;
                                        selected python: here.importance == it"
                        tal:content="python: it.capitalize()">
                </option>
            </select>
        </div>
    </div>


    <div class="row">
        <div class="label" i18n:translate="label_version_info">Version info</div>
        <div class="field">
            <textarea name="version_info" rows="2" cols="40"
                      tal:content="here/version_info"></textarea>
        </div>
    </div>


    <div class="row">
        <div class="label" i18n:translate="label_upload">Upload</div>
        <div class="field" i18n:translate="">
        Use the issue folder_contents view (if accessible) to change the
        uploads.
        </div>
    </div>


    <div class="row">
        <div class="label" i18n:translate="label_comment">Comment</div>
        <div class="field">
            <textarea name="comment" rows="3" cols="75"></textarea>
        </div>
    </div>

    <div class="row">
        <div class="label" i18n:translate="label_collector_transcript">Transcript</div>
        <div class="field" tal:define="transcript here/get_transcript">
          <textarea name="text" rows="10" cols="75" wrap="soft"
                    tal:content="transcript/text"></textarea>
        </div>
    </div>


    <div class="row">
        <div class="label"> &nbsp; </div>
        <div class="field">
            <input class="context" type="submit" name="submit" value="Submit" i18n:attributes="value" />
            <input class="standalone" type="reset" name="reset" value="Reset" i18n:attributes="value" />
        </div>
    </div>

  </form>

</div>

</body>
</html>
