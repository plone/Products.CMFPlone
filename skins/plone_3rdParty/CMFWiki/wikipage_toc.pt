<html xmlns:tal="http://xml.zope.org/namespaces/tal"
       xmlns:metal="http://xml.zope.org/namespaces/metal"
       metal:use-macro="here/main_template/macros/master">
<body>

<div metal:fill-slot="header"
     tal:define="global wiki_header_present python:1">

  <div tal:replace="structure here/wikipage_header">
  </div>

</div>

<div metal:fill-slot="main"
     tal:define="callresults here/wiki_map;
                 nesting     python: callresults[0];
                 singletons  python: callresults[1];">


    <div tal:condition="not: wiki_header_present|nothing">
      <span tal:condition="nothing"> In case master has no "header" macro. </span>
      <div tal:replace="structure here/wikipage_header"> </div>
    </div>

    <h1><span tal:replace="here/getId">PageID</span> contents</h1>

    <!-- this should really not depend on nesting coming back as HTML,
         but I don't have time to fix it right now - chrism  -->
    <p tal:content="structure nesting"> Nesting goes here. </p>

    <h1><span tal:replace="here/getId">PageID</span> singletons</h1>

    <small>(singletons have no parents and no offspring)</small>

    <ul>
     <li tal:repeat="single singletons">
      <a href="single"
         name="single"
         tal:attributes="href single; name single"
         tal:content="single" >single</a>
     </li>
    </ul>


</div>

</body>
</html>
