!function(a){define("tinymce",[],function(){return function(){return function(){!function(){"use strict";function a(){function a(c,d){return b.push(c+" ")>hc.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function b(a){return a[yc]=!0,a}function c(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||Hc)-(~a.sourceIndex||Hc);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function d(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function e(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function f(a){return b(function(c){return c=+c,b(function(b,d){for(var e,f=a([],b.length,c),g=f.length;g--;)b[e=f[g]]&&(b[e]=!(d[e]=b[e]))})})}function g(a){return a&&typeof a.getElementsByTagName!==Gc&&a}function h(){}function i(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function j(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Bc++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[Ac,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[yc]||(b[yc]={}),(h=i[d])&&h[0]===Ac&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function k(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function l(a,b,c){for(var d=0,e=b.length;d<e;d++)id(a,b[d],c);return c}function m(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function n(a,c,d,e,f,g){return e&&!e[yc]&&(e=n(e)),f&&!f[yc]&&(f=n(f,g)),b(function(b,g,h,i){var j,k,n,o=[],p=[],q=g.length,r=b||l(c||"*",h.nodeType?[h]:h,[]),s=!a||!b&&c?r:m(r,o,a,h,i),t=d?f||(b?a:q||e)?[]:g:s;if(d&&d(s,t,h,i),e)for(j=m(t,p),e(j,[],h,i),k=j.length;k--;)(n=j[k])&&(t[p[k]]=!(s[p[k]]=n));if(b){if(f||a){if(f){for(j=[],k=t.length;k--;)(n=t[k])&&j.push(s[k]=n);f(null,t=[],j,i)}for(k=t.length;k--;)(n=t[k])&&(j=f?Oc.call(b,n):o[k])>-1&&(b[j]=!(g[j]=n))}}else t=m(t===g?t.splice(q,t.length):t),f?f(null,g,t,i):Mc.apply(g,t)})}function o(a){for(var b,c,d,e=a.length,f=hc.relative[a[0].type],g=f||hc.relative[" "],h=f?1:0,l=j(function(a){return a===b},g,!0),m=j(function(a){return Oc.call(b,a)>-1},g,!0),p=[function(a,c,d){return!f&&(d||c!==nc)||((b=c).nodeType?l(a,c,d):m(a,c,d))}];h<e;h++)if(c=hc.relative[a[h].type])p=[j(k(p),c)];else{if(c=hc.filter[a[h].type].apply(null,a[h].matches),c[yc]){for(d=++h;d<e&&!hc.relative[a[d].type];d++);return n(h>1&&k(p),h>1&&i(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(Uc,"$1"),c,h<d&&o(a.slice(h,d)),d<e&&o(a=a.slice(d)),d<e&&i(a))}p.push(c)}return k(p)}function p(a,c){var d=c.length>0,e=a.length>0,f=function(b,f,g,h,i){var j,k,l,n=0,o="0",p=b&&[],q=[],r=nc,s=b||e&&hc.find.TAG("*",i),t=Ac+=null==r?1:Math.random()||.1,u=s.length;for(i&&(nc=f!==rc&&f);o!==u&&null!=(j=s[o]);o++){if(e&&j){for(k=0;l=a[k++];)if(l(j,f,g)){h.push(j);break}i&&(Ac=t)}d&&((j=!l&&j)&&n--,b&&p.push(j))}if(n+=o,d&&o!==n){for(k=0;l=c[k++];)l(p,q,f,g);if(b){if(n>0)for(;o--;)p[o]||q[o]||(q[o]=Kc.call(h));q=m(q)}Mc.apply(h,q),i&&!b&&q.length>0&&n+c.length>1&&id.uniqueSort(h)}return i&&(Ac=t,nc=r),p};return d?b(f):f}function q(a,b,c){var d=a.isiOS()&&/ipad/i.test(c)===!0,e=a.isiOS()&&!d,f=a.isAndroid()&&3===a.version.major,g=a.isAndroid()&&4===a.version.major,h=d||f||g&&/mobile/i.test(c)===!0,i=a.isiOS()||a.isAndroid(),j=i&&!h,k=b.isSafari()&&a.isiOS()&&/safari/i.test(c)===!1;return{isiPad:Da.constant(d),isiPhone:Da.constant(e),isTablet:Da.constant(h),isPhone:Da.constant(j),isTouch:Da.constant(i),isAndroid:a.isAndroid,isiOS:a.isiOS,isWebView:Da.constant(k)}}function r(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];if(a.length!==b.length)throw new Error('Wrong number of arguments to struct. Expected "['+a.length+']", got '+b.length+" arguments");var d={};return rb.each(a,function(a,c){d[a]=Da.constant(b[c])}),d}}function s(a,b){var c=a.concat(b);if(0===c.length)throw new Error("You must specify at least one required or optional field.");return Lg.validateStrArr("required",a),Lg.validateStrArr("optional",b),Lg.checkDupes(c),function(d){var e=Yf.keys(d),f=rb.forall(a,function(a){return rb.contains(e,a)});f||Lg.reqMessage(a,e);var g=rb.filter(e,function(a){return!rb.contains(c,a)});g.length>0&&Lg.unsuppMessage(g);var h={};return rb.each(a,function(a){h[a]=Da.constant(d[a])}),rb.each(b,function(a){h[a]=Da.constant(Object.prototype.hasOwnProperty.call(d,a)?Ka.some(d[a]):Ka.none())}),h}}function t(a,b){var c,d=0,e={};b=b||{},c=b.maxLoadTime||5e3;var f=function(b){a.getElementsByTagName("head")[0].appendChild(b)},g=function(b,g,h){var i,j,k,l,m=function(){for(var a=l.passed,b=a.length;b--;)a[b]();l.status=2,l.passed=[],l.failed=[]},n=function(){for(var a=l.failed,b=a.length;b--;)a[b]();l.status=3,l.passed=[],l.failed=[]},o=function(){var a=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(a&&parseInt(a[1],10)<536)},p=function(a,b){a()||((new Date).getTime()-k<c?Ub.setTimeout(b):n())},q=function(){p(function(){for(var b,c,d=a.styleSheets,e=d.length;e--;)if(b=d[e],c=b.ownerNode?b.ownerNode:b.owningElement,c&&c.id===i.id)return m(),!0},q)},r=function(){p(function(){try{var a=j.sheet.cssRules;return m(),!!a}catch(b){}},r)};if(b=Gd._addCacheSuffix(b),e[b]?l=e[b]:(l={passed:[],failed:[]},e[b]=l),g&&l.passed.push(g),h&&l.failed.push(h),1!==l.status){if(2===l.status)return void m();if(3===l.status)return void n();if(l.status=1,i=a.createElement("link"),i.rel="stylesheet",i.type="text/css",i.id="u"+d++,i.async=!1,i.defer=!1,k=(new Date).getTime(),"onload"in i&&!o())i.onload=q,i.onerror=n;else{if(navigator.userAgent.indexOf("Firefox")>0)return j=a.createElement("style"),j.textContent='@import "'+b+'"',r(),void f(j);q()}f(i),i.href=b}},h=function(a){return Oh.nu(function(b){g(a,Da.compose(b,Da.constant(Xh.value(a))),Da.compose(b,Da.constant(Xh.error(a))))})},i=function(a){return a.fold(Da.identity,Da.identity)},j=function(a,b,c){Uh.par(rb.map(a,h)).get(function(a){var d=rb.partition(a,function(a){return a.isValue()});d.fail.length>0?c(d.fail.map(i)):b(d.pass.map(i))})};return{load:g,loadAll:j}}function u(a,b){var c=a,d=function(a,c,d,e){var f,g;if(a){if(!e&&a[c])return a[c];if(a!==b){if(f=a[d])return f;for(g=a.parentNode;g&&g!==b;g=g.parentNode)if(f=g[d])return f}}},e=function(a,c,d,e){var f,g,h;if(a){if(f=a[d],b&&f===b)return;if(f){if(!e)for(h=f[c];h;h=h[c])if(!h[c])return h;return f}if(g=a.parentNode,g&&g!==b)return g}};this.current=function(){return c},this.next=function(a){return c=d(c,"firstChild","nextSibling",a)},this.prev=function(a){return c=d(c,"lastChild","previousSibling",a)},this.prev2=function(a){return c=e(c,"lastChild","previousSibling",a)}}function v(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o={},p={},q=[],r={},s={},t=function(b,c,d){var e=a[b];return e?e=cj(e,/[, ]/,cj(e.toUpperCase(),/[, ]/)):(e=aj[b],e||(e=cj(c," ",cj(c.toUpperCase()," ")),e=ej(e,d),aj[b]=e)),e};a=a||{},d=ij(a.schema),a.verify_html===!1&&(a.valid_elements="*[*]"),b=jj(a.valid_styles),c=jj(a.invalid_styles,"map"),i=jj(a.valid_classes,"map"),e=t("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=t("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),g=t("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=t("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),k=t("non_empty_elements","td th iframe video audio object script pre code",g),l=t("move_caret_before_on_enter_elements","table",k),m=t("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),j=t("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",m),n=t("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),dj((a.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(a){s[a]=new RegExp("</"+a+"[^>]*>","gi")});var u=function(a){return new RegExp("^"+a.replace(/([?+*])/g,".$1")+"$")},v=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,p,r,s,t,v,w,x=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,y=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,z=/[*?+]/;if(a)for(a=hj(a,","),o["@"]&&(s=o["@"].attributes,t=o["@"].attributesOrder),b=0,c=a.length;b<c;b++)if(f=x.exec(a[b])){if(p=f[1],j=f[2],r=f[3],i=f[5],m={},n=[],g={attributes:m,attributesOrder:n},"#"===p&&(g.paddEmpty=!0),"-"===p&&(g.removeEmpty=!0),"!"===f[4]&&(g.removeEmptyAttrs=!0),s){for(v in s)m[v]=s[v];n.push.apply(n,t)}if(i)for(i=hj(i,"|"),d=0,e=i.length;d<e;d++)if(f=y.exec(i[d])){if(h={},l=f[1],k=f[2].replace(/[\\:]:/g,":"),p=f[3],w=f[4],"!"===l&&(g.attributesRequired=g.attributesRequired||[],g.attributesRequired.push(k),h.required=!0),"-"===l){delete m[k],n.splice(gj(n,k),1);continue}p&&("="===p&&(g.attributesDefault=g.attributesDefault||[],g.attributesDefault.push({name:k,value:w}),h.defaultValue=w),":"===p&&(g.attributesForced=g.attributesForced||[],g.attributesForced.push({name:k,value:w}),h.forcedValue=w),"<"===p&&(h.validValues=cj(w,"?"))),z.test(k)?(g.attributePatterns=g.attributePatterns||[],h.pattern=u(k),g.attributePatterns.push(h)):(m[k]||n.push(k),m[k]=h)}s||"@"!==j||(s=m,t=n),r&&(g.outputName=j,o[r]=g),z.test(j)?(g.pattern=u(j),q.push(g)):o[j]=g}},w=function(a){o={},q=[],v(a),dj(d,function(a,b){p[b]=a.children})},x=function(a){var b=/^(~)?(.+)$/;a&&(aj.text_block_elements=aj.block_elements=null,dj(hj(a,","),function(a){var c=b.exec(a),d="~"===c[1],e=d?"span":"div",f=c[2];if(p[f]=p[e],r[f]=e,d||(j[f.toUpperCase()]={},j[f]={}),!o[f]){var g=o[e];g=ej({},g),delete g.removeEmptyAttrs,delete g.removeEmpty,o[f]=g}dj(p,function(a,b){a[e]&&(p[b]=a=ej({},p[b]),a[f]=a[e])})}))},y=function(b){var c=/^([+\-]?)(\w+)\[([^\]]+)\]$/;aj[a.schema]=null,b&&dj(hj(b,","),function(a){var b,d,e=c.exec(a);e&&(d=e[1],b=d?p[e[2]]:p[e[2]]={"#comment":{}},b=p[e[2]],dj(hj(e[3],"|"),function(a){"-"===d?delete b[a]:b[a]={}}))})},z=function(a){var b,c=o[a];if(c)return c;for(b=q.length;b--;)if(c=q[b],c.pattern.test(a))return c};a.valid_elements?w(a.valid_elements):(dj(d,function(a,b){o[b]={attributes:a.attributes,attributesOrder:a.attributesOrder},p[b]=a.children}),"html5"!==a.schema&&dj(hj("strong/b em/i"),function(a){a=hj(a,"/"),o[a[1]].outputName=a[0]}),dj(hj("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(a){o[a]&&(o[a].removeEmpty=!0)}),dj(hj("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(a){o[a].paddEmpty=!0}),dj(hj("span"),function(a){o[a].removeEmptyAttrs=!0})),x(a.custom_elements),y(a.valid_children),v(a.extended_valid_elements),y("+ol[ul|ol],+ul[ul|ol]"),dj({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(a,b){o[b]&&(o[b].parentsRequired=hj(a))}),a.invalid_elements&&dj(fj(a.invalid_elements),function(a){o[a]&&delete o[a]}),z("span")||v("span[!data-mce-type|*]");var A=function(){return b},B=function(){return c},C=function(){return i},D=function(){return h},E=function(){return j},F=function(){return m},G=function(){return n},H=function(){return g},I=function(){return f},J=function(){return k},K=function(){return l},L=function(){return e},M=function(){return s},N=function(a,b){var c=p[a.toLowerCase()];return!(!c||!c[b.toLowerCase()])},O=function(a,b){var c,d,e=z(a);if(e){if(!b)return!0;if(e.attributes[b])return!0;if(c=e.attributePatterns)for(d=c.length;d--;)if(c[d].pattern.test(a))return!0}return!1},P=function(){return r};return{children:p,elements:o,getValidStyles:A,getValidClasses:C,getBlockElements:E,getInvalidStyles:B,getShortEndedElements:H,getTextBlockElements:F,getTextInlineElements:G,getBoolAttrs:D,getElementRule:z,getSelfClosingElements:I,getNonEmptyElements:J,getMoveCaretBeforeOnEnterElements:K,getWhiteSpaceElements:L,getSpecialElements:M,isValidChild:N,isValid:O,getCustomElements:P,addValidElements:v,setValidElements:w,addCustomElements:x,addValidChildren:y}}function w(a,b){var c,d,e,f,g=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,h=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,i=/\s*([^:]+):\s*([^;]+);?/g,j=/\s+$/,k={},l="\ufeff";for(a=a||{},b&&(e=b.getValidStyles(),f=b.getInvalidStyles()),d=("\\\" \\' \\; \\: ; : "+l).split(" "),c=0;c<d.length;c++)k[d[c]]=l+c,k[l+c]=d[c];return{toHex:function(a){return a.replace(g,kj)},parse:function(b){var d,e,f,m,n={},o=a.url_converter,p=a.url_converter_scope||this,q=function(a,b,d){var e,f,g,h;if(e=n[a+"-top"+b],e&&(f=n[a+"-right"+b],f&&(g=n[a+"-bottom"+b],g&&(h=n[a+"-left"+b])))){var i=[e,f,g,h];for(c=i.length-1;c--&&i[c]===i[c+1];);c>-1&&d||(n[a+b]=c===-1?i[0]:i.join(" "),delete n[a+"-top"+b],delete n[a+"-right"+b],delete n[a+"-bottom"+b],delete n[a+"-left"+b])}},r=function(a){var b,c=n[a];if(c){for(c=c.split(" "),b=c.length;b--;)if(c[b]!==c[0])return!1;return n[a]=c[0],!0}},s=function(a,b,c,d){r(b)&&r(c)&&r(d)&&(n[a]=n[b]+" "+n[c]+" "+n[d],delete n[b],delete n[c],delete n[d])},t=function(a){return m=!0,k[a]},u=function(a,b){return m&&(a=a.replace(/\uFEFF[0-9]/g,function(a){return k[a]})),b||(a=a.replace(/\\([\'\";:])/g,"$1")),a},v=function(a){return String.fromCharCode(parseInt(a.slice(1),16))},w=function(a){return a.replace(/\\[0-9a-f]+/gi,v)},x=function(b,c,d,e,f,g){if(f=f||g)return f=u(f),"'"+f.replace(/\'/g,"\\'")+"'";if(c=u(c||d||e),!a.allow_script_urls){var h=c.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(h))return"";if(!a.allow_svg_data_urls&&/^data:image\/svg/i.test(h))return""}return o&&(c=o.call(p,c,"style")),"url('"+c.replace(/\'/g,"\\'")+"')"};if(b){for(b=b.replace(/[\u0000-\u001F]/g,""),b=b.replace(/\\[\"\';:\uFEFF]/g,t).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,t)});d=i.exec(b);)if(i.lastIndex=d.index+d[0].length,e=d[1].replace(j,"").toLowerCase(),f=d[2].replace(j,""),e&&f){if(e=w(e),f=w(f),e.indexOf(l)!==-1||e.indexOf('"')!==-1)continue;if(!a.allow_script_urls&&("behavior"===e||/expression\s*\(|\/\*|\*\//.test(f)))continue;"font-weight"===e&&"700"===f?f="bold":"color"!==e&&"background-color"!==e||(f=f.toLowerCase()),f=f.replace(g,kj),f=f.replace(h,x),n[e]=m?u(f,!0):f}q("border","",!0),q("border","-width"),q("border","-color"),q("border","-style"),q("padding",""),q("margin",""),s("border","border-width","border-style","border-color"),"medium none"===n.border&&delete n.border,"none"===n["border-image"]&&delete n["border-image"]}return n},serialize:function(a,b){var c,d,g="",h=function(b){var c,d,f,h;if(c=e[b])for(d=0,f=c.length;d<f;d++)b=c[d],h=a[b],h&&(g+=(g.length>0?" ":"")+b+": "+h+";")},i=function(a,b){var c;return c=f["*"],(!c||!c[a])&&(c=f[b],!c||!c[a])};if(b&&e)h("*"),h(b);else for(c in a)d=a[c],!d||f&&!i(c,b)||(g+=(g.length>0?" ":"")+c+": "+d+";");return g}}}function x(a,b){var c=this;void 0===b&&(b={});var d,e={},f=window,g={},h=0,i=!0,j=!0,k=t(a),l=[],m=b.schema?b.schema:v({}),n=w({url_converter:b.url_converter,url_converter_scope:b.url_converter_scope},b.schema),o=b.ownEvents?new ec(b.proxy):ec.Event,p=m.getBlockElements(),q=$d.overrideDefaults(function(){return{context:a,element:Fa.getRoot()}}),r=function(a){if("string"==typeof a)return!!p[a];if(a){var b=a.nodeType;if(b)return!(1!==b||!p[a.nodeName])}return!1},s=function(b){if(b&&a&&"string"==typeof b){var c=a.getElementById(b);return c&&c.id!==b?a.getElementsByName(b)[1]:c}return b},y=function(a){return"string"==typeof a&&(a=s(a)),q(a)},z=function(a,b,c){var e,f,g=y(a);return g.length&&(e=d[b],f=e&&e.get?e.get(g,b):g.attr(b)),"undefined"==typeof f&&(f=c||""),f},A=function(a){var b=s(a);return b?b.attributes:[]},B=function(a,c,e){var f,g;""===e&&(e=null);var h=y(a);f=h.attr(c),h.length&&(g=d[c],g&&g.set?g.set(h,e,c):h.attr(c,e),f!==e&&b.onSetAttrib&&b.onSetAttrib({attrElm:h,attrName:c,attrValue:e}))},C=function(b,c){if(!nj||1!==b.nodeType||c)return b.cloneNode(c);if(!c){var d=a.createElement(b.nodeName);return lj(A(b),function(a){B(d,a.nodeName,z(b,a.nodeName))}),d}return null},D=function(){return b.root_element||a.body},E=function(a){var b=a?a:f,c=b.document,d=j?c.documentElement:c.body;return{x:b.pageXOffset||d.scrollLeft,y:b.pageYOffset||d.scrollTop,w:b.innerWidth||d.clientWidth,h:b.innerHeight||d.clientHeight}},F=function(b,c){return Gh.getPos(a.body,s(b),c)},G=function(a,c,d){var e=y(a).css(c,d);b.update_styles&&rj(n,e)},H=function(a,c){var d=y(a).css(c);b.update_styles&&rj(n,d)},I=function(a,b,c){var d=y(a);return c?d.css(b):(b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),"float"===b&&(b=Lb.ie&&Lb.ie<12?"styleFloat":"cssFloat"),d[0]&&d[0].style?d[0].style[b]:void 0)},J=function(a){var b,c;return a=s(a),b=I(a,"width"),c=I(a,"height"),b.indexOf("px")===-1&&(b=0),c.indexOf("px")===-1&&(c=0),{w:parseInt(b,10)||a.offsetWidth||a.clientWidth,h:parseInt(c,10)||a.offsetHeight||a.clientHeight}},K=function(a){var b,c;return a=s(a),b=F(a),c=J(a),{x:b.x,y:b.y,w:c.w,h:c.h}},L=function(a,b){var c;if(!a)return!1;if(!Array.isArray(a)){if("*"===b)return 1===a.nodeType;if(oj.test(b)){var d=b.toLowerCase().split(/,/),e=a.nodeName.toLowerCase();for(c=d.length-1;c>=0;c--)if(d[c]===e)return!0;return!1}if(a.nodeType&&1!==a.nodeType)return!1}var f=Array.isArray(a)?a:[a];return id(b,f[0].ownerDocument||f[0],null,f).length>0},M=function(a,b,c,d){var e,f=[],g=s(a);for(d=void 0===d,c=c||("BODY"!==D().nodeName?D().parentNode:null),Gd.is(b,"string")&&(e=b,b="*"===b?function(a){return 1===a.nodeType}:function(a){return L(a,e)});g&&g!==c&&g.nodeType&&9!==g.nodeType;){if(!b||"function"==typeof b&&b(g)){if(!d)return[g];f.push(g)}g=g.parentNode}return d?f:null},N=function(a,b,c){var d=M(a,b,c,!1);return d&&d.length>0?d[0]:null},O=function(a,b,c){var d=b;if(a)for("string"==typeof b&&(d=function(a){return L(a,b)}),a=a[c];a;a=a[c])if("function"==typeof d&&d(a))return a;return null},P=function(a,b){return O(a,b,"nextSibling")},Q=function(a,b){return O(a,b,"previousSibling")},R=function(c,d){return id(c,s(d)||b.root_element||a,[])},S=function(a,b,d){var e,f="string"==typeof a?s(a):a;if(!f)return!1;if(Gd.isArray(f)&&(f.length||0===f.length))return e=[],lj(f,function(a,c){a&&("string"==typeof a&&(a=s(a)),e.push(b.call(d,a,c)))}),e;var g=d?d:c;return b.call(g,f)},T=function(a,b){y(a).each(function(a,c){lj(b,function(a,b){B(c,b,a)})})},U=function(a,b){var c=y(a);nj?c.each(function(a,c){if(c.canHaveHTML!==!1){for(;c.firstChild;)c.removeChild(c.firstChild);try{c.innerHTML="<br>"+b,c.removeChild(c.firstChild)}catch(d){$d("<div></div>").html("<br>"+b).contents().slice(1).appendTo(c)}return b}}):c.html(b)},V=function(b,c,d,e,f){return S(b,function(b){var g="string"==typeof c?a.createElement(c):c;return T(g,d),e&&("string"!=typeof e&&e.nodeType?g.appendChild(e):"string"==typeof e&&U(g,e)),f?g:b.appendChild(g)})},W=function(b,c,d){return V(a.createElement(b),b,c,d,!0)},X=_i.decode,Y=_i.encodeAllRaw,Z=function(a,b,c){var d,e="";e+="<"+a;for(d in b)b.hasOwnProperty(d)&&null!==b[d]&&"undefined"!=typeof b[d]&&(e+=" "+d+'="'+Y(b[d])+'"');return"undefined"!=typeof c?e+">"+c+"</"+a+">":e+" />"},$=function(b){var c,d=a.createElement("div"),e=a.createDocumentFragment();for(b&&(d.innerHTML=b);c=d.firstChild;)e.appendChild(c);return e},_=function(a,b){var c=y(a);return b?c.each(function(){for(var a;a=this.firstChild;)3===a.nodeType&&0===a.data.length?this.removeChild(a):this.parentNode.insertBefore(a,this)}).remove():c.remove(),c.length>1?c.toArray():c[0]},aa=function(a){return S(a,function(a){var b,c=a.attributes;for(b=c.length-1;b>=0;b--)a.removeAttributeNode(c.item(b))})},ba=function(a){return n.parse(a)},ca=function(a,b){return n.serialize(a,b)},da=function(b){var c,d;if(Fa!==x.DOM&&a===document){if(e[b])return;e[b]=!0}d=a.getElementById("mceDefaultStyles"),d||(d=a.createElement("style"),d.id="mceDefaultStyles",d.type="text/css",c=a.getElementsByTagName("head")[0],c.firstChild?c.insertBefore(d,c.firstChild):c.appendChild(d)),d.styleSheet?d.styleSheet.cssText+=b:d.appendChild(a.createTextNode(b))},ea=function(b){var c;return Fa!==x.DOM&&a===document?void x.DOM.loadCSS(b):(b||(b=""),c=a.getElementsByTagName("head")[0],void lj(b.split(","),function(a){var b;a=Gd._addCacheSuffix(a),g[a]||(g[a]=!0,b=W("link",{rel:"stylesheet",href:a}),c.appendChild(b))}))},fa=function(a,b,c){y(a).toggleClass(b,c).each(function(){""===this.className&&$d(this).attr("class",null)})},ga=function(a,b){y(a).addClass(b)},ha=function(a,b){fa(a,b,!1)},ia=function(a,b){return y(a).hasClass(b)},ja=function(a){y(a).show()},ka=function(a){y(a).hide()},la=function(a){return"none"===y(a).css("display")},ma=function(a){return(a?a:"mce_")+h++},na=function(a){var b="string"==typeof a?s(a):a;return Ii.isElement(b)?b.outerHTML:$d("<div></div>").append($d(b).clone()).html()},oa=function(a,b){y(a).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=b)}catch(a){}_($d(this).html(b),!0)})},pa=function(a,b){var c=s(b);return S(a,function(a){var b,d;return b=c.parentNode,d=c.nextSibling,d?b.insertBefore(a,d):b.appendChild(a),a})},qa=function(a,b,c){return S(b,function(b){return Gd.is(b,"array")&&(a=a.cloneNode(!0)),c&&lj(mj(b.childNodes),function(b){a.appendChild(b)}),b.parentNode.replaceChild(a,b)})},ra=function(a,b){var c;return a.nodeName!==b.toUpperCase()&&(c=W(b),lj(A(a),function(b){B(c,b.nodeName,z(a,b.nodeName))}),qa(c,a,!0)),c||a},sa=function(a,b){for(var c,d=a;d;){for(c=b;c&&d!==c;)c=c.parentNode;if(d===c)break;d=d.parentNode}return!d&&a.ownerDocument?a.ownerDocument.documentElement:d},ta=function(a){return n.toHex(Gd.trim(a))},ua=function(a,b){var c,d,e,f,g,h,i=0;if(a=a.firstChild){g=new u(a,a.parentNode),b=b||(m?m.getNonEmptyElements():null),f=m?m.getWhiteSpaceElements():{};do{if(e=a.nodeType,Ii.isElement(a)){var j=a.getAttribute("data-mce-bogus");if(j){a=g.next("all"===j);continue}if(h=a.nodeName.toLowerCase(),b&&b[h]){if("br"===h){i++,a=g.next();continue}return!1}for(d=A(a),c=d.length;c--;)if(h=d[c].nodeName,"name"===h||"data-mce-bookmark"===h)return!1}if(8===e)return!1;if(3===e&&!pj.test(a.nodeValue))return!1;if(3===e&&a.parentNode&&f[a.parentNode.nodeName]&&pj.test(a.nodeValue))return!1;a=g.next()}while(a)}return i<=1},va=function(){return a.createRange()},wa=function(a,b,c){var d,e,f,g=va();if(a&&b)return g.setStart(a.parentNode,sj(a)),g.setEnd(b.parentNode,sj(b)),d=g.extractContents(),g=va(),g.setStart(b.parentNode,sj(b)+1),g.setEnd(a.parentNode,sj(a)+1),e=g.extractContents(),f=a.parentNode,f.insertBefore(Mi.trimNode(Fa,d),a),c?f.insertBefore(c,a):f.insertBefore(b,a),f.insertBefore(Mi.trimNode(Fa,e),a),_(a),c||b},xa=function(c,d,e,g){if(Gd.isArray(c)){for(var h=c.length;h--;)c[h]=xa(c[h],d,e,g);return c}return!b.collect||c!==a&&c!==f||l.push([c,d,e,g]),o.bind(c,d,e,g||Fa)},ya=function(b,c,d){var e;if(Gd.isArray(b)){for(e=b.length;e--;)b[e]=ya(b[e],c,d);return b}if(l&&(b===a||b===f))for(e=l.length;e--;){var g=l[e];b!==g[0]||c&&c!==g[1]||d&&d!==g[2]||o.unbind(g[0],g[1],g[2])}return o.unbind(b,c,d)},za=function(a,b,c){return o.fire(a,b,c)},Aa=function(a){if(a&&Ii.isElement(a)){var b=a.getAttribute("data-mce-contenteditable");return b&&"inherit"!==b?b:"inherit"!==a.contentEditable?a.contentEditable:null}return null},Ba=function(a){for(var b=D(),c=null;a&&a!==b&&(c=Aa(a),null===c);a=a.parentNode);return c},Ca=function(){if(l)for(var a=l.length;a--;){var b=l[a];o.unbind(b[0],b[1],b[2])}id.setDocument&&id.setDocument()},Da=function(a,b){for(;a;){if(b===a)return!0;a=a.parentNode}return!1},Ea=function(a){return"startContainer: "+a.startContainer.nodeName+", startOffset: "+a.startOffset+", endContainer: "+a.endContainer.nodeName+", endOffset: "+a.endOffset},Fa={doc:a,settings:b,win:f,files:g,stdMode:i,boxModel:j,styleSheetLoader:k,boundEvents:l,styles:n,schema:m,events:o,isBlock:r,$:q,$$:y,root:null,clone:C,getRoot:D,getViewPort:E,getRect:K,getSize:J,getParent:N,getParents:M,get:s,getNext:P,getPrev:Q,select:R,is:L,add:V,create:W,createHTML:Z,createFragment:$,remove:_,setStyle:G,getStyle:I,setStyles:H,removeAllAttribs:aa,setAttrib:B,setAttribs:T,getAttrib:z,getPos:F,parseStyle:ba,serializeStyle:ca,addStyle:da,loadCSS:ea,addClass:ga,removeClass:ha,hasClass:ia,toggleClass:fa,show:ja,hide:ka,isHidden:la,uniqueId:ma,setHTML:U,getOuterHTML:na,setOuterHTML:oa,decode:X,encode:Y,insertAfter:pa,replace:qa,rename:ra,findCommonAncestor:sa,toHex:ta,run:S,getAttribs:A,isEmpty:ua,createRng:va,nodeIndex:sj,split:wa,bind:xa,unbind:ya,fire:za,getContentEditable:Aa,getContentEditableParent:Ba,destroy:Ca,isChildOf:Da,dumpRng:Ea};return d=qj(n,b,function(){return Fa}),Fa}function y(){var a=this,b=[],c={},d={},e=[],f=function(a){if(d[a])return d[a].instance},g=function(a){var b;return d[a]&&(b=d[a].dependencies),b||[]},h=function(a,b){var d=y.language;if(d&&y.languageLoad!==!1){if(b)if(b=","+b+",",b.indexOf(","+d.substr(0,2)+",")!==-1)d=d.substr(0,2);else if(b.indexOf(","+d+",")===-1)return;yj.ScriptLoader.add(c[a]+"/langs/"+d+".js")}},i=function(a,c,f){b.push(c),d[a]={instance:c,dependencies:f};var g=rb.partition(e,function(b){return b.name===a});return e=g.fail,zj(g.pass,function(a){a.callback()}),c},j=function(a){delete c[a],delete d[a]},k=function(a,b){return"object"==typeof b?b:"string"==typeof a?{prefix:"",resource:b,suffix:""}:{prefix:a.prefix,resource:b,suffix:a.suffix}},l=function(b,c){var d=a.urls[b];zj(c,function(a){yj.ScriptLoader.add(d+"/"+a)})},m=function(a,b,c){var d=g(name);zj(d,function(b){var c=k(a,b);n(c.resource,c,void 0,void 0)}),b&&(c?b.call(c):b.call(yj))},n=function(a,b,e,f,g){if(!c[a]){var h="string"==typeof b?b:b.prefix+b.resource+b.suffix;0!==h.indexOf("/")&&h.indexOf("://")===-1&&(h=y.baseURL+"/"+h),c[a]=h.substring(0,h.lastIndexOf("/")),d[a]?m(b,e,f):yj.ScriptLoader.add(h,function(){return m(b,e,f)},f,g)}},o=function(a,b){d.hasOwnProperty(a)?b():e.push({name:a,callback:b})};return{items:b,urls:c,lookup:d,_listeners:e,get:f,dependencies:g,requireLangPack:h,add:i,remove:j,createUrl:k,addComponents:l,load:n,waitFor:o}}function z(a,b,c){var d=function(){return Pk(a)?0===b:0===b},e=function(){return Pk(a)?b>=a.data.length:b>=a.childNodes.length},f=function(){var c;return c=Tk(a.ownerDocument),c.setStart(a,b),c.setEnd(a,b),c},g=function(){return c||(c=al(z(a,b))),c},h=function(){return g().length>0},i=function(c){return c&&a===c.container()&&b===c.offset()},j=function(c){return Sk(a,c?b-1:b)};return{container:Ek.constant(a),offset:Ek.constant(b),toRange:f,getClientRects:g,isVisible:h,isAtStart:d,isAtEnd:e,isEqual:i,getNode:j}}function A(a,b){var c=function(c){if(!a(c))throw new Error("Can only get "+b+" value of a "+b+" node");return g(c).getOr("")},d=function(a){try{return e(a)}catch(b){return Ka.none()}},e=function(b){return a(b)?Ka.from(b.dom().nodeValue):Ka.none()},f=yf.detect().browser,g=f.isIE()&&10===f.version.major?d:e,h=function(c,d){if(!a(c))throw new Error("Can only set raw "+b+" value of a "+b+" node");c.dom().nodeValue=d};return{get:c,getOption:g,set:h}}function B(a){var b,c,d,e,f,g=[];return a=a||{},b=a.indent,c=dq(a.indent_before||""),d=dq(a.indent_after||""),e=_i.getEncodeFunc(a.entity_encoding||"raw",a.entities),f="html"===a.element_format,{start:function(a,h,i){var j,k,l,m;if(b&&c[a]&&g.length>0&&(m=g[g.length-1],m.length>0&&"\n"!==m&&g.push("\n")),g.push("<",a),h)for(j=0,k=h.length;j<k;j++)l=h[j],g.push(" ",l.name,'="',e(l.value,!0),'"');!i||f?g[g.length]=">":g[g.length]=" />",i&&b&&d[a]&&g.length>0&&(m=g[g.length-1],m.length>0&&"\n"!==m&&g.push("\n"))},end:function(a){var c;g.push("</",a,">"),b&&d[a]&&g.length>0&&(c=g[g.length-1],c.length>0&&"\n"!==c&&g.push("\n"))},text:function(a,b){a.length>0&&(g[g.length]=b?a:e(a))},cdata:function(a){g.push("<![CDATA[",a,"]]>")},comment:function(a){g.push("<!--",a,"-->")},pi:function(a,c){c?g.push("<?",a," ",e(c),"?>"):g.push("<?",a,"?>"),b&&g.push("\n")},doctype:function(a){g.push("<!DOCTYPE",a,">",b?"\n":"")},reset:function(){g.length=0},getContent:function(){return g.join("").replace(/\n$/,"")}}}function C(a,b){void 0===b&&(b=v());var c=B(a);a=a||{},a.validate=!("validate"in a)||a.validate;var d=function(d){var e,f;f=a.validate,e={3:function(a){c.text(a.value,a.raw)},8:function(a){c.comment(a.value)},7:function(a){c.pi(a.name,a.value)},10:function(a){c.doctype(a.value)},4:function(a){c.cdata(a.value)},11:function(a){if(a=a.firstChild)do g(a);while(a=a.next)}},c.reset();var g=function(a){var d,h,i,j,k,l,m,n,o,p=e[a.type];if(p)p(a);else{if(d=a.name,h=a.shortEnded,i=a.attributes,f&&i&&i.length>1&&(l=[],l.map={},o=b.getElementRule(a.name))){for(m=0,n=o.attributesOrder.length;m<n;m++)j=o.attributesOrder[m],j in i.map&&(k=i.map[j],l.map[j]=k,l.push({name:j,value:k}));for(m=0,n=i.length;m<n;m++)j=i[m].name,j in l.map||(k=i.map[j],l.map[j]=k,l.push({name:j,value:k}));i=l}if(c.start(a.name,i,h),!h){if(a=a.firstChild)do g(a);while(a=a.next);c.end(d)}}};return 1!==d.type||a.inner?e[11](d):g(d),c.getContent()};return{serialize:d}}function D(a,b,c,d,e){return a(c,d)?Ka.some(c):Na.isFunction(e)&&e(c)?Ka.none():b(c,d,e)}function E(a){var b,c,d,e,f={state:{},exec:{},value:{}},g=a.settings;a.on("PreInit",function(){b=a.dom,c=a.selection,g=a.settings,d=a.formatter});var h=function(b,c,d,e){var g,h,i=!1;if(!a.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(b)||e&&e.skip_focus?ww.restore(a):a.focus(),e=a.fire("BeforeExecCommand",{command:b,ui:c,value:d}),e.isDefaultPrevented())return!1;if(h=b.toLowerCase(),g=f.exec[h])return g(h,c,d),a.fire("ExecCommand",{command:b,ui:c,value:d}),!0;if(zw(a.plugins,function(e){if(e.execCommand&&e.execCommand(b,c,d))return a.fire("ExecCommand",{command:b,ui:c,value:d}),i=!0,!1}),i)return i;if(a.theme&&a.theme.execCommand&&a.theme.execCommand(b,c,d))return a.fire("ExecCommand",{command:b,ui:c,value:d}),!0;try{i=a.getDoc().execCommand(b,c,d)}catch(j){}return!!i&&(a.fire("ExecCommand",{command:b,ui:c,value:d}),!0)}},i=function(b){var c;if(!a.quirks.isHidden()&&!a.removed){if(b=b.toLowerCase(),c=f.state[b])return c(b);try{return a.getDoc().queryCommandState(b)}catch(d){}return!1}},j=function(b){var c;if(!a.quirks.isHidden()&&!a.removed){if(b=b.toLowerCase(),c=f.value[b])return c(b);try{return a.getDoc().queryCommandValue(b)}catch(d){}}},k=function(a,b){b=b||"exec",zw(a,function(a,c){zw(c.toLowerCase().split(","),function(c){f[b][c]=a})})},l=function(b,c,d){b=b.toLowerCase(),f.exec[b]=function(b,e,f,g){return c.call(d||a,e,f,g)}},m=function(b){if(b=b.toLowerCase(),f.exec[b])return!0;try{return a.getDoc().queryCommandSupported(b)}catch(c){}return!1},n=function(b,c,d){b=b.toLowerCase(),f.state[b]=function(){return c.call(d||a)}},o=function(b,c,d){b=b.toLowerCase(),f.value[b]=function(){return c.call(d||a)}},p=function(a){return a=a.toLowerCase(),!!f.exec[a]};Aw(this,{execCommand:h,queryCommandState:i,queryCommandValue:j,queryCommandSupported:m,addCommands:k,addCommand:l,addQueryStateHandler:n,addQueryValueHandler:o,hasCustomCommand:p});var q=function(b,c,d){return void 0===c&&(c=!1),void 0===d&&(d=null),a.getDoc().execCommand(b,c,d)},r=function(a){return d.match(a)},s=function(b,c){d.toggle(b,c?{value:c}:void 0),a.nodeChanged()},t=function(a){e=c.getBookmark(a)},u=function(){c.moveToBookmark(e)};k({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){a.undoManager.add()},"Cut,Copy,Paste":function(b){var c,d=a.getDoc();try{q(b)}catch(e){c=!0}if("paste"!==b||d.queryCommandEnabled(b)||(c=!0),c||!d.queryCommandSupported(b)){var f=a.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");Lb.mac&&(f=f.replace(/Ctrl\+/g,"âŒ˜+")),a.notificationManager.open({
text:f,type:"error"})}},unlink:function(){if(c.isCollapsed()){var b=a.dom.getParent(a.selection.getStart(),"a");return void(b&&a.dom.remove(b,!0))}d.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(a){var b=a.substring(7);"full"===b&&(b="justify"),zw("left,center,right,justify".split(","),function(a){b!==a&&d.remove("align"+a)}),"none"!==b&&s("align"+b)},"InsertUnorderedList,InsertOrderedList":function(a){var d,e;q(a),d=b.getParent(c.getNode(),"ol,ul"),d&&(e=d.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(e.nodeName)&&(t(),b.split(e,d),u()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){s(a)},"ForeColor,HiliteColor":function(a,b,c){s(a,c)},FontName:function(b,c,d){sv(a,d)},FontSize:function(b,c,d){uv(a,d)},RemoveFormat:function(a){d.remove(a)},mceBlockQuote:function(){s("blockquote")},FormatBlock:function(a,b,c){return s(c||"p")},mceCleanup:function(){var b=c.getBookmark();a.setContent(a.getContent()),c.moveToBookmark(b)},mceRemoveNode:function(b,d,e){var f=e||c.getNode();f!==a.getBody()&&(t(),a.dom.remove(f,!0),u())},mceSelectNodeDepth:function(d,e,f){var g=0;b.getParent(c.getNode(),function(a){if(1===a.nodeType&&g++===f)return c.select(a),!1},a.getBody())},mceSelectNode:function(a,b,d){c.select(d)},mceInsertContent:function(b,c,d){oq.insertAtCaret(a,d)},mceInsertRawHTML:function(b,d,e){var f=a.getContent();c.setContent("tiny_mce_marker"),a.setContent(f.replace(/tiny_mce_marker/g,function(){return e}))},mceToggleFormat:function(a,b,c){s(c)},mceSetContent:function(b,c,d){a.setContent(d)},"Indent,Outdent":function(b){yw(a,b)},mceRepaint:function(){},InsertHorizontalRule:function(){a.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){a.hasVisual=!a.hasVisual,a.addVisual()},mceReplaceContent:function(b,d,e){a.execCommand("mceInsertContent",!1,e.replace(/\{\$selection\}/g,c.getContent({format:"text"})))},mceInsertLink:function(a,e,f){var g;"string"==typeof f&&(f={href:f}),g=b.getParent(c.getNode(),"a"),f.href=f.href.replace(" ","%20"),g&&f.href||d.remove("link"),f.href&&d.apply("link",f,g)},selectAll:function(){var a=b.getParent(c.getStart(),Ii.isContentEditableTrue);if(a){var d=b.createRng();d.selectNodeContents(a),c.setRng(d)}},"delete":function(){gv.deleteCommand(a)},forwardDelete:function(){gv.forwardDeleteCommand(a)},mceNewDocument:function(){a.setContent("")},InsertLineBreak:function(b,c,d){return Yv.insert(a,d),!0}});var v=function(a){return function(){var e=c.isCollapsed()?[b.getParent(c.getNode(),b.isBlock)]:c.getSelectedBlocks(),f=Bw(e,function(b){return!!d.matchNode(b,a)});return Cw(f,!0)!==-1}};k({JustifyLeft:v("alignleft"),JustifyCenter:v("aligncenter"),JustifyRight:v("alignright"),JustifyFull:v("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return r(a)},mceBlockQuote:function(){return r("blockquote")},Outdent:function(){var a;if(g.inline_styles){if((a=b.getParent(c.getStart(),b.isBlock))&&parseInt(a.style.paddingLeft,10)>0)return!0;if((a=b.getParent(c.getEnd(),b.isBlock))&&parseInt(a.style.paddingLeft,10)>0)return!0}return i("InsertUnorderedList")||i("InsertOrderedList")||!g.inline_styles&&!!b.getParent(c.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(a){var d=b.getParent(c.getNode(),"ul,ol");return d&&("insertunorderedlist"===a&&"UL"===d.tagName||"insertorderedlist"===a&&"OL"===d.tagName)}},"state"),k({Undo:function(){a.undoManager.undo()},Redo:function(){a.undoManager.redo()}}),o("FontName",function(){return tv(a)},this),o("FontSize",function(){return vv(a)},this)}function F(a,b,c){var d=c||!1,e=function(){b(),d=!0},f=function(){a(),d=!1},g=function(){var a=d?f:e;a()},h=function(){return d};return{on:e,off:f,toggle:g,isOn:h}}function G(a){var b=this,c={},d=[],e=function(a){var b,c,d={};sx(tx(a,"+"),function(a){a in vx?d[a]=!0:/^[0-9]{2,}$/.test(a)?d.keyCode=parseInt(a,10):(d.charCode=a.charCodeAt(0),d.keyCode=ux[a]||a.toUpperCase().charCodeAt(0))}),b=[d.keyCode];for(c in vx)d[c]?b.push(c):d[c]=!1;return d.id=b.join(","),d.access&&(d.alt=!0,Lb.mac?d.ctrl=!0:d.shift=!0),d.meta&&(Lb.mac?d.meta=!0:(d.ctrl=!0,d.meta=!1)),d},f=function(b,c,d,f){var g;return g=Gd.map(tx(b,">"),e),g[g.length-1]=Gd.extend(g[g.length-1],{func:d,scope:f||a}),Gd.extend(g[0],{desc:a.translate(c),subpatterns:g.slice(1)})},g=function(a){return a.altKey||a.ctrlKey||a.metaKey},h=function(a){return"keydown"===a.type&&a.keyCode>=112&&a.keyCode<=123},i=function(a,b){return!!b&&(b.ctrl===a.ctrlKey&&b.meta===a.metaKey&&(b.alt===a.altKey&&b.shift===a.shiftKey&&(!!(a.keyCode===b.keyCode||a.charCode&&a.charCode===b.charCode)&&(a.preventDefault(),!0))))},j=function(a){return a.func?a.func.call(a.scope):null};a.on("keyup keypress keydown",function(a){!g(a)&&!h(a)||a.isDefaultPrevented()||(sx(c,function(b){if(i(a,b))return d=b.subpatterns.slice(0),"keydown"===a.type&&j(b),!0}),i(a,d[0])&&(1===d.length&&"keydown"===a.type&&j(d[0]),d.shift()))}),b.add=function(b,d,e,g){var h;return h=e,"string"==typeof e?e=function(){a.execCommand(h,!1,null)}:Gd.isArray(h)&&(e=function(){a.execCommand(h[0],h[1],h[2])}),sx(tx(Gd.trim(b.toLowerCase())),function(a){var b=f(a,d,e,g);c[b.id]=b}),!0},b.remove=function(a){var b=f(a);return!!c[b.id]&&(delete c[b.id],!0)}}function H(){var a=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:a,close:a,reposition:a,getArgs:a}}function I(a){var b=[],c=function(){var b=a.theme;return b&&b.getNotificationManagerImpl?b.getNotificationManagerImpl():H()},d=function(){return Ka.from(b[0])},e=function(a,b){return!(a.type!==b.type||a.text!==b.text||a.progressBar||a.timeout||b.progressBar||b.timeout)},f=function(){b.length>0&&c().reposition(b)},g=function(a){b.push(a)},h=function(a){rb.findIndex(b,function(b){return b===a}).each(function(a){b.splice(a,1)})},i=function(d){if(!a.removed&&hy.isEditorAttachedToDom(a))return rb.find(b,function(a){return e(c().getArgs(a),d)}).getOrThunk(function(){a.editorManager.setActive(a);var b=c().open(d,function(){h(b),f()});return g(b),f(),b})},j=function(){d().each(function(a){c().close(a),h(a),f()})},k=function(){return b},l=function(a){a.on("SkinLoaded",function(){var b=a.settings.service_message;b&&i({text:b,type:"warning",timeout:0,icon:""})}),a.on("ResizeEditor ResizeWindow",function(){Ub.requestAnimationFrame(f)}),a.on("remove",function(){rb.each(b,function(a){c().close(a)})})};return l(a),{open:i,close:j,getNotifications:k}}function J(){var a=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:a,alert:a,confirm:a,close:a,getParams:a,setParams:a}}function K(a){var b=[],c=function(){var b=a.theme;return b&&b.getWindowManagerImpl?b.getWindowManagerImpl():J()},d=function(a,b){return function(){return b?b.apply(a,arguments):void 0}},e=function(b){a.fire("OpenWindow",{win:b})},f=function(b){a.fire("CloseWindow",{win:b})},g=function(a){b.push(a),e(a)},h=function(c){rb.findIndex(b,function(a){return a===c}).each(function(d){b.splice(d,1),f(c),0===b.length&&a.focus()})},i=function(){return Ka.from(b[b.length-1])},j=function(b,d){a.editorManager.setActive(a),ww.store(a);var e=c().open(b,d,h);return g(e),e},k=function(a,b,e){var f=c().alert(a,d(e?e:this,b),h);g(f)},l=function(a,b,e){var f=c().confirm(a,d(e?e:this,b),h);g(f)},m=function(){i().each(function(a){c().close(a),h(a)})},n=function(){return i().map(c().getParams).getOr(null)},o=function(a){i().each(function(b){c().setParams(b,a)})},p=function(){return b};return a.on("remove",function(){rb.each(b.slice(0),function(a){c().close(a)})}),{windows:b,open:j,alert:k,confirm:l,close:m,getParams:n,setParams:o,getWindows:p}}function L(){var a=Bb.getOrDie("XMLHttpRequest");return new a}function M(a,b){var c={},d=function(a,b){return a?a.replace(/\/$/,"")+"/"+b.replace(/^\//,""):b},e=function(a,c,e,f){var g,h;g=new L,g.open("POST",b.url),g.withCredentials=b.credentials,g.upload.onprogress=function(a){f(a.loaded/a.total*100)},g.onerror=function(){e("Image upload failed due to a XHR Transport error. Code: "+g.status)},g.onload=function(){var a;return g.status<200||g.status>=300?void e("HTTP Error: "+g.status):(a=JSON.parse(g.responseText),a&&"string"==typeof a.location?void c(d(b.basePath,a.location)):void e("Invalid JSON: "+g.responseText))},h=new FormData,h.append("file",a.blob(),a.filename()),g.send(h)},f=function(){return new Nb(function(a){a([])})},g=function(a,b){return{url:b,blobInfo:a,status:!0}},h=function(a,b){return{url:"",blobInfo:a,status:!1,error:b}},i=function(a,b){Gd.each(c[a],function(a){a(b)}),delete c[a]},j=function(b,c,d){return a.markPending(b.blobUri()),new Nb(function(e){var f,j,k=function(){};try{var l=function(){f&&(f.close(),j=k)},m=function(c){l(),a.markUploaded(b.blobUri(),c),i(b.blobUri(),g(b,c)),e(g(b,c))},n=function(c){l(),a.removeFailed(b.blobUri()),i(b.blobUri(),h(b,c)),e(h(b,c))};j=function(a){a<0||a>100||(f||(f=d()),f.progressBar.value(a))},c(b,m,n,j)}catch(o){e(h(b,o.message))}})},k=function(a){return a===e},l=function(a){var b=a.blobUri();return new Nb(function(a){c[b]=c[b]||[],c[b].push(a)})},m=function(c,d){return c=Gd.grep(c,function(b){return!a.isUploaded(b.blobUri())}),Nb.all(Gd.map(c,function(c){return a.isPending(c.blobUri())?l(c):j(c,b.handler,d)}))},n=function(a,c){return!b.url&&k(b.handler)?f():m(a,c)};return b=Gd.extend({credentials:!1,handler:e},b),{upload:n}}function N(a,b){var c=Bb.getOrDie("Blob");return new c(a,b)}function O(){var a=Bb.getOrDie("FileReader");return new a}function P(a){var b=Bb.getOrDie("Uint8Array");return new b(a)}function Q(a,b){var c={},d=function(d,e){var f;e||(e=Ek.constant(!0)),f=td.filter(Fy(d),function(b){var c=b.src;return!!Lb.fileApi&&(!b.hasAttribute("data-mce-bogus")&&(!b.hasAttribute("data-mce-placeholder")&&(!(!c||c===Lb.transparentSrc)&&(0===c.indexOf("blob:")?!a.isUploaded(c):0===c.indexOf("data:")&&e(b)))))});var g=td.map(f,function(a){if(c[a.src])return new Nb(function(b){c[a.src].then(function(c){return"string"==typeof c?c:void b({image:a,blobInfo:c.blobInfo})})});var d=new Nb(function(c,d){Ey(b,a,c,d)}).then(function(a){return delete c[a.image.src],a})["catch"](function(b){return delete c[a.src],b});return c[a.src]=d,d});return Nb.all(g)};return{findAll:d}}function R(){var a=[],b=Ek.constant,c=function(a){var b={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"};return b[a.toLowerCase()]||"dat"},d=function(a,b,c,d){return e("object"==typeof a?a:{id:a,name:d,blob:b,base64:c})},e=function(a){var d,e;if(!a.blob||!a.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return d=a.id||Jy.uuid("blobid"),e=a.name||d,{id:b(d),name:b(e),filename:b(e+"."+c(a.blob.type)),blob:b(a.blob),base64:b(a.base64),blobUri:b(a.blobUri||Fb.createObjectURL(a.blob)),uri:b(a.uri)}},f=function(b){g(b.id())||a.push(b)},g=function(a){return h(function(b){return b.id()===a})},h=function(b){return td.filter(a,b)[0]},i=function(a){return h(function(b){return b.blobUri()===a})},j=function(b){a=td.filter(a,function(a){return a.blobUri()!==b||(Fb.revokeObjectURL(a.blobUri()),!1)})},k=function(){td.each(a,function(a){Fb.revokeObjectURL(a.blobUri())}),a=[]};return{create:d,add:f,get:g,getByUri:i,findFirst:h,removeByUri:j,destroy:k}}function S(){var a=1,b=2,c={},d=function(a,b){return{status:a,resultUri:b}},e=function(a){return a in c},f=function(a){var b=c[a];return b?b.resultUri:null},g=function(b){return!!e(b)&&c[b].status===a},h=function(a){return!!e(a)&&c[a].status===b},i=function(b){c[b]=d(a,null)},j=function(a,e){c[a]=d(b,e)},k=function(a){delete c[a]},l=function(){c={}};return{hasBlobUri:e,getResultUri:f,isPending:g,isUploaded:h,markPending:i,markUploaded:j,removeFailed:k,destroy:l}}function T(a){var b,c,d=R(),e=a.settings,f=S(),g=function(b){return function(c){return a.selection?b(c):[]}},h=function(){return"?"+(new Date).getTime()},i=function(a,b,c){var d=0;do d=a.indexOf(b,d),d!==-1&&(a=a.substring(0,d)+c+a.substr(d+b.length),d+=c.length-b.length+1);while(d!==-1);return a},j=function(a,b,c){return a=i(a,'src="'+b+'"','src="'+c+'"'),a=i(a,'data-mce-src="'+b+'"','data-mce-src="'+c+'"')},k=function(b,c){td.each(a.undoManager.data,function(a){"fragmented"===a.type?a.fragments=td.map(a.fragments,function(a){return j(a,b,c)}):a.content=j(a.content,b,c)})},l=function(){return a.notificationManager.open({text:a.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},m=function(b,c){d.removeByUri(b.src),k(b.src,c),a.$(b).attr({src:e.images_reuse_filename?c+h():c,"data-mce-src":a.convertURL(c,"src")})},n=function(c){return b||(b=M(f,{url:e.images_upload_url,basePath:e.images_upload_base_path,credentials:e.images_upload_credentials,handler:e.images_upload_handler})),q().then(g(function(d){var e;return e=td.map(d,function(a){return a.blobInfo}),b.upload(e,l).then(g(function(b){var e=td.map(b,function(b,c){var e=d[c].image;return b.status&&a.settings.images_replace_blob_uris!==!1?m(e,b.url):b.error&&qy.uploadError(a,b.error),{element:e,status:b.status}});return c&&c(e),e}))}))},o=function(a){if(e.automatic_uploads!==!1)return n(a)},p=function(a){return!e.images_dataimg_filter||e.images_dataimg_filter(a)},q=function(){return c||(c=Q(f,d)),c.findAll(a.getBody(),p).then(g(function(b){return b=td.filter(b,function(b){return"string"!=typeof b||(qy.displayError(a,b),!1)}),td.each(b,function(a){k(a.image.src,a.blobInfo.blobUri()),a.image.src=a.blobInfo.blobUri(),a.image.removeAttribute("data-mce-src")}),b}))},r=function(){d.destroy(),f.destroy(),c=b=null},s=function(b){return b.replace(/src="(blob:[^"]+)"/g,function(b,c){var e=f.getResultUri(c);if(e)return'src="'+e+'"';var g=d.getByUri(c);return g||(g=td.reduce(a.editorManager.get(),function(a,b){return a||b.editorUpload&&b.editorUpload.blobCache.getByUri(c)},null)),g?'src="data:'+g.blob().type+";base64,"+g.base64()+'"':b})};return a.on("setContent",function(){a.settings.automatic_uploads!==!1?o():q()}),a.on("RawSaveContent",function(a){a.content=s(a.content)}),a.on("getContent",function(a){a.source_view||"raw"===a.format||(a.content=s(a.content))}),a.on("PostRender",function(){a.parser.addNodeFilter("img",function(a){td.each(a,function(a){var b=a.attr("src");if(!d.getByUri(b)){var c=f.getResultUri(b);c&&a.attr("src",c)}})})}),{blobCache:d,uploadImages:n,uploadImagesAuto:o,scanForImages:q,destroy:r}}function U(a){var b,c=[],d=function(b){var d,e;if(e=a.$(b).parentsUntil(a.getBody()).add(b),e.length===c.length){for(d=e.length;d>=0&&e[d]===c[d];d--);if(d===-1)return c=e,!0}return c=e,!1};"onselectionchange"in a.getDoc()||a.on("NodeChange Click MouseUp KeyUp Focus",function(c){var d,e;d=a.selection.getRng(),e={startContainer:d.startContainer,startOffset:d.startOffset,endContainer:d.endContainer,endOffset:d.endOffset},"nodechange"!==c.type&&xv.isEq(e,b)||a.fire("SelectionChange"),b=e}),a.on("contextmenu",function(){a.fire("SelectionChange")}),a.on("SelectionChange",function(){var b=a.selection.getStart(!0);!b||!Lb.range&&a.selection.isCollapsed()||Xy(a)&&!d(b)&&a.dom.isChildOf(b,a.getBody())&&a.nodeChanged({selectionChange:!0})}),a.on("MouseUp",function(b){!b.isDefaultPrevented()&&Xy(a)&&("IMG"===a.selection.getNode().nodeName?Ub.setEditorTimeout(a,function(){a.nodeChanged()}):a.nodeChanged())}),this.nodeChanged=function(b){var c,d,e,f=a.selection;a.initialized&&f&&!a.settings.disable_nodechange&&!a.readonly&&(e=a.getBody(),c=f.getStart(!0)||e,c.ownerDocument===a.getDoc()&&a.dom.isChildOf(c,e)||(c=e),d=[],a.dom.getParent(c,function(a){return a===e||void d.push(a)}),b=b||{},b.element=c,b.parents=d,a.fire("NodeChange",b))}}function V(a,b){void 0===b&&(b=v());var c=function(){};a=a||{},a.fix_self_closing!==!1&&(a.fix_self_closing=!0);var d=a.comment?a.comment:c,e=a.cdata?a.cdata:c,f=a.text?a.text:c,g=a.start?a.start:c,h=a.end?a.end:c,i=a.pi?a.pi:c,j=a.doctype?a.doctype:c,k=function(c){var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=0,P=[],Q=0,R=_i.decode,S=Gd.makeMap("src,href,data,background,formaction,poster,xlink:href"),T=/((java|vb)script|mhtml):/i,U=function(a){var b,c;for(b=P.length;b--&&P[b].name!==a;);if(b>=0){for(c=P.length-1;c>=b;c--)a=P[c],a.valid&&h(a.name);P.length=b}},V=function(b,c,d,e,f){var g,h,i=/[\s\u0000-\u001F]+/g;if(c=c.toLowerCase(),d=c in u?c:R(d||e||f||""),w&&!r&&jA(c)===!1){if(g=B[c],!g&&C){for(h=C.length;h--&&(g=C[h],!g.pattern.test(c)););h===-1&&(g=null)}if(!g)return;if(g.validValues&&!(d in g.validValues))return}if(S[c]&&!a.allow_script_urls){var j=d.replace(i,"");try{j=decodeURIComponent(j)}catch(k){j=unescape(j)}if(T.test(j))return;if(lA(a,j))return}r&&(c in S||0===c.indexOf("on"))||(n.map[c]=d,n.push({name:c,value:d}))};for(J=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),K=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,t=b.getShortEndedElements(),I=a.self_closing_elements||b.getSelfClosingElements(),u=b.getBoolAttrs(),w=a.validate,s=a.remove_internals,N=a.fix_self_closing,L=b.getSpecialElements(),G=c+">";k=J.exec(G);){if(O<k.index&&f(R(c.substr(O,k.index-O))),l=k[6])l=l.toLowerCase(),":"===l.charAt(0)&&(l=l.substr(1)),U(l);else if(l=k[7]){if(k.index+k[0].length>c.length){f(R(c.substr(k.index))),O=k.index+k[0].length;continue}if(l=l.toLowerCase(),":"===l.charAt(0)&&(l=l.substr(1)),v=l in t,N&&I[l]&&P.length>0&&P[P.length-1].name===l&&U(l),!w||(x=b.getElementRule(l))){if(y=!0,w&&(B=x.attributes,C=x.attributePatterns),(A=k[8])?(r=A.indexOf("data-mce-type")!==-1,r&&s&&(y=!1),n=[],n.map={},A.replace(K,V)):(n=[],n.map={}),w&&!r){if(D=x.attributesRequired,E=x.attributesDefault,F=x.attributesForced,H=x.removeEmptyAttrs,H&&!n.length&&(y=!1),F)for(o=F.length;o--;)z=F[o],q=z.name,M=z.value,"{$uid}"===M&&(M="mce_"+Q++),n.map[q]=M,n.push({name:q,value:M});if(E)for(o=E.length;o--;)z=E[o],q=z.name,q in n.map||(M=z.value,"{$uid}"===M&&(M="mce_"+Q++),n.map[q]=M,n.push({name:q,value:M}));if(D){for(o=D.length;o--&&!(D[o]in n.map););o===-1&&(y=!1)}if(z=n.map["data-mce-bogus"]){if("all"===z){O=mA(b,c,J.lastIndex),J.lastIndex=O;continue}y=!1}}y&&g(l,n,v)}else y=!1;if(m=L[l]){m.lastIndex=O=k.index+k[0].length,(k=m.exec(c))?(y&&(p=c.substr(O,k.index-O)),O=k.index+k[0].length):(p=c.substr(O),O=c.length),y&&(p.length>0&&f(p,!0),h(l)),J.lastIndex=O;continue}v||(A&&A.indexOf("/")===A.length-1?y&&h(l):P.push({name:l,valid:y}))}else(l=k[1])?(">"===l.charAt(0)&&(l=" "+l),a.allow_conditional_comments||"[if"!==l.substr(0,3).toLowerCase()||(l=" "+l),d(l)):(l=k[2])?e(kA(l)):(l=k[3])?j(l):(l=k[4])&&i(l,k[5]);O=k.index+k[0].length}for(O<c.length&&f(R(c.substr(O))),o=P.length-1;o>=0;o--)l=P[o],l.valid&&h(l.name)};return{parse:k}}function W(a){var b,c,d=this,e=0,f=[],g=0,h=function(){return 0===g},i=function(a){h()&&(d.typing=a)},j=function(b){a.setDirty(b)},k=function(a){i(!1),d.add({},a)},l=function(){d.typing&&(i(!1),d.add())};a.on("init",function(){d.add()}),a.on("BeforeExecCommand",function(a){var b=a.command;"Undo"!==b&&"Redo"!==b&&"mceRepaint"!==b&&(l(),d.beforeChange())}),a.on("ExecCommand",function(a){var b=a.command;"Undo"!==b&&"Redo"!==b&&"mceRepaint"!==b&&k(a)}),a.on("ObjectResizeStart Cut",function(){d.beforeChange()}),a.on("SaveContent ObjectResized blur",k),a.on("DragEnd",k),a.on("KeyUp",function(b){var e=b.keyCode;b.isDefaultPrevented()||((e>=33&&e<=36||e>=37&&e<=40||45===e||b.ctrlKey)&&(k(),a.nodeChanged()),46!==e&&8!==e||a.nodeChanged(),c&&d.typing&&$A.isEq($A.createFromEditor(a),f[0])===!1&&(a.isDirty()===!1&&(j(!0),a.fire("change",{level:f[0],lastLevel:null})),a.fire("TypingUndo"),c=!1,a.nodeChanged()))}),a.on("KeyDown",function(a){var b=a.keyCode;if(!a.isDefaultPrevented()){if(b>=33&&b<=36||b>=37&&b<=40||45===b)return void(d.typing&&k(a));var e=a.ctrlKey&&!a.altKey||a.metaKey;!(b<16||b>20)||224===b||91===b||d.typing||e||(d.beforeChange(),i(!0),d.add({},a),c=!0)}}),a.on("MouseDown",function(a){d.typing&&k(a)});var m=function(a){return"insertReplacementText"===a.inputType},n=function(a){return"insertText"===a.inputType&&null===a.data};return a.on("input",function(a){a.inputType&&(m(a)||n(a))&&k(a)}),a.addShortcut("meta+z","","Undo"),a.addShortcut("meta+y,meta+shift+z","","Redo"),a.on("AddUndo Undo Redo ClearUndos",function(b){b.isDefaultPrevented()||a.nodeChanged()}),d={data:f,typing:!1,beforeChange:function(){h()&&(b=gp.getUndoBookmark(a.selection))},add:function(c,d){var g,i,k,l=a.settings;if(k=$A.createFromEditor(a),c=c||{},c=Gd.extend(c,k),h()===!1||a.removed)return null;if(i=f[e],a.fire("BeforeAddUndo",{level:c,lastLevel:i,originalEvent:d}).isDefaultPrevented())return null;if(i&&$A.isEq(i,c))return null;if(f[e]&&(f[e].beforeBookmark=b),l.custom_undo_redo_levels&&f.length>l.custom_undo_redo_levels){for(g=0;g<f.length-1;g++)f[g]=f[g+1];f.length--,e=f.length}c.bookmark=gp.getUndoBookmark(a.selection),e<f.length-1&&(f.length=e+1),f.push(c),e=f.length-1;var m={level:c,lastLevel:i,originalEvent:d};return a.fire("AddUndo",m),e>0&&(j(!0),a.fire("change",m)),c},undo:function(){var b;return d.typing&&(d.add(),d.typing=!1,i(!1)),e>0&&(b=f[--e],$A.applyToEditor(a,b,!0),j(!0),a.fire("undo",{level:b})),b},redo:function(){var b;return e<f.length-1&&(b=f[++e],$A.applyToEditor(a,b,!1),j(!0),a.fire("redo",{level:b})),b},clear:function(){f=[],e=0,d.typing=!1,d.data=f,a.fire("ClearUndos")},hasUndo:function(){return e>0||d.typing&&f[0]&&!$A.isEq($A.createFromEditor(a),f[0])},hasRedo:function(){return e<f.length-1&&!d.typing},transact:function(a){return l(),d.beforeChange(),d.ignore(a),d.add()},ignore:function(a){try{g++,a()}finally{g--}},extra:function(b,c){var g,h;d.transact(b)&&(h=f[e].bookmark,g=f[e-1],$A.applyToEditor(a,g,!0),d.transact(c)&&(f[e-1].beforeBookmark=h))}}}function X(a){var b={},c=function(a){return a?b[a]:b},d=function(a,c){a&&("string"!=typeof a?Gd.each(a,function(a,b){d(b,a)}):(c=c.length?c:[c],Gd.each(c,function(a){"undefined"==typeof a.deep&&(a.deep=!a.selector),"undefined"==typeof a.split&&(a.split=!a.selector||a.inline),"undefined"==typeof a.remove&&a.selector&&!a.inline&&(a.remove="none"),a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0),"string"==typeof a.classes&&(a.classes=a.classes.split(/\s+/))}),b[a]=c))},e=function(a){return a&&b[a]&&delete b[a],b};return d(dD.get(a.dom)),d(a.settings.formats),{get:c,register:d,unregister:e}}function Y(a){var b=X(a),c=nn(null);return pD.setup(a),cC(a),{get:b.get,register:b.register,unregister:b.unregister,apply:Da.curry(YC.applyFormat,a),remove:Da.curry(DC.remove,a),toggle:Da.curry(nD.toggle,a,b),match:Da.curry(KB.match,a),matchAll:Da.curry(KB.matchAll,a),matchNode:Da.curry(KB.matchNode,a),canApply:Da.curry(KB.canApply,a),formatChanged:Da.curry(bD.formatChanged,a,c),getCssText:Da.curry(lD.getCssText,a)}}function Z(a,b){void 0===b&&(b=v());var c={},d=[],e={},f={};a=a||{},a.validate=!("validate"in a)||a.validate,a.root_name=a.root_name||"body";var g=function(a){var c,d,e,f,g,i,j,k,l,m,n,o,p,q,r,s;for(o=UD("tr,td,th,tbody,thead,tfoot,table"),m=b.getNonEmptyElements(),n=b.getWhiteSpaceElements(),p=b.getTextBlockElements(),q=b.getSpecialElements(),c=0;c<a.length;c++)if(d=a[c],d.parent&&!d.fixed)if(p[d.name]&&"li"===d.parent.name){for(r=d.next;r&&p[r.name];)r.name="li",r.fixed=!0,d.parent.insert(r,d.parent),r=r.next;d.unwrap(d)}else{for(f=[d],e=d.parent;e&&!b.isValidChild(e.name,d.name)&&!o[e.name];e=e.parent)f.push(e);if(e&&f.length>1){for(f.reverse(),g=i=h(f[0].clone()),l=0;l<f.length-1;l++){for(b.isValidChild(i.name,f[l].name)?(j=h(f[l].clone()),i.append(j)):j=i,k=f[l].firstChild;k&&k!==f[l+1];)s=k.next,j.append(k),k=s;i=j}RD(b,m,n,g)?e.insert(d,f[0],!0):(e.insert(g,f[0],!0),e.insert(d,g)),e=f[0],(RD(b,m,n,e)||PD(e,"br"))&&e.empty().remove()}else if(d.parent){if("li"===d.name){if(r=d.prev,r&&("ul"===r.name||"ul"===r.name)){r.append(d);continue}if(r=d.next,r&&("ul"===r.name||"ul"===r.name)){r.insert(d,r.firstChild,!0);continue}d.wrap(h(new MD("ul",1)));continue}b.isValidChild(d.parent.name,"div")&&b.isValidChild("div",d.name)?d.wrap(h(new MD("div",1))):q[d.name]?d.empty().remove():d.unwrap()}}},h=function(a){var b,g,h;g in c&&(h=e[g],h?h.push(a):e[g]=[a]),b=d.length;for(;b--;)g=d[b].name,g in a.attributes.map&&(h=f[g],h?h.push(a):f[g]=[a]);return a},i=function(a,b){VD(WD(a),function(a){var d=c[a];d||(c[a]=d=[]),d.push(b)})},j=function(){var a=[];for(var b in c)c.hasOwnProperty(b)&&a.push({name:b,callbacks:c[b]});return a},k=function(a,b){VD(WD(a),function(a){var c;for(c=0;c<d.length;c++)if(d[c].name===a)return void d[c].callbacks.push(b);d.push({name:a,callbacks:[b]})})},l=function(){return[].concat(d)},m=function(h,i){var j,k,l,m,n,o,p,q,r,s,t,u=[];i=i||{},e={},f={},r=XD(UD("script,style,head,html,body,title,meta,param"),b.getBlockElements());var v=b.getNonEmptyElements(),w=b.children,x=a.validate,y="forced_root_block"in i?i.forced_root_block:a.forced_root_block,z=b.getWhiteSpaceElements(),A=/^[ \t\r\n]+/,B=/[ \t\r\n]+$/,C=/[ \t\r\n]+/g,D=/^[ \t\r\n]+$/;s=z.hasOwnProperty(i.context)||z.hasOwnProperty(a.root_name);var E=function(){var c,d,e=I.firstChild,f=function(a){a&&(e=a.firstChild,e&&3===e.type&&(e.value=e.value.replace(A,"")),e=a.lastChild,e&&3===e.type&&(e.value=e.value.replace(B,"")))};if(b.isValidChild(I.name,y.toLowerCase())){for(;e;)c=e.next,3===e.type||1===e.type&&"p"!==e.name&&!r[e.name]&&!e.attr("data-mce-type")?d?d.append(e):(d=F(y,1),d.attr(a.forced_root_block_attrs),I.insert(d,e),d.append(e)):(f(d),d=null),e=c;f(d)}},F=function(a,b){var d,f=new MD(a,b);return a in c&&(d=e[a],d?d.push(f):e[a]=[f]),f},G=function(a){var c,d,e,f,g=b.getBlockElements();for(c=a.prev;c&&3===c.type;){if(e=c.value.replace(B,""),e.length>0)return void(c.value=e);if(d=c.next){if(3===d.type&&d.value.length){c=c.prev;continue}if(!g[d.name]&&"script"!==d.name&&"style"!==d.name){c=c.prev;continue}}f=c.prev,c.remove(),c=f}},H=function(a){var b,c={};for(b in a)"li"!==b&&"p"!==b&&(c[b]=a[b]);return c};j=nA({validate:x,allow_script_urls:a.allow_script_urls,allow_conditional_comments:a.allow_conditional_comments,self_closing_elements:H(b.getSelfClosingElements()),cdata:function(a){t.append(F("#cdata",4)).value=a},text:function(a,b){var c;s||(a=a.replace(C," "),SD(t.lastChild,r)&&(a=a.replace(A,""))),0!==a.length&&(c=F("#text",3),c.raw=!!b,t.append(c).value=a)},comment:function(a){t.append(F("#comment",8)).value=a},pi:function(a,b){t.append(F(a,7)).value=b,G(t)},doctype:function(a){var b;b=t.append(F("#doctype",10)),b.value=a,G(t)},start:function(a,c,e){var g,h,i,j,k;if(i=x?b.getElementRule(a):{}){for(g=F(i.outputName||a,1),g.attributes=c,g.shortEnded=e,t.append(g),k=w[t.name],k&&w[g.name]&&!k[g.name]&&u.push(g),h=d.length;h--;)j=d[h].name,j in c.map&&(p=f[j],p?p.push(g):f[j]=[g]);r[a]&&G(g),e||(t=g),!s&&z[a]&&(s=!0)}},end:function(c){var d,e,f,g,h;if(e=x?b.getElementRule(c):{}){if(r[c]&&!s){if(d=t.firstChild,d&&3===d.type)if(f=d.value.replace(A,""),f.length>0)d.value=f,d=d.next;else for(g=d.next,d.remove(),d=g;d&&3===d.type;)f=d.value,g=d.next,(0===f.length||D.test(f))&&(d.remove(),d=g),d=g;if(d=t.lastChild,d&&3===d.type)if(f=d.value.replace(B,""),f.length>0)d.value=f,d=d.prev;else for(g=d.prev,d.remove(),d=g;d&&3===d.type;)f=d.value,g=d.prev,(0===f.length||D.test(f))&&(d.remove(),d=g),d=g}if(s&&z[c]&&(s=!1),e.removeEmpty&&RD(b,v,z,t)&&!t.attributes.map.name&&!t.attr("id"))return h=t.parent,r[t.name]?t.empty().remove():t.unwrap(),void(t=h);e.paddEmpty&&(OD(t)||RD(b,v,z,t))&&ND(a,i,r,t),t=t.parent}}},b);var I=t=new MD(i.context||a.root_name,11);if(j.parse(h),x&&u.length&&(i.context?i.invalid=!0:g(u)),y&&("body"===I.name||i.isRootContent)&&E(),!i.invalid){for(q in e){for(p=c[q],k=e[q],n=k.length;n--;)k[n].parent||k.splice(n,1);for(l=0,m=p.length;l<m;l++)p[l](k,q,i)}for(l=0,m=d.length;l<m;l++)if(p=d[l],p.name in f){for(k=f[p.name],n=k.length;n--;)k[n].parent||k.splice(n,1);for(n=0,o=p.callbacks.length;n<o;n++)p.callbacks[n](k,p.name,i)}}return I},n={schema:b,addAttributeFilter:k,getAttributeFilters:l,addNodeFilter:i,getNodeFilters:j,filterNode:h,parse:m};return TD(n,a),ID.register(n,a),n}function $(a,b){var c,d,e,f=["data-mce-selected"];c=b&&b.dom?b.dom:tj.DOM,d=b&&b.schema?b.schema:v(a),a.entity_encoding=a.entity_encoding||"named",a.remove_trailing_brs=!("remove_trailing_brs"in a)||a.remove_trailing_brs,e=Z(a,d),yD.register(e,a,c);var g=function(f,g){var h=vD.merge({format:"html"},g?g:{}),i=CD.process(b,f,h),j=$D(c,i,h),k=_D(e,j,h);return"tree"===h.format?k:bE(b,a,d,k,h)};return{schema:d,addNodeFilter:e.addNodeFilter,addAttributeFilter:e.addAttributeFilter,serialize:g,addRules:function(a){d.addValidElements(a)},setRules:function(a){d.setValidElements(a)},addTempAttr:Da.curry(YD,e,f),getTempAttrs:function(){return f}}}function _(a,b){var c=$(a,b);return{schema:c.schema,addNodeFilter:c.addNodeFilter,addAttributeFilter:c.addAttributeFilter,serialize:c.serialize,addRules:c.addRules,setRules:c.setRules,addTempAttr:c.addTempAttr,getTempAttrs:c.getTempAttrs}}function aa(a){return{getBookmark:Da.curry(Hp.getBookmark,a),moveToBookmark:Da.curry(Hp.moveToBookmark,a)}}function ba(a){var b=Gd.each,c=cA.BACKSPACE,d=cA.DELETE,e=a.dom,f=a.selection,g=a.settings,h=a.parser,i=Lb.gecko,j=Lb.ie,k=Lb.webkit,l="data:text/mce-internal,",m=j?"Text":"URL",n=function(b,c){try{a.getDoc().execCommand(b,!1,c)}catch(d){}},o=function(a){return a.isDefaultPrevented()},p=function(b){var c,d;b.dataTransfer&&(a.selection.isCollapsed()&&"IMG"===b.target.tagName&&f.select(b.target),c=a.selection.getContent(),c.length>0&&(d=l+escape(a.id)+","+escape(c),b.dataTransfer.setData(m,d)))},q=function(a){var b;return a.dataTransfer&&(b=a.dataTransfer.getData(m),b&&b.indexOf(l)>=0)?(b=b.substr(l.length).split(","),{id:unescape(b[0]),html:unescape(b[1])}):null},r=function(b,c){a.queryCommandSupported("mceInsertClipboardContent")?a.execCommand("mceInsertClipboardContent",!1,{content:b,internal:c}):a.execCommand("mceInsertContent",!1,b)},s=function(){var b=function(a){var b=e.create("body"),c=a.cloneContents();return b.appendChild(c),f.serializer.serialize(b,{format:"html"})},g=function(c){var d=b(c),f=e.createRng();f.selectNode(a.getBody());var g=b(f);return d===g};a.on("keydown",function(b){var f,h,i=b.keyCode;if(!o(b)&&(i===d||i===c)){if(f=a.selection.isCollapsed(),h=a.getBody(),f&&!e.isEmpty(h))return;if(!f&&!g(a.selection.getRng()))return;b.preventDefault(),a.setContent(""),h.firstChild&&e.isBlock(h.firstChild)?a.selection.setCursorLocation(h.firstChild,0):a.selection.setCursorLocation(h,0),a.nodeChanged()}})},t=function(){a.shortcuts.add("meta+a",null,"SelectAll")},u=function(){a.settings.content_editable||e.bind(a.getDoc(),"mousedown mouseup",function(b){var c;if(b.target===a.getDoc().documentElement)if(c=f.getRng(),a.getBody().focus(),"mousedown"===b.type){if(Ij(c.startContainer))return;f.placeCaretAt(b.clientX,b.clientY)}else f.setRng(c)})},v=function(){a.on("keydown",function(b){if(!o(b)&&b.keyCode===c){if(!a.getBody().getElementsByTagName("hr").length)return;if(f.isCollapsed()&&0===f.getRng().startOffset){var d=f.getNode(),g=d.previousSibling;if("HR"===d.nodeName)return e.remove(d),void b.preventDefault();g&&g.nodeName&&"hr"===g.nodeName.toLowerCase()&&(e.remove(g),b.preventDefault())}}})},w=function(){Range.prototype.getClientRects||a.on("mousedown",function(b){if(!o(b)&&"HTML"===b.target.nodeName){var c=a.getBody();c.blur(),Ub.setEditorTimeout(a,function(){c.focus()})}})},x=function(){a.on("click",function(b){var c=b.target;/^(IMG|HR)$/.test(c.nodeName)&&"false"!==e.getContentEditableParent(c)&&(b.preventDefault(),a.selection.select(c),a.nodeChanged()),"A"===c.nodeName&&e.hasClass(c,"mce-item-anchor")&&(b.preventDefault(),f.select(c))})},y=function(){var c=function(){var c=e.getAttribs(f.getStart().cloneNode(!1));return function(){var d=f.getStart();d!==a.getBody()&&(e.setAttrib(d,"style",null),b(c,function(a){d.setAttributeNode(a.cloneNode(!0))}))}},d=function(){return!f.isCollapsed()&&e.getParent(f.getStart(),e.isBlock)!==e.getParent(f.getEnd(),e.isBlock);
};a.on("keypress",function(b){var e;if(!o(b)&&(8===b.keyCode||46===b.keyCode)&&d())return e=c(),a.getDoc().execCommand("delete",!1,null),e(),b.preventDefault(),!1}),e.bind(a.getDoc(),"cut",function(b){var e;!o(b)&&d()&&(e=c(),Ub.setEditorTimeout(a,function(){e()}))})},z=function(){a.on("keydown",function(a){if(!o(a)&&a.keyCode===c&&f.isCollapsed()&&0===f.getRng().startOffset){var b=f.getNode().previousSibling;if(b&&b.nodeName&&"table"===b.nodeName.toLowerCase())return a.preventDefault(),!1}})},A=function(){a.on("keydown",function(b){var c,d,g,h,i;if(!o(b)&&b.keyCode===cA.BACKSPACE&&(c=f.getRng(),d=c.startContainer,g=c.startOffset,h=e.getRoot(),i=d,c.collapsed&&0===g)){for(;i&&i.parentNode&&i.parentNode.firstChild===i&&i.parentNode!==h;)i=i.parentNode;"BLOCKQUOTE"===i.tagName&&(a.formatter.toggle("blockquote",null,i),c=e.createRng(),c.setStart(d,0),c.setEnd(d,0),f.setRng(c))}})},B=function(){var b=function(){n("StyleWithCSS",!1),n("enableInlineTableEditing",!1),g.object_resizing||n("enableObjectResizing",!1)};g.readonly||a.on("BeforeExecCommand MouseDown",b)},C=function(){var c=function(){b(e.select("a"),function(a){var b=a.parentNode,c=e.getRoot();if(b.lastChild===a){for(;b&&!e.isBlock(b);){if(b.parentNode.lastChild!==b||b===c)return;b=b.parentNode}e.add(b,"br",{"data-mce-bogus":1})}})};a.on("SetContent ExecCommand",function(a){"setcontent"!==a.type&&"mceInsertLink"!==a.command||c()})},D=function(){g.forced_root_block&&a.on("init",function(){n("DefaultParagraphSeparator",g.forced_root_block)})},E=function(){a.on("keyup focusin mouseup",function(a){cA.modifierPressed(a)||f.normalize()},!0)},F=function(){a.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},G=function(){a.inline||a.on("keydown",function(){document.activeElement===document.body&&a.getWin().focus()})},H=function(){a.inline||(a.contentStyles.push("body {min-height: 150px}"),a.on("click",function(b){var c;if("HTML"===b.target.nodeName){if(Lb.ie>11)return void a.getBody().focus();c=a.selection.getRng(),a.getBody().focus(),a.selection.setRng(c),a.selection.normalize(),a.nodeChanged()}}))},I=function(){Lb.mac&&a.on("keydown",function(b){!cA.metaKeyPressed(b)||b.shiftKey||37!==b.keyCode&&39!==b.keyCode||(b.preventDefault(),a.selection.getSel().modify("move",37===b.keyCode?"backward":"forward","lineboundary"))})},J=function(){n("AutoUrlDetect",!1)},K=function(){a.on("click",function(a){var b=a.target;do if("A"===b.tagName)return void a.preventDefault();while(b=b.parentNode)}),a.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},L=function(){a.on("init",function(){a.dom.bind(a.getBody(),"submit",function(a){a.preventDefault()})})},M=function(){h.addNodeFilter("br",function(a){for(var b=a.length;b--;)"Apple-interchange-newline"===a[b].attr("class")&&a[b].remove()})},N=function(){a.on("dragstart",function(a){p(a)}),a.on("drop",function(b){if(!o(b)){var c=q(b);if(c&&c.id!==a.id){b.preventDefault();var d=mE.fromPoint(b.x,b.y,a.getDoc());f.setRng(d),r(c.html,!0)}}})},O=function(){},P=function(){var b;return!i||a.removed?0:(b=a.selection.getSel(),!b||!b.rangeCount||0===b.rangeCount)};return A(),s(),Lb.windowsPhone||E(),k&&(u(),x(),D(),L(),z(),M(),Lb.iOS?(G(),H(),K()):t()),Lb.ie>=11&&(H(),z()),Lb.ie&&(t(),J(),N()),i&&(v(),w(),y(),B(),C(),F(),I(),z()),{refreshContentEditable:O,isHidden:P}}function ca(a){var b=function(b,c){return oC.walk(a,b,c)},c=NB.split,d=function(b){return Kv.normalize(a,b).fold(Da.constant(!1),function(a){return b.setStart(a.startContainer,a.startOffset),b.setEnd(a.endContainer,a.endOffset),!0})};return{walk:b,split:c,normalize:d}}var da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b]},ra=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return a()}},sa=function(a,b){return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a(b.apply(null,arguments))}},ta=function(a){return function(){return a}},ua=function(a){return a},va=function(a,b){return a===b},wa=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var d=new Array(arguments.length-1),e=1;e<arguments.length;e++)d[e-1]=arguments[e];return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];for(var e=new Array(arguments.length),f=0;f<e.length;f++)e[f]=arguments[f];var g=d.concat(e);return a.apply(null,g)}},xa=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return!a.apply(null,arguments)}},ya=function(a){return function(){throw new Error(a)}},za=function(a){return a()},Aa=function(a){a()},Ba=ta(!1),Ca=ta(!0),Da={noop:qa,noarg:ra,compose:sa,constant:ta,identity:ua,tripleEquals:va,curry:wa,not:xa,die:ya,apply:za,call:Aa,never:Ba,always:Ca},Ea=Da.never,Fa=Da.always,Ga=function(){return Ha},Ha=function(){var a=function(a){return a.isNone()},b=function(a){return a()},c=function(a){return a},d=function(){},e={fold:function(a,b){return a()},is:Ea,isSome:Ea,isNone:Fa,getOr:c,getOrThunk:b,getOrDie:function(a){throw new Error(a||"error: getOrDie called on none.")},or:c,orThunk:b,map:Ga,ap:Ga,each:d,bind:Ga,flatten:Ga,exists:Ea,forall:Fa,filter:Ga,equals:a,equals_:a,toArray:function(){return[]},toString:Da.constant("none()")};return Object.freeze&&Object.freeze(e),e}(),Ia=function(a){var b=function(){return a},c=function(){return f},d=function(b){return Ia(b(a))},e=function(b){return b(a)},f={fold:function(b,c){return c(a)},is:function(b){return a===b},isSome:Fa,isNone:Ea,getOr:b,getOrThunk:b,getOrDie:b,or:c,orThunk:c,map:d,ap:function(b){return b.fold(Ga,function(b){return Ia(b(a))})},each:function(b){b(a)},bind:e,flatten:b,exists:e,forall:e,filter:function(b){return b(a)?f:Ha},equals:function(b){return b.is(a)},equals_:function(b,c){return b.fold(Ea,function(b){return c(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return f},Ja=function(a){return null===a||void 0===a?Ha:Ia(a)},Ka={some:Ia,none:Ga,from:Ja},La=function(a){if(null===a)return"null";var b=typeof a;return"object"===b&&Array.prototype.isPrototypeOf(a)?"array":"object"===b&&String.prototype.isPrototypeOf(a)?"string":b},Ma=function(a){return function(b){return La(b)===a}},Na={isString:Ma("string"),isObject:Ma("object"),isArray:Ma("array"),isNull:Ma("null"),isBoolean:Ma("boolean"),isUndefined:Ma("undefined"),isFunction:Ma("function"),isNumber:Ma("number")},Oa=function(){var a=Array.prototype.indexOf,b=function(b,c){return a.call(b,c)},c=function(a,b){return cb(a,b)};return void 0===a?c:b}(),Pa=function(a,b){var c=Oa(a,b);return c===-1?Ka.none():Ka.some(c)},Qa=function(a,b){return Oa(a,b)>-1},Ra=function(a,b){return bb(a,b).isSome()},Sa=function(a,b){for(var c=[],d=0;d<a;d++)c.push(b(d));return c},Ta=function(a,b){for(var c=[],d=0;d<a.length;d+=b){var e=a.slice(d,d+b);c.push(e)}return c},Ua=function(a,b){for(var c=a.length,d=new Array(c),e=0;e<c;e++){var f=a[e];d[e]=b(f,e,a)}return d},Va=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];b(e,c,a)}},Wa=function(a,b){for(var c=a.length-1;c>=0;c--){var d=a[c];b(d,c,a)}},Xa=function(a,b){for(var c=[],d=[],e=0,f=a.length;e<f;e++){var g=a[e],h=b(g,e,a)?c:d;h.push(g)}return{pass:c,fail:d}},Ya=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var f=a[d];b(f,d,a)&&c.push(f)}return c},Za=function(a,b){if(0===a.length)return[];for(var c=b(a[0]),d=[],e=[],f=0,g=a.length;f<g;f++){var h=a[f],i=b(h);i!==c&&(d.push(e),e=[]),c=i,e.push(h)}return 0!==e.length&&d.push(e),d},$a=function(a,b,c){return Wa(a,function(a){c=b(c,a)}),c},_a=function(a,b,c){return Va(a,function(a){c=b(c,a)}),c},ab=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(b(e,c,a))return Ka.some(e)}return Ka.none()},bb=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(b(e,c,a))return Ka.some(c)}return Ka.none()},cb=function(a,b){for(var c=0,d=a.length;c<d;++c)if(a[c]===b)return c;return-1},db=Array.prototype.push,eb=function(a){for(var b=[],c=0,d=a.length;c<d;++c){if(!Array.prototype.isPrototypeOf(a[c]))throw new Error("Arr.flatten item "+c+" was not an array, input: "+a);db.apply(b,a[c])}return b},fb=function(a,b){var c=Ua(a,b);return eb(c)},gb=function(a,b){for(var c=0,d=a.length;c<d;++c){var e=a[c];if(b(e,c,a)!==!0)return!1}return!0},hb=function(a,b){return a.length===b.length&&gb(a,function(a,c){return a===b[c]})},ib=Array.prototype.slice,jb=function(a){var b=ib.call(a,0);return b.reverse(),b},kb=function(a,b){return Ya(a,function(a){return!Qa(b,a)})},lb=function(a,b){for(var c={},d=0,e=a.length;d<e;d++){var f=a[d];c[String(f)]=b(f,d)}return c},mb=function(a){return[a]},nb=function(a,b){var c=ib.call(a,0);return c.sort(b),c},ob=function(a){return 0===a.length?Ka.none():Ka.some(a[0])},pb=function(a){return 0===a.length?Ka.none():Ka.some(a[a.length-1])},qb=Na.isFunction(Array.from)?Array.from:function(a){return ib.call(a)},rb={map:Ua,each:Va,eachr:Wa,partition:Xa,filter:Ya,groupBy:Za,indexOf:Pa,foldr:$a,foldl:_a,find:ab,findIndex:bb,flatten:eb,bind:fb,forall:gb,exists:Ra,contains:Qa,equal:hb,reverse:jb,chunk:Ta,difference:kb,mapToObject:lb,pure:mb,sort:nb,range:Sa,head:ob,last:pb,from:qb},sb="undefined"!=typeof window?window:Function("return this;")(),tb=function(a,b){for(var c=void 0!==b&&null!==b?b:sb,d=0;d<a.length&&void 0!==c&&null!==c;++d)c=c[a[d]];return c},ub=function(a,b){var c=a.split(".");return tb(c,b)},vb=function(a,b){return void 0!==a[b]&&null!==a[b]||(a[b]={}),a[b]},wb=function(a,b){for(var c=void 0!==b?b:sb,d=0;d<a.length;++d)c=vb(c,a[d]);return c},xb=function(a,b){var c=a.split(".");return wb(c,b)},yb={path:tb,resolve:ub,forge:wb,namespace:xb},zb=function(a,b){return yb.resolve(a,b)},Ab=function(a,b){var c=zb(a,b);if(void 0===c||null===c)throw a+" not available on this browser";return c},Bb={getOrDie:Ab},Cb=function(){return Bb.getOrDie("URL")},Db=function(a){return Cb().createObjectURL(a)},Eb=function(a){Cb().revokeObjectURL(a)},Fb={createObjectURL:Db,revokeObjectURL:Eb},Gb=navigator,Hb=Gb.userAgent,Ib=function(a){return"matchMedia"in window&&matchMedia(a).matches};da=!1,la=/Android/.test(Hb),ea=/WebKit/.test(Hb),fa=!ea&&!da&&/MSIE/gi.test(Hb)&&/Explorer/gi.test(Gb.appName),fa=fa&&/MSIE (\w+)\./.exec(Hb)[1],ga=Hb.indexOf("Trident/")!==-1&&(Hb.indexOf("rv:")!==-1||Gb.appName.indexOf("Netscape")!==-1)&&11,ha=Hb.indexOf("Edge/")!==-1&&!fa&&!ga&&12,fa=fa||ga||ha,ia=!ea&&!ga&&/Gecko/.test(Hb),ja=Hb.indexOf("Mac")!==-1,ka=/(iPad|iPhone)/.test(Hb),ma="FormData"in window&&"FileReader"in window&&"URL"in window&&!!Fb.createObjectURL,na=Ib("only screen and (max-device-width: 480px)")&&(la||ka),oa=Ib("only screen and (min-width: 800px)")&&(la||ka),pa=Hb.indexOf("Windows Phone")!==-1,ha&&(ea=!1);var Jb,Kb=!ka||ma||parseInt(Hb.match(/AppleWebKit\/(\d*)/)[1],10)>=534,Lb={opera:da,webkit:ea,ie:fa,gecko:ia,mac:ja,iOS:ka,android:la,contentEditable:Kb,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==fa,range:window.getSelection&&"Range"in window,documentMode:fa&&!ha?document.documentMode||7:10,fileApi:ma,ceFalse:fa===!1||fa>8,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:fa===!1||fa>11,desktop:!na&&!oa,windowsPhone:pa},Mb=function(){function a(a,b){return function(){a.apply(b,arguments)}}function b(a){var b=this;return null===this._state?void this._deferreds.push(a):void j(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(e){return void a.reject(e)}a.resolve(d)})}function c(b){try{if(b===this)throw new TypeError("A promise cannot be resolved with itself.");if(b&&("object"==typeof b||"function"==typeof b)){var f=b.then;if("function"==typeof f)return void g(a(f,b),a(c,this),a(d,this))}this._state=!0,this._value=b,e.call(this)}catch(h){d.call(this,h)}}function d(a){this._state=!1,this._value=a,e.call(this)}function e(){for(var a=0,c=this._deferreds.length;a<c;a++)b.call(this,this._deferreds[a]);this._deferreds=null}function f(a,b,c,d){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}function g(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var h=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},i=function(b){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof b)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],g(b,a(c,this),a(d,this))},j=i.immediateFn||"function"==typeof setImmediate&&setImmediate||function(a){setTimeout(a,1)};return i.prototype["catch"]=function(a){return this.then(null,a)},i.prototype.then=function(a,c){var d=this;return new i(function(e,g){b.call(d,new f(a,c,e,g))})},i.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&h(arguments[0])?arguments[0]:arguments);return new i(function(b,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0===--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},i.resolve=function(a){return a&&"object"==typeof a&&a.constructor===i?a:new i(function(b){b(a)})},i.reject=function(a){return new i(function(b,c){c(a)})},i.race=function(a){return new i(function(b,c){for(var d=0,e=a.length;d<e;d++)a[d].then(b,c)})},i},Nb=window.Promise?window.Promise:Mb(),Ob=function(a,b){var c,d=window.requestAnimationFrame,e=["ms","moz","webkit"],f=function(a){window.setTimeout(a,0)};for(c=0;c<e.length&&!d;c++)d=window[e[c]+"RequestAnimationFrame"];d||(d=f),d(a,b)},Pb=function(a,b){return"number"!=typeof b&&(b=0),setTimeout(a,b)},Qb=function(a,b){return"number"!=typeof b&&(b=1),setInterval(a,b)},Rb=function(a){return clearTimeout(a)},Sb=function(a){return clearInterval(a)},Tb=function(a,b){var c,d;return d=function(){var d=arguments;clearTimeout(c),c=Pb(function(){a.apply(this,d)},b)},d.stop=function(){clearTimeout(c)},d},Ub={requestAnimationFrame:function(a,b){return Jb?void Jb.then(a):void(Jb=new Nb(function(a){b||(b=document.body),Ob(a,b)}).then(a))},setTimeout:Pb,setInterval:Qb,setEditorTimeout:function(a,b,c){return Pb(function(){a.removed||b()},c)},setEditorInterval:function(a,b,c){var d;return d=Qb(function(){a.removed?clearInterval(d):b()},c)},debounce:Tb,throttle:Tb,clearInterval:Sb,clearTimeout:Rb},Vb="mce-data-",Wb=/^(?:mouse|contextmenu)|click/,Xb={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},Yb=function(a){return a.isDefaultPrevented===$b||a.isDefaultPrevented===Zb},Zb=function(){return!1},$b=function(){return!0},_b=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c)},ac=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&&a.detachEvent("on"+b,c)},bc=function(a,b){var c,d=b;return c=a.path,c&&c.length>0&&(d=c[0]),a.composedPath&&(c=a.composedPath(),c&&c.length>0&&(d=c[0])),d},cc=function(a,b){var c,d=b||{};for(c in a)Xb[c]||(d[c]=a[c]);if(d.target||(d.target=d.srcElement||document),Lb.experimentalShadowDom&&(d.target=bc(a,d.target)),a&&Wb.test(a.type)&&void 0===a.pageX&&void 0!==a.clientX){var e=d.target.ownerDocument||document,f=e.documentElement,g=e.body;d.pageX=a.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),d.pageY=a.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)}return d.preventDefault=function(){d.isDefaultPrevented=$b,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},d.stopPropagation=function(){d.isPropagationStopped=$b,a&&(a.stopPropagation?a.stopPropagation():a.cancelBubble=!0)},d.stopImmediatePropagation=function(){d.isImmediatePropagationStopped=$b,d.stopPropagation()},Yb(d)===!1&&(d.isDefaultPrevented=Zb,d.isPropagationStopped=Zb,d.isImmediatePropagationStopped=Zb),"undefined"==typeof d.metaKey&&(d.metaKey=!1),d},dc=function(a,b,c){var d=a.document,e={type:"ready"};if(c.domLoaded)return void b(e);var f=function(){return"complete"===d.readyState||"interactive"===d.readyState&&d.body},g=function(){c.domLoaded||(c.domLoaded=!0,b(e))},h=function(){f()&&(ac(d,"readystatechange",h),g())},i=function(){try{d.documentElement.doScroll("left")}catch(a){return void Ub.setTimeout(i)}g()};!d.addEventListener||Lb.ie&&Lb.ie<11?(_b(d,"readystatechange",h),d.documentElement.doScroll&&a.self===a.top&&i()):f()?g():_b(a,"DOMContentLoaded",g),_b(a,"load",g)},ec=function(){var a,b,c,d,e,f=this,g={};b=Vb+(+new Date).toString(32),d="onmouseenter"in document.documentElement,c="onfocusin"in document.documentElement,e={mouseenter:"mouseover",mouseleave:"mouseout"},a=1,f.domLoaded=!1,f.events=g;var h=function(a,b){var c,d,e,f,h=g[b];if(c=h&&h[a.type])for(d=0,e=c.length;d<e;d++)if(f=c[d],f&&f.func.call(f.scope,a)===!1&&a.preventDefault(),a.isImmediatePropagationStopped())return};f.bind=function(i,j,k,l){var m,n,o,p,q,r,s,t=window,u=function(a){h(cc(a||t.event),m)};if(i&&3!==i.nodeType&&8!==i.nodeType){for(i[b]?m=i[b]:(m=a++,i[b]=m,g[m]={}),l=l||i,j=j.split(" "),o=j.length;o--;)p=j[o],r=u,q=s=!1,"DOMContentLoaded"===p&&(p="ready"),f.domLoaded&&"ready"===p&&"complete"===i.readyState?k.call(l,cc({type:p})):(d||(q=e[p],q&&(r=function(a){var b,c;if(b=a.currentTarget,c=a.relatedTarget,c&&b.contains)c=b.contains(c);else for(;c&&c!==b;)c=c.parentNode;c||(a=cc(a||t.event),a.type="mouseout"===a.type?"mouseleave":"mouseenter",a.target=b,h(a,m))})),c||"focusin"!==p&&"focusout"!==p||(s=!0,q="focusin"===p?"focus":"blur",r=function(a){a=cc(a||t.event),a.type="focus"===a.type?"focusin":"focusout",h(a,m)}),n=g[m][p],n?"ready"===p&&f.domLoaded?k({type:p}):n.push({func:k,scope:l}):(g[m][p]=n=[{func:k,scope:l}],n.fakeName=q,n.capture=s,n.nativeHandler=r,"ready"===p?dc(i,r,f):_b(i,q||p,r,s)));return i=n=0,k}},f.unbind=function(a,c,d){var e,h,i,j,k,l;if(!a||3===a.nodeType||8===a.nodeType)return f;if(e=a[b]){if(l=g[e],c){for(c=c.split(" "),i=c.length;i--;)if(k=c[i],h=l[k]){if(d)for(j=h.length;j--;)if(h[j].func===d){var m=h.nativeHandler,n=h.fakeName,o=h.capture;h=h.slice(0,j).concat(h.slice(j+1)),h.nativeHandler=m,h.fakeName=n,h.capture=o,l[k]=h}d&&0!==h.length||(delete l[k],ac(a,h.fakeName||k,h.nativeHandler,h.capture))}}else{for(k in l)h=l[k],ac(a,h.fakeName||k,h.nativeHandler,h.capture);l={}}for(k in l)return f;delete g[e];try{delete a[b]}catch(p){a[b]=null}}return f},f.fire=function(a,c,d){var e;if(!a||3===a.nodeType||8===a.nodeType)return f;d=cc(null,d),d.type=c,d.target=a;do e=a[b],e&&h(d,e),a=a.parentNode||a.ownerDocument||a.defaultView||a.parentWindow;while(a&&!d.isPropagationStopped());return f},f.clean=function(a){var c,d,e=f.unbind;if(!a||3===a.nodeType||8===a.nodeType)return f;if(a[b]&&e(a),a.getElementsByTagName||(a=a.document),a&&a.getElementsByTagName)for(e(a),d=a.getElementsByTagName("*"),c=d.length;c--;)a=d[c],a[b]&&e(a);return f},f.destroy=function(){g={}},f.cancel=function(a){return a&&(a.preventDefault(),a.stopImmediatePropagation()),!1}};ec.Event=new ec,ec.Event.bind(window,"ready",function(){});var fc,gc,hc,ic,jc,kc,lc,mc,nc,oc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc="sizzle"+-new Date,zc=window.document,Ac=0,Bc=0,Cc=a(),Dc=a(),Ec=a(),Fc=function(a,b){return a===b&&(pc=!0),0},Gc="undefined",Hc=1<<31,Ic={}.hasOwnProperty,Jc=[],Kc=Jc.pop,Lc=Jc.push,Mc=Jc.push,Nc=Jc.slice,Oc=Jc.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},Pc="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Qc="[\\x20\\t\\r\\n\\f]",Rc="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Sc="\\["+Qc+"*("+Rc+")(?:"+Qc+"*([*^$|!~]?=)"+Qc+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Rc+"))|)"+Qc+"*\\]",Tc=":("+Rc+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Sc+")*)|.*)\\)|)",Uc=new RegExp("^"+Qc+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Qc+"+$","g"),Vc=new RegExp("^"+Qc+"*,"+Qc+"*"),Wc=new RegExp("^"+Qc+"*([>+~]|"+Qc+")"+Qc+"*"),Xc=new RegExp("="+Qc+"*([^\\]'\"]*?)"+Qc+"*\\]","g"),Yc=new RegExp(Tc),Zc=new RegExp("^"+Rc+"$"),$c={ID:new RegExp("^#("+Rc+")"),CLASS:new RegExp("^\\.("+Rc+")"),TAG:new RegExp("^("+Rc+"|[*])"),ATTR:new RegExp("^"+Sc),PSEUDO:new RegExp("^"+Tc),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Qc+"*(even|odd|(([+-]|)(\\d*)n|)"+Qc+"*(?:([+-]|)"+Qc+"*(\\d+)|))"+Qc+"*\\)|)","i"),bool:new RegExp("^(?:"+Pc+")$","i"),needsContext:new RegExp("^"+Qc+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Qc+"*((?:-\\d)?\\d*)"+Qc+"*\\)|)(?=[^-]|$)","i")},_c=/^(?:input|select|textarea|button)$/i,ad=/^h\d$/i,bd=/^[^{]+\{\s*\[native \w/,cd=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,dd=/[+~]/,ed=/'|\\/g,fd=new RegExp("\\\\([\\da-f]{1,6}"+Qc+"?|("+Qc+")|.)","ig"),gd=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{Mc.apply(Jc=Nc.call(zc.childNodes),zc.childNodes),Jc[zc.childNodes.length].nodeType}catch(hd){Mc={apply:Jc.length?function(a,b){Lc.apply(a,Nc.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}var id=function(a,b,c,d){var e,f,h,j,k,l,m,n,o,p;if((b?b.ownerDocument||b:zc)!==rc&&qc(b),b=b||rc,c=c||[],!a||"string"!=typeof a)return c;if(1!==(j=b.nodeType)&&9!==j)return[];if(tc&&!d){if(e=cd.exec(a))if(h=e[1]){if(9===j){if(f=b.getElementById(h),!f||!f.parentNode)return c;if(f.id===h)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(h))&&xc(b,f)&&f.id===h)return c.push(f),c}else{if(e[2])return Mc.apply(c,b.getElementsByTagName(a)),c;if((h=e[3])&&gc.getElementsByClassName)return Mc.apply(c,b.getElementsByClassName(h)),c}if(gc.qsa&&(!uc||!uc.test(a))){if(n=m=yc,o=b,p=9===j&&a,1===j&&"object"!==b.nodeName.toLowerCase()){for(l=kc(a),(m=b.getAttribute("id"))?n=m.replace(ed,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",k=l.length;k--;)l[k]=n+i(l[k]);o=dd.test(a)&&g(b.parentNode)||b,p=l.join(",")}if(p)try{return Mc.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{m||b.removeAttribute("id")}}}return mc(a.replace(Uc,"$1"),b,c,d)};gc=id.support={},jc=id.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},qc=id.setDocument=function(a){function b(a){try{return a.top}catch(b){}return null}var d,e=a?a.ownerDocument||a:zc,f=e.defaultView;return e!==rc&&9===e.nodeType&&e.documentElement?(rc=e,sc=e.documentElement,tc=!jc(e),f&&f!==b(f)&&(f.addEventListener?f.addEventListener("unload",function(){qc()},!1):f.attachEvent&&f.attachEvent("onunload",function(){qc()})),gc.attributes=!0,gc.getElementsByTagName=!0,gc.getElementsByClassName=bd.test(e.getElementsByClassName),gc.getById=!0,hc.find.ID=function(a,b){if(typeof b.getElementById!==Gc&&tc){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},hc.filter.ID=function(a){var b=a.replace(fd,gd);return function(a){return a.getAttribute("id")===b}},hc.find.TAG=gc.getElementsByTagName?function(a,b){if(typeof b.getElementsByTagName!==Gc)return b.getElementsByTagName(a)}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},hc.find.CLASS=gc.getElementsByClassName&&function(a,b){if(tc)return b.getElementsByClassName(a)},vc=[],uc=[],gc.disconnectedMatch=!0,uc=uc.length&&new RegExp(uc.join("|")),vc=vc.length&&new RegExp(vc.join("|")),d=bd.test(sc.compareDocumentPosition),xc=d||bd.test(sc.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},Fc=d?function(a,b){if(a===b)return pc=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!gc.sortDetached&&b.compareDocumentPosition(a)===c?a===e||a.ownerDocument===zc&&xc(zc,a)?-1:b===e||b.ownerDocument===zc&&xc(zc,b)?1:oc?Oc.call(oc,a)-Oc.call(oc,b):0:4&c?-1:1)}:function(a,b){if(a===b)return pc=!0,0;var d,f=0,g=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!g||!h)return a===e?-1:b===e?1:g?-1:h?1:oc?Oc.call(oc,a)-Oc.call(oc,b):0;if(g===h)return c(a,b);for(d=a;d=d.parentNode;)i.unshift(d);for(d=b;d=d.parentNode;)j.unshift(d);for(;i[f]===j[f];)f++;return f?c(i[f],j[f]):i[f]===zc?-1:j[f]===zc?1:0},e):rc},id.matches=function(a,b){return id(a,null,null,b)},id.matchesSelector=function(a,b){if((a.ownerDocument||a)!==rc&&qc(a),b=b.replace(Xc,"='$1']"),gc.matchesSelector&&tc&&(!vc||!vc.test(b))&&(!uc||!uc.test(b)))try{var c=wc.call(a,b);if(c||gc.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(d){}return id(b,rc,null,[a]).length>0},id.contains=function(a,b){return(a.ownerDocument||a)!==rc&&qc(a),xc(a,b)},id.attr=function(a,b){(a.ownerDocument||a)!==rc&&qc(a);var c=hc.attrHandle[b.toLowerCase()],d=c&&Ic.call(hc.attrHandle,b.toLowerCase())?c(a,b,!tc):void 0;return void 0!==d?d:gc.attributes||!tc?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},id.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},id.uniqueSort=function(a){var b,c=[],d=0,e=0;if(pc=!gc.detectDuplicates,oc=!gc.sortStable&&a.slice(0),a.sort(Fc),pc){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return oc=null,a},ic=id.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=ic(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=ic(b);return c},hc=id.selectors={cacheLength:50,createPseudo:b,match:$c,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(fd,gd),a[3]=(a[3]||a[4]||a[5]||"").replace(fd,gd),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||id.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&id.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return $c.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&Yc.test(c)&&(b=kc(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(fd,gd).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=Cc[a+" "];return b||(b=new RegExp("(^|"+Qc+")"+a+"("+Qc+"|$)"))&&Cc(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==Gc&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=id.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[yc]||(q[yc]={}),j=k[a]||[],n=j[0]===Ac&&j[1],m=j[0]===Ac&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[Ac,n,m];break}}else if(s&&(j=(b[yc]||(b[yc]={}))[a])&&j[0]===Ac)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[yc]||(l[yc]={}))[a]=[Ac,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var d,e=hc.pseudos[a]||hc.setFilters[a.toLowerCase()]||id.error("unsupported pseudo: "+a);return e[yc]?e(c):e.length>1?(d=[a,a,"",c],hc.setFilters.hasOwnProperty(a.toLowerCase())?b(function(a,b){for(var d,f=e(a,c),g=f.length;g--;)d=Oc.call(a,f[g]),a[d]=!(b[d]=f[g])}):function(a){return e(a,0,d)}):e}},pseudos:{not:b(function(a){var c=[],d=[],e=lc(a.replace(Uc,"$1"));return e[yc]?b(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,b,f){return c[0]=a,e(c,null,f,d),!d.pop()}}),has:b(function(a){return function(b){return id(a,b).length>0}}),contains:b(function(a){return a=a.replace(fd,gd),function(b){return(b.textContent||b.innerText||ic(b)).indexOf(a)>-1}}),lang:b(function(a){return Zc.test(a||"")||id.error("unsupported lang: "+a),a=a.replace(fd,gd).toLowerCase(),function(b){var c;do if(c=tc?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(a){var b=window.location&&window.location.hash;return b&&b.slice(1)===a.id},root:function(a){return a===sc},focus:function(a){return a===rc.activeElement&&(!rc.hasFocus||rc.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!hc.pseudos.empty(a)},header:function(a){return ad.test(a.nodeName)},input:function(a){return _c.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:f(function(){return[0]}),last:f(function(a,b){return[b-1]}),eq:f(function(a,b,c){return[c<0?c+b:c]}),even:f(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:f(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:f(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:f(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},hc.pseudos.nth=hc.pseudos.eq;for(fc in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})hc.pseudos[fc]=d(fc);for(fc in{submit:!0,reset:!0})hc.pseudos[fc]=e(fc);h.prototype=hc.filters=hc.pseudos,hc.setFilters=new h,kc=id.tokenize=function(a,b){var c,d,e,f,g,h,i,j=Dc[a+" "];if(j)return b?0:j.slice(0);for(g=a,h=[],i=hc.preFilter;g;){c&&!(d=Vc.exec(g))||(d&&(g=g.slice(d[0].length)||g),h.push(e=[])),c=!1,(d=Wc.exec(g))&&(c=d.shift(),e.push({value:c,type:d[0].replace(Uc," ")}),g=g.slice(c.length));for(f in hc.filter)!(d=$c[f].exec(g))||i[f]&&!(d=i[f](d))||(c=d.shift(),e.push({value:c,type:f,matches:d}),g=g.slice(c.length));if(!c)break}return b?g.length:g?id.error(a):Dc(a,h).slice(0)},lc=id.compile=function(a,b){var c,d=[],e=[],f=Ec[a+" "];if(!f){for(b||(b=kc(a)),c=b.length;c--;)f=o(b[c]),f[yc]?d.push(f):e.push(f);f=Ec(a,p(e,d)),f.selector=a}return f},mc=id.select=function(a,b,c,d){var e,f,h,j,k,l="function"==typeof a&&a,m=!d&&kc(a=l.selector||a);if(c=c||[],1===m.length){if(f=m[0]=m[0].slice(0),f.length>2&&"ID"===(h=f[0]).type&&gc.getById&&9===b.nodeType&&tc&&hc.relative[f[1].type]){if(b=(hc.find.ID(h.matches[0].replace(fd,gd),b)||[])[0],!b)return c;l&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=$c.needsContext.test(a)?0:f.length;e--&&(h=f[e],!hc.relative[j=h.type]);)if((k=hc.find[j])&&(d=k(h.matches[0].replace(fd,gd),dd.test(f[0].type)&&g(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&i(f),
!a)return Mc.apply(c,d),c;break}}return(l||lc(a,m))(d,b,!tc,c,dd.test(a)&&g(b.parentNode)||b),c},gc.sortStable=yc.split("").sort(Fc).join("")===yc,gc.detectDuplicates=!!pc,qc(),gc.sortDetached=!0;var jd=Array.isArray,kd=function(a){var b,c,d=a;if(!jd(a))for(d=[],b=0,c=a.length;b<c;b++)d[b]=a[b];return d},ld=function(a,b,c){var d,e;if(!a)return 0;if(c=c||a,void 0!==a.length){for(d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d,a)===!1)return 0}else for(d in a)if(a.hasOwnProperty(d)&&b.call(c,a[d],d,a)===!1)return 0;return 1},md=function(a,b){var c=[];return ld(a,function(d,e){c.push(b(d,e,a))}),c},nd=function(a,b){var c=[];return ld(a,function(d,e){b&&!b(d,e,a)||c.push(d)}),c},od=function(a,b){var c,d;if(a)for(c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},pd=function(a,b,c,d){var e=0;for(arguments.length<3&&(c=a[0]);e<a.length;e++)c=b.call(d,c,a[e],e);return c},qd=function(a,b,c){var d,e;for(d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d,a))return d;return-1},rd=function(a,b,c){var d=qd(a,b,c);if(d!==-1)return a[d]},sd=function(a){return a[a.length-1]},td={isArray:jd,toArray:kd,each:ld,map:md,filter:nd,indexOf:od,reduce:pd,findIndex:qd,find:rd,last:sd},ud=/^\s*|\s*$/g,vd=function(a){return null===a||void 0===a?"":(""+a).replace(ud,"")},wd=function(a,b){return b?!("array"!==b||!td.isArray(a))||typeof a===b:void 0!==a},xd=function(a,b,c){var d;for(a=a||[],b=b||",","string"==typeof a&&(a=a.split(b)),c=c||{},d=a.length;d--;)c[a[d]]={};return c},yd=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},zd=function(a,b,c){var d,e,f,g,h,i=this,j=0;if(a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a),f=a[3].match(/(^|\.)(\w+)$/i)[2],e=i.createNS(a[3].replace(/\.\w+$/,""),c),!e[f]){if("static"===a[2])return e[f]=b,void(this.onCreate&&this.onCreate(a[2],a[3],e[f]));b[f]||(b[f]=function(){},j=1),e[f]=b[f],i.extend(e[f].prototype,b),a[5]&&(d=i.resolve(a[5]).prototype,g=a[5].match(/\.(\w+)$/i)[1],h=e[f],j?e[f]=function(){return d[g].apply(this,arguments)}:e[f]=function(){return this.parent=d[g],h.apply(this,arguments)},e[f].prototype[f]=e[f],i.each(d,function(a,b){e[f].prototype[b]=d[b]}),i.each(b,function(a,b){d[b]?e[f].prototype[b]=function(){return this.parent=d[b],a.apply(this,arguments)}:b!==f&&(e[f].prototype[b]=a)})),i.each(b["static"],function(a,b){e[f][b]=a})}},Ad=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];var e,f,g,h,i=arguments;for(e=1,f=i.length;e<f;e++){b=i[e];for(g in b)b.hasOwnProperty(g)&&(h=b[g],void 0!==h&&(a[g]=h))}return a},Bd=function(a,b,c,d){d=d||this,a&&(c&&(a=a[c]),td.each(a,function(a,e){return b.call(d,a,e,c)!==!1&&void Bd(a,b,c,d)}))},Cd=function(a,b){var c,d;for(b=b||window,a=a.split("."),c=0;c<a.length;c++)d=a[c],b[d]||(b[d]={}),b=b[d];return b},Dd=function(a,b){var c,d;for(b=b||window,a=a.split("."),c=0,d=a.length;c<d&&(b=b[a[c]],b);c++);return b},Ed=function(a,b){return!a||wd(a,"array")?a:td.map(a.split(b||","),vd)},Fd=function(a){var b=Lb.cacheSuffix;return b&&(a+=(a.indexOf("?")===-1?"?":"&")+b),a},Gd={trim:vd,isArray:td.isArray,is:wd,toArray:td.toArray,makeMap:xd,each:td.each,map:td.map,grep:td.filter,inArray:td.indexOf,hasOwn:yd,extend:Ad,create:zd,walk:Bd,createNS:Cd,resolve:Dd,explode:Ed,_addCacheSuffix:Fd},Hd=document,Id=Array.prototype.push,Jd=Array.prototype.slice,Kd=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Ld=ec.Event,Md=Gd.makeMap("children,contents,next,prev"),Nd=function(a){return"undefined"!=typeof a},Od=function(a){return"string"==typeof a},Pd=function(a){return a&&a===a.window},Qd=function(a,b){var c,d,e;for(b=b||Hd,e=b.createElement("div"),c=b.createDocumentFragment(),e.innerHTML=a;d=e.firstChild;)c.appendChild(d);return c},Rd=function(a,b,c,d){var e;if(Od(b))b=Qd(b,ee(a[0]));else if(b.length&&!b.nodeType){if(b=$d.makeArray(b),d)for(e=b.length-1;e>=0;e--)Rd(a,b[e],c,d);else for(e=0;e<b.length;e++)Rd(a,b[e],c,d);return a}if(b.nodeType)for(e=a.length;e--;)c.call(a[e],b);return a},Sd=function(a,b){return a&&b&&(" "+a.className+" ").indexOf(" "+b+" ")!==-1},Td=function(a,b,c){var d,e;return b=$d(b)[0],a.each(function(){var a=this;c&&d===a.parentNode?e.appendChild(a):(d=a.parentNode,e=b.cloneNode(!1),a.parentNode.insertBefore(e,a),e.appendChild(a))}),a},Ud=Gd.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),Vd=Gd.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Wd={"for":"htmlFor","class":"className",readonly:"readOnly"},Xd={"float":"cssFloat"},Yd={},Zd={},$d=function(a,b){return new $d.fn.init(a,b)},_d=function(a,b){var c;if(b.indexOf)return b.indexOf(a);for(c=b.length;c--;)if(b[c]===a)return c;return-1},ae=/^\s*|\s*$/g,be=function(a){return null===a||void 0===a?"":(""+a).replace(ae,"")},ce=function(a,b){var c,d,e,f;if(a)if(c=a.length,void 0===c){for(d in a)if(a.hasOwnProperty(d)&&(f=a[d],b.call(f,d,f)===!1))break}else for(e=0;e<c&&(f=a[e],b.call(f,e,f)!==!1);e++);return a},de=function(a,b){var c=[];return ce(a,function(a,d){b(d,a)&&c.push(d)}),c},ee=function(a){return a?9===a.nodeType?a:a.ownerDocument:Hd};$d.fn=$d.prototype={constructor:$d,selector:"",context:null,length:0,init:function(a,b){var c,d,e=this;if(!a)return e;if(a.nodeType)return e.context=e[0]=a,e.length=1,e;if(b&&b.nodeType)e.context=b;else{if(b)return $d(a).attr(b);e.context=b=document}if(Od(a)){if(e.selector=a,c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:Kd.exec(a),!c)return $d(b).find(a);if(c[1])for(d=Qd(a,ee(b)).firstChild;d;)Id.call(e,d),d=d.nextSibling;else{if(d=ee(b).getElementById(c[2]),!d)return e;if(d.id!==c[2])return e.find(a);e.length=1,e[0]=d}}else this.add(a,!1);return e},toArray:function(){return Gd.toArray(this)},add:function(a,b){var c,d,e=this;if(Od(a))return e.add($d(a));if(b!==!1)for(c=$d.unique(e.toArray().concat($d.makeArray(a))),e.length=c.length,d=0;d<c.length;d++)e[d]=c[d];else Id.apply(e,$d.makeArray(a));return e},attr:function(a,b){var c,d=this;if("object"==typeof a)ce(a,function(a,b){d.attr(a,b)});else{if(!Nd(b)){if(d[0]&&1===d[0].nodeType){if(c=Yd[a],c&&c.get)return c.get(d[0],a);if(Vd[a])return d.prop(a)?a:void 0;b=d[0].getAttribute(a,2),null===b&&(b=void 0)}return b}this.each(function(){var c;if(1===this.nodeType){if(c=Yd[a],c&&c.set)return void c.set(this,b);null===b?this.removeAttribute(a,2):this.setAttribute(a,b,2)}})}return d},removeAttr:function(a){return this.attr(a,null)},prop:function(a,b){var c=this;if(a=Wd[a]||a,"object"==typeof a)ce(a,function(a,b){c.prop(a,b)});else{if(!Nd(b))return c[0]&&c[0].nodeType&&a in c[0]?c[0][a]:b;this.each(function(){1===this.nodeType&&(this[a]=b)})}return c},css:function(a,b){var c,d,e=this,f=function(a){return a.replace(/-(\D)/g,function(a,b){return b.toUpperCase()})},g=function(a){return a.replace(/[A-Z]/g,function(a){return"-"+a})};if("object"==typeof a)ce(a,function(a,b){e.css(a,b)});else if(Nd(b))a=f(a),"number"!=typeof b||Ud[a]||(b=b.toString()+"px"),e.each(function(){var c=this.style;if(d=Zd[a],d&&d.set)return void d.set(this,b);try{this.style[Xd[a]||a]=b}catch(e){}null!==b&&""!==b||(c.removeProperty?c.removeProperty(g(a)):c.removeAttribute(a))});else{if(c=e[0],d=Zd[a],d&&d.get)return d.get(c);if(!c.ownerDocument.defaultView)return c.currentStyle?c.currentStyle[f(a)]:"";try{return c.ownerDocument.defaultView.getComputedStyle(c,null).getPropertyValue(g(a))}catch(h){return}}return e},remove:function(){for(var a,b=this,c=this.length;c--;)a=b[c],Ld.clean(a),a.parentNode&&a.parentNode.removeChild(a);return this},empty:function(){for(var a,b=this,c=this.length;c--;)for(a=b[c];a.firstChild;)a.removeChild(a.firstChild);return this},html:function(a){var b,c=this;if(Nd(a)){b=c.length;try{for(;b--;)c[b].innerHTML=a}catch(d){$d(c[b]).empty().append(a)}return c}return c[0]?c[0].innerHTML:""},text:function(a){var b,c=this;if(Nd(a)){for(b=c.length;b--;)"innerText"in c[b]?c[b].innerText=a:c[0].textContent=a;return c}return c[0]?c[0].innerText||c[0].textContent:""},append:function(){return Rd(this,arguments,function(a){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(a)})},prepend:function(){return Rd(this,arguments,function(a){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(a,this.firstChild)},!0)},before:function(){var a=this;return a[0]&&a[0].parentNode?Rd(a,arguments,function(a){this.parentNode.insertBefore(a,this)}):a},after:function(){var a=this;return a[0]&&a[0].parentNode?Rd(a,arguments,function(a){this.parentNode.insertBefore(a,this.nextSibling)},!0):a},appendTo:function(a){return $d(a).append(this),this},prependTo:function(a){return $d(a).prepend(this),this},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){return Td(this,a)},wrapAll:function(a){return Td(this,a,!0)},wrapInner:function(a){return this.each(function(){$d(this).contents().wrapAll(a)}),this},unwrap:function(){return this.parent().each(function(){$d(this).replaceWith(this.childNodes)})},clone:function(){var a=[];return this.each(function(){a.push(this.cloneNode(!0))}),$d(a)},addClass:function(a){return this.toggleClass(a,!0)},removeClass:function(a){return this.toggleClass(a,!1)},toggleClass:function(a,b){var c=this;return"string"!=typeof a?c:(a.indexOf(" ")!==-1?ce(a.split(" "),function(){c.toggleClass(this,b)}):c.each(function(c,d){var e,f;f=Sd(d,a),f!==b&&(e=d.className,f?d.className=be((" "+e+" ").replace(" "+a+" "," ")):d.className+=e?" "+a:a)}),c)},hasClass:function(a){return Sd(this[0],a)},each:function(a){return ce(this,a)},on:function(a,b){return this.each(function(){Ld.bind(this,a,b)})},off:function(a,b){return this.each(function(){Ld.unbind(this,a,b)})},trigger:function(a){return this.each(function(){"object"==typeof a?Ld.fire(this,a.type,a):Ld.fire(this,a)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new $d(Jd.apply(this,arguments))},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(a){var b,c,d=[];for(b=0,c=this.length;b<c;b++)$d.find(a,this[b],d);return $d(d)},filter:function(a){return $d("function"==typeof a?de(this.toArray(),function(b,c){return a(c,b)}):$d.filter(a,this.toArray()))},closest:function(a){var b=[];return a instanceof $d&&(a=a[0]),this.each(function(c,d){for(;d;){if("string"==typeof a&&$d(d).is(a)){b.push(d);break}if(d===a){b.push(d);break}d=d.parentNode}}),$d(b)},offset:function(a){var b,c,d,e,f=0,g=0;return a?this.css(a):(b=this[0],b&&(c=b.ownerDocument,d=c.documentElement,b.getBoundingClientRect&&(e=b.getBoundingClientRect(),f=e.left+(d.scrollLeft||c.body.scrollLeft)-d.clientLeft,g=e.top+(d.scrollTop||c.body.scrollTop)-d.clientTop)),{left:f,top:g})},push:Id,sort:[].sort,splice:[].splice},Gd.extend($d,{extend:Gd.extend,makeArray:function(a){return Pd(a)||a.nodeType?[a]:Gd.toArray(a)},inArray:_d,isArray:Gd.isArray,each:ce,trim:be,grep:de,find:id,expr:id.selectors,unique:id.uniqueSort,text:id.getText,contains:id.contains,filter:function(a,b,c){var d=b.length;for(c&&(a=":not("+a+")");d--;)1!==b[d].nodeType&&b.splice(d,1);return b=1===b.length?$d.find.matchesSelector(b[0],a)?[b[0]]:[]:$d.find.matches(a,b)}});var fe=function(a,b,c){var d=[],e=a[b];for("string"!=typeof c&&c instanceof $d&&(c=c[0]);e&&9!==e.nodeType;){if(void 0!==c){if(e===c)break;if("string"==typeof c&&$d(e).is(c))break}1===e.nodeType&&d.push(e),e=e[b]}return d},ge=function(a,b,c,d){var e=[];for(d instanceof $d&&(d=d[0]);a;a=a[b])if(!c||a.nodeType===c){if(void 0!==d){if(a===d)break;if("string"==typeof d&&$d(a).is(d))break}e.push(a)}return e},he=function(a,b,c){for(a=a[b];a;a=a[b])if(a.nodeType===c)return a;return null};ce({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return fe(a,"parentNode")},next:function(a){return he(a,"nextSibling",1)},prev:function(a){return he(a,"previousSibling",1)},children:function(a){return ge(a.firstChild,"nextSibling",1)},contents:function(a){return Gd.toArray(("iframe"===a.nodeName?a.contentDocument||a.contentWindow.document:a).childNodes)}},function(a,b){$d.fn[a]=function(c){var d=this,e=[];return d.each(function(){var a=b.call(e,this,c,e);a&&($d.isArray(a)?e.push.apply(e,a):e.push(a))}),this.length>1&&(Md[a]||(e=$d.unique(e)),0===a.indexOf("parents")&&(e=e.reverse())),e=$d(e),c?e.filter(c):e}}),ce({parentsUntil:function(a,b){return fe(a,"parentNode",b)},nextUntil:function(a,b){return ge(a,"nextSibling",1,b).slice(1)},prevUntil:function(a,b){return ge(a,"previousSibling",1,b).slice(1)}},function(a,b){$d.fn[a]=function(c,d){var e=this,f=[];return e.each(function(){var a=b.call(f,this,c,f);a&&($d.isArray(a)?f.push.apply(f,a):f.push(a))}),this.length>1&&(f=$d.unique(f),0!==a.indexOf("parents")&&"prevUntil"!==a||(f=f.reverse())),f=$d(f),d?f.filter(d):f}}),$d.fn.is=function(a){return!!a&&this.filter(a).length>0},$d.fn.init.prototype=$d.fn,$d.overrideDefaults=function(a){var b,c=function(d,e){return b=b||a(),0===arguments.length&&(d=b.element),e||(e=b.context),new c.fn.init(d,e)};return $d.extend(c,this),c};var ie=function(a,b,c){ce(c,function(c,d){a[c]=a[c]||{},a[c][b]=d})};Lb.ie&&Lb.ie<8&&(ie(Yd,"get",{maxlength:function(a){var b=a.maxLength;if(2147483647!==b)return b},size:function(a){var b=a.size;if(20!==b)return b},"class":function(a){return a.className},style:function(a){var b=a.style.cssText;if(0!==b.length)return b}}),ie(Yd,"set",{"class":function(a,b){a.className=b},style:function(a,b){a.style.cssText=b}})),Lb.ie&&Lb.ie<9&&(Xd["float"]="styleFloat",ie(Zd,"set",{opacity:function(a,b){var c=a.style;null===b||""===b?c.removeAttribute("filter"):(c.zoom=1,c.filter="alpha(opacity="+100*b+")")}})),$d.attrHooks=Yd,$d.cssHooks=Zd;var je,ke,le,me=function(a){var b,c=!1;return function(){return c||(c=!0,b=a.apply(null,arguments)),b}},ne={cached:me},oe=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.test(b))return d}},pe=function(a,b){var c=oe(a,b);if(!c)return{major:0,minor:0};var d=function(a){return Number(b.replace(c,"$"+a))};return se(d(1),d(2))},qe=function(a,b){var c=String(b).toLowerCase();return 0===a.length?re():pe(a,c)},re=function(){return se(0,0)},se=function(a,b){return{major:a,minor:b}},te={nu:se,detect:qe,unknown:re},ue="Edge",ve="Chrome",we="IE",xe="Opera",ye="Firefox",ze="Safari",Ae=function(a,b){return function(){return b===a}},Be=function(){return Ce({current:void 0,version:te.unknown()})},Ce=function(a){var b=a.current,c=a.version;return{current:b,version:c,isEdge:Ae(ue,b),isChrome:Ae(ve,b),isIE:Ae(we,b),isOpera:Ae(xe,b),isFirefox:Ae(ye,b),isSafari:Ae(ze,b)}},De={unknown:Be,nu:Ce,edge:Da.constant(ue),chrome:Da.constant(ve),ie:Da.constant(we),opera:Da.constant(xe),firefox:Da.constant(ye),safari:Da.constant(ze)},Ee="Windows",Fe="iOS",Ge="Android",He="Linux",Ie="OSX",Je="Solaris",Ke="FreeBSD",Le=function(a,b){return function(){return b===a}},Me=function(){return Ne({current:void 0,version:te.unknown()})},Ne=function(a){var b=a.current,c=a.version;return{current:b,version:c,isWindows:Le(Ee,b),isiOS:Le(Fe,b),isAndroid:Le(Ge,b),isOSX:Le(Ie,b),isLinux:Le(He,b),isSolaris:Le(Je,b),isFreeBSD:Le(Ke,b)}},Oe={unknown:Me,nu:Ne,windows:Da.constant(Ee),ios:Da.constant(Fe),android:Da.constant(Ge),linux:Da.constant(He),osx:Da.constant(Ie),solaris:Da.constant(Je),freebsd:Da.constant(Ke)},Pe=function(a,b){var c=String(b).toLowerCase();return rb.find(a,function(a){return a.search(c)})},Qe=function(a,b){return Pe(a,b).map(function(a){var c=te.detect(a.versionRegexes,b);return{current:a.name,version:c}})},Re=function(a,b){return Pe(a,b).map(function(a){var c=te.detect(a.versionRegexes,b);return{current:a.name,version:c}})},Se={detectBrowser:Qe,detectOs:Re},Te=function(a,b){return b+a},Ue=function(a,b){return a+b},Ve=function(a,b){return a.substring(b)},We=function(a,b){return a.substring(0,a.length-b)},Xe={addToStart:Te,addToEnd:Ue,removeFromStart:Ve,removeFromEnd:We},Ye=function(a,b){return a.substr(0,b)},Ze=function(a,b){return a.substr(a.length-b,a.length)},$e=function(a){return""===a?Ka.none():Ka.some(a.substr(0,1))},_e=function(a){return""===a?Ka.none():Ka.some(a.substring(1))},af={first:Ye,last:Ze,head:$e,tail:_e},bf=function(a,b,c){if(""===b)return!0;if(a.length<b.length)return!1;var d=a.substr(c,c+b.length);return d===b},cf=function(a,b){var c=function(a){var b=typeof a;return"string"===b||"number"===b};return a.replace(/\${([^{}]*)}/g,function(a,d){var e=b[d];return c(e)?e:a})},df=function(a,b){return kf(a,b)?Xe.removeFromStart(a,b.length):a},ef=function(a,b){return lf(a,b)?Xe.removeFromEnd(a,b.length):a},ff=function(a,b){return kf(a,b)?a:Xe.addToStart(a,b)},gf=function(a,b){return lf(a,b)?a:Xe.addToEnd(a,b)},hf=function(a,b){return a.indexOf(b)!==-1},jf=function(a){return af.head(a).bind(function(b){return af.tail(a).map(function(a){return b.toUpperCase()+a})}).getOr(a)},kf=function(a,b){return bf(a,b,0)},lf=function(a,b){return bf(a,b,a.length-b.length)},mf=function(a){return a.replace(/^\s+|\s+$/g,"")},nf=function(a){return a.replace(/^\s+/g,"")},of=function(a){return a.replace(/\s+$/g,"")},pf={supplant:cf,startsWith:kf,removeLeading:df,removeTrailing:ef,ensureLeading:ff,ensureTrailing:gf,endsWith:lf,contains:hf,trim:mf,lTrim:nf,rTrim:of,capitalize:jf},qf=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,rf=function(a){return function(b){return pf.contains(b,a)}},sf=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(a){var b=pf.contains(a,"edge/")&&pf.contains(a,"chrome")&&pf.contains(a,"safari")&&pf.contains(a,"applewebkit");return b}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,qf],search:function(a){return pf.contains(a,"chrome")&&!pf.contains(a,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(a){return pf.contains(a,"msie")||pf.contains(a,"trident")}},{name:"Opera",versionRegexes:[qf,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:rf("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:rf("firefox")},{name:"Safari",versionRegexes:[qf,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(a){return(pf.contains(a,"safari")||pf.contains(a,"mobile/"))&&pf.contains(a,"applewebkit")}}],tf=[{name:"Windows",search:rf("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(a){return pf.contains(a,"iphone")||pf.contains(a,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:rf("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:rf("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:rf("linux"),versionRegexes:[]},{name:"Solaris",search:rf("sunos"),versionRegexes:[]},{name:"FreeBSD",search:rf("freebsd"),versionRegexes:[]}],uf={browsers:Da.constant(sf),oses:Da.constant(tf)},vf=function(a){var b=uf.browsers(),c=uf.oses(),d=Se.detectBrowser(b,a).fold(De.unknown,De.nu),e=Se.detectOs(c,a).fold(Oe.unknown,Oe.nu),f=q(e,d,a);return{browser:d,os:e,deviceType:f}},wf={detect:vf},xf=ne.cached(function(){var a=navigator.userAgent;return wf.detect(a)}),yf={detect:xf},zf=function(a,b){var c=b||document,d=c.createElement("div");if(d.innerHTML=a,!d.hasChildNodes()||d.childNodes.length>1)throw console.error("HTML does not have a single root node",a),"HTML must have a single root node";return Cf(d.childNodes[0])},Af=function(a,b){var c=b||document,d=c.createElement(a);return Cf(d)},Bf=function(a,b){var c=b||document,d=c.createTextNode(a);return Cf(d)},Cf=function(a){if(null===a||void 0===a)throw new Error("Node cannot be null or undefined");return{dom:Da.constant(a)}},Df=function(a,b,c){return Ka.from(a.dom().elementFromPoint(b,c)).map(Cf)},Ef={fromHtml:zf,fromTag:Af,fromText:Bf,fromDom:Cf,fromPoint:Df},Ff={ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12},Gf=function(a){var b=a.dom().nodeName;return b.toLowerCase()},Hf=function(a){return a.dom().nodeType},If=function(a){return a.dom().nodeValue},Jf=function(a){return function(b){return Hf(b)===a}},Kf=function(a){return Hf(a)===Ff.COMMENT||"#comment"===Gf(a)},Lf=Jf(Ff.ELEMENT),Mf=Jf(Ff.TEXT),Nf=Jf(Ff.DOCUMENT),Of={name:Gf,type:Hf,value:If,isElement:Lf,isText:Mf,isDocument:Nf,isComment:Kf},Pf=function(){var a=Object.keys,b=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};return void 0===a?b:a}(),Qf=function(a,b){for(var c=Pf(a),d=0,e=c.length;d<e;d++){var f=c[d],g=a[f];b(g,f,a)}},Rf=function(a,b){return Sf(a,function(a,c,d){return{k:c,v:b(a,c,d)}})},Sf=function(a,b){var c={};return Qf(a,function(d,e){var f=b(d,e,a);c[f.k]=f.v}),c},Tf=function(a,b){var c={},d={};return Qf(a,function(a,e){var f=b(a,e)?c:d;f[e]=a}),{t:c,f:d}},Uf=function(a,b){var c=[];return Qf(a,function(a,d){c.push(b(a,d))}),c},Vf=function(a,b){for(var c=Pf(a),d=0,e=c.length;d<e;d++){var f=c[d],g=a[f];if(b(g,f,a))return Ka.some(g)}return Ka.none()},Wf=function(a){return Uf(a,function(a){return a})},Xf=function(a){return Wf(a).length},Yf={bifilter:Tf,each:Qf,map:Rf,mapToArray:Uf,tupleMap:Sf,find:Vf,keys:Pf,values:Wf,size:Xf},Zf=function(a,b,c){if(!(Na.isString(c)||Na.isBoolean(c)||Na.isNumber(c)))throw console.error("Invalid call to Attr.set. Key ",b,":: Value ",c,":: Element ",a),new Error("Attribute value was not simple");a.setAttribute(b,c+"")},$f=function(a,b,c){Zf(a.dom(),b,c)},_f=function(a,b){var c=a.dom();Yf.each(b,function(a,b){Zf(c,b,a)})},ag=function(a,b){var c=a.dom().getAttribute(b);return null===c?void 0:c},bg=function(a,b){var c=a.dom();return!(!c||!c.hasAttribute)&&c.hasAttribute(b)},cg=function(a,b){a.dom().removeAttribute(b)},dg=function(a){var b=a.dom().attributes;return void 0===b||null===b||0===b.length},eg=function(a){return rb.foldl(a.dom().attributes,function(a,b){return a[b.name]=b.value,a},{})},fg=function(a,b,c){bg(a,c)&&!bg(b,c)&&$f(b,c,ag(a,c))},gg=function(a,b,c){Of.isElement(a)&&Of.isElement(b)&&rb.each(c,function(c){fg(a,b,c)})},hg={clone:eg,set:$f,setAll:_f,get:ag,has:bg,remove:cg,hasNone:dg,transfer:gg},ig=function(a){var b=Of.isText(a)?a.dom().parentNode:a.dom();return void 0!==b&&null!==b&&b.ownerDocument.body.contains(b)},jg=ne.cached(function(){return kg(Ef.fromDom(document))}),kg=function(a){var b=a.dom().body;if(null===b||void 0===b)throw"Body is not available yet";return Ef.fromDom(b)},lg={body:jg,getBody:kg,inBody:ig},mg=function(a){return void 0!==a.style},ng={isSupported:mg},og=function(a,b,c){if(!Na.isString(c))throw console.error("Invalid call to CSS.set. Property ",b,":: Value ",c,":: Element ",a),new Error("CSS value must be a string: "+c);ng.isSupported(a)&&a.style.setProperty(b,c)},pg=function(a,b){ng.isSupported(a)&&a.style.removeProperty(b)},qg=function(a,b,c){var d=a.dom();og(d,b,c)},rg=function(a,b){var c=a.dom();Yf.each(b,function(a,b){og(c,b,a)})},sg=function(a,b){var c=a.dom();Yf.each(b,function(a,b){a.fold(function(){pg(c,b)},function(a){og(c,b,a)})})},tg=function(a,b){var c=a.dom(),d=window.getComputedStyle(c),e=d.getPropertyValue(b),f=""!==e||lg.inBody(a)?e:ug(c,b);return null===f?void 0:f},ug=function(a,b){return ng.isSupported(a)?a.style.getPropertyValue(b):""},vg=function(a,b){var c=a.dom(),d=ug(c,b);return Ka.from(d).filter(function(a){return a.length>0})},wg=function(a){var b={},c=a.dom();if(ng.isSupported(c))for(var d=0;d<c.style.length;d++){var e=c.style.item(d);b[e]=c.style[e]}return b},xg=function(a,b,c){var d=Ef.fromTag(a);qg(d,b,c);var e=vg(d,b);return e.isSome()},yg=function(a,b){var c=a.dom();pg(c,b),hg.has(a,"style")&&""===pf.trim(hg.get(a,"style"))&&hg.remove(a,"style")},zg=function(a,b){var c=hg.get(a,"style"),d=b(a),e=void 0===c?hg.remove:hg.set;return e(a,"style",c),d},Ag=function(a,b){var c=a.dom(),d=b.dom();ng.isSupported(c)&&ng.isSupported(d)&&(d.style.cssText=c.style.cssText)},Bg=function(a){return a.dom().offsetWidth},Cg=function(a,b,c){vg(a,c).each(function(a){vg(b,c).isNone()&&qg(b,c,a)})},Dg=function(a,b,c){Of.isElement(a)&&Of.isElement(b)&&rb.each(c,function(c){Cg(a,b,c)})},Eg={copy:Ag,set:qg,preserve:zg,setAll:rg,setOptions:sg,remove:yg,get:tg,getRaw:vg,getAllRaw:wg,isValidValue:xg,reflow:Bg,transfer:Dg},Fg=function(a){return a.slice(0).sort()},Gg=function(a,b){throw new Error("All required keys ("+Fg(a).join(", ")+") were not specified. Specified keys were: "+Fg(b).join(", ")+".")},Hg=function(a){throw new Error("Unsupported keys for object: "+Fg(a).join(", "))},Ig=function(a,b){if(!Na.isArray(b))throw new Error("The "+a+" fields must be an array. Was: "+b+".");rb.each(b,function(b){if(!Na.isString(b))throw new Error("The value "+b+" in the "+a+" fields was not a string.")})},Jg=function(a,b){throw new Error("All values need to be of type: "+b+". Keys ("+Fg(a).join(", ")+") were not.")},Kg=function(a){var b=Fg(a),c=rb.find(b,function(a,c){return c<b.length-1&&a===b[c+1]});c.each(function(a){throw new Error("The field: "+a+" occurs more than once in the combined fields: ["+b.join(", ")+"].")})},Lg={sort:Fg,reqMessage:Gg,unsuppMessage:Hg,validateStrArr:Ig,invalidTypeMessage:Jg,checkDupes:Kg},Mg={immutable:r,immutableBag:s},Ng=function(a,b){var c=[],d=function(a){return c.push(a),b(a)},e=b(a);do e=e.bind(d);while(e.isSome());return c},Og={toArray:Ng},Pg=function(){var a=Bb.getOrDie("Node");return a},Qg=function(a,b,c){return 0!==(a.compareDocumentPosition(b)&c)},Rg=function(a,b){return Qg(a,b,Pg().DOCUMENT_POSITION_PRECEDING)},Sg=function(a,b){return Qg(a,b,Pg().DOCUMENT_POSITION_CONTAINED_BY)},Tg={documentPositionPreceding:Rg,documentPositionContainedBy:Sg},Ug=Ff.ELEMENT,Vg=Ff.DOCUMENT,Wg=function(a,b){var c=a.dom();if(c.nodeType!==Ug)return!1;if(void 0!==c.matches)return c.matches(b);if(void 0!==c.msMatchesSelector)return c.msMatchesSelector(b);if(void 0!==c.webkitMatchesSelector)return c.webkitMatchesSelector(b);if(void 0!==c.mozMatchesSelector)return c.mozMatchesSelector(b);throw new Error("Browser lacks native selectors")},Xg=function(a){return a.nodeType!==Ug&&a.nodeType!==Vg||0===a.childElementCount},Yg=function(a,b){var c=void 0===b?document:b.dom();return Xg(c)?[]:rb.map(c.querySelectorAll(a),Ef.fromDom)},Zg=function(a,b){var c=void 0===b?document:b.dom();return Xg(c)?Ka.none():Ka.from(c.querySelector(a)).map(Ef.fromDom)},$g={all:Yg,is:Wg,one:Zg},_g=function(a,b){return a.dom()===b.dom()},ah=function(a,b){return a.dom().isEqualNode(b.dom())},bh=function(a,b){return rb.exists(b,Da.curry(_g,a))},ch=function(a,b){var c=a.dom(),d=b.dom();return c!==d&&c.contains(d)},dh=function(a,b){return Tg.documentPositionContainedBy(a.dom(),b.dom())},eh=yf.detect().browser,fh=eh.isIE()?dh:ch,gh={eq:_g,isEqualNode:ah,member:bh,contains:fh,is:$g.is},hh=function(a){return Ef.fromDom(a.dom().ownerDocument)},ih=function(a){var b=hh(a);return Ef.fromDom(b.dom().documentElement)},jh=function(a){var b=a.dom(),c=b.ownerDocument.defaultView;return Ef.fromDom(c)},kh=function(a){var b=a.dom();return Ka.from(b.parentNode).map(Ef.fromDom)},lh=function(a){return kh(a).bind(function(b){var c=th(b);return rb.findIndex(c,function(b){return gh.eq(a,b)})})},mh=function(a,b){for(var c=Na.isFunction(b)?b:Da.constant(!1),d=a.dom(),e=[];null!==d.parentNode&&void 0!==d.parentNode;){var f=d.parentNode,g=Ef.fromDom(f);if(e.push(g),c(g)===!0)break;d=f}return e},nh=function(a){var b=function(b){return rb.filter(b,function(b){return!gh.eq(a,b)})};return kh(a).map(th).map(b).getOr([])},oh=function(a){var b=a.dom();return Ka.from(b.offsetParent).map(Ef.fromDom)},ph=function(a){var b=a.dom();return Ka.from(b.previousSibling).map(Ef.fromDom)},qh=function(a){var b=a.dom();return Ka.from(b.nextSibling).map(Ef.fromDom)},rh=function(a){return rb.reverse(Og.toArray(a,ph))},sh=function(a){return Og.toArray(a,qh)},th=function(a){var b=a.dom();return rb.map(b.childNodes,Ef.fromDom)},uh=function(a,b){var c=a.dom().childNodes;return Ka.from(c[b]).map(Ef.fromDom)},vh=function(a){return uh(a,0)},wh=function(a){return uh(a,a.dom().childNodes.length-1)},xh=function(a){return a.dom().childNodes.length},yh=function(a){return a.dom().hasChildNodes()},zh=Mg.immutable("element","offset"),Ah=function(a,b){var c=th(a);return c.length>0&&b<c.length?zh(c[b],0):zh(a,b)},Bh={owner:hh,defaultView:jh,documentElement:ih,parent:kh,findIndex:lh,parents:mh,siblings:nh,prevSibling:ph,offsetParent:oh,prevSiblings:rh,nextSibling:qh,nextSiblings:sh,children:th,child:uh,firstChild:vh,lastChild:wh,childNodesCount:xh,hasChildNodes:yh,leaf:Ah},Ch=yf.detect().browser,Dh=function(a){return rb.find(a,Of.isElement)},Eh=function(a){return Ch.isFirefox()&&"table"===Of.name(a)?Dh(Bh.children(a)).filter(function(a){return"caption"===Of.name(a)}).bind(function(a){return Dh(Bh.nextSiblings(a)).map(function(b){var c=b.dom().offsetTop,d=a.dom().offsetTop,e=a.dom().offsetHeight;return c<=d?-e:0})}).getOr(0):0},Fh=function(a,b,c){var d,e,f=0,g=0,h=a.ownerDocument;if(c=c?c:a,b){if(c===a&&b.getBoundingClientRect&&"static"===Eg.get(Ef.fromDom(a),"position"))return e=b.getBoundingClientRect(),f=e.left+(h.documentElement.scrollLeft||a.scrollLeft)-h.documentElement.clientLeft,g=e.top+(h.documentElement.scrollTop||a.scrollTop)-h.documentElement.clientTop,{x:f,y:g};for(d=b;d&&d!==c&&d.nodeType;)f+=d.offsetLeft||0,g+=d.offsetTop||0,d=d.offsetParent;for(d=b.parentNode;d&&d!==c&&d.nodeType;)f-=d.scrollLeft||0,g-=d.scrollTop||0,d=d.parentNode;g+=Eh(Ef.fromDom(b))}return{x:f,y:g}},Gh={getPos:Fh},Hh=function(a){var b=Ka.none(),c=[],d=function(a){return Hh(function(b){e(function(c){b(a(c))})})},e=function(a){g()?i(a):c.push(a)},f=function(a){b=Ka.some(a),h(c),c=[]},g=function(){return b.isSome()},h=function(a){rb.each(a,i)},i=function(a){b.each(function(b){setTimeout(function(){a(b)},0)})};return a(f),{get:e,map:d,isReady:g}},Ih=function(a){return Hh(function(b){b(a)})},Jh={nu:Hh,pure:Ih},Kh=function(a){return function(){var b=Array.prototype.slice.call(arguments),c=this;setTimeout(function(){a.apply(c,b)},0)}},Lh={bounce:Kh},Mh=function(a){var b=function(b){a(Lh.bounce(b))},c=function(a){return Mh(function(c){b(function(b){var d=a(b);c(d)})})},d=function(a){return Mh(function(c){b(function(b){a(b).get(c)})})},e=function(a){return Mh(function(c){b(function(b){a.get(c)})})},f=function(){return Jh.nu(b)};return{map:c,bind:d,anonBind:e,toLazy:f,get:b}},Nh=function(a){return Mh(function(b){b(a)})},Oh={nu:Mh,pure:Nh},Ph=function(a,b){return b(function(b){var c=[],d=0,e=function(e){return function(f){c[e]=f,d++,d>=a.length&&b(c)}};0===a.length?b([]):rb.each(a,function(a,b){a.get(e(b))})})},Qh={par:Ph},Rh=function(a){return Qh.par(a,Oh.nu)},Sh=function(a,b){var c=rb.map(a,b);return Rh(c)},Th=function(a,b){return function(c){return b(c).bind(a)}},Uh={par:Rh,mapM:Sh,compose:Th},Vh=function(a){var b=function(b){return a===b},c=function(b){return Vh(a)},d=function(b){return Vh(a)},e=function(b){return Vh(b(a))},f=function(b){b(a)},g=function(b){return b(a)},h=function(b,c){return c(a)},i=function(b){return b(a)},j=function(b){return b(a)},k=function(){return Ka.some(a)};return{is:b,isValue:Da.always,isError:Da.never,getOr:Da.constant(a),getOrThunk:Da.constant(a),getOrDie:Da.constant(a),or:c,orThunk:d,fold:h,map:e,each:f,bind:g,exists:i,forall:j,toOption:k}},Wh=function(a){var b=function(a){return a()},c=function(){return Da.die(String(a))()},d=function(a){return a},e=function(a){return a()},f=function(b){return Wh(a)},g=function(b){return Wh(a)},h=function(b,c){return b(a)};return{is:Da.never,isValue:Da.never,isError:Da.always,getOr:Da.identity,getOrThunk:b,getOrDie:c,or:d,orThunk:e,fold:h,map:f,each:Da.noop,bind:g,exists:Da.never,forall:Da.always,toOption:Ka.none}},Xh={value:Vh,error:Wh},Yh=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],Zh=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"],$h=["td","th"],_h=["thead","tbody","tfoot"],ai=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],bi=["h1","h2","h3","h4","h5","h6"],ci=["li","dd","dt"],di=["ul","ol","dl"],ei=["pre","script","textarea","style"],fi=function(a){
var b;return function(c){return b=b?b:rb.mapToObject(a,Da.constant(!0)),b.hasOwnProperty(Of.name(c))}},gi=fi(bi),hi=fi(Yh),ii=function(a){return Of.isElement(a)&&!hi(a)},ji=function(a){return Of.isElement(a)&&"br"===Of.name(a)},ki=fi(ai),li=fi(di),mi=fi(ci),ni=fi(Zh),oi=fi(_h),pi=fi($h),qi=fi(ei),ri=function(a){return function(b){return!!b&&b.nodeType===a}},si=ri(1),ti=function(a){var b=a.toLowerCase().split(" ");return function(a){var c,d;if(a&&a.nodeType)for(d=a.nodeName.toLowerCase(),c=0;c<b.length;c++)if(d===b[c])return!0;return!1}},ui=function(a,b){var c=b.toLowerCase().split(" ");return function(b){var d,e;if(si(b))for(d=0;d<c.length;d++){var f=b.ownerDocument.defaultView.getComputedStyle(b,null);if(e=f?f.getPropertyValue(a):null,e===c[d])return!0}return!1}},vi=function(a,b){return function(c){return si(c)&&c[a]===b}},wi=function(a,b){return function(b){return si(b)&&b.hasAttribute(a)}},xi=function(a,b){return function(c){return si(c)&&c.getAttribute(a)===b}},yi=function(a){return si(a)&&a.hasAttribute("data-mce-bogus")},zi=function(a){return si(a)&&"all"===a.getAttribute("data-mce-bogus")},Ai=function(a){return si(a)&&"TABLE"===a.tagName},Bi=function(a){return function(b){if(si(b)){if(b.contentEditable===a)return!0;if(b.getAttribute("data-mce-contenteditable")===a)return!0}return!1}},Ci=ri(3),Di=ri(8),Ei=ri(9),Fi=ti("br"),Gi=Bi("true"),Hi=Bi("false"),Ii={isText:Ci,isElement:si,isComment:Di,isDocument:Ei,isBr:Fi,isContentEditableTrue:Gi,isContentEditableFalse:Hi,matchNodeNames:ti,hasPropValue:vi,hasAttribute:wi,hasAttributeValue:xi,matchStyleValues:ui,isBogus:yi,isBogusAll:zi,isTable:Ai},Ji=function(a){var b=a.previousSibling&&"SPAN"===a.previousSibling.nodeName,c=a.nextSibling&&"SPAN"===a.nextSibling.nodeName;return b&&c},Ki=function(a){return a&&"SPAN"===a.tagName&&"bookmark"===a.getAttribute("data-mce-type")},Li=function(a,b){var c,d=b.childNodes;if(!Ii.isElement(b)||!Ki(b)){for(c=d.length-1;c>=0;c--)Li(a,d[c]);if(Ii.isDocument(b)===!1){if(Ii.isText(b)&&b.nodeValue.length>0){var e=Gd.trim(b.nodeValue).length;if(a.isBlock(b.parentNode)||e>0)return;if(0===e&&Ji(b))return}else if(Ii.isElement(b)&&(d=b.childNodes,1===d.length&&Ki(d[0])&&b.parentNode.insertBefore(d[0],b),d.length||ni(Ef.fromDom(b))))return;a.remove(b)}return b}},Mi={trimNode:Li},Ni=Gd.makeMap,Oi=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Pi=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qi=/[<>&\"\']/g,Ri=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Si={128:"â‚¬",130:"â€š",131:"Æ’",132:"â€ž",133:"â€¦",134:"â€ ",135:"â€¡",136:"Ë†",137:"â€°",138:"Å ",139:"â€¹",140:"Å’",142:"Å½",145:"â€˜",146:"â€™",147:"â€œ",148:"â€",149:"â€¢",150:"â€“",151:"â€”",152:"Ëœ",153:"â„¢",154:"Å¡",155:"â€º",156:"Å“",158:"Å¾",159:"Å¸"};ke={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},le={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var Ti=function(a){var b;return b=Ef.fromTag("div").dom(),b.innerHTML=a,b.textContent||b.innerText||a},Ui=function(a,b){var c,d,e,f={};if(a){for(a=a.split(","),b=b||10,c=0;c<a.length;c+=2)d=String.fromCharCode(parseInt(a[c],b)),ke[d]||(e="&"+a[c+1]+";",f[d]=e,f[e]=d);return f}};je=Ui("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var Vi=function(a,b){return a.replace(b?Oi:Pi,function(a){return ke[a]||a})},Wi=function(a){return(""+a).replace(Qi,function(a){return ke[a]||a})},Xi=function(a,b){return a.replace(b?Oi:Pi,function(a){return a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":ke[a]||"&#"+a.charCodeAt(0)+";"})},Yi=function(a,b,c){return c=c||je,a.replace(b?Oi:Pi,function(a){return ke[a]||c[a]||a})},Zi=function(a,b){var c=Ui(b)||je,d=function(a,b){return a.replace(b?Oi:Pi,function(a){return void 0!==ke[a]?ke[a]:void 0!==c[a]?c[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"})},e=function(a,b){return Yi(a,b,c)},f=Ni(a.replace(/\+/g,","));return f.named&&f.numeric?d:f.named?b?e:Yi:f.numeric?Xi:Vi},$i=function(a){return a.replace(Ri,function(a,b){return b?(b="x"===b.charAt(0).toLowerCase()?parseInt(b.substr(1),16):parseInt(b,10),b>65535?(b-=65536,String.fromCharCode(55296+(b>>10),56320+(1023&b))):Si[b]||String.fromCharCode(b)):le[a]||je[a]||Ti(a)})},_i={encodeRaw:Vi,encodeAllRaw:Wi,encodeNumeric:Xi,encodeNamed:Yi,getEncodeFunc:Zi,decode:$i},aj={},bj={},cj=Gd.makeMap,dj=Gd.each,ej=Gd.extend,fj=Gd.explode,gj=Gd.inArray,hj=function(a,b){return a=Gd.trim(a),a?a.split(b||" "):[]},ij=function(a){var b,c,d,e,f,g,h={},i=function(a,c,d){var e,f,g,i=function(a,b){var c,d,e={};for(c=0,d=a.length;c<d;c++)e[a[c]]=b||{};return e};for(d=d||[],c=c||"","string"==typeof d&&(d=hj(d)),a=hj(a),e=a.length;e--;)f=hj([b,c].join(" ")),g={attributes:i(f),attributesOrder:f,children:i(d,bj)},h[a[e]]=g},j=function(a,b){var c,d,e,f;for(a=hj(a),c=a.length,b=hj(b);c--;)for(d=h[a[c]],e=0,f=b.length;e<f;e++)d.attributes[b[e]]={},d.attributesOrder.push(b[e])};return aj[a]?aj[a]:(b="id accesskey class dir lang style tabindex title role",c="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",d="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==a&&(b+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",c+=" article aside details dialog figure header footer hgroup section nav",d+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==a&&(b+=" xml:lang",g="acronym applet basefont big font strike tt",d=[d,g].join(" "),dj(hj(g),function(a){i(a,"",d)}),f="center dir isindex noframes",c=[c,f].join(" "),e=[c,d].join(" "),dj(hj(f),function(a){i(a,"",e)})),e=e||[c,d].join(" "),i("html","manifest","head body"),i("head","","base command link meta noscript script style title"),i("title hr noscript br"),i("base","href target"),i("link","href rel media hreflang type sizes hreflang"),i("meta","name http-equiv content charset"),i("style","media type scoped"),i("script","src async defer type charset"),i("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",e),i("address dt dd div caption","",e),i("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",d),i("blockquote","cite",e),i("ol","reversed start type","li"),i("ul","","li"),i("li","value",e),i("dl","","dt dd"),i("a","href target rel media hreflang type",d),i("q","cite",d),i("ins del","cite datetime",e),i("img","src sizes srcset alt usemap ismap width height"),i("iframe","src name width height",e),i("embed","src type width height"),i("object","data type typemustmatch name usemap form width height",[e,"param"].join(" ")),i("param","name value"),i("map","name",[e,"area"].join(" ")),i("area","alt coords shape href target rel media hreflang type"),i("table","border","caption colgroup thead tfoot tbody tr"+("html4"===a?" col":"")),i("colgroup","span","col"),i("col","span"),i("tbody thead tfoot","","tr"),i("tr","","td th"),i("td","colspan rowspan headers",e),i("th","colspan rowspan headers scope abbr",e),i("form","accept-charset action autocomplete enctype method name novalidate target",e),i("fieldset","disabled form name",[e,"legend"].join(" ")),i("label","form for",d),i("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),i("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===a?e:d),i("select","disabled form multiple name required size","option optgroup"),i("optgroup","disabled label","option"),i("option","disabled label selected value"),i("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),i("menu","type label",[e,"li"].join(" ")),i("noscript","",e),"html4"!==a&&(i("wbr"),i("ruby","",[d,"rt rp"].join(" ")),i("figcaption","",e),i("mark rt rp summary bdi","",d),i("canvas","width height",e),i("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[e,"track source"].join(" ")),i("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[e,"track source"].join(" ")),i("picture","","img source"),i("source","src srcset type media sizes"),i("track","kind src srclang label default"),i("datalist","",[d,"option"].join(" ")),i("article section nav aside header footer","",e),i("hgroup","","h1 h2 h3 h4 h5 h6"),i("figure","",[e,"figcaption"].join(" ")),i("time","datetime",d),i("dialog","open",e),i("command","type label icon disabled checked radiogroup command"),i("output","for form name",d),i("progress","value max",d),i("meter","value min max low high optimum",d),i("details","open",[e,"summary"].join(" ")),i("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==a&&(j("script","language xml:space"),j("style","xml:space"),j("object","declare classid code codebase codetype archive standby align border hspace vspace"),j("embed","align name hspace vspace"),j("param","valuetype type"),j("a","charset name rev shape coords"),j("br","clear"),j("applet","codebase archive code object alt name width height align hspace vspace"),j("img","name longdesc align border hspace vspace"),j("iframe","longdesc frameborder marginwidth marginheight scrolling align"),j("font basefont","size color face"),j("input","usemap align"),j("select","onchange"),j("textarea"),j("h1 h2 h3 h4 h5 h6 div p legend caption","align"),j("ul","type compact"),j("li","type"),j("ol dl menu dir","compact"),j("pre","width xml:space"),j("hr","align noshade size width"),j("isindex","prompt"),j("table","summary width frame rules cellspacing cellpadding align bgcolor"),j("col","width align char charoff valign"),j("colgroup","width align char charoff valign"),j("thead","align char charoff valign"),j("tr","align char charoff valign bgcolor"),j("th","axis align char charoff valign nowrap bgcolor width height"),j("form","accept"),j("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),j("tfoot","align char charoff valign"),j("tbody","align char charoff valign"),j("area","nohref"),j("body","background bgcolor text link vlink alink")),"html4"!==a&&(j("input button select textarea","autofocus"),j("input textarea","placeholder"),j("a","download"),j("link script img","crossorigin"),j("iframe","sandbox seamless allowfullscreen")),dj(hj("a form meter progress dfn"),function(a){h[a]&&delete h[a].children[a]}),delete h.caption.children.table,delete h.script,aj[a]=h,h)},jj=function(a,b){var c;return a&&(c={},"string"==typeof a&&(a={"*":a}),dj(a,function(a,d){c[d]=c[d.toUpperCase()]="map"===b?cj(a,/[, ]/):fj(a,/[, ]/)})),c},kj=function(a,b,c,d){var e=function(a){return a=parseInt(a,10).toString(16),a.length>1?a:"0"+a};return"#"+e(b)+e(c)+e(d)},lj=Gd.each,mj=Gd.grep,nj=Lb.ie,oj=/^([a-z0-9],?)+$/i,pj=/^[ \t\r\n]*$/,qj=function(a,b,c){var d={},e=b.keep_values,f={set:function(a,d,e){b.url_converter&&(d=b.url_converter.call(b.url_converter_scope||c(),d,e,a[0])),a.attr("data-mce-"+e,d).attr(e,d)},get:function(a,b){return a.attr("data-mce-"+b)||a.attr(b)}};return d={style:{set:function(a,b){return null!==b&&"object"==typeof b?void a.css(b):(e&&a.attr("data-mce-style",b),void a.attr("style",b))},get:function(b){var c=b.attr("data-mce-style")||b.attr("style");return c=a.serialize(a.parse(c),b[0].nodeName)}}},e&&(d.href=d.src=f),d},rj=function(a,b){var c=b.attr("style"),d=a.serialize(a.parse(c),b[0].nodeName);d||(d=null),b.attr("data-mce-style",d)},sj=function(a,b){var c,d,e=0;if(a)for(c=a.nodeType,a=a.previousSibling;a;a=a.previousSibling)d=a.nodeType,(!b||3!==d||d!==c&&a.nodeValue.length)&&(e++,c=d);return e};!function(a){a.DOM=a(document),a.nodeIndex=sj}(x||(x={}));var tj=x,uj=tj.DOM,vj=Gd.each,wj=Gd.grep,xj=function(a){return"function"==typeof a},yj=function(){var a=0,b=1,c=2,d=3,e={},f=[],g={},h=[],i=0,j=function(a,b,c){var d,e,f=uj,g=function(){f.remove(e),d&&(d.onreadystatechange=d.onload=d=null),b()},h=function(){xj(c)?c():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+a)};e=f.uniqueId(),d=document.createElement("script"),d.id=e,d.type="text/javascript",d.src=Gd._addCacheSuffix(a),"onreadystatechange"in d?d.onreadystatechange=function(){/loaded|complete/.test(d.readyState)&&g()}:d.onload=g,d.onerror=h,(document.getElementsByTagName("head")[0]||document.body).appendChild(d)};this.isDone=function(a){return e[a]===c},this.markDone=function(a){e[a]=c},this.add=this.load=function(b,c,d,h){var i=e[b];void 0===i&&(f.push(b),e[b]=a),c&&(g[b]||(g[b]=[]),g[b].push({success:c,failure:h,scope:d||this}))},this.remove=function(a){delete e[a],delete g[a]},this.loadQueue=function(a,b,c){this.loadScripts(f,a,b,c)},this.loadScripts=function(a,f,k,l){var m,n=[],o=function(a,b){vj(g[b],function(b){xj(b[a])&&b[a].call(b.scope)}),g[b]=void 0};h.push({success:f,failure:l,scope:k||this}),(m=function(){var f=wj(a);if(a.length=0,vj(f,function(a){return e[a]===c?void o("success",a):e[a]===d?void o("failure",a):void(e[a]!==b&&(e[a]=b,i++,j(a,function(){e[a]=c,i--,o("success",a),m()},function(){e[a]=d,i--,n.push(a),o("failure",a),m()})))}),!i){var g=h.slice(0);h.length=0,vj(g,function(a){0===n.length?xj(a.success)&&a.success.call(a.scope):xj(a.failure)&&a.failure.call(a.scope,n)})}})()}};yj.ScriptLoader=new yj;var zj=Gd.each;!function(a){a.PluginManager=a(),a.ThemeManager=a()}(y||(y={}));var Aj="\ufeff",Bj=function(a){return a===Aj},Cj=function(a){return a.replace(new RegExp(Aj,"g"),"")},Dj={isZwsp:Bj,ZWSP:Aj,trim:Cj},Ej=Ii.isElement,Fj=Ii.isText,Gj=function(a){return Fj(a)&&(a=a.parentNode),Ej(a)&&a.hasAttribute("data-mce-caret")},Hj=function(a){return Fj(a)&&Dj.isZwsp(a.data)},Ij=function(a){return Gj(a)||Hj(a)},Jj=function(a){return a.firstChild!==a.lastChild||!Ii.isBr(a.firstChild)},Kj=function(a,b){var c,d,e,f;if(c=a.ownerDocument,e=c.createTextNode(Dj.ZWSP),f=a.parentNode,b){if(d=a.previousSibling,Fj(d)){if(Ij(d))return d;if(Qj(d))return d.splitText(d.data.length-1)}f.insertBefore(e,a)}else{if(d=a.nextSibling,Fj(d)){if(Ij(d))return d;if(Pj(d))return d.splitText(1),d}a.nextSibling?f.insertBefore(e,a.nextSibling):f.appendChild(e)}return e},Lj=function(a){var b=a.container();return a&&Ii.isText(b)&&b.data.charAt(a.offset())===Dj.ZWSP},Mj=function(a){var b=a.container();return a&&Ii.isText(b)&&b.data.charAt(a.offset()-1)===Dj.ZWSP},Nj=function(){var a=document.createElement("br");return a.setAttribute("data-mce-bogus","1"),a},Oj=function(a,b,c){var d,e,f;return d=b.ownerDocument,e=d.createElement(a),e.setAttribute("data-mce-caret",c?"before":"after"),e.setAttribute("data-mce-bogus","all"),e.appendChild(Nj()),f=b.parentNode,c?f.insertBefore(e,b):b.nextSibling?f.insertBefore(e,b.nextSibling):f.appendChild(e),e},Pj=function(a){return Fj(a)&&a.data[0]===Dj.ZWSP},Qj=function(a){return Fj(a)&&a.data[a.data.length-1]===Dj.ZWSP},Rj=function(a){var b=a.getElementsByTagName("br"),c=b[b.length-1];Ii.isBogus(c)&&c.parentNode.removeChild(c)},Sj=function(a){return a&&a.hasAttribute("data-mce-caret")?(Rj(a),a.removeAttribute("data-mce-caret"),a.removeAttribute("data-mce-bogus"),a.removeAttribute("style"),a.removeAttribute("_moz_abspos"),a):null},Tj=function(a){return Gj(a.startContainer)},Uj=Ii.isContentEditableTrue,Vj=Ii.isContentEditableFalse,Wj=Ii.isBr,Xj=Ii.isText,Yj=Ii.matchNodeNames("script style textarea"),Zj=Ii.matchNodeNames("img input textarea hr iframe video audio object"),$j=Ii.matchNodeNames("table"),_j=Ij,ak=function(a){return!_j(a)&&(Xj(a)?!Yj(a.parentNode):Zj(a)||Wj(a)||$j(a)||ck(a))},bk=function(a){return Ii.isElement(a)&&"true"===a.getAttribute("unselectable")},ck=function(a){return bk(a)===!1&&Vj(a)},dk=function(a,b){for(a=a.parentNode;a&&a!==b;a=a.parentNode){if(ck(a))return!1;if(Uj(a))return!0}return!0},ek=function(a){return!!ck(a)&&td.reduce(a.getElementsByTagName("*"),function(a,b){return a||Uj(b)},!1)!==!0},fk=function(a){return Zj(a)||ek(a)},gk=function(a,b){return ak(a)&&dk(a,b)},hk=Math.round,ik=function(a){return a?{left:hk(a.left),top:hk(a.top),bottom:hk(a.bottom),right:hk(a.right),width:hk(a.width),height:hk(a.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},jk=function(a,b){return a=ik(a),b?a.right=a.left:(a.left=a.left+a.width,a.right=a.left),a.width=0,a},kk=function(a,b){return a.left===b.left&&a.top===b.top&&a.bottom===b.bottom&&a.right===b.right},lk=function(a,b,c){return a>=0&&a<=Math.min(b.height,c.height)/2},mk=function(a,b){return a.bottom-a.height/2<b.top||!(a.top>b.bottom)&&lk(b.top-a.bottom,a,b)},nk=function(a,b){return a.top>b.bottom||!(a.bottom<b.top)&&lk(b.bottom-a.top,a,b)},ok=function(a,b,c){return b>=a.left&&b<=a.right&&c>=a.top&&c<=a.bottom},pk=function(a,b){return b.left>a.left&&b.right<a.right?0:b.left<a.left?b.left-a.left:b.right-a.right},qk=function(a,b){return b.top>a.top&&b.bottom<a.bottom?0:b.top<a.top?b.top-a.top:b.bottom-a.bottom},rk=function(a,b){return{x:pk(a,b),y:qk(a,b)}},sk=function(a){var b=a.startContainer,c=a.startOffset;return b.hasChildNodes()&&a.endOffset===c+1?b.childNodes[c]:null},tk=function(a,b){return 1===a.nodeType&&a.hasChildNodes()&&(b>=a.childNodes.length&&(b=a.childNodes.length-1),a=a.childNodes[b]),a},uk=new RegExp("[Ì€-Í¯Òƒ-Ò‡Òˆ-Ò‰Ö‘-Ö½Ö¿×-×‚×„-×…×‡Ø-ØšÙ‹-ÙŸÙ°Û–-ÛœÛŸ-Û¤Û§-Û¨Ûª-Û­Ü‘Ü°-ÝŠÞ¦-Þ°ß«-ß³à –-à ™à ›-à £à ¥-à §à ©-à ­à¡™-à¡›à££-à¤‚à¤ºà¤¼à¥-à¥ˆà¥à¥‘-à¥—à¥¢-à¥£à¦à¦¼à¦¾à§-à§„à§à§—à§¢-à§£à¨-à¨‚à¨¼à©-à©‚à©‡-à©ˆà©‹-à©à©‘à©°-à©±à©µàª-àª‚àª¼à«-à«…à«‡-à«ˆà«à«¢-à«£à¬à¬¼à¬¾à¬¿à­-à­„à­à­–à­—à­¢-à­£à®‚à®¾à¯€à¯à¯—à°€à°¾-à±€à±†-à±ˆà±Š-à±à±•-à±–à±¢-à±£à²à²¼à²¿à³‚à³†à³Œ-à³à³•-à³–à³¢-à³£à´à´¾àµ-àµ„àµàµ—àµ¢-àµ£à·Šà·à·’-à·”à·–à·Ÿà¸±à¸´-à¸ºà¹‡-à¹Žàº±àº´-àº¹àº»-àº¼à»ˆ-à»à¼˜-à¼™à¼µà¼·à¼¹à½±-à½¾à¾€-à¾„à¾†-à¾‡à¾-à¾—à¾™-à¾¼à¿†á€­-á€°á€²-á€·á€¹-á€ºá€½-á€¾á˜-á™áž-á á±-á´á‚‚á‚…-á‚†á‚á‚á-áŸáœ’-áœ”áœ²-áœ´á’-á“á²-á³áž´-ážµáž·-áž½áŸ†áŸ‰-áŸ“áŸá ‹-á á¢©á¤ -á¤¢á¤§-á¤¨á¤²á¤¹-á¤»á¨—-á¨˜á¨›á©–á©˜-á©žá© á©¢á©¥-á©¬á©³-á©¼á©¿áª°-áª½áª¾á¬€-á¬ƒá¬´á¬¶-á¬ºá¬¼á­‚á­«-á­³á®€-á®á®¢-á®¥á®¨-á®©á®«-á®­á¯¦á¯¨-á¯©á¯­á¯¯-á¯±á°¬-á°³á°¶-á°·á³-á³’á³”-á³ á³¢-á³¨á³­á³´á³¸-á³¹á·€-á·µá·¼-á·¿â€Œ-â€âƒ-âƒœâƒ-âƒ âƒ¡âƒ¢-âƒ¤âƒ¥-âƒ°â³¯-â³±âµ¿â· -â·¿ã€ª-ã€­ã€®-ã€¯ã‚™-ã‚šê™¯ê™°-ê™²ê™´-ê™½êšž-êšŸê›°-ê›±ê ‚ê †ê ‹ê ¥-ê ¦ê£„ê£ -ê£±ê¤¦-ê¤­ê¥‡-ê¥‘ê¦€-ê¦‚ê¦³ê¦¶-ê¦¹ê¦¼ê§¥ê¨©-ê¨®ê¨±-ê¨²ê¨µ-ê¨¶ê©ƒê©Œê©¼êª°êª²-êª´êª·-êª¸êª¾-êª¿ê«ê«¬-ê«­ê«¶ê¯¥ê¯¨ê¯­ï¬žï¸€-ï¸ï¸ -ï¸¯ï¾ž-ï¾Ÿ]"),vk=function(a){return"string"==typeof a&&a.charCodeAt(0)>=768&&uk.test(a)},wk=[].slice,xk=function(a){return function(){return a}},yk=function(a){return function(b){return!a(b)}},zk=function(a,b){return function(c){return a(b(c))}},Ak=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=wk.call(arguments);return function(a){for(var b=0;b<c.length;b++)if(c[b](a))return!0;return!1}},Bk=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=wk.call(arguments);return function(a){for(var b=0;b<c.length;b++)if(!c[b](a))return!1;return!0}},Ck=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=wk.call(arguments);return d.length-1>=a.length?a.apply(this,d.slice(1)):function(){var a=d.concat([].slice.call(arguments));return Ck.apply(this,a)}},Dk=function(){},Ek={constant:xk,negate:yk,and:Bk,or:Ak,curry:Ck,compose:zk,noop:Dk},Fk=function(a){for(var b=[],c=function(a){b.push(a)},d=0;d<a.length;d++)a[d].each(c);return b},Gk=function(a,b){for(var c=0;c<a.length;c++){var d=b(a[c],c);if(d.isSome())return d}return Ka.none()},Hk=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];if(!e.isSome())return Ka.none();c.push(e.getOrDie())}return Ka.some(b.apply(null,c))},Ik={cat:Fk,findMap:Gk,liftN:Hk},Jk=Ii.isElement,Kk=ak,Lk=Ii.matchStyleValues("display","block table"),Mk=Ii.matchStyleValues("float","left right"),Nk=Ek.and(Jk,Kk,Ek.negate(Mk)),Ok=Ek.negate(Ii.matchStyleValues("white-space","pre pre-line pre-wrap")),Pk=Ii.isText,Qk=Ii.isBr,Rk=tj.nodeIndex,Sk=tk,Tk=function(a){return"createRange"in a?a.createRange():tj.DOM.createRng()},Uk=function(a){return a&&/[\r\n\t ]/.test(a)},Vk=function(a){return!!a.setStart&&!!a.setEnd},Wk=function(a){var b,c=a.startContainer,d=a.startOffset;return!!(Uk(a.toString())&&Ok(c.parentNode)&&Ii.isText(c)&&(b=c.data,Uk(b[d-1])||Uk(b[d+1])))},Xk=function(a){var b,c=a.ownerDocument,d=Tk(c),e=c.createTextNode("Â "),f=a.parentNode;return f.insertBefore(e,a),d.setStart(e,0),d.setEnd(e,1),b=ik(d.getBoundingClientRect()),f.removeChild(e),b},Yk=function(a){var b=a.startContainer,c=a.endContainer,d=a.startOffset,e=a.endOffset;if(b===c&&Ii.isText(c)&&0===d&&1===e){var f=a.cloneRange();return f.setEndAfter(c),$k(f)}return null},Zk=function(a){return 0===a.left&&0===a.right&&0===a.top&&0===a.bottom},$k=function(a){var b,c;return c=a.getClientRects(),b=ik(c.length>0?c[0]:a.getBoundingClientRect()),!Vk(a)&&Qk(a)&&Zk(b)?Xk(a):Zk(b)&&Vk(a)?Yk(a):b},_k=function(a,b){var c=jk(a,b);return c.width=1,c.right=c.left+1,c},al=function(a){var b,c,d=[],e=function(a){0!==a.height&&(d.length>0&&kk(a,d[d.length-1])||d.push(a))},f=function(a,b){var c=Tk(a.ownerDocument);if(b<a.data.length){if(vk(a.data[b]))return d;if(vk(a.data[b-1])&&(c.setStart(a,b),c.setEnd(a,b+1),!Wk(c)))return e(_k($k(c),!1)),d}b>0&&(c.setStart(a,b-1),c.setEnd(a,b),Wk(c)||e(_k($k(c),!1))),b<a.data.length&&(c.setStart(a,b),c.setEnd(a,b+1),Wk(c)||e(_k($k(c),!0)))};if(Pk(a.container()))return f(a.container(),a.offset()),d;if(Jk(a.container()))if(a.isAtEnd())c=Sk(a.container(),a.offset()),Pk(c)&&f(c,c.data.length),Nk(c)&&!Qk(c)&&e(_k($k(c),!1));else{if(c=Sk(a.container(),a.offset()),Pk(c)&&f(c,0),Nk(c)&&a.isAtEnd())return e(_k($k(c),!1)),d;b=Sk(a.container(),a.offset()-1),Nk(b)&&!Qk(b)&&(Lk(b)||Lk(c)||!Nk(c))&&e(_k($k(b),!1)),Nk(c)&&e(_k($k(c),!0))}return d};!function(a){a.fromRangeStart=function(b){return a(b.startContainer,b.startOffset)},a.fromRangeEnd=function(b){return a(b.endContainer,b.endOffset)},a.after=function(b){return a(b.parentNode,Rk(b)+1)},a.before=function(b){return a(b.parentNode,Rk(b))},a.isAbove=function(a,b){return Ik.liftN([rb.head(b.getClientRects()),rb.last(a.getClientRects())],mk).getOr(!1)},a.isBelow=function(a,b){return Ik.liftN([rb.last(b.getClientRects()),rb.head(a.getClientRects())],nk).getOr(!1)},a.isAtStart=function(a){return!!a&&a.isAtStart()},a.isAtEnd=function(a){return!!a&&a.isAtEnd()},a.isTextPosition=function(a){return!!a&&Ii.isText(a.container())},a.isElementPosition=function(b){return a.isTextPosition(b)===!1}}(z||(z={}));var bl,cl=z,dl=Ii.isElement,el=Ii.isText,fl=function(a){var b=a.parentNode;b&&b.removeChild(a)},gl=function(a){try{return a.nodeValue}catch(b){return""}},hl=function(a,b){0===b.length?fl(a):a.nodeValue=b},il=function(a){var b=Dj.trim(a);return{count:a.length-b.length,text:b}},jl=function(a,b){return pl(a),b},kl=function(a,b){var c=il(a.data.substr(0,b.offset())),d=il(a.data.substr(b.offset())),e=c.text+d.text;return e.length>0?(hl(a,e),cl(a,b.offset()-c.count)):b},ll=function(a,b){var c=b.container(),d=rb.indexOf(rb.from(c.childNodes),a).map(function(a){return a<b.offset()?cl(c,b.offset()-1):b}).getOr(b);return pl(a),d},ml=function(a,b){return el(a)&&b.container()===a?kl(a,b):jl(a,b)},nl=function(a,b){return b.container()===a.parentNode?ll(a,b):jl(a,b)},ol=function(a,b){return cl.isTextPosition(b)?ml(a,b):nl(a,b)},pl=function(a){if(dl(a)&&Ij(a)&&(Jj(a)?a.removeAttribute("data-mce-caret"):fl(a)),el(a)){var b=Dj.trim(gl(a));hl(a,b)}},ql={removeAndReposition:ol,remove:pl},rl=function(a,b,c){var d=a?cl.before(c):cl.after(c);return yl(a,b,d)},sl=function(a){return Ii.isBr(a)?cl.before(a):cl.after(a)},tl=function(a){return cl.isTextPosition(a)?0===a.offset():ak(a.getNode())},ul=function(a){if(cl.isTextPosition(a)){var b=a.container();return a.offset()===b.data.length}return ak(a.getNode(!0))},vl=function(a,b){return!cl.isTextPosition(a)&&!cl.isTextPosition(b)&&a.getNode()===b.getNode(!0)},wl=function(a){return!cl.isTextPosition(a)&&Ii.isBr(a.getNode())},xl=function(a,b,c){return a?!vl(b,c)&&!wl(b)&&ul(b)&&tl(c):!vl(c,b)&&tl(b)&&ul(c)},yl=function(a,b,c){var d=ho(b);return Ka.from(a?d.next(c):d.prev(c))},zl=function(a,b,c){return yl(a,b,c).bind(function(d){return Gn(c,d,b)&&xl(a,c,d)?yl(a,b,d):Ka.some(d)})},Al=function(a,b){var c=a?b.firstChild:b.lastChild;return Ii.isText(c)?Ka.some(cl(c,a?0:c.data.length)):c?ak(c)?Ka.some(a?cl.before(c):sl(c)):rl(a,b,c):Ka.none()},Bl={fromPosition:yl,nextPosition:Da.curry(yl,!0),prevPosition:Da.curry(yl,!1),navigate:zl,positionIn:Al,firstPositionIn:Da.curry(Al,!0),lastPositionIn:Da.curry(Al,!1)},Cl=Ii.isContentEditableTrue,Dl=Ii.isContentEditableFalse,El=function(a,b,c,d,e){return b._selectionOverrides.showCaret(a,c,d,e)},Fl=function(a){var b=a.ownerDocument.createRange();return b.selectNode(a),b},Gl=function(a,b){var c=a.fire("BeforeObjectSelected",{target:b});return c.isDefaultPrevented()?null:Fl(b)},Hl=function(a,b,c){var d=Nn(1,a.getBody(),b),e=cl.fromRangeStart(d),f=e.getNode();if(Dl(f))return El(1,a,f,!e.isAtEnd(),!1);var g=e.getNode(!0);if(Dl(g))return El(1,a,g,!1,!1);var h=a.dom.getParent(e.getNode(),function(a){return Dl(a)||Cl(a)});return Dl(h)?El(1,a,h,!1,c):null},Il=function(a,b,c){if(!b||!b.collapsed)return b;var d=Hl(a,b,c);return d?d:b};!function(a){a[a.Br=0]="Br",a[a.Block=1]="Block",a[a.Wrap=2]="Wrap",a[a.Eol=3]="Eol"}(bl||(bl={}));var Jl,Kl=function(a,b){return a===Jl.Backwards?b.reverse():b},Ll=function(a,b,c){return a===Jl.Forwards?b.next(c):b.prev(c)},Ml=function(a,b,c,d){return Ii.isBr(d.getNode(b===Jl.Forwards))?bl.Br:Gn(c,d)===!1?bl.Block:bl.Wrap},Nl=function(a,b,c,d){for(var e,f=ho(c),g=d,h=[];g&&(e=Ll(b,f,g));){if(Ii.isBr(e.getNode(!1)))return b===Jl.Forwards?{positions:Kl(b,h).concat([e]),breakType:bl.Br,breakAt:Ka.some(e)}:{positions:Kl(b,h),breakType:bl.Br,breakAt:Ka.some(e)};if(e.isVisible()){if(a(g,e)){var i=Ml(c,b,g,e);return{positions:Kl(b,h),breakType:i,breakAt:Ka.some(e)}}h.push(e),g=e}else g=e}return{positions:Kl(b,h),breakType:bl.Eol,breakAt:Ka.none()}},Ol=function(a,b,c,d){return b(c,d).breakAt.map(function(d){var e=b(c,d).positions;return a===Jl.Backwards?e.concat(d):[d].concat(e)}).getOr([])},Pl=function(a,b){return rb.foldl(a,function(a,c){return a.fold(function(){return Ka.some(c)},function(d){return Ik.liftN([rb.head(d.getClientRects()),rb.head(c.getClientRects())],function(a,e){var f=Math.abs(b-a.left),g=Math.abs(b-e.left);return g<=f?c:d}).or(a)})},Ka.none())},Ql=function(a,b){return rb.head(b.getClientRects()).bind(function(b){return Pl(a,b.left)})},Rl=Da.curry(Nl,z.isAbove,-1),Sl=Da.curry(Nl,z.isBelow,1),Tl=Da.curry(Ol,-1,Rl),Ul=Da.curry(Ol,1,Sl),Vl=function(a){return Bl.firstPositionIn(a).map(function(b){return[b].concat(Sl(a,b).positions)}).getOr([])},Wl=function(a){return Bl.lastPositionIn(a).map(function(b){return Rl(a,b).positions.concat(b)}).getOr([])},Xl=function(a){return _l(lg.body(),a)},Yl=function(a,b,c){return rb.filter(Bh.parents(a,c),b)},Zl=function(a,b){return rb.filter(Bh.siblings(a),b)},$l=function(a,b){return rb.filter(Bh.children(a),b)},_l=function(a,b){var c=[];return rb.each(Bh.children(a),function(a){b(a)&&(c=c.concat([a])),c=c.concat(_l(a,b))}),c},am={all:Xl,ancestors:Yl,siblings:Zl,children:$l,descendants:_l},bm=function(a){return $g.all(a)},cm=function(a,b,c){return am.ancestors(a,function(a){return $g.is(a,b)},c)},dm=function(a,b){return am.siblings(a,function(a){return $g.is(a,b)})},em=function(a,b){return am.children(a,function(a){return $g.is(a,b)})},fm=function(a,b){return $g.all(b,a)},gm={all:bm,ancestors:cm,siblings:dm,children:em,descendants:fm},hm=function(a,b){return{left:a.left-b,top:a.top-b,right:a.right+2*b,bottom:a.bottom+2*b,width:a.width+b,height:a.height+b}},im=function(a,b){return rb.bind(b,function(b){var c=hm(b.getBoundingClientRect(),-1);return[{x:c.left,y:a(c),cell:b},{x:c.right,y:a(c),cell:b}]})},jm=function(a,b,c){return rb.foldl(a,function(a,d){return a.fold(function(){return Ka.some(d)},function(a){var e=Math.sqrt(Math.abs(a.x-b)+Math.abs(a.y-c)),f=Math.sqrt(Math.abs(d.x-b)+Math.abs(d.y-c));return Ka.some(f<e?d:a)})},Ka.none())},km=function(a,b,c,d,e){var f=gm.descendants(Ef.fromDom(c),"td,th").map(function(a){return a.dom()}),g=rb.filter(im(a,f),function(a){return b(a,e)});return jm(g,d,e).map(function(a){return a.cell})},lm=function(a){return a.bottom},mm=function(a){return a.top},nm=function(a,b){return a.y<b},om=function(a,b){return a.y>b},pm=Da.curry(km,lm,nm),qm=Da.curry(km,mm,om),rm=function(a,b){return rb.head(b.getClientRects()).bind(function(b){return pm(a,b.left,b.top)}).bind(function(a){return Ql(Wl(a),b)})},sm=function(a,b){return rb.last(b.getClientRects()).bind(function(b){return qm(a,b.left,b.top)}).bind(function(a){return Ql(Vl(a),b)})},tm=function(a){for(var b=0,c=0,d=a;d&&d.nodeType;)b+=d.offsetLeft||0,c+=d.offsetTop||0,d=d.offsetParent;return{x:b,y:c}},um=function(a,b,c){var d={elm:b,alignToTop:c};return a.fire("scrollIntoView",d),d.isDefaultPrevented()},vm=function(a,b,c){var d,e,f,g,h=a.dom,i=h.getRoot(),j=0;if(!um(a,b,c)&&Ii.isElement(b)){if(c===!1&&(j=b.offsetHeight),"BODY"!==i.nodeName){var k=a.selection.getScrollContainer();if(k)return d=tm(b).y-tm(k).y+j,g=k.clientHeight,f=k.scrollTop,void((d<f||d+25>f+g)&&(k.scrollTop=d<f?d:d-g+25))}e=h.getViewPort(a.getWin()),d=h.getPos(b).y+j,f=e.y,g=e.h,(d<e.y||d+25>f+g)&&a.getWin().scrollTo(0,d<f?d:d-g+25)}},wm=function(a){if(a.inline)return a.getBody().getBoundingClientRect();var b=a.getWin();return{left:0,right:b.innerWidth,top:0,bottom:b.innerHeight,width:b.innerWidth,height:b.innerHeight}},xm=function(a,b,c){a.inline?(a.getBody().scrollLeft+=b,a.getBody().scrollTop+=c):a.getWin().scrollBy(b,c)},ym=function(a,b){rb.head(z.fromRangeStart(b).getClientRects()).each(function(b){var c=wm(a),d=rk(c,b),e=4,f=d.x>0?d.x+e:d.x-e,g=d.y>0?d.y+e:d.y-e;xm(a,0!==d.x?f:0,0!==d.y?g:0)})},zm={scrollElementIntoView:vm,scrollRangeIntoView:ym},Am=function(a,b,c){var d=a.getParam(b,c);if(d.indexOf("=")!==-1){var e=a.getParam(b,"","hash");return e.hasOwnProperty(a.id)?e[a.id]:c}return d},Bm=function(a){return a.getParam("iframe_attrs",{})},Cm=function(a){return a.getParam("doctype","<!DOCTYPE html>")},Dm=function(a){return a.getParam("document_base_url","")},Em=function(a){return Am(a,"body_id","tinymce")},Fm=function(a){return Am(a,"body_class","")},Gm=function(a){return a.getParam("content_security_policy","");
},Hm=function(a){return a.getParam("br_in_pre",!0)},Im=function(a){if(a.getParam("force_p_newlines",!1))return"p";var b=a.getParam("forced_root_block","p");return b===!1?"":b},Jm=function(a){return a.getParam("forced_root_block_attrs",{})},Km=function(a){return a.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},Lm=function(a){return a.getParam("no_newline_selector","")},Mm=function(a){return a.getParam("keep_styles",!0)},Nm=function(a){return a.getParam("end_container_on_empty_block",!1)},Om=function(a){return Gd.explode(a.getParam("font_size_style_values",""))},Pm=function(a){return Gd.explode(a.getParam("font_size_classes",""))},Qm={getIframeAttrs:Bm,getDocType:Cm,getDocumentBaseUrl:Dm,getBodyId:Em,getBodyClass:Fm,getContentSecurityPolicy:Gm,shouldPutBrInPre:Hm,getForcedRootBlock:Im,getForcedRootBlockAttrs:Jm,getBrNewLineSelector:Km,getNoNewLineSelector:Lm,shouldKeepStyles:Mm,shouldEndContainerOnEmptyBlock:Nm,getFontStyleValues:Om,getFontSizeClasses:Pm},Rm=function(a,b){var c=Bh.parent(a);c.each(function(c){c.dom().insertBefore(b.dom(),a.dom())})},Sm=function(a,b){var c=Bh.nextSibling(a);c.fold(function(){var c=Bh.parent(a);c.each(function(a){Um(a,b)})},function(a){Rm(a,b)})},Tm=function(a,b){var c=Bh.firstChild(a);c.fold(function(){Um(a,b)},function(c){a.dom().insertBefore(b.dom(),c.dom())})},Um=function(a,b){a.dom().appendChild(b.dom())},Vm=function(a,b,c){Bh.child(a,c).fold(function(){Um(a,b)},function(a){Rm(a,b)})},Wm=function(a,b){Rm(a,b),Um(b,a)},Xm={before:Rm,after:Sm,prepend:Tm,append:Um,appendAt:Vm,wrap:Wm},Ym=yf.detect().browser,Zm=function(){return Ym.isIE()||Ym.isEdge()||Ym.isFirefox()},$m=function(a,b){a.selection.setRng(b),zm.scrollRangeIntoView(a,b)},_m=function(a,b,c){var d=a(b,c);return d.breakType===bl.Wrap&&0===d.positions.length?d.breakAt.map(function(c){return a(b,c).breakAt.isNone()}).getOr(!0):d.breakAt.isNone()},an=Ek.curry(_m,Rl),bn=Ek.curry(_m,Sl),cn=function(a,b,c){var d=cl.fromRangeStart(b);return Bl.positionIn(!a,c).map(function(a){return a.isEqual(d)}).getOr(!1)},dn=function(a,b,c,d){var e=a.selection.getRng(),f=b?1:-1;if(Zm()&&cn(b,e,c)){var g=El(f,a,c,!b,!0);return $m(a,g),!0}return!1},en=function(a,b,c){return rm(b,c).orThunk(function(){return rb.head(c.getClientRects()).bind(function(c){return Pl(Tl(a,cl.before(b)),c.left)})}).getOr(cl.before(b))},fn=function(a,b,c){return sm(b,c).orThunk(function(){return rb.head(c.getClientRects()).bind(function(c){return Pl(Ul(a,cl.after(b)),c.left)})}).getOr(cl.after(b))},gn=function(a,b){var c=b.getNode(a);return Ii.isElement(c)&&"TABLE"===c.nodeName?Ka.some(c):Ka.none()},hn=function(a,b,c,d){var e=Qm.getForcedRootBlock(b);e?b.undoManager.transact(function(){var d=Ef.fromTag(e);hg.setAll(d,Qm.getForcedRootBlockAttrs(b)),Xm.append(d,Ef.fromTag("br")),a?Xm.after(Ef.fromDom(c),d):Xm.before(Ef.fromDom(c),d);var f=b.dom.createRng();f.setStart(d.dom(),0),f.setEnd(d.dom(),0),$m(b,f)}):$m(b,d.toRange())},jn=function(a,b,c){var d=b?gn(!0,c):gn(!1,c),e=b===!1;d.fold(function(){return $m(a,c.toRange())},function(d){return Bl.positionIn(e,a.getBody()).filter(function(a){return a.isEqual(c)}).fold(function(){return $m(a,c.toRange())},function(e){return hn(b,a,d,c)})})},kn=function(a,b,c,d){var e=a.selection.getRng(),f=cl.fromRangeStart(e),g=a.getBody();if(!b&&an(d,f)){var h=en(g,c,f);return jn(a,b,h),!0}if(b&&bn(d,f)){var h=fn(g,c,f);return jn(a,b,h),!0}return!1},ln=function(a,b){return function(){return Ka.from(a.dom.getParent(a.selection.getNode(),"td,th")).bind(function(c){return Ka.from(a.dom.getParent(c,"table")).map(function(d){return dn(a,b,d,c)})}).getOr(!1)}},mn=function(a,b){return function(){return Ka.from(a.dom.getParent(a.selection.getNode(),"td,th")).bind(function(c){return Ka.from(a.dom.getParent(c,"table")).map(function(d){return kn(a,b,d,c)})}).getOr(!1)}},nn=function(a){var b=a,c=function(){return b},d=function(a){b=a},e=function(){return nn(c())};return{get:c,set:d,clone:e}},on=Ii.isContentEditableFalse,pn=function(a){return Ii.isElement(a)&&/^(TD|TH)$/i.test(a.tagName)},qn=function(a,b,c){var d,e,f,g,h,i=jk(b.getBoundingClientRect(),c);return"BODY"===a.tagName?(d=a.ownerDocument.documentElement,e=a.scrollLeft||d.scrollLeft,f=a.scrollTop||d.scrollTop):(h=a.getBoundingClientRect(),e=a.scrollLeft-h.left,f=a.scrollTop-h.top),i.left+=e,i.right+=e,i.top+=f,i.bottom+=f,i.width=1,g=b.offsetWidth-b.clientWidth,g>0&&(c&&(g*=-1),i.left+=g,i.right+=g),i},rn=function(a){var b,c,d,e,f;for(b=$d("*[contentEditable=false]",a),e=0;e<b.length;e++)c=b[e],d=c.previousSibling,Qj(d)&&(f=d.data,1===f.length?d.parentNode.removeChild(d):d.deleteData(f.length-1,1)),d=c.nextSibling,Pj(d)&&(f=d.data,1===f.length?d.parentNode.removeChild(d):d.deleteData(0,1))},sn=function(a,b,c){var d,e,f=nn(Ka.none()),g=function(c,d){var g,j;if(h(),pn(d))return null;if(!b(d))return e=Kj(d,c),j=d.ownerDocument.createRange(),on(e.nextSibling)?(j.setStart(e,0),j.setEnd(e,0)):(j.setStart(e,1),j.setEnd(e,1)),j;e=Oj("p",d,c),g=qn(a,d,c),$d(e).css("top",g.top);var k=$d('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(g).appendTo(a)[0];return f.set(Ka.some({caret:k,element:d,before:c})),f.get().each(function(a){c&&$d(a.caret).addClass("mce-visual-caret-before")}),i(),j=d.ownerDocument.createRange(),j.setStart(e,0),j.setEnd(e,0),j},h=function(){rn(a),e&&(ql.remove(e),e=null),f.get().each(function(a){$d(a.caret).remove(),f.set(Ka.none())}),clearInterval(d)},i=function(){d=Ub.setInterval(function(){c()?$d("div.mce-visual-caret",a).toggleClass("mce-visual-caret-hidden"):$d("div.mce-visual-caret",a).addClass("mce-visual-caret-hidden")},500)},j=function(){f.get().each(function(b){var c=qn(a,b.element,b.before);$d(b.caret).css(c)})},k=function(){return Ub.clearInterval(d)},l=function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"};return{show:g,hide:h,getCss:l,reposition:j,destroy:k}},tn=function(a){return on(a)||Ii.isTable(a)&&Zm()},un=Ii.isContentEditableFalse,vn=Ii.matchStyleValues("display","block table table-cell table-caption list-item"),wn=Ij,xn=Gj,yn=Ek.curry,zn=Ii.isElement,An=ak,Bn=function(a){return a>0},Cn=function(a){return a<0},Dn=function(a,b){for(var c;c=a(b);)if(!xn(c))return c;return null},En=function(a,b,c,d,e){var f=new u(a,d);if(Cn(b)){if((un(a)||xn(a))&&(a=Dn(f.prev,!0),c(a)))return a;for(;a=Dn(f.prev,e);)if(c(a))return a}if(Bn(b)){if((un(a)||xn(a))&&(a=Dn(f.next,!0),c(a)))return a;for(;a=Dn(f.next,e);)if(c(a))return a}return null},Fn=function(a,b){for(;a&&a!==b;){if(vn(a))return a;a=a.parentNode}return null},Gn=function(a,b,c){return Fn(a.container(),c)===Fn(b.container(),c)},Hn=function(a,b){var c,d;return b?(c=b.container(),d=b.offset(),zn(c)?c.childNodes[d+a]:null):null},In=function(a,b){var c=b.ownerDocument.createRange();return a?(c.setStartBefore(b),c.setEndBefore(b)):(c.setStartAfter(b),c.setEndAfter(b)),c},Jn=function(a,b,c){return Fn(b,a)===Fn(c,a)},Kn=function(a,b,c){var d,e;for(e=a?"previousSibling":"nextSibling";c&&c!==b;){if(d=c[e],wn(d)&&(d=d[e]),un(d)){if(Jn(b,d,c))return d;break}if(An(d))break;c=c.parentNode}return null},Ln=yn(In,!0),Mn=yn(In,!1),Nn=function(a,b,c){var d,e,f,g,h=yn(Kn,!0,b),i=yn(Kn,!1,b);if(e=c.startContainer,f=c.startOffset,Gj(e)){if(zn(e)||(e=e.parentNode),g=e.getAttribute("data-mce-caret"),"before"===g&&(d=e.nextSibling,tn(d)))return Ln(d);if("after"===g&&(d=e.previousSibling,tn(d)))return Mn(d)}if(!c.collapsed)return c;if(Ii.isText(e)){if(wn(e)){if(1===a){if(d=i(e))return Ln(d);if(d=h(e))return Mn(d)}if(a===-1){if(d=h(e))return Mn(d);if(d=i(e))return Ln(d)}return c}if(Qj(e)&&f>=e.data.length-1)return 1===a&&(d=i(e))?Ln(d):c;if(Pj(e)&&f<=1)return a===-1&&(d=h(e))?Mn(d):c;if(f===e.data.length)return d=i(e),d?Ln(d):c;if(0===f)return d=h(e),d?Mn(d):c}return c},On=function(a,b){var c=Hn(a,b);return un(c)&&!Ii.isBogusAll(c)},Pn=function(a,b){return Ii.isTable(Hn(a,b))},Qn=function(a,b){return Ka.from(Hn(a?0:-1,b)).filter(un)},Rn=function(a,b,c){var d=Nn(a,b,c);return a===-1?z.fromRangeStart(d):z.fromRangeEnd(d)},Sn=yn(On,0),Tn=yn(On,-1),Un=yn(Pn,0),Vn=yn(Pn,-1);!function(a){a[a.Backwards=-1]="Backwards",a[a.Forwards=1]="Forwards"}(Jl||(Jl={}));var Wn=Ii.isContentEditableFalse,Xn=Ii.isText,Yn=Ii.isElement,Zn=Ii.isBr,$n=ak,_n=fk,ao=gk,bo=function(a,b){for(var c=[];a&&a!==b;)c.push(a),a=a.parentNode;return c},co=function(a,b){return a.hasChildNodes()&&b<a.childNodes.length?a.childNodes[b]:null},eo=function(a,b){if(Bn(a)){if($n(b.previousSibling)&&!Xn(b.previousSibling))return cl.before(b);if(Xn(b))return cl(b,0)}if(Cn(a)){if($n(b.nextSibling)&&!Xn(b.nextSibling))return cl.after(b);if(Xn(b))return cl(b,b.data.length)}return Cn(a)?Zn(b)?cl.before(b):cl.after(b):cl.before(b)},fo=function(a,b){var c;return!!Ii.isBr(a)&&(c=go(1,cl.after(a),b),!!c&&!Gn(cl.before(a),cl.before(c),b))},go=function(a,b,c){var d,e,f,g,h;if(!Yn(c)||!b)return null;if(b.isEqual(cl.after(c))&&c.lastChild){if(h=cl.after(c.lastChild),Cn(a)&&$n(c.lastChild)&&Yn(c.lastChild))return Zn(c.lastChild)?cl.before(c.lastChild):h}else h=b;var i=h.container(),j=h.offset();if(Xn(i)){if(Cn(a)&&j>0)return cl(i,--j);if(Bn(a)&&j<i.length)return cl(i,++j);d=i}else{if(Cn(a)&&j>0&&(e=co(i,j-1),$n(e)))return!_n(e)&&(f=En(e,a,ao,e))?Xn(f)?cl(f,f.data.length):cl.after(f):Xn(e)?cl(e,e.data.length):cl.before(e);if(Bn(a)&&j<i.childNodes.length&&(e=co(i,j),$n(e)))return Zn(e)&&c.lastChild===e?null:fo(e,c)?go(a,cl.after(e),c):!_n(e)&&(f=En(e,a,ao,e))?Xn(f)?cl(f,0):cl.before(f):Xn(e)?cl(e,0):cl.after(e);d=e?e:h.getNode()}return(Bn(a)&&h.isAtEnd()||Cn(a)&&h.isAtStart())&&(d=En(d,a,Ek.constant(!0),c,!0),ao(d,c))?eo(a,d):(e=En(d,a,ao,c),g=td.last(td.filter(bo(i,c),Wn)),!g||e&&g.contains(e)?e?eo(a,e):null:h=Bn(a)?cl.after(g):cl.before(g))},ho=function(a){return{next:function(b){return go(Jl.Forwards,b,a)},prev:function(b){return go(Jl.Backwards,b,a)}}},io=function(a){return a.firstChild&&a.firstChild===a.lastChild},jo=function(a){return"br"===a.name||"Â "===a.value},ko=function(a,b){var c=a.getBlockElements();return c[b.name]&&io(b)&&jo(b.firstChild)},lo=function(a,b){var c=a.getNonEmptyElements();return b&&(b.isEmpty(c)||ko(a,b))},mo=function(a,b){var c=b.firstChild,d=b.lastChild;return c&&"meta"===c.name&&(c=c.next),d&&"mce_marker"===d.attr("id")&&(d=d.prev),lo(a,d)&&(d=d.prev),!(!c||c!==d)&&("ul"===c.name||"ol"===c.name)},no=function(a){var b=a.firstChild,c=a.lastChild;return b&&"META"===b.nodeName&&b.parentNode.removeChild(b),c&&"mce_marker"===c.id&&c.parentNode.removeChild(c),a},oo=function(a,b,c){var d=b.serialize(c),e=a.createFragment(d);return no(e)},po=function(a){return Gd.grep(a.childNodes,function(a){return"LI"===a.nodeName})},qo=function(a){return"Â "===a.data||Ii.isBr(a)},ro=function(a){return a&&a.firstChild&&a.firstChild===a.lastChild&&qo(a.firstChild)},so=function(a){return!a.firstChild||ro(a)},to=function(a){return a.length>0&&so(a[a.length-1])?a.slice(0,-1):a},uo=function(a,b){var c=a.getParent(b,a.isBlock);return c&&"LI"===c.nodeName?c:null},vo=function(a,b){return!!uo(a,b)},wo=function(a,b){var c=b.cloneRange(),d=b.cloneRange();return c.setStartBefore(a),d.setEndAfter(a),[c.cloneContents(),d.cloneContents()]},xo=function(a,b){var c=cl.before(a),d=ho(b),e=d.next(c);return e?e.toRange():null},yo=function(a,b){var c=cl.after(a),d=ho(b),e=d.prev(c);return e?e.toRange():null},zo=function(a,b,c,d){var e=wo(a,d),f=a.parentNode;return f.insertBefore(e[0],a),Gd.each(b,function(b){f.insertBefore(b,a)}),f.insertBefore(e[1],a),f.removeChild(a),yo(b[b.length-1],c)},Ao=function(a,b,c){var d=a.parentNode;return Gd.each(b,function(b){d.insertBefore(b,a)}),xo(a,c)},Bo=function(a,b,c,d){return d.insertAfter(b.reverse(),a),yo(b[0],c)},Co=function(a,b,c,d){var e=oo(b,a,d),f=uo(b,c.startContainer),g=to(po(e.firstChild)),h=1,i=2,j=b.getRoot(),k=function(a){var d=cl.fromRangeStart(c),e=ho(b.getRoot()),g=a===h?e.prev(d):e.next(d);return!g||uo(b,g.getNode())!==f};return k(h)?Ao(f,g,j):k(i)?Bo(f,g,j,b):zo(f,g,j,c)},Do={isListFragment:mo,insertAtCaret:Co,isParentBlockLi:vo,trimListItems:to,listItems:po},Eo=Ii.isText,Fo=Ii.isBogus,Go=tj.nodeIndex,Ho=function(a){var b=a.parentNode;return Fo(b)?Ho(b):b},Io=function(a){return a?td.reduce(a.childNodes,function(a,b){return Fo(b)&&"BR"!==b.nodeName?a=a.concat(Io(b)):a.push(b),a},[]):[]},Jo=function(a,b){for(;(a=a.previousSibling)&&Eo(a);)b+=a.data.length;return b},Ko=function(a){return function(b){return a===b}},Lo=function(a){var b,c,d;return b=Io(Ho(a)),c=td.findIndex(b,Ko(a),a),b=b.slice(0,c+1),d=td.reduce(b,function(a,c,d){return Eo(c)&&Eo(b[d-1])&&a++,a},0),b=td.filter(b,Ii.matchNodeNames(a.nodeName)),c=td.findIndex(b,Ko(a),a),c-d},Mo=function(a){var b;return b=Eo(a)?"text()":a.nodeName.toLowerCase(),b+"["+Lo(a)+"]"},No=function(a,b,c){var d=[];for(b=b.parentNode;b!==a&&(!c||!c(b));b=b.parentNode)d.push(b);return d},Oo=function(a,b){var c,d,e,f,g,h=[];return c=b.container(),d=b.offset(),Eo(c)?e=Jo(c,d):(f=c.childNodes,d>=f.length?(e="after",d=f.length-1):e="before",c=f[d]),h.push(Mo(c)),g=No(a,c),g=td.filter(g,Ek.negate(Ii.isBogus)),h=h.concat(td.map(g,function(a){return Mo(a)})),h.reverse().join("/")+","+e},Po=function(a,b,c){var d=Io(a);return d=td.filter(d,function(a,b){return!Eo(a)||!Eo(d[b-1])}),d=td.filter(d,Ii.matchNodeNames(b)),d[c]},Qo=function(a,b){for(var c,d=a,e=0;Eo(d);){if(c=d.data.length,b>=e&&b<=e+c){a=d,b-=e;break}if(!Eo(d.nextSibling)){a=d,b=c;break}e+=c,d=d.nextSibling}return Eo(a)&&b>a.data.length&&(b=a.data.length),cl(a,b)},Ro=function(a,b){var c,d,e;return b?(c=b.split(","),b=c[0].split("/"),e=c.length>1?c[1]:"before",d=td.reduce(b,function(a,b){return(b=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b))?("text()"===b[1]&&(b[1]="#text"),Po(a,b[1],parseInt(b[2],10))):null},a),d?Eo(d)?Qo(d,parseInt(e,10)):(e="after"===e?Go(d)+1:Go(d),cl(d.parentNode,e)):null):null},So=Ii.isContentEditableFalse,To=function(a,b,c){var d,e;for(e=a(b.data.slice(0,c)).length,d=b.previousSibling;d&&Ii.isText(d);d=d.previousSibling)e+=a(d.data).length;return e},Uo=function(a,b,c,d,e){var f,g=d[e?"startContainer":"endContainer"],h=d[e?"startOffset":"endOffset"],i=[],j=0,k=a.getRoot();for(Ii.isText(g)?i.push(c?To(b,g,h):h):(f=g.childNodes,h>=f.length&&f.length&&(j=1,h=Math.max(0,f.length-1)),i.push(a.nodeIndex(f[h],c)+j));g&&g!==k;g=g.parentNode)i.push(a.nodeIndex(g,c));return i},Vo=function(a,b,c,d){var e=b.dom,f={};return f.start=Uo(e,a,c,d,!0),b.isCollapsed()||(f.end=Uo(e,a,c,d,!1)),f},Wo=function(a){Ii.isText(a)&&0===a.data.length&&a.parentNode.removeChild(a)},Xo=function(a,b,c){var d=0;return Gd.each(a.select(b),function(a){if("all"!==a.getAttribute("data-mce-bogus"))return a!==c&&void d++}),d},Yo=function(a,b){var c,d,e,f=b?"start":"end";c=a[f+"Container"],d=a[f+"Offset"],Ii.isElement(c)&&"TR"===c.nodeName&&(e=c.childNodes,c=e[Math.min(b?d:d-1,e.length-1)],c&&(d=b?0:c.childNodes.length,a["set"+(b?"Start":"End")](c,d)))},Zo=function(a){return Yo(a,!0),Yo(a,!1),a},$o=function(a,b){var c;if(Ii.isElement(a)&&(a=tk(a,b),So(a)))return a;if(Ij(a)){if(Ii.isText(a)&&Gj(a)&&(a=a.parentNode),c=a.previousSibling,So(c))return c;if(c=a.nextSibling,So(c))return c}},_o=function(a){return $o(a.startContainer,a.startOffset)||$o(a.endContainer,a.endOffset)},ap=function(a,b,c){var d=c.getNode(),e=d?d.nodeName:null,f=c.getRng();if(So(d)||"IMG"===e)return{name:e,index:Xo(c.dom,e,d)};var g=_o(f);return g?(e=g.tagName,{name:e,index:Xo(c.dom,e,g)}):Vo(a,c,b,f)},bp=function(a){var b=a.getRng();return{start:Oo(a.dom.getRoot(),cl.fromRangeStart(b)),end:Oo(a.dom.getRoot(),cl.fromRangeEnd(b))}},cp=function(a){return{rng:a.getRng()}},dp=function(a,b,c){var d={"data-mce-type":"bookmark",id:b,style:"overflow:hidden;line-height:0px"};return c?a.create("span",d,"&#xFEFF;"):a.create("span",d)},ep=function(a,b){var c=a.dom,d=a.getRng(),e=c.uniqueId(),f=a.isCollapsed(),g=a.getNode(),h=g.nodeName;if("IMG"===h)return{name:h,index:Xo(c,h,g)};var i=Zo(d.cloneRange());if(!f){i.collapse(!1);var j=dp(c,e+"_end",b);i.insertNode(j),Wo(j.nextSibling)}d=Zo(d),d.collapse(!0);var k=dp(c,e+"_start",b);return d.insertNode(k),Wo(k.previousSibling),a.moveToBookmark({id:e,keep:1}),{id:e}},fp=function(a,b,c){return 2===b?ap(Dj.trim,c,a):3===b?bp(a):b?cp(a):ep(a,!1)},gp={getBookmark:fp,getUndoBookmark:Da.curry(ap,Da.identity,!0),getPersistentBookmark:ep},hp="_mce_caret",ip=function(a){return Ii.isElement(a)&&a.id===hp},jp=function(a,b){for(;b&&b!==a;){if(b.id===hp)return b;b=b.parentNode}return null},kp=function(a){return"string"==typeof a.start},lp=function(a){return a.hasOwnProperty("rng")},mp=function(a){return a.hasOwnProperty("id")},np=function(a){return a.hasOwnProperty("name")},op=function(a){return Gd.isArray(a.start)},pp=function(a,b){return!a.isBlock(b)||b.innerHTML||Lb.ie||(b.innerHTML='<br data-mce-bogus="1" />'),b},qp=function(a,b){var c,d;return c=a.createRng(),d=Ro(a.getRoot(),b.start),c.setStart(d.container(),d.offset()),d=Ro(a.getRoot(),b.end),c.setEnd(d.container(),d.offset()),c},rp=function(a,b){var c=a.ownerDocument.createTextNode(Dj.ZWSP);a.appendChild(c),b.setStart(c,0),b.setEnd(c,0)},sp=function(a){return a.hasChildNodes()===!1},tp=function(a,b){return Bl.lastPositionIn(a).fold(function(){return!1},function(a){return b.setStart(a.container(),a.offset()),b.setEnd(a.container(),a.offset()),!0})},up=function(a,b,c){return!(!sp(b)||!jp(a,b))&&(rp(b,c),!0)},vp=function(a,b,c,d){var e,f,g,h,i=c[b?"start":"end"],j=a.getRoot();if(i){for(g=i[0],f=j,e=i.length-1;e>=1;e--){if(h=f.childNodes,up(j,f,d))return!0;if(i[e]>h.length-1)return!!up(j,f,d)||tp(f,d);f=h[i[e]]}3===f.nodeType&&(g=Math.min(i[0],f.nodeValue.length)),1===f.nodeType&&(g=Math.min(i[0],f.childNodes.length)),b?d.setStart(f,g):d.setEnd(f,g)}return!0},wp=function(a){return Ii.isText(a)&&a.data.length>0},xp=function(a,b,c){var d,e,f,g,h,i,j=a.get(c.id+"_"+b),k=c.keep;if(j){if(d=j.parentNode,"start"===b?(k?j.hasChildNodes()?(d=j.firstChild,e=1):wp(j.nextSibling)?(d=j.nextSibling,e=0):wp(j.previousSibling)?(d=j.previousSibling,e=j.previousSibling.data.length):(d=j.parentNode,e=a.nodeIndex(j)+1):e=a.nodeIndex(j),h=d,i=e):(k?j.hasChildNodes()?(d=j.firstChild,e=1):wp(j.previousSibling)?(d=j.previousSibling,e=j.previousSibling.data.length):(d=j.parentNode,e=a.nodeIndex(j)):e=a.nodeIndex(j),h=d,i=e),!k){for(g=j.previousSibling,f=j.nextSibling,Gd.each(Gd.grep(j.childNodes),function(a){Ii.isText(a)&&(a.nodeValue=a.nodeValue.replace(/\uFEFF/g,""))});j=a.get(c.id+"_"+b);)a.remove(j,!0);g&&f&&g.nodeType===f.nodeType&&Ii.isText(g)&&!Lb.opera&&(e=g.nodeValue.length,g.appendData(f.nodeValue),a.remove(f),"start"===b?(h=g,i=e):(h=g,i=e))}return Ka.some(cl(h,i))}return Ka.none()},yp=function(a,b){return a.isSome()?a:b},zp=function(a,b){var c=a.createRng();return vp(a,!0,b,c)&&vp(a,!1,b,c)?Ka.some(c):Ka.none()},Ap=function(a,b){var c=xp(a,"start",b),d=xp(a,"end",b);return Ik.liftN([c,yp(d,c)],function(b,c){var d=a.createRng();return d.setStart(pp(a,b.container()),b.offset()),d.setEnd(pp(a,c.container()),c.offset()),d})},Bp=function(a,b){return Ka.from(a.select(b.name)[b.index]).map(function(b){var c=a.createRng();return c.selectNode(b),c})},Cp=function(a,b){var c=a.dom;if(b){if(op(b))return zp(c,b);if(kp(b))return Ka.some(qp(c,b));if(mp(b))return Ap(c,b);if(np(b))return Bp(c,b);if(lp(b))return Ka.some(b.rng)}return Ka.none()},Dp={resolve:Cp},Ep=function(a,b,c){return gp.getBookmark(a,b,c)},Fp=function(a,b){Dp.resolve(a,b).each(function(b){a.setRng(b)})},Gp=function(a){return Ii.isElement(a)&&"SPAN"===a.tagName&&"bookmark"===a.getAttribute("data-mce-type")},Hp={getBookmark:Ep,moveToBookmark:Fp,isBookmarkNode:Gp},Ip=Gd.each,Jp=function(a){this.compare=function(b,c){if(b.nodeName!==c.nodeName)return!1;var d=function(b){var c={};return Ip(a.getAttribs(b),function(d){var e=d.nodeName.toLowerCase();0!==e.indexOf("_")&&"style"!==e&&0!==e.indexOf("data-")&&(c[e]=a.getAttrib(b,e))}),c},e=function(a,b){var c,d;for(d in a)if(a.hasOwnProperty(d)){if(c=b[d],"undefined"==typeof c)return!1;if(a[d]!==c)return!1;delete b[d]}for(d in b)if(b.hasOwnProperty(d))return!1;return!0};return!!e(d(b),d(c))&&(!!e(a.parseStyle(a.getAttrib(b,"style")),a.parseStyle(a.getAttrib(c,"style")))&&(!Hp.isBookmarkNode(b)&&!Hp.isBookmarkNode(c)))}},Kp=function(a,b){rb.each(b,function(b){Xm.before(a,b)})},Lp=function(a,b){rb.each(b,function(c,d){var e=0===d?a:b[d-1];Xm.after(e,c)})},Mp=function(a,b){rb.each(b.slice().reverse(),function(b){Xm.prepend(a,b)})},Np=function(a,b){rb.each(b,function(b){Xm.append(a,b)})},Op={before:Kp,after:Lp,prepend:Mp,append:Np},Pp=function(a){a.dom().textContent="",rb.each(Bh.children(a),function(a){Qp(a)})},Qp=function(a){var b=a.dom();null!==b.parentNode&&b.parentNode.removeChild(b)},Rp=function(a){var b=Bh.children(a);b.length>0&&Op.before(a,b),Qp(a)},Sp={empty:Pp,remove:Qp,unwrap:Rp},Tp=A(Of.isText,"text"),Up=function(a){return Tp.get(a)},Vp=function(a){return Tp.getOption(a)},Wp=function(a,b){Tp.set(a,b)},Xp={get:Up,getOption:Vp,set:Wp},Yp=function(a){for(var b=[],c=a.dom();c;)b.push(Ef.fromDom(c)),c=c.lastChild;return b},Zp=function(a){var b=gm.descendants(a,"br"),c=rb.filter(Yp(a).slice(-1),ji);b.length===c.length&&rb.each(c,Sp.remove)},$p=function(a){Sp.empty(a),Xm.append(a,Ef.fromHtml('<br data-mce-bogus="1">'))},_p=function(a){return Of.isText(a)?"Â "===Xp.get(a):ji(a)},aq=function(a){return 1===rb.filter(Bh.children(a),_p).length},bq=function(a){Bh.lastChild(a).each(function(b){Bh.prevSibling(b).each(function(c){hi(a)&&ji(b)&&hi(c)&&Sp.remove(b)})})},cq={removeTrailingBr:Zp,fillWithPaddingBr:$p,isPaddedElement:aq,trimBlockTrailingBr:bq},dq=Gd.makeMap,eq=function(a,b,c,d){var e=document.createRange();return e.setStart(a,b),e.setEnd(c,d),e},fq=function(a){var b=cl.fromRangeStart(a),c=cl.fromRangeEnd(a),d=a.commonAncestorContainer;return Bl.fromPosition(!1,d,c).map(function(e){return!Gn(b,c,d)&&Gn(b,e,d)?eq(b.container(),b.offset(),e.container(),e.offset()):a}).getOr(a)},gq=function(a){return a.collapsed?a:fq(a)},hq={normalize:gq},iq=Ii.matchNodeNames("td th"),jq=function(a,b,c){if("all"===c.getAttribute("data-mce-bogus"))c.parentNode.insertBefore(a.dom.createFragment(b),c);else{var d=c.firstChild,e=c.lastChild;!d||d===e&&"BR"===d.nodeName?a.dom.setHTML(c,b):a.selection.setContent(b)}},kq=function(a,b){Ka.from(a.getParent(b,"td,th")).map(Ef.fromDom).each(cq.trimBlockTrailingBr)},lq=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=a.schema.getTextInlineElements(),q=a.selection,r=a.dom,s=function(a){var b,c,d;b=q.getRng(),c=b.startContainer,d=b.startOffset;var e=function(a){return c[a]&&3===c[a].nodeType};return 3===c.nodeType&&(d>0?a=a.replace(/^&nbsp;/," "):e("previousSibling")||(a=a.replace(/^ /,"&nbsp;")),d<c.length?a=a.replace(/&nbsp;(<br>|)$/," "):e("nextSibling")||(a=a.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),a},t=function(){var a,c,d;a=q.getRng(),c=a.startContainer,d=a.startOffset,3===c.nodeType&&a.collapsed&&("Â "===c.data[d]?(c.deleteData(d,1),/[\u00a0| ]$/.test(b)||(b+=" ")):"Â "===c.data[d-1]&&(c.deleteData(d-1,1),/[\u00a0| ]$/.test(b)||(b=" "+b)))},u=function(){if(o){var b=a.getBody(),c=new Jp(r);Gd.each(r.select("*[data-mce-fragment]"),function(a){for(var d=a.parentNode;d&&d!==b;d=d.parentNode)p[a.nodeName.toLowerCase()]&&c.compare(d,a)&&r.remove(a,!0)})}},v=function(a){for(var b=a;b=b.walk();)1===b.type&&b.attr("data-mce-fragment","1")},w=function(a){Gd.each(a.getElementsByTagName("*"),function(a){a.removeAttribute("data-mce-fragment")})},x=function(a){return!!a.getAttribute("data-mce-fragment")},y=function(b){return b&&!a.schema.getShortEndedElements()[b.nodeName]},z=function(b){var c,d,e,f=function(b){for(var c=a.getBody();b&&b!==c;b=b.parentNode)if("false"===a.dom.getContentEditable(b))return b;return null};if(b){if(q.scrollIntoView(b),c=f(b))return r.remove(b),void q.select(c);k=r.createRng(),l=b.previousSibling,l&&3===l.nodeType?(k.setStart(l,l.nodeValue.length),Lb.ie||(m=b.nextSibling,m&&3===m.nodeType&&(l.appendData(m.data),m.parentNode.removeChild(m)))):(k.setStartBefore(b),k.setEndBefore(b));var g=function(b){var c=cl.fromRangeStart(b),d=ho(a.getBody());if(c=d.next(c))return c.toRange()};d=r.getParent(b,r.isBlock),r.remove(b),d&&r.isEmpty(d)&&(a.$(d).empty(),k.setStart(d,0),k.setEnd(d,0),iq(d)||x(d)||!(e=g(k))?r.add(d,r.create("br",{"data-mce-bogus":"1"})):(k=e,r.remove(d))),q.setRng(k)}};if(/^ | $/.test(b)&&(b=s(b)),d=a.parser,o=c.merge,e=C({validate:a.settings.validate},a.schema),n='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',i={content:b,format:"html",selection:!0,paste:c.paste},i=a.fire("BeforeSetContent",i),i.isDefaultPrevented())return void a.fire("SetContent",{content:i.content,format:"html",selection:!0,paste:c.paste});b=i.content,b.indexOf("{$caret}")===-1&&(b+="{$caret}"),b=b.replace(/\{\$caret\}/,n),k=q.getRng();var A=k.startContainer||(k.parentElement?k.parentElement():null),B=a.getBody();A===B&&q.isCollapsed()&&r.isBlock(B.firstChild)&&y(B.firstChild)&&r.isEmpty(B.firstChild)&&(k=r.createRng(),k.setStart(B.firstChild,0),k.setEnd(B.firstChild,0),q.setRng(k)),q.isCollapsed()||(a.selection.setRng(hq.normalize(a.selection.getRng())),a.getDoc().execCommand("Delete",!1,null),t()),f=q.getNode();var D={context:f.nodeName.toLowerCase(),data:c.data,insert:!0};if(h=d.parse(b,D),c.paste===!0&&Do.isListFragment(a.schema,h)&&Do.isParentBlockLi(r,f))return k=Do.insertAtCaret(e,r,a.selection.getRng(),h),a.selection.setRng(k),void a.fire("SetContent",i);if(v(h),l=h.lastChild,"mce_marker"===l.attr("id"))for(j=l,l=l.prev;l;l=l.walk(!0))if(3===l.type||!r.isBlock(l.name)){a.schema.isValidChild(l.parent.name,"span")&&l.parent.insert(j,l,"br"===l.name);break}if(a._selectionOverrides.showBlockCaretContainer(f),D.invalid){for(q.setContent(n),f=q.getNode(),g=a.getBody(),9===f.nodeType?f=l=g:l=f;l!==g;)f=l,l=l.parentNode;b=f===g?g.innerHTML:r.getOuterHTML(f),b=e.serialize(d.parse(b.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return e.serialize(h)}))),f===g?r.setHTML(g,b):r.setOuterHTML(f,b)}else b=e.serialize(h),jq(a,b,f);u(),z(r.get("mce_marker")),w(a.getBody()),kq(a.dom,a.selection.getStart()),a.fire("SetContent",i),a.addVisual()},mq=function(a){var b;return"string"!=typeof a?(b=Gd.extend({paste:a.paste,data:{paste:a.paste}},a),{content:a.content,details:b}):{content:a,details:{}}},nq=function(a,b){var c=mq(b);lq(a,c.content,c.details)},oq={insertAtCaret:nq},pq=function(a){return uq(lg.body(),a)},qq=function(a,b,c){for(var d=a.dom(),e=Na.isFunction(c)?c:Da.constant(!1);d.parentNode;){d=d.parentNode;var f=Ef.fromDom(d);if(b(f))return Ka.some(f);if(e(f))break}return Ka.none()},rq=function(a,b,c){var d=function(a){return b(a)};return D(d,qq,a,b,c)},sq=function(a,b){var c=a.dom();return c.parentNode?tq(Ef.fromDom(c.parentNode),function(c){return!gh.eq(a,c)&&b(c)}):Ka.none()},tq=function(a,b){var c=rb.find(a.dom().childNodes,Da.compose(b,Ef.fromDom));return c.map(Ef.fromDom)},uq=function(a,b){var c=function(a){for(var d=0;d<a.childNodes.length;d++){if(b(Ef.fromDom(a.childNodes[d])))return Ka.some(Ef.fromDom(a.childNodes[d]));var e=c(a.childNodes[d]);if(e.isSome())return e}return Ka.none()};return c(a.dom())},vq={first:pq,ancestor:qq,closest:rq,sibling:sq,child:tq,descendant:uq},wq=Mg.immutable("sections","settings"),xq=yf.detect(),yq=xq.deviceType.isTouch(),zq=["lists","autolink","autosave"],Aq={theme:"mobile"},Bq=function(a){var b=Na.isArray(a)?a.join(" "):a,c=rb.map(Na.isString(b)?b.split(" "):[],pf.trim);return rb.filter(c,function(a){return a.length>0})},Cq=function(a){return rb.filter(a,Da.curry(rb.contains,zq))},Dq=function(a,b){var c=Yf.bifilter(b,function(b,c){return rb.contains(a,c)});return wq(c.t,c.f)},Eq=function(a,b,c){var d=a.sections(),e=d.hasOwnProperty(b)?d[b]:{};return Gd.extend({},c,e)},Fq=function(a,b){return a.sections().hasOwnProperty(b)},Gq=function(a,b,c){return{id:a,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:b,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:c.convertURL,url_converter_scope:c,ie7_compat:!0}},Hq=function(a,b){var c=b.external_plugins?b.external_plugins:{};return a&&a.external_plugins?Gd.extend({},a.external_plugins,c):c},Iq=function(a,b){return[].concat(Bq(a)).concat(Bq(b))},Jq=function(a,b,c,d){var e=Bq(c.forced_plugins),f=Bq(d.plugins),g=a&&Fq(b,"mobile")?Cq(f):f,h=Iq(e,g);return Gd.extend(d,{plugins:h.join(" ")})},Kq=function(a,b){var c=b.settings().inline;return a&&Fq(b,"mobile")&&!c},Lq=function(a,b,c,d){var e=Dq(["mobile"],d),f=Gd.extend(b,c,e.settings(),Kq(a,e)?Eq(e,"mobile",Aq):{},{validate:!0,content_editable:e.settings().inline,external_plugins:Hq(c,e.settings())});return Jq(a,e,c,f)},Mq=function(a,b,c,d,e){var f=Gq(b,c,a);return Lq(yq,f,d,e)},Nq=function(a,b,c){return Ka.from(b.settings[c]).filter(a)},Oq=Da.curry(Nq,Na.isString),Pq=function(a){var b={};return"string"==typeof a?rb.each(a.indexOf("=")>0?a.split(/[;,](?![^=;,]*(?:[;,]|$))/):a.split(","),function(a){var c=a.split("=");c.length>1?b[Gd.trim(c[0])]=Gd.trim(c[1]):b[Gd.trim(c[0])]=Gd.trim(c)}):b=a,b},Qq=function(a){return function(b){return Na.isArray(b)&&rb.forall(b,a)}},Rq=function(a,b,c,d){var e=b in a.settings?a.settings[b]:c;return"hash"===d?Pq(e):"string"===d?Nq(Na.isString,a,b).getOr(c):"number"===d?Nq(Na.isNumber,a,b).getOr(c):"boolean"===d?Nq(Na.isBoolean,a,b).getOr(c):"object"===d?Nq(Na.isObject,a,b).getOr(c):"array"===d?Nq(Na.isArray,a,b).getOr(c):"string[]"===d?Nq(Qq(Na.isString),a,b).getOr(c):"function"===d?Nq(Na.isFunction,a,b).getOr(c):e},Sq=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Tq=function(a){return Sq.test(a)},Uq=function(a,b){var c=Oq(a,"inline_boundaries_selector").getOr("a[href],code");return $g.is(Ef.fromDom(b),c)},Vq=function(a){return"rtl"===tj.DOM.getStyle(a,"direction",!0)||Tq(a.textContent)},Wq=function(a,b,c){return rb.filter(tj.DOM.getParents(c.container(),"*",b),a)},Xq=function(a,b,c){var d=Wq(a,b,c);return Ka.from(d[d.length-1])},Yq=function(a,b,c){var d=Fn(b,a),e=Fn(c,a);return d&&d===e},Zq=function(a){return Lj(a)||Mj(a)},$q=function(a,b){var c=b.container(),d=b.offset();return a?Hj(c)?Ii.isText(c.nextSibling)?cl(c.nextSibling,0):cl.after(c):Lj(b)?cl(c,d+1):b:Hj(c)?Ii.isText(c.previousSibling)?cl(c.previousSibling,c.previousSibling.data.length):cl.before(c):Mj(b)?cl(c,d-1):b},_q=Da.curry($q,!0),ar=Da.curry($q,!1),br={isInlineTarget:Uq,findRootInline:Xq,isRtl:Vq,isAtZwsp:Zq,normalizePosition:$q,normalizeForwards:_q,normalizeBackwards:ar,hasSameParentBlock:Yq},cr=function(a){return function(b){return gh.eq(a,Ef.fromDom(b.dom().parentNode))}},dr=function(a,b){return gh.contains(a,b)?vq.closest(b,function(a){return ki(a)||mi(a)},cr(a)):Ka.none()},er=function(a){var b=a.getBody(),c=b.firstChild&&a.dom.isBlock(b.firstChild)?b.firstChild:b;a.selection.setCursorLocation(c,0)},fr=function(a){a.dom.isEmpty(a.getBody())&&(a.setContent(""),er(a))},gr=function(a,b,c){return Ik.liftN([Bl.firstPositionIn(c),Bl.lastPositionIn(c)],function(d,e){var f=br.normalizePosition(!0,d),g=br.normalizePosition(!1,e),h=br.normalizePosition(!1,b);return a?Bl.nextPosition(c,h).map(function(a){return a.isEqual(g)&&b.isEqual(f)}).getOr(!1):Bl.prevPosition(c,h).map(function(a){
return a.isEqual(f)&&b.isEqual(g)}).getOr(!1)}).getOr(!0)},hr={getParentBlock:dr,paddEmptyBody:fr,willDeleteLastPositionInElement:gr},ir=function(a){return $g.one(a)},jr=function(a,b,c){return vq.ancestor(a,function(a){return $g.is(a,b)},c)},kr=function(a,b){return vq.sibling(a,function(a){return $g.is(a,b)})},lr=function(a,b){return vq.child(a,function(a){return $g.is(a,b)})},mr=function(a,b){return $g.one(b,a)},nr=function(a,b,c){return D($g.is,jr,a,b,c)},or={first:ir,ancestor:jr,sibling:kr,child:lr,descendant:mr,closest:nr},pr=function(a){return or.first(a).isSome()},qr=function(a,b,c){return or.ancestor(a,b,c).isSome()},rr=function(a,b){return or.sibling(a,b).isSome()},sr=function(a,b){return or.child(a,b).isSome()},tr=function(a,b){return or.descendant(a,b).isSome()},ur=function(a,b,c){return or.closest(a,b,c).isSome()},vr={any:pr,ancestor:qr,sibling:rr,child:sr,descendant:tr,closest:ur},wr=function(a,b){var c=Ef.fromDom(a),d=Ef.fromDom(b);return vr.ancestor(d,"pre,code",Da.curry(gh.eq,c))},xr=function(a,b){return Ii.isText(b)&&/^[ \t\r\n]*$/.test(b.data)&&wr(a,b)===!1},yr=function(a){return Ii.isElement(a)&&"A"===a.nodeName&&a.hasAttribute("name")},zr=function(a,b){return ak(b)&&xr(a,b)===!1||yr(b)||Ar(b)},Ar=Ii.hasAttribute("data-mce-bookmark"),Br=Ii.hasAttribute("data-mce-bogus"),Cr=Ii.hasAttributeValue("data-mce-bogus","all"),Dr=function(a){var b,c,d=0;if(zr(a,a))return!1;if(c=a.firstChild,!c)return!0;b=new u(c,a);do if(Cr(c))c=b.next(!0);else if(Br(c))c=b.next();else if(Ii.isBr(c))d++,c=b.next();else{if(zr(a,c))return!1;c=b.next()}while(c);return d<=1},Er=function(a){return Dr(a.dom())},Fr={isEmpty:Er},Gr=Mg.immutable("block","position"),Hr=Mg.immutable("from","to"),Ir=function(a,b){var c=Ef.fromDom(a),d=Ef.fromDom(b.container());return hr.getParentBlock(c,d).map(function(a){return Gr(a,b)})},Jr=function(a){return gh.eq(a.from().block(),a.to().block())===!1},Kr=function(a){return Bh.parent(a.from().block()).bind(function(b){return Bh.parent(a.to().block()).filter(function(a){return gh.eq(b,a)})}).isSome()},Lr=function(a){return Ii.isContentEditableFalse(a.from().block())===!1&&Ii.isContentEditableFalse(a.to().block())===!1},Mr=function(a,b,c){return Ii.isBr(c.position().getNode())&&Fr.isEmpty(c.block())===!1?Bl.positionIn(!1,c.block().dom()).bind(function(d){return d.isEqual(c.position())?Bl.fromPosition(b,a,d).bind(function(b){return Ir(a,b)}):Ka.some(c)}).getOr(c):c},Nr=function(a,b,c){var d=Ir(a,cl.fromRangeStart(c)),e=d.bind(function(c){return Bl.fromPosition(b,a,c.position()).bind(function(c){return Ir(a,c).map(function(c){return Mr(a,b,c)})})});return Ik.liftN([d,e],Hr).filter(function(a){return Jr(a)&&Kr(a)&&Lr(a)})},Or=function(a,b,c){return c.collapsed?Nr(a,b,c):Ka.none()},Pr={read:Or},Qr=function(a){return a.slice(0,-1)},Rr=function(a,b,c){return gh.contains(b,a)?Qr(Bh.parents(a,function(a){return c(a)||gh.eq(a,b)})):[]},Sr=function(a,b){return Rr(a,b,Da.constant(!1))},Tr=function(a,b){return[a].concat(Sr(a,b))},Ur={parentsUntil:Rr,parents:Sr,parentsAndSelf:Tr},Vr=function(a){var b=Bh.children(a);return rb.findIndex(b,hi).fold(function(){return b},function(a){return b.slice(0,a)})},Wr=function(a){var b=Vr(a);return rb.each(b,function(a){Sp.remove(a)}),b},Xr=function(a,b){Bl.positionIn(a,b.dom()).each(function(a){var b=a.getNode();Ii.isBr(b)&&Sp.remove(Ef.fromDom(b))})},Yr=function(a,b){var c=Ur.parentsAndSelf(b,a);return rb.find(c.reverse(),Fr.isEmpty).each(Sp.remove)},Zr=function(a,b){var c=Bh.parents(b,function(b){return gh.eq(b,a)});return Ka.from(c[c.length-2])},$r=function(a,b){return gh.contains(b,a)?Bh.parent(a).bind(function(c){return gh.eq(c,b)?Ka.some(a):Zr(b,a)}):Ka.none()},_r=function(a,b,c){if(Fr.isEmpty(c))return Sp.remove(c),Fr.isEmpty(b)&&cq.fillWithPaddingBr(b),Bl.firstPositionIn(b.dom());Xr(!0,b),Xr(!1,c);var d=Wr(b);return $r(b,c).fold(function(){Yr(a,b);var e=Bl.lastPositionIn(c.dom());return rb.each(d,function(a){Xm.append(c,a)}),e},function(e){var f=Bl.prevPosition(c.dom(),cl.before(e.dom()));return rb.each(d,function(a){Xm.before(e,a)}),Yr(a,b),f})},as=function(a,b,c,d){return b?_r(a,d,c):_r(a,c,d)},bs={mergeBlocks:as},cs=function(a,b){var c,d=Ef.fromDom(a.getBody());return c=Pr.read(d.dom(),b,a.selection.getRng()).bind(function(a){return bs.mergeBlocks(d,b,a.from().block(),a.to().block())}),c.each(function(b){a.selection.setRng(b.toRange())}),c.isSome()},ds={backspaceDelete:cs},es=function(a,b){var c=b.getRng();return Ik.liftN([hr.getParentBlock(a,Ef.fromDom(c.startContainer)),hr.getParentBlock(a,Ef.fromDom(c.endContainer))],function(d,e){return gh.eq(d,e)===!1&&(c.deleteContents(),bs.mergeBlocks(a,!0,d,e).each(function(a){b.setRng(a.toRange())}),!0)}).getOr(!1)},fs=function(a,b){var c=Ef.fromDom(b),d=Da.curry(gh.eq,a);return vq.ancestor(c,pi,d).isSome()},gs=function(a,b){return fs(a,b.startContainer)||fs(a,b.endContainer)},hs=function(a,b){var c=Bl.prevPosition(a.dom(),cl.fromRangeStart(b)).isNone(),d=Bl.nextPosition(a.dom(),cl.fromRangeEnd(b)).isNone();return!gs(a,b)&&c&&d},is=function(a){return a.setContent(""),a.selection.setCursorLocation(),!0},js=function(a){var b=Ef.fromDom(a.getBody()),c=a.selection.getRng();return hs(b,c)?is(a):es(b,a.selection)},ks=function(a,b){return!a.selection.isCollapsed()&&js(a)},ls={backspaceDelete:ks},ms=function(a){if(!Na.isArray(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");var b=[],c={};return rb.each(a,function(d,e){var f=Yf.keys(d);if(1!==f.length)throw new Error("one and only one name per case");var g=f[0],h=d[g];if(void 0!==c[g])throw new Error("duplicate key detected:"+g);if("cata"===g)throw new Error("cannot have a case named cata (sorry)");if(!Na.isArray(h))throw new Error("case arguments must be an array");b.push(g),c[g]=function(){var c=arguments.length;if(c!==h.length)throw new Error("Wrong number of arguments to case "+g+". Expected "+h.length+" ("+h+"), got "+c);for(var d=new Array(c),f=0;f<d.length;f++)d[f]=arguments[f];var i=function(a){var c=Yf.keys(a);if(b.length!==c.length)throw new Error("Wrong number of arguments to match. Expected: "+b.join(",")+"\nActual: "+c.join(","));var e=rb.forall(b,function(a){return rb.contains(c,a)});if(!e)throw new Error("Not all branches were specified when using match. Specified: "+c.join(", ")+"\nRequired: "+b.join(", "));return a[g].apply(null,d)};return{fold:function(){if(arguments.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);var b=arguments[e];return b.apply(null,d)},match:i,log:function(a){console.log(a,{constructors:b,constructor:g,params:d})}}}}),c},ns={generate:ms},os=function(a){return pi(Ef.fromDom(a))||mi(Ef.fromDom(a))},ps=ns.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),qs=function(a,b){var c=b.getNode(a===!1),d=a?"after":"before";return Ii.isElement(c)&&c.getAttribute("data-mce-caret")===d},rs=function(a,b,c,d){var e=function(b){return ii(Ef.fromDom(b))&&!Gn(c,d,a)};return Qn(!b,c).fold(function(){return Qn(b,d).fold(Da.constant(!1),e)},e)},ss=function(a,b,c,d){var e=d.getNode(b===!1);return hr.getParentBlock(Ef.fromDom(a),Ef.fromDom(c.getNode())).map(function(a){return Fr.isEmpty(a)?ps.remove(a.dom()):ps.moveToElement(e)}).orThunk(function(){return Ka.some(ps.moveToElement(e))})},ts=function(a,b,c){return Bl.fromPosition(b,a,c).bind(function(d){return os(d.getNode())?Ka.none():rs(a,b,c,d)?Ka.none():b&&Ii.isContentEditableFalse(d.getNode())?ss(a,b,c,d):b===!1&&Ii.isContentEditableFalse(d.getNode(!0))?ss(a,b,c,d):b&&Tn(c)?Ka.some(ps.moveToPosition(d)):b===!1&&Sn(c)?Ka.some(ps.moveToPosition(d)):Ka.none()})},us=function(a,b){return a&&Ii.isContentEditableFalse(b.nextSibling)?Ka.some(ps.moveToElement(b.nextSibling)):a===!1&&Ii.isContentEditableFalse(b.previousSibling)?Ka.some(ps.moveToElement(b.previousSibling)):Ka.none()},vs=function(a,b,c){return c.fold(function(a){return Ka.some(ps.remove(a))},function(a){return Ka.some(ps.moveToElement(a))},function(c){return Gn(b,c,a)?Ka.none():Ka.some(ps.moveToPosition(c))})},ws=function(a,b,c){return qs(b,c)?us(b,c.getNode(b===!1)).fold(function(){return ts(a,b,c)},Ka.some):ts(a,b,c).bind(function(b){return vs(a,c,b)})},xs=function(a,b,c){var d=Nn(b?1:-1,a,c),e=cl.fromRangeStart(d);return b===!1&&Tn(e)?Ka.some(ps.remove(e.getNode(!0))):b&&Sn(e)?Ka.some(ps.remove(e.getNode())):ws(a,b,e)},ys=function(a,b){var c=a.container(),d=a.offset();return cl.isTextPosition(a)===!1&&c===b.parentNode&&d>cl.before(b).offset()},zs=function(a,b){return ys(b,a)?cl(b.container(),b.offset()-1):b},As=function(a){return Ii.isText(a)?cl(a,0):cl.before(a)},Bs=function(a){return Ii.isText(a)?cl(a,a.data.length):cl.after(a)},Cs=function(a){return ak(a.previousSibling)?Ka.some(Bs(a.previousSibling)):a.previousSibling?Bl.lastPositionIn(a.previousSibling):Ka.none()},Ds=function(a){return ak(a.nextSibling)?Ka.some(As(a.nextSibling)):a.nextSibling?Bl.firstPositionIn(a.nextSibling):Ka.none()},Es=function(a,b){var c=cl.before(b.previousSibling?b.previousSibling:b.parentNode);return Bl.prevPosition(a,c).fold(function(){return Bl.nextPosition(a,cl.after(b))},Ka.some)},Fs=function(a,b){return Bl.nextPosition(a,cl.after(b)).fold(function(){return Bl.prevPosition(a,cl.before(b))},Ka.some)},Gs=function(a,b){return Cs(b).orThunk(function(){return Ds(b)}).orThunk(function(){return Es(a,b)})},Hs=function(a,b){return Ds(b).orThunk(function(){return Cs(b)}).orThunk(function(){return Fs(a,b)})},Is=function(a,b,c){return a?Hs(b,c):Gs(b,c)},Js=function(a,b,c){return Is(a,b,c).map(Da.curry(zs,c))},Ks=function(a,b,c){c.fold(function(){a.focus()},function(c){a.selection.setRng(c.toRange(),b)})},Ls=function(a){return function(b){return b.dom()===a}},Ms=function(a,b){return b&&a.schema.getBlockElements().hasOwnProperty(Of.name(b))},Ns=function(a){if(Fr.isEmpty(a)){var b=Ef.fromHtml('<br data-mce-bogus="1">');return Sp.empty(a),Xm.append(a,b),Ka.some(cl.before(b.dom()))}return Ka.none()},Os=function(a,b){return Ik.liftN([Bh.prevSibling(a),Bh.nextSibling(a),b],function(b,c,d){var e,f=b.dom(),g=c.dom();return Ii.isText(f)&&Ii.isText(g)?(e=f.data.length,f.appendData(g.data),Sp.remove(c),Sp.remove(a),d.container()===g?cl(f,e):d):(Sp.remove(a),d)}).orThunk(function(){return Sp.remove(a),b})},Ps=function(a,b,c){var d=Js(b,a.getBody(),c.dom()),e=vq.ancestor(c,Da.curry(Ms,a),Ls(a.getBody())),f=Os(c,d);a.dom.isEmpty(a.getBody())?(a.setContent(""),a.selection.setCursorLocation()):e.bind(Ns).fold(function(){Ks(a,b,f)},function(c){Ks(a,b,Ka.some(c))})},Qs={deleteElement:Ps},Rs=function(a,b){return function(c){return a._selectionOverrides.hideFakeCaret(),Qs.deleteElement(a,b,Ef.fromDom(c)),!0}},Ss=function(a,b){return function(c){var d=b?cl.before(c):cl.after(c);return a.selection.setRng(d.toRange()),!0}},Ts=function(a){return function(b){return a.selection.setRng(b.toRange()),!0}},Us=function(a,b){var c=xs(a.getBody(),b,a.selection.getRng()).map(function(c){return c.fold(Rs(a,b),Ss(a,b),Ts(a))});return c.getOr(!1)},Vs=function(a){rb.each(gm.descendants(a,".mce-offscreen-selection"),Sp.remove)},Ws=function(a,b){var c=a.selection.getNode();return!!Ii.isContentEditableFalse(c)&&(Vs(Ef.fromDom(a.getBody())),Qs.deleteElement(a,b,Ef.fromDom(a.selection.getNode())),hr.paddEmptyBody(a),!0)},Xs=function(a,b){for(;b&&b!==a;){if(Ii.isContentEditableTrue(b)||Ii.isContentEditableFalse(b))return b;b=b.parentNode}return null},Ys=function(a){var b,c=Xs(a.getBody(),a.selection.getNode());return Ii.isContentEditableTrue(c)&&a.dom.isBlock(c)&&a.dom.isEmpty(c)&&(b=a.dom.create("br",{"data-mce-bogus":"1"}),a.dom.setHTML(c,""),c.appendChild(b),a.selection.setRng(cl.before(b).toRange())),!0},Zs=function(a,b){return a.selection.isCollapsed()?Us(a,b):Ws(a,b)},$s={backspaceDelete:Zs,paddEmptyElement:Ys},_s=Ii.isText,at=function(a){return _s(a)&&a.data[0]===Dj.ZWSP},bt=function(a){return _s(a)&&a.data[a.data.length-1]===Dj.ZWSP},ct=function(a){return a.ownerDocument.createTextNode(Dj.ZWSP)},dt=function(a){if(_s(a.previousSibling))return bt(a.previousSibling)?a.previousSibling:(a.previousSibling.appendData(Dj.ZWSP),a.previousSibling);if(_s(a))return at(a)?a:(a.insertData(0,Dj.ZWSP),a);var b=ct(a);return a.parentNode.insertBefore(b,a),b},et=function(a){if(_s(a.nextSibling))return at(a.nextSibling)?a.nextSibling:(a.nextSibling.insertData(0,Dj.ZWSP),a.nextSibling);if(_s(a))return bt(a)?a:(a.appendData(Dj.ZWSP),a);var b=ct(a);return a.nextSibling?a.parentNode.insertBefore(b,a.nextSibling):a.parentNode.appendChild(b),b},ft=function(a,b){return a?dt(b):et(b)},gt=Da.curry(ft,!0),ht=Da.curry(ft,!1),it=function(a,b){return Ii.isText(a.container())?ft(b,a.container()):ft(b,a.getNode())},jt=function(a,b){var c=b.get();return c&&a.container()===c&&Hj(c)},kt=function(a,b){return b.fold(function(b){ql.remove(a.get());var c=gt(b);return a.set(c),Ka.some(cl(c,c.length-1))},function(b){return Bl.firstPositionIn(b).map(function(b){if(jt(b,a))return cl(a.get(),1);ql.remove(a.get());var c=it(b,!0);return a.set(c),cl(c,1)})},function(b){return Bl.lastPositionIn(b).map(function(b){if(jt(b,a))return cl(a.get(),a.get().length-1);ql.remove(a.get());var c=it(b,!1);return a.set(c),cl(c,c.length-1)})},function(b){ql.remove(a.get());var c=ht(b);return a.set(c),Ka.some(cl(c,1))})},lt={renderCaret:kt},mt=function(a,b){for(var c=0;c<a.length;c++){var d=a[c].apply(null,b);if(d.isSome())return d}return Ka.none()},nt={evaluateUntil:mt},ot=ns.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),pt=function(a,b){var c=Fn(b,a);return c?c:a},qt=function(a,b,c){var d=br.normalizeForwards(c),e=pt(b,d.container());return br.findRootInline(a,e,d).fold(function(){return Bl.nextPosition(e,d).bind(Da.curry(br.findRootInline,a,e)).map(function(a){return ot.before(a)})},Ka.none)},rt=function(a,b){return null===jp(a,b)},st=function(a,b,c){return br.findRootInline(a,b,c).filter(Da.curry(rt,b))},tt=function(a,b,c){var d=br.normalizeBackwards(c);return st(a,b,d).bind(function(a){var b=Bl.prevPosition(a,d);return b.isNone()?Ka.some(ot.start(a)):Ka.none()})},ut=function(a,b,c){var d=br.normalizeForwards(c);return st(a,b,d).bind(function(a){var b=Bl.nextPosition(a,d);return b.isNone()?Ka.some(ot.end(a)):Ka.none()})},vt=function(a,b,c){var d=br.normalizeBackwards(c),e=pt(b,d.container());return br.findRootInline(a,e,d).fold(function(){return Bl.prevPosition(e,d).bind(Da.curry(br.findRootInline,a,e)).map(function(a){return ot.after(a)})},Ka.none)},wt=function(a){return br.isRtl(yt(a))===!1},xt=function(a,b,c){var d=nt.evaluateUntil([qt,tt,ut,vt],[a,b,c]);return d.filter(wt)},yt=function(a){return a.fold(Da.identity,Da.identity,Da.identity,Da.identity)},zt=function(a){return a.fold(Da.constant("before"),Da.constant("start"),Da.constant("end"),Da.constant("after"))},At=function(a){return a.fold(ot.before,ot.before,ot.after,ot.after)},Bt=function(a){return a.fold(ot.start,ot.start,ot.end,ot.end)},Ct=function(a,b){return zt(a)===zt(b)&&yt(a)===yt(b)},Dt=function(a,b,c,d,e,f){return Ik.liftN([br.findRootInline(b,c,d),br.findRootInline(b,c,e)],function(b,d){return b!==d&&br.hasSameParentBlock(c,b,d)?ot.after(a?b:d):f}).getOr(f)},Et=function(a,b){return a.fold(Da.constant(!0),function(a){return!Ct(a,b)})},Ft=function(a,b,c,d,e){var f=br.normalizePosition(a,e),g=Bl.fromPosition(a,c,f).map(Da.curry(br.normalizePosition,a)),h=g.fold(function(){return d.map(At)},function(e){return xt(b,c,e).map(Da.curry(Dt,a,b,c,f,e)).filter(Da.curry(Et,d))});return h.filter(wt)},Gt=function(a,b){return a?b.fold(Da.compose(Ka.some,ot.start),Ka.none,Da.compose(Ka.some,ot.after),Ka.none):b.fold(Ka.none,Da.compose(Ka.some,ot.before),Ka.none,Da.compose(Ka.some,ot.end))},Ht=function(a,b,c,d){var e=br.normalizePosition(a,d),f=xt(b,c,e);return xt(b,c,e).bind(Da.curry(Gt,a)).orThunk(function(){return Ft(a,b,c,f,d)})},It={readLocation:xt,findLocation:Ht,prevLocation:Da.curry(Ht,!1),nextLocation:Da.curry(Ht,!0),getElement:yt,outside:At,inside:Bt},Jt=function(a){return Na.isFunction(a.selection.getSel().modify)},Kt=function(a,b,c){var d=a?1:-1;return b.setRng(cl(c.container(),c.offset()+d).toRange()),b.getSel().modify("move",a?"forward":"backward","word"),!0},Lt=function(a,b){var c=b.selection.getRng(),d=a?cl.fromRangeEnd(c):cl.fromRangeStart(c);return!!Jt(b)&&(a&&Lj(d)?Kt(!0,b.selection,d):!(a||!Mj(d))&&Kt(!1,b.selection,d))},Mt={hasSelectionModifyApi:Jt,moveByWord:Lt},Nt=function(a,b){var c=a.dom.createRng();c.setStart(b.container(),b.offset()),c.setEnd(b.container(),b.offset()),a.selection.setRng(c)},Ot=function(a){return a.settings.inline_boundaries!==!1},Pt=function(a,b){a?b.setAttribute("data-mce-selected","inline-boundary"):b.removeAttribute("data-mce-selected")},Qt=function(a,b,c){return lt.renderCaret(b,c).map(function(b){return Nt(a,b),c})},Rt=function(a,b,c){var d=a.getBody(),e=cl.fromRangeStart(a.selection.getRng()),f=Da.curry(br.isInlineTarget,a),g=It.findLocation(c,f,d,e);return g.bind(function(c){return Qt(a,b,c)})},St=function(a,b,c){var d=rb.filter(b.select('*[data-mce-selected="inline-boundary"]'),a),e=rb.filter(c,a);rb.each(rb.difference(d,e),Da.curry(Pt,!1)),rb.each(rb.difference(e,d),Da.curry(Pt,!0))},Tt=function(a,b){if(a.selection.isCollapsed()&&a.composing!==!0&&b.get()){var c=cl.fromRangeStart(a.selection.getRng());cl.isTextPosition(c)&&br.isAtZwsp(c)===!1&&(Nt(a,ql.removeAndReposition(b.get(),c)),b.set(null))}},Ut=function(a,b,c,d){if(b.selection.isCollapsed()){var e=rb.filter(d,a);rb.each(e,function(d){var e=cl.fromRangeStart(b.selection.getRng());It.readLocation(a,b.getBody(),e).bind(function(a){return Qt(b,c,a)})})}},Vt=function(a,b,c){return function(){return!!Ot(a)&&Rt(a,b,c).isSome()}},Wt=function(a,b,c){return function(){return!!Ot(b)&&Mt.moveByWord(a,b)}},Xt=function(a){var b=nn(null),c=Da.curry(br.isInlineTarget,a);return a.on("NodeChange",function(d){Ot(a)&&(St(c,a.dom,d.parents),Tt(a,b),Ut(c,a,b,d.parents))}),b},Yt=Da.curry(Wt,!0),Zt=Da.curry(Wt,!1),$t={move:Vt,moveNextWord:Yt,movePrevWord:Zt,setupSelectedState:Xt,setCaretPosition:Nt},_t=function(a){return a.settings.inline_boundaries!==!1},au=function(a,b){var c=document.createRange();return c.setStart(a.container(),a.offset()),c.setEnd(b.container(),b.offset()),c},bu=function(a){return Ik.liftN([Bl.firstPositionIn(a),Bl.lastPositionIn(a)],function(b,c){var d=br.normalizePosition(!0,b),e=br.normalizePosition(!1,c);return Bl.nextPosition(a,d).map(function(a){return a.isEqual(e)}).getOr(!0)}).getOr(!0)},cu=function(a,b){return function(c){return lt.renderCaret(b,c).map(function(b){return $t.setCaretPosition(a,b),!0}).getOr(!1)}},du=function(a,b,c,d){var e=a.getBody(),f=Da.curry(br.isInlineTarget,a);a.undoManager.ignore(function(){a.selection.setRng(au(c,d)),a.execCommand("Delete"),It.readLocation(f,e,cl.fromRangeStart(a.selection.getRng())).map(It.inside).map(cu(a,b))}),a.nodeChanged()},eu=function(a,b){var c=Fn(b,a);return c?c:a},fu=function(a,b,c,d){var e=eu(a.getBody(),d.container()),f=Da.curry(br.isInlineTarget,a),g=It.readLocation(f,e,d);return g.bind(function(a){return c?a.fold(Da.constant(Ka.some(It.inside(a))),Ka.none,Da.constant(Ka.some(It.outside(a))),Ka.none):a.fold(Ka.none,Da.constant(Ka.some(It.outside(a))),Ka.none,Da.constant(Ka.some(It.inside(a))))}).map(cu(a,b)).getOrThunk(function(){var h=Bl.navigate(c,e,d),i=h.bind(function(a){return It.readLocation(f,e,a)});return g.isSome()&&i.isSome()?br.findRootInline(f,e,d).map(function(b){return!!bu(b)&&(Qs.deleteElement(a,c,Ef.fromDom(b)),!0)}).getOr(!1):i.bind(function(e){return h.map(function(e){return c?du(a,b,d,e):du(a,b,e,d),!0})}).getOr(!1)})},gu=function(a,b,c){if(a.selection.isCollapsed()&&_t(a)){var d=cl.fromRangeStart(a.selection.getRng());return fu(a,b,c,d)}return!1},hu={backspaceDelete:gu},iu=Mg.immutable("start","end"),ju=Mg.immutable("rng","table","cells"),ku=ns.generate([{removeTable:["element"]},{emptyCells:["cells"]}]),lu=function(a){return Da.curry(gh.eq,a)},mu=function(a,b){return or.closest(Ef.fromDom(a),"td,th",b)},nu=function(a,b){return or.ancestor(a,"table",b)},ou=function(a){return gh.eq(a.start(),a.end())===!1},pu=function(a,b){return nu(a.start(),b).bind(function(c){return nu(a.end(),b).bind(function(a){return gh.eq(c,a)?Ka.some(c):Ka.none()})})},qu=function(a){return gm.descendants(a,"td,th")},ru=function(a,b){return nu(a.start(),b).bind(function(b){return rb.last(qu(b)).map(function(b){return iu(a.start(),b)})})},su=function(a,b){var c=mu(b.startContainer,a),d=mu(b.endContainer,a);return b.collapsed?Ka.none():Ik.liftN([c,d],iu).fold(function(){return c.fold(function(){return d.bind(function(b){return nu(b,a).bind(function(a){return rb.head(qu(a)).map(function(a){return iu(a,b)})})})},function(b){return nu(b,a).bind(function(a){return rb.last(qu(a)).map(function(a){return iu(b,a)})})})},function(b){return tu(a,b)?Ka.none():ru(b,a)})},tu=function(a,b){return pu(b,a).isSome()},uu=function(a,b){var c=mu(a.startContainer,b),d=mu(a.endContainer,b);return Ik.liftN([c,d],iu).filter(ou).filter(function(a){return tu(b,a)}).orThunk(function(){return su(b,a)})},vu=function(a,b){return pu(a,b).map(function(b){return ju(a,b,qu(b))})},wu=function(a,b){var c=lu(a);return uu(b,c).bind(function(a){return vu(a,c)})},xu=function(a,b){return rb.findIndex(a,function(a){return gh.eq(a,b)})},yu=function(a){return Ik.liftN([xu(a.cells(),a.rng().start()),xu(a.cells(),a.rng().end())],function(b,c){return a.cells().slice(b,c+1)})},zu=function(a){return yu(a).map(function(b){var c=a.cells();return b.length===c.length?ku.removeTable(a.table()):ku.emptyCells(b)})},Au=function(a){return ku.emptyCells(a)},Bu=function(a,b){return wu(a,b).bind(zu)},Cu={getActionFromRange:Bu,getActionFromCells:Au},Du=function(a){var b=[];if(a)for(var c=0;c<a.rangeCount;c++)b.push(a.getRangeAt(c));return b},Eu=function(a){return rb.bind(a,function(a){var b=sk(a);return b?[Ef.fromDom(b)]:[]})},Fu=function(a){return Du(a).length>1},Gu={getRanges:Du,getSelectedNodes:Eu,hasMultipleRanges:Fu},Hu=function(a){return rb.filter(Gu.getSelectedNodes(a),pi)},Iu=function(a){var b=gm.descendants(a,"td[data-mce-selected],th[data-mce-selected]");return b},Ju=function(a,b){var c=Iu(b),d=Hu(a);return c.length>0?c:d},Ku=function(a){return Ju(Gu.getRanges(a.selection.getSel()),Ef.fromDom(a.getBody()))},Lu={getCellsFromRanges:Hu,getCellsFromElement:Iu,getCellsFromElementOrRanges:Ju,getCellsFromEditor:Ku},Mu=function(a,b){return rb.each(b,cq.fillWithPaddingBr),a.selection.setCursorLocation(b[0].dom(),0),!0},Nu=function(a,b){return Qs.deleteElement(a,!1,b),!0},Ou=function(a,b,c){return Cu.getActionFromRange(b,c).map(function(b){return b.fold(Da.curry(Nu,a),Da.curry(Mu,a))})},Pu=function(a,b){return Vu(a,b)},Qu=function(a,b,c,d){return Tu(b,d).fold(function(){return Ou(a,b,c)},function(b){return Pu(a,b)}).getOr(!1)},Ru=function(a,b){var c=Ef.fromDom(a.getBody()),d=a.selection.getRng(),e=Lu.getCellsFromEditor(a);return 0!==e.length?Mu(a,e):Qu(a,c,d,b)},Su=function(a,b){return rb.find(Ur.parentsAndSelf(b,a),pi)},Tu=function(a,b){return rb.find(Ur.parentsAndSelf(b,a),function(a){return"caption"===Of.name(a)})},Uu=function(a,b,c,d,e){return Bl.navigate(c,a.getBody(),e).bind(function(a){return Su(b,Ef.fromDom(a.getNode())).map(function(a){return gh.eq(a,d)===!1})})},Vu=function(a,b){return cq.fillWithPaddingBr(b),a.selection.setCursorLocation(b.dom(),0),Ka.some(!0)},Wu=function(a,b,c,d){return Bl.firstPositionIn(a.dom()).bind(function(e){return Bl.lastPositionIn(a.dom()).map(function(a){return b?c.isEqual(e)&&d.isEqual(a):c.isEqual(a)&&d.isEqual(e)})}).getOr(!0)},Xu=function(a,b){return Vu(a,b)},Yu=function(a,b,c){return Tu(a,Ef.fromDom(c.getNode())).map(function(a){return gh.eq(a,b)===!1})},Zu=function(a,b,c,d,e){return Bl.navigate(c,a.getBody(),e).bind(function(f){return Wu(d,c,e,f)?Xu(a,d):Yu(b,d,f)}).or(Ka.some(!0))},$u=function(a,b,c,d){var e=cl.fromRangeStart(a.selection.getRng());return Su(c,d).bind(function(d){return Fr.isEmpty(d)?Vu(a,d):Uu(a,c,b,d,e)})},_u=function(a,b,c,d){var e=cl.fromRangeStart(a.selection.getRng());return Fr.isEmpty(d)?Vu(a,d):Zu(a,c,b,d,e)},av=function(a,b,c){var d=Ef.fromDom(a.getBody());return Tu(d,c).fold(function(){return $u(a,b,d,c)},function(c){return _u(a,b,d,c)}).getOr(!1)},bv=function(a,b){var c=Ef.fromDom(a.selection.getStart(!0)),d=Lu.getCellsFromEditor(a);return a.selection.isCollapsed()&&0===d.length?av(a,b,c):Ru(a,c)},cv={backspaceDelete:bv},dv=function(a,b){a.getDoc().execCommand(b,!1,null)},ev=function(a){$s.backspaceDelete(a,!1)||hu.backspaceDelete(a,!1)||ds.backspaceDelete(a,!1)||cv.backspaceDelete(a)||ls.backspaceDelete(a,!1)||(dv(a,"Delete"),hr.paddEmptyBody(a))},fv=function(a){$s.backspaceDelete(a,!0)||hu.backspaceDelete(a,!0)||ds.backspaceDelete(a,!0)||cv.backspaceDelete(a)||ls.backspaceDelete(a,!0)||dv(a,"ForwardDelete")},gv={deleteCommand:ev,forwardDeleteCommand:fv},hv=function(a,b,c){var d=function(b){return Eg.getRaw(b,a)},e=function(a){return gh.eq(Ef.fromDom(b),a)};return vq.closest(Ef.fromDom(c),function(a){return d(a).isSome()},e).bind(d)},iv=function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c},jv=function(a,b){return/[0-9.]+px$/.test(a)?iv(72*parseInt(a,10)/96,b||0)+"pt":a},kv=function(a){return a.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},lv=function(a,b){return Ka.from(tj.DOM.getStyle(b,a,!0))},mv=function(a){return function(b,c){return Ka.from(c).map(Ef.fromDom).filter(Of.isElement).bind(function(c){return hv(a,b,c.dom()).or(lv(a,c.dom()))}).getOr("")}},nv={getFontSize:mv("font-size"),getFontFamily:Da.compose(kv,mv("font-family")),toPt:jv},ov=function(a){return Bl.firstPositionIn(a.getBody()).map(function(a){var b=a.container();return Ii.isText(b)?b.parentNode:b})},pv=function(a,b){return a.startContainer===b&&0===a.startOffset},qv=function(a){return Ka.from(a.selection.getRng()).bind(function(b){var c=a.getBody();return pv(b,c)?Ka.none():Ka.from(a.selection.getStart(!0))})},rv=function(a,b){if(/^[0-9\.]+$/.test(b)){var c=parseInt(b,10);if(c>=1&&c<=7){var d=Qm.getFontStyleValues(a),e=Qm.getFontSizeClasses(a);return e?e[c-1]||b:d[c-1]||b}return b}return b},sv=function(a,b){a.formatter.toggle("fontname",{value:rv(a,b)}),a.nodeChanged()},tv=function(a){return qv(a).fold(function(){return ov(a).map(function(b){return nv.getFontFamily(a.getBody(),b)}).getOr("")},function(b){return nv.getFontFamily(a.getBody(),b)})},uv=function(a,b){a.formatter.toggle("fontsize",{value:rv(a,b)}),a.nodeChanged()},vv=function(a){return qv(a).fold(function(){return ov(a).map(function(b){return nv.getFontSize(a.getBody(),b)}).getOr("")},function(b){return nv.getFontSize(a.getBody(),b)})},wv=function(a,b){return a&&b&&a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset},xv={isEq:wv},yv=function(a,b,c){for(;a&&a!==b;){if(c(a))return a;a=a.parentNode}return null},zv=function(a,b,c){return null!==yv(a,b,c)},Av=function(a,b,c){return zv(a,b,function(a){return a.nodeName===c})},Bv=function(a){return a&&"TABLE"===a.nodeName},Cv=function(a){return a&&/^(TD|TH|CAPTION)$/.test(a.nodeName)},Dv=function(a,b){return Ij(a)&&zv(a,b,ip)===!1},Ev=function(a,b,c){for(var d=new u(b,a.getParent(b.parentNode,a.isBlock)||a.getRoot());b=d[c?"prev":"next"]();)if(Ii.isBr(b))return!0},Fv=function(a,b){return a.previousSibling&&a.previousSibling.nodeName===b},Gv=function(a,b){for(;b&&b!==a;){if(Ii.isContentEditableFalse(b))return!0;b=b.parentNode}return!1},Hv=function(a,b,c,d,e){var f,g,h,i,j=a.getRoot(),k=a.schema.getNonEmptyElements();if(h=a.getParent(e.parentNode,a.isBlock)||j,d&&Ii.isBr(e)&&b&&a.isEmpty(h))return Ka.some(z(e.parentNode,a.nodeIndex(e)));for(f=new u(e,h);i=f[d?"prev":"next"]();){if("false"===a.getContentEditableParent(i)||Dv(i,j))return Ka.none();if(Ii.isText(i)&&i.nodeValue.length>0)return Av(i,j,"A")===!1?Ka.some(z(i,d?i.nodeValue.length:0)):Ka.none();if(a.isBlock(i)||k[i.nodeName.toLowerCase()])return Ka.none();g=i}return c&&g?Ka.some(z(g,0)):Ka.none()},Iv=function(a,b,c,d){var e,f,g,h,i,j,k,l=a.getRoot(),m=!1;if(e=d[(c?"start":"end")+"Container"],f=d[(c?"start":"end")+"Offset"],k=Ii.isElement(e)&&f===e.childNodes.length,i=a.schema.getNonEmptyElements(),j=c,Ij(e))return Ka.none();if(Ii.isElement(e)&&f>e.childNodes.length-1&&(j=!1),Ii.isDocument(e)&&(e=l,f=0),e===l){if(j&&(h=e.childNodes[f>0?f-1:0])){if(Ij(h))return Ka.none();if(i[h.nodeName]||Bv(h))return Ka.none()}if(e.hasChildNodes()){if(f=Math.min(!j&&f>0?f-1:f,e.childNodes.length-1),e=e.childNodes[f],f=Ii.isText(e)&&k?e.data.length:0,!b&&e===l.lastChild&&Bv(e))return Ka.none();if(Gv(l,e)||Ij(e))return Ka.none();if(e.hasChildNodes()&&Bv(e)===!1){h=e,g=new u(e,l);do{if(Ii.isContentEditableFalse(h)||Ij(h)){m=!1;break}if(Ii.isText(h)&&h.nodeValue.length>0){f=j?0:h.nodeValue.length,e=h,m=!0;break}if(i[h.nodeName.toLowerCase()]&&!Cv(h)){f=a.nodeIndex(h),e=h.parentNode,j||f++,m=!0;break}}while(h=j?g.next():g.prev())}}}return b&&(Ii.isText(e)&&0===f&&Hv(a,k,b,!0,e).each(function(a){e=a.container(),f=a.offset(),m=!0}),Ii.isElement(e)&&(h=e.childNodes[f],h||(h=e.childNodes[f-1]),!h||!Ii.isBr(h)||Fv(h,"A")||Ev(a,h,!1)||Ev(a,h,!0)||Hv(a,k,b,!0,h).each(function(a){e=a.container(),f=a.offset(),m=!0}))),j&&!b&&Ii.isText(e)&&f===e.nodeValue.length&&Hv(a,k,b,!1,e).each(function(a){e=a.container(),f=a.offset(),m=!0}),m?Ka.some(z(e,f)):Ka.none()},Jv=function(a,b){var c=b.collapsed,d=b.cloneRange(),e=z.fromRangeStart(b);return Iv(a,c,!0,d).each(function(a){c&&z.isAbove(e,a)||d.setStart(a.container(),a.offset())}),c||Iv(a,c,!1,d).each(function(a){d.setEnd(a.container(),a.offset())}),c&&d.collapse(!0),xv.isEq(b,d)?Ka.none():Ka.some(d)},Kv={normalize:Jv},Lv=function(a,b,c){for(var d,e=new u(b,c),f=a.getNonEmptyElements();d=e.next();)if(f[d.nodeName.toLowerCase()]||d.length>0)return!0},Mv=function(a,b,c){var d=a.create("span",{},"&nbsp;");c.parentNode.insertBefore(d,c),b.scrollIntoView(d),a.remove(d)},Nv=function(a,b,c,d){var e=a.createRng();d?(e.setStartBefore(c),e.setEndBefore(c)):(e.setStartAfter(c),e.setEndAfter(c)),b.setRng(e)},Ov=function(a,b){var c,d,e=a.selection,f=a.dom,g=e.getRng();Kv.normalize(f,g).each(function(a){g.setStart(a.startContainer,a.startOffset),g.setEnd(a.endContainer,a.endOffset)});var h=g.startOffset,i=g.startContainer;if(1===i.nodeType&&i.hasChildNodes()){var j=h>i.childNodes.length-1;i=i.childNodes[Math.min(h,i.childNodes.length-1)]||i,h=j&&3===i.nodeType?i.nodeValue.length:0}var k=f.getParent(i,f.isBlock),l=k?f.getParent(k.parentNode,f.isBlock):null,m=l?l.nodeName.toUpperCase():"",n=b&&b.ctrlKey;"LI"!==m||n||(k=l),i&&3===i.nodeType&&h>=i.nodeValue.length&&(Lv(a.schema,i,k)||(c=f.create("br"),g.insertNode(c),g.setStartAfter(c),g.setEndAfter(c),d=!0)),c=f.create("br"),g.insertNode(c),Mv(f,e,c),Nv(f,e,c,d),a.undoManager.add()},Pv=function(a,b){var c=Ef.fromTag("br");Xm.before(Ef.fromDom(b),c),a.undoManager.add()},Qv=function(a,b){Sv(a.getBody(),b)||Xm.after(Ef.fromDom(b),Ef.fromTag("br"));var c=Ef.fromTag("br");Xm.after(Ef.fromDom(b),c),Mv(a.dom,a.selection,c.dom()),Nv(a.dom,a.selection,c.dom(),!1),a.undoManager.add()},Rv=function(a){return Ii.isBr(a.getNode())},Sv=function(a,b){return!!Rv(cl.after(b))||Bl.nextPosition(a,cl.after(b)).map(function(a){return Ii.isBr(a.getNode())}).getOr(!1)},Tv=function(a){return a&&"A"===a.nodeName&&"href"in a},Uv=function(a){return a.fold(Da.constant(!1),Tv,Tv,Da.constant(!1))},Vv=function(a){var b=Da.curry(br.isInlineTarget,a),c=cl.fromRangeStart(a.selection.getRng());return It.readLocation(b,a.getBody(),c).filter(Uv)},Wv=function(a,b){b.fold(Da.noop,Da.curry(Pv,a),Da.curry(Qv,a),Da.noop)},Xv=function(a,b){var c=Vv(a);c.isSome()?c.each(Da.curry(Wv,a)):Ov(a,b)},Yv={insert:Xv},Zv=ns.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),$v=function(a,b,c,d){return a.fold(b,c,d)},_v=function(a){return a.fold(Da.identity,Da.identity,Da.identity)},aw={before:Zv.before,on:Zv.on,after:Zv.after,cata:$v,getStart:_v},bw=ns.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),cw=Mg.immutable("start","soffset","finish","foffset"),dw=function(a){
return bw.exact(a.start(),a.soffset(),a.finish(),a.foffset())},ew=function(a){return a.match({domRange:function(a){return Ef.fromDom(a.startContainer)},relative:function(a,b){return aw.getStart(a)},exact:function(a,b,c,d){return a}})},fw=function(a){var b=ew(a);return Bh.defaultView(b)},gw={domRange:bw.domRange,relative:bw.relative,exact:bw.exact,exactFromRange:dw,range:cw,getWin:fw},hw=yf.detect().browser,iw=function(a,b){var c=Of.isText(b)?Xp.get(b).length:Bh.children(b).length+1;return a>c?c:a<0?0:a},jw=function(a){return gw.range(a.start(),iw(a.soffset(),a.start()),a.finish(),iw(a.foffset(),a.finish()))},kw=function(a,b){return gh.contains(a,b)||gh.eq(a,b)},lw=function(a){return function(b){return kw(a,b.start())&&kw(a,b.finish())}},mw=function(a){return a.inline===!0||hw.isIE()},nw=function(a){return gw.range(Ef.fromDom(a.startContainer),a.startOffset,Ef.fromDom(a.endContainer),a.endOffset)},ow=function(a){var b=a.getSelection(),c=b&&0!==b.rangeCount?Ka.from(b.getRangeAt(0)):Ka.none();return c.map(nw)},pw=function(a){var b=Bh.defaultView(a);return ow(b.dom()).filter(lw(a))},qw=function(a,b){return Ka.from(b).filter(lw(a)).map(jw)},rw=function(a){var b=document.createRange();try{return b.setStart(a.start().dom(),a.soffset()),b.setEnd(a.finish().dom(),a.foffset()),Ka.some(b)}catch(c){return Ka.none()}},sw=function(a){var b=mw(a)?pw(Ef.fromDom(a.getBody())):Ka.none();a.bookmark=b.isSome()?b:a.bookmark},tw=function(a,b){var c=Ef.fromDom(a.getBody()),d=mw(a)?Ka.from(b):Ka.none(),e=d.map(nw).filter(lw(c));a.bookmark=e.isSome()?e:a.bookmark},uw=function(a){var b=a.bookmark?a.bookmark:Ka.none();return b.bind(Da.curry(qw,Ef.fromDom(a.getBody()))).bind(rw)},vw=function(a){uw(a).each(function(b){a.selection.setRng(b)})},ww={store:sw,storeNative:tw,readRange:ow,restore:vw,getRng:uw,getBookmark:pw,validate:qw},xw=function(a,b,c,d,e,f){if("false"!==a.getContentEditable(f)&&"LI"!==f.nodeName){var g=c?"margin":"padding";if(g="TABLE"===f.nodeName?"margin":g,g+="rtl"===a.getStyle(f,"direction",!0)?"Right":"Left","outdent"===b){var h=Math.max(0,parseInt(f.style[g]||0,10)-d);a.setStyle(f,g,h?h+e:"")}else{var h=parseInt(f.style[g]||0,10)+d+e;a.setStyle(f,g,h)}}},yw=function(a,b){var c=a.settings,d=a.dom,e=a.selection,f=a.formatter,g=/[a-z%]+$/i.exec(c.indentation)[0],h=parseInt(c.indentation,10),i=a.getParam("indent_use_margin",!1);a.queryCommandState("InsertUnorderedList")||a.queryCommandState("InsertOrderedList")||(c.forced_root_block||d.getParent(e.getNode(),d.isBlock)||f.apply("div"),rb.each(e.getSelectedBlocks(),function(a){return xw(d,b,i,h,g,a)}))},zw=Gd.each,Aw=Gd.extend,Bw=Gd.map,Cw=Gd.inArray,Dw=Gd.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),Ew=function(a){var b,c,d=this,e={},f=function(){return!1},g=function(){return!0};a=a||{},b=a.scope||d,c=a.toggleEvent||f;var h=function(c,d){var h,i,k,l;if(c=c.toLowerCase(),d=d||{},d.type=c,d.target||(d.target=b),d.preventDefault||(d.preventDefault=function(){d.isDefaultPrevented=g},d.stopPropagation=function(){d.isPropagationStopped=g},d.stopImmediatePropagation=function(){d.isImmediatePropagationStopped=g},d.isDefaultPrevented=f,d.isPropagationStopped=f,d.isImmediatePropagationStopped=f),a.beforeFire&&a.beforeFire(d),h=e[c])for(i=0,k=h.length;i<k;i++){if(l=h[i],l.once&&j(c,l.func),d.isImmediatePropagationStopped())return d.stopPropagation(),d;if(l.func.call(b,d)===!1)return d.preventDefault(),d}return d},i=function(a,b,g,h){var i,j,k;if(b===!1&&(b=f),b)for(b={func:b},h&&Gd.extend(b,h),j=a.toLowerCase().split(" "),k=j.length;k--;)a=j[k],i=e[a],i||(i=e[a]=[],c(a,!0)),g?i.unshift(b):i.push(b);return d},j=function(a,b){var f,g,h,i,j;if(a)for(i=a.toLowerCase().split(" "),f=i.length;f--;){if(a=i[f],g=e[a],!a){for(h in e)c(h,!1),delete e[h];return d}if(g){if(b)for(j=g.length;j--;)g[j].func===b&&(g=g.slice(0,j).concat(g.slice(j+1)),e[a]=g);else g.length=0;g.length||(c(a,!1),delete e[a])}}else{for(a in e)c(a,!1);e={}}return d},k=function(a,b,c){return i(a,b,c,{once:!0})},l=function(a){return a=a.toLowerCase(),!(!e[a]||0===e[a].length)};d.fire=h,d.on=i,d.off=j,d.once=k,d.has=l};Ew.isNative=function(a){return!!Dw[a.toLowerCase()]};var Fw,Gw=function(a){return a._eventDispatcher||(a._eventDispatcher=new Ew({scope:a,toggleEvent:function(b,c){Ew.isNative(b)&&a.toggleNativeEvent&&a.toggleNativeEvent(b,c)}})),a._eventDispatcher},Hw={fire:function(a,b,c){var d=this;if(d.removed&&"remove"!==a)return b;if(b=Gw(d).fire(a,b,c),c!==!1&&d.parent)for(var e=d.parent();e&&!b.isPropagationStopped();)e.fire(a,b,!1),e=e.parent();return b},on:function(a,b,c){return Gw(this).on(a,b,c)},off:function(a,b){return Gw(this).off(a,b)},once:function(a,b){return Gw(this).once(a,b)},hasEventListeners:function(a){return Gw(this).has(a)}},Iw=function(a,b){var c=hg.get(a,b);return void 0===c||""===c?[]:c.split(" ")},Jw=function(a,b,c){var d=Iw(a,b),e=d.concat([c]);hg.set(a,b,e.join(" "))},Kw=function(a,b,c){var d=rb.filter(Iw(a,b),function(a){return a!==c});d.length>0?hg.set(a,b,d.join(" ")):hg.remove(a,b)},Lw={read:Iw,add:Jw,remove:Kw},Mw=function(a){return void 0!==a.dom().classList},Nw=function(a){return Lw.read(a,"class")},Ow=function(a,b){return Lw.add(a,"class",b)},Pw=function(a,b){return Lw.remove(a,"class",b)},Qw=function(a,b){rb.contains(Nw(a),b)?Pw(a,b):Ow(a,b)},Rw={get:Nw,add:Ow,remove:Pw,toggle:Qw,supports:Mw},Sw=function(a,b){Rw.supports(a)?a.dom().classList.add(b):Rw.add(a,b)},Tw=function(a){var b=Rw.supports(a)?a.dom().classList:Rw.get(a);0===b.length&&hg.remove(a,"class")},Uw=function(a,b){if(Rw.supports(a)){var c=a.dom().classList;c.remove(b)}else Rw.remove(a,b);Tw(a)},Vw=function(a,b){return Rw.supports(a)?a.dom().classList.toggle(b):Rw.toggle(a,b)},Ww=function(a,b){var c=Rw.supports(a),d=a.dom().classList,e=function(){c?d.remove(b):Rw.remove(a,b)},f=function(){c?d.add(b):Rw.add(a,b)};return F(e,f,Xw(a,b))},Xw=function(a,b){return Rw.supports(a)&&a.dom().classList.contains(b)},Yw={add:Sw,remove:Uw,toggle:Vw,toggler:Ww,has:Xw},Zw=function(a,b){return a.fire("PreProcess",b)},$w=function(a,b){return a.fire("PostProcess",b)},_w=function(a){return a.fire("remove")},ax=function(a,b){return a.fire("SwitchMode",{mode:b})},bx=function(a,b,c,d){a.fire("ObjectResizeStart",{target:b,width:c,height:d})},cx=function(a,b,c,d){a.fire("ObjectResized",{target:b,width:c,height:d})},dx={firePreProcess:Zw,firePostProcess:$w,fireRemove:_w,fireSwitchMode:ax,fireObjectResizeStart:bx,fireObjectResized:cx},ex=function(a,b,c){try{a.getDoc().execCommand(b,!1,c)}catch(d){}},fx=function(a,b,c){Yw.has(a,b)&&c===!1?Yw.remove(a,b):c&&Yw.add(a,b)},gx=function(a,b){fx(Ef.fromDom(a.getBody()),"mce-content-readonly",b),b?(a.selection.controlSelection.hideResizeRect(),a.readonly=!0,a.getBody().contentEditable="false"):(a.readonly=!1,a.getBody().contentEditable="true",ex(a,"StyleWithCSS",!1),ex(a,"enableInlineTableEditing",!1),ex(a,"enableObjectResizing",!1),a.focus(),a.nodeChanged())},hx=function(a,b){b!==ix(a)&&(a.initialized?gx(a,"readonly"===b):a.on("init",function(){gx(a,"readonly"===b)}),dx.fireSwitchMode(a,b))},ix=function(a){return a.readonly?"readonly":"design"},jx=function(a){return a.readonly===!0},kx=tj.DOM,lx=function(a,b){return"selectionchange"===b?a.getDoc():!a.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(b)?a.getDoc().documentElement:a.settings.event_root?(a.eventRoot||(a.eventRoot=kx.select(a.settings.event_root)[0]),a.eventRoot):a.getBody()},mx=function(a){return!a.hidden&&!a.readonly},nx=function(a,b,c){mx(a)?a.fire(b,c):jx(a)&&c.preventDefault()},ox=function(a,b){var c,d;if(a.delegates||(a.delegates={}),!a.delegates[b]&&!a.removed)if(c=lx(a,b),a.settings.event_root){if(Fw||(Fw={},a.editorManager.on("removeEditor",function(){var b;if(!a.editorManager.activeEditor&&Fw){for(b in Fw)a.dom.unbind(lx(a,b));Fw=null}})),Fw[b])return;d=function(c){for(var d=c.target,e=a.editorManager.get(),f=e.length;f--;){var g=e[f].getBody();(g===d||kx.isChildOf(d,g))&&nx(e[f],b,c)}},Fw[b]=d,kx.bind(c,b,d)}else d=function(c){nx(a,b,c)},kx.bind(c,b,d),a.delegates[b]=d},px={bindPendingEventDelegates:function(){var a=this;Gd.each(a._pendingNativeEvents,function(b){ox(a,b)})},toggleNativeEvent:function(a,b){var c=this;"focus"!==a&&"blur"!==a&&(b?c.initialized?ox(c,a):c._pendingNativeEvents?c._pendingNativeEvents.push(a):c._pendingNativeEvents=[a]:c.initialized&&(c.dom.unbind(lx(c,a),a,c.delegates[a]),delete c.delegates[a]))},unbindAllNativeEvents:function(){var a,b=this,c=b.getBody(),d=b.dom;if(b.delegates){for(a in b.delegates)b.dom.unbind(lx(b,a),a,b.delegates[a]);delete b.delegates}!b.inline&&c&&d&&(c.onload=null,d.unbind(b.getWin()),d.unbind(b.getDoc())),d&&(d.unbind(c),d.unbind(b.getContainer()))}};px=Gd.extend({},Hw,px);var qx,rx=px,sx=Gd.each,tx=Gd.explode,ux={f9:120,f10:121,f11:122},vx=Gd.makeMap("alt,ctrl,shift,meta,access"),wx=function(a){return vq.first(a).isSome()},xx=function(a,b,c){return vq.ancestor(a,b,c).isSome()},yx=function(a,b,c){return vq.closest(a,b,c).isSome()},zx=function(a,b){return vq.sibling(a,b).isSome()},Ax=function(a,b){return vq.child(a,b).isSome()},Bx=function(a,b){return vq.descendant(a,b).isSome()},Cx={any:wx,ancestor:xx,closest:yx,sibling:zx,child:Ax,descendant:Bx},Dx=function(a){a.dom().focus()},Ex=function(a){a.dom().blur()},Fx=function(a){var b=Bh.owner(a).dom();return a.dom()===b.activeElement},Gx=function(a){var b=void 0!==a?a.dom():document;return Ka.from(b.activeElement).map(Ef.fromDom)},Hx=function(a){var b=Bh.owner(a),c=Gx(b).filter(function(b){return Cx.closest(b,Da.curry(gh.eq,a))});c.fold(function(){Dx(a)},Da.noop)},Ix=function(a){return Gx(Bh.owner(a)).filter(function(b){return a.dom().contains(b.dom())})},Jx={hasFocus:Fx,focus:Dx,blur:Ex,active:Gx,search:Ix,focusInside:Hx},Kx=function(a,b){return a.dom.getParent(b,function(b){return"true"===a.dom.getContentEditable(b)})},Lx=function(a){return a.collapsed?Ka.from(tk(a.startContainer,a.startOffset)).map(Ef.fromDom):Ka.none()},Mx=function(a,b){return Lx(b).bind(function(b){return oi(b)?Ka.some(b):gh.contains(a,b)===!1?Ka.some(a):Ka.none()})},Nx=function(a,b){Mx(Ef.fromDom(a.getBody()),b).bind(function(a){return Bl.firstPositionIn(a.dom())}).fold(function(){a.selection.normalize()},function(b){return a.selection.setRng(b.toRange())})},Ox=function(a){if(a.setActive)try{a.setActive()}catch(b){a.focus()}else a.focus()},Px=function(a){return Jx.hasFocus(a)||Jx.search(a).isSome()},Qx=function(a){return a.iframeElement&&Jx.hasFocus(Ef.fromDom(a.iframeElement))},Rx=function(a){var b=a.getBody();return b&&Px(Ef.fromDom(b))},Sx=function(a){return a.inline?Rx(a):Qx(a)},Tx=function(a){var b=a.selection,c=a.settings.content_editable,d=a.getBody(),e=b.getRng();a.quirks.refreshContentEditable();var f=Kx(a,b.getNode());return a.$.contains(d,f)?(Ox(f),Nx(a,e),void Ux(a)):(void 0!==a.bookmark&&Sx(a)===!1&&ww.getRng(a).each(function(b){a.selection.setRng(b),e=b}),c||(Lb.opera||Ox(d),a.getWin().focus()),(Lb.gecko||c)&&(Ox(d),Nx(a,e)),void Ux(a))},Ux=function(a){return a.editorManager.setActive(a)},Vx=function(a,b){a.removed||(b?Ux(a):Tx(a))},Wx={focus:Vx,hasFocus:Sx},Xx=function(a,b){var c=b.dom();return c[a]},Yx=function(a,b){return parseInt(Eg.get(b,a),10)},Zx=Da.curry(Xx,"clientWidth"),$x=Da.curry(Xx,"clientHeight"),_x=Da.curry(Yx,"margin-top"),ay=Da.curry(Yx,"margin-left"),by=function(a){return a.dom().getBoundingClientRect()},cy=function(a,b,c){var d=Zx(a),e=$x(a);return b>=0&&c>=0&&b<=d&&c<=e},dy=function(a,b,c,d){var e=by(b),f=a?e.left+b.dom().clientLeft+ay(b):0,g=a?e.top+b.dom().clientTop+_x(b):0,h=c-f,i=d-g;return{x:h,y:i}},ey=function(a,b,c){var d=Ef.fromDom(a.getBody()),e=a.inline?d:Bh.documentElement(d),f=dy(a.inline,e,b,c);return cy(e,f.x,f.y)},fy=function(a){return Ka.from(a).map(Ef.fromDom)},gy=function(a){var b=a.inline?a.getBody():a.getContentAreaContainer();return fy(b).map(function(a){return gh.contains(Bh.owner(a),a)}).getOr(!1)},hy={isXYInContentArea:ey,isEditorAttachedToDom:gy},iy=y.PluginManager,jy=function(a,b){for(var c in iy.urls){var d=iy.urls[c]+"/plugin"+b+".js";if(d===a)return c}return null},ky=function(a,b){var c=jy(b,a.suffix);return c?"Failed to load plugin: "+c+" from url "+b:"Failed to load plugin url: "+b},ly=function(a,b){a.notificationManager.open({type:"error",text:b})},my=function(a,b){a._skinLoaded?ly(a,b):a.on("SkinLoaded",function(){ly(a,b)})},ny=function(a,b){my(a,"Failed to upload image: "+b)},oy=function(a,b){my(a,ky(a,b))},py=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=window.console;d&&(d.error?d.error.apply(d,arguments):d.log.apply(d,arguments))},qy={pluginLoadError:oy,uploadError:ny,displayError:my,initError:py},ry=y.PluginManager,sy=y.ThemeManager,ty=function(a){var b=Bb.getOrDie("requestAnimationFrame");b(a)},uy=function(a){var b=Bb.getOrDie("atob");return b(a)},vy={atob:uy,requestAnimationFrame:ty},wy=function(a){return new Nb(function(b,c){var d=function(){c("Cannot convert "+a+" to Blob. Resource might not exist or is inaccessible.")};try{var e=new L;e.open("GET",a,!0),e.responseType="blob",e.onload=function(){200===this.status?b(this.response):d()},e.onerror=d,e.send()}catch(f){d()}})},xy=function(a){var b,c;return a=decodeURIComponent(a).split(","),c=/data:([^;]+)/.exec(a[0]),c&&(b=c[1]),{type:b,data:a[1]}},yy=function(a){return new Nb(function(b){var c,d,e;a=xy(a);try{c=vy.atob(a.data)}catch(f){return void b(new N([]))}for(d=new P(c.length),e=0;e<d.length;e++)d[e]=c.charCodeAt(e);b(new N([d],{type:a.type}))})},zy=function(a){return 0===a.indexOf("blob:")?wy(a):0===a.indexOf("data:")?yy(a):null},Ay=function(a){return new Nb(function(b){var c=new O;c.onloadend=function(){b(c.result)},c.readAsDataURL(a)})},By={uriToBlob:zy,blobToDataUri:Ay,parseDataUri:xy},Cy=0,Dy=function(a){return(a||"blobid")+Cy++},Ey=function(a,b,c,d){var e,f;return 0===b.src.indexOf("blob:")?(f=a.getByUri(b.src),void(f?c({image:b,blobInfo:f}):By.uriToBlob(b.src).then(function(d){By.blobToDataUri(d).then(function(g){e=By.parseDataUri(g).data,f=a.create(Dy(),d,e),a.add(f),c({image:b,blobInfo:f})})},function(a){d(a)}))):(e=By.parseDataUri(b.src).data,f=a.findFirst(function(a){return a.base64()===e}),void(f?c({image:b,blobInfo:f}):By.uriToBlob(b.src).then(function(d){f=a.create(Dy(),d,e),a.add(f),c({image:b,blobInfo:f})},function(a){d(a)})))},Fy=function(a){return a?a.getElementsByTagName("img"):[]},Gy=0,Hy=function(){var a=function(){return Math.round(4294967295*Math.random()).toString(36)},b=(new Date).getTime();return"s"+b.toString(36)+a()+a()+a()},Iy=function(a){return a+Gy++ +Hy()},Jy={uuid:Iy},Ky=function(a,b){return a.hasOwnProperty(b.nodeName)},Ly=function(a,b){return!!Ii.isText(b)||!!Ii.isElement(b)&&(!Ky(a,b)&&!Hp.isBookmarkNode(b))},My=function(a,b,c){return rb.exists(Ur.parents(Ef.fromDom(c),Ef.fromDom(b)),function(b){return Ky(a,b.dom())})},Ny=function(a,b){if(Ii.isText(b)){if(0===b.nodeValue.length)return!0;if(/^\s+$/.test(b.nodeValue)&&(!b.nextSibling||Ky(a,b.nextSibling)))return!0}return!1},Oy=function(a){var b,c,d,e,f,g,h,i,j,k,l,m=a.settings,n=a.dom,o=a.selection,p=a.schema,q=p.getBlockElements(),r=o.getStart(),s=a.getBody();if(l=m.forced_root_block,r&&Ii.isElement(r)&&l&&(k=s.nodeName.toLowerCase(),p.isValidChild(k,l.toLowerCase())&&!My(q,s,r))){for(b=o.getRng(),c=b.startContainer,d=b.startOffset,e=b.endContainer,f=b.endOffset,j=Wx.hasFocus(a),r=s.firstChild;r;)if(Ly(q,r)){if(Ny(q,r)){h=r,r=r.nextSibling,n.remove(h);continue}g||(g=n.create(l,a.settings.forced_root_block_attrs),r.parentNode.insertBefore(g,r),i=!0),h=r,r=r.nextSibling,g.appendChild(h)}else g=null,r=r.nextSibling;i&&j&&(b.setStart(c,d),b.setEnd(e,f),o.setRng(b),a.nodeChanged())}},Py=function(a){a.settings.forced_root_block&&a.on("NodeChange",Da.curry(Oy,a))},Qy={setup:Py},Ry=function(a){var b=a.startContainer,c=a.startOffset;return Ii.isText(b)?0===c?Ka.some(Ef.fromDom(b)):Ka.none():Ka.from(b.childNodes[c]).map(Ef.fromDom)},Sy=function(a){var b=a.endContainer,c=a.endOffset;return Ii.isText(b)?c===b.data.length?Ka.some(Ef.fromDom(b)):Ka.none():Ka.from(b.childNodes[c-1]).map(Ef.fromDom)},Ty=function(a){return Bh.firstChild(a).fold(Da.constant([a]),function(b){return[a].concat(Ty(b))})},Uy=function(a){return Bh.lastChild(a).fold(Da.constant([a]),function(b){return"br"===Of.name(b)?Bh.prevSibling(b).map(function(b){return[a].concat(Uy(b))}).getOr([]):[a].concat(Uy(b))})},Vy=function(a,b){return Ik.liftN([Ry(b),Sy(b)],function(b,c){var d=rb.find(Ty(a),Da.curry(gh.eq,b)),e=rb.find(Uy(a),Da.curry(gh.eq,c));return d.isSome()&&e.isSome()}).getOr(!1)},Wy=function(a,b,c,d){var e=c,f=new u(c,e),g=a.schema.getNonEmptyElements();do{if(3===c.nodeType&&0!==Gd.trim(c.nodeValue).length)return void(d?b.setStart(c,0):b.setEnd(c,c.nodeValue.length));if(g[c.nodeName]&&!/^(TD|TH)$/.test(c.nodeName))return void(d?b.setStartBefore(c):"BR"===c.nodeName?b.setEndBefore(c):b.setEndAfter(c));if(Lb.ie&&Lb.ie<11&&a.isBlock(c)&&a.isEmpty(c))return void(d?b.setStart(c,0):b.setEnd(c,0))}while(c=d?f.next():f.prev());"BODY"===e.nodeName&&(d?b.setStart(e,0):b.setEnd(e,e.childNodes.length))},Xy=function(a){var b=a.selection.getSel();return b&&b.rangeCount>0},Yy=function(a){var b,c,d,e;return e=a.getBoundingClientRect(),b=a.ownerDocument,c=b.documentElement,d=b.defaultView,{top:e.top+d.pageYOffset-c.clientTop,left:e.left+d.pageXOffset-c.clientLeft}},Zy=function(a){return a.inline?Yy(a.getBody()):{left:0,top:0}},$y=function(a){var b=a.getBody();return a.inline?{left:b.scrollLeft,top:b.scrollTop}:{left:0,top:0}},_y=function(a){var b=a.getBody(),c=a.getDoc().documentElement,d={left:b.scrollLeft,top:b.scrollTop},e={left:b.scrollLeft||c.scrollLeft,top:b.scrollTop||c.scrollTop};return a.inline?d:e},az=function(a,b){if(b.target.ownerDocument!==a.getDoc()){var c=Yy(a.getContentAreaContainer()),d=_y(a);return{left:b.pageX-c.left+d.left,top:b.pageY-c.top+d.top}}return{left:b.pageX,top:b.pageY}},bz=function(a,b,c){return{pageX:c.left-a.left+b.left,pageY:c.top-a.top+b.top}},cz=function(a,b){return bz(Zy(a),$y(a),az(a,b))},dz={calc:cz},ez=Ii.isContentEditableFalse,fz=Ii.isContentEditableTrue,gz=function(a,b){return ez(b)&&b!==a},hz=function(a,b,c){return b!==c&&!a.dom.isChildOf(b,c)&&!ez(b)},iz=function(a){var b=a.cloneNode(!0);return b.removeAttribute("data-mce-selected"),b},jz=function(a,b,c,d){var e=b.cloneNode(!0);a.dom.setStyles(e,{width:c,height:d}),a.dom.setAttrib(e,"data-mce-selected",null);var f=a.dom.create("div",{"class":"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return a.dom.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:c,height:d}),a.dom.setStyles(e,{margin:0,boxSizing:"border-box"}),f.appendChild(e),f},kz=function(a,b){a.parentNode!==b&&b.appendChild(a)},lz=function(a,b,c,d,e,f){var g=0,h=0;a.style.left=b.pageX+"px",a.style.top=b.pageY+"px",b.pageX+c>e&&(g=b.pageX+c-e),b.pageY+d>f&&(h=b.pageY+d-f),a.style.width=c-g+"px",a.style.height=d-h+"px"},mz=function(a){a&&a.parentNode&&a.parentNode.removeChild(a)},nz=function(a){return 0===a.button},oz=function(a){return a.element},pz=function(a,b){return{pageX:b.pageX-a.relX,pageY:b.pageY+5}},qz=function(a,b){return function(c){if(nz(c)){var d=td.find(b.dom.getParents(c.target),Ek.or(ez,fz));if(gz(b.getBody(),d)){var e=b.dom.getPos(d),f=b.getBody(),g=b.getDoc().documentElement;a.element=d,a.screenX=c.screenX,a.screenY=c.screenY,a.maxX=(b.inline?f.scrollWidth:g.offsetWidth)-2,a.maxY=(b.inline?f.scrollHeight:g.offsetHeight)-2,a.relX=c.pageX-e.x,a.relY=c.pageY-e.y,a.width=d.offsetWidth,a.height=d.offsetHeight,a.ghost=jz(b,d,a.width,a.height)}}}},rz=function(a,b){var c=Ub.throttle(function(a,c){b._selectionOverrides.hideFakeCaret(),b.selection.placeCaretAt(a,c)},0);return function(d){var e=Math.max(Math.abs(d.screenX-a.screenX),Math.abs(d.screenY-a.screenY));if(oz(a)&&!a.dragging&&e>10){var f=b.fire("dragstart",{target:a.element});if(f.isDefaultPrevented())return;a.dragging=!0,b.focus()}if(a.dragging){var g=pz(a,dz.calc(b,d));kz(a.ghost,b.getBody()),lz(a.ghost,g,a.width,a.height,a.maxX,a.maxY),c(d.clientX,d.clientY)}}},sz=function(a){var b=a.getSel().getRangeAt(0),c=b.startContainer;return 3===c.nodeType?c.parentNode:c},tz=function(a,b){return function(c){if(a.dragging&&hz(b,sz(b.selection),a.element)){var d=iz(a.element),e=b.fire("drop",{targetClone:d,clientX:c.clientX,clientY:c.clientY});e.isDefaultPrevented()||(d=e.targetClone,b.undoManager.transact(function(){mz(a.element),b.insertContent(b.dom.getOuterHTML(d)),b._selectionOverrides.hideFakeCaret()}))}vz(a)}},uz=function(a,b){return function(){a.dragging&&b.fire("dragend"),vz(a)}},vz=function(a){a.dragging=!1,a.element=null,mz(a.ghost)},wz=function(a){var b,c,d,e,f,g,h={};b=tj.DOM,g=document,c=qz(h,a),d=rz(h,a),e=tz(h,a),f=uz(h,a),a.on("mousedown",c),a.on("mousemove",d),a.on("mouseup",e),b.bind(g,"mousemove",d),b.bind(g,"mouseup",f),a.on("remove",function(){b.unbind(g,"mousemove",d),b.unbind(g,"mouseup",f)})},xz=function(a){a.on("drop",function(b){var c="undefined"!=typeof b.clientX?a.getDoc().elementFromPoint(b.clientX,b.clientY):null;(ez(c)||ez(a.dom.getContentEditableParent(c)))&&b.preventDefault()})},yz=function(a){wz(a),xz(a)},zz={init:yz},Az=function(a){var b=function(b){return td.map(b,function(b){return b=ik(b),b.node=a,b})};if(Ii.isElement(a))return b(a.getClientRects());if(Ii.isText(a)){var c=a.ownerDocument.createRange();return c.setStart(a,0),c.setEnd(a,a.data.length),b(c.getClientRects())}},Bz=function(a){return td.reduce(a,function(a,b){return a.concat(Az(b))},[])};!function(a){a[a.Up=-1]="Up",a[a.Down=1]="Down"}(qx||(qx={}));var Cz=function(a,b,c,d){for(;d=En(d,a,gk,b);)if(c(d))return},Dz=function(a,b,c,d,e,f){var g,h,i=0,j=[],k=function(d){var f,g,k;for(k=Bz([d]),a===-1&&(k=k.reverse()),f=0;f<k.length;f++)if(g=k[f],!c(g,h)){if(j.length>0&&b(g,td.last(j))&&i++,g.line=i,e(g))return!0;j.push(g)}};return(h=td.last(f.getClientRects()))?(g=f.getNode(),k(g),Cz(a,d,k,g),j):j},Ez=function(a,b){return b.line>a},Fz=function(a,b){return b.line===a},Gz=Da.curry(Dz,qx.Up,mk,nk),Hz=Da.curry(Dz,qx.Down,nk,mk),Iz=function(a,b,c,d){var e,f,g,h,i,j,k=ho(b),l=[],m=0,n=function(b){return 1===a?td.last(b.getClientRects()):td.last(b.getClientRects())};1===a?(e=k.next,f=nk,g=mk,h=cl.after(d)):(e=k.prev,f=mk,g=nk,h=cl.before(d)),j=n(h);do if(h.isVisible()&&(i=n(h),!g(i,j))){if(l.length>0&&f(i,td.last(l))&&m++,i=ik(i),i.position=h,i.line=m,c(i))return l;l.push(i)}while(h=e(h));return l},Jz=function(a){return function(b){return Ez(a,b)}},Kz=function(a){return function(b){return Fz(a,b)}},Lz=Ii.isContentEditableFalse,Mz=En,Nz=function(a,b){return Math.abs(a.left-b)},Oz=function(a,b){return Math.abs(a.right-b)},Pz=function(a,b){return a>=b.left&&a<=b.right},Qz=function(a,b){return td.reduce(a,function(a,c){var d,e;return d=Math.min(Nz(a,b),Oz(a,b)),e=Math.min(Nz(c,b),Oz(c,b)),Pz(b,c)?c:Pz(b,a)?a:e===d&&Lz(c.node)?c:e<d?c:a})},Rz=function(a,b,c,d){for(;d=Mz(d,a,gk,b);)if(c(d))return},Sz=function(a,b){var c=[],d=function(a,d){var e;return e=td.filter(Bz([d]),function(c){return!a(c,b)}),c=c.concat(e),0===e.length};return c.push(b),Rz(qx.Up,a,Da.curry(d,mk),b.node),Rz(qx.Down,a,Da.curry(d,nk),b.node),c},Tz=function(a){return td.filter(td.toArray(a.getElementsByTagName("*")),tn)},Uz=function(a,b){return{node:a.node,before:Nz(a,b)<Oz(a,b)}},Vz=function(a,b,c){var d,e=Bz(Tz(a)),f=td.filter(e,function(a){return c>=a.top&&c<=a.bottom});return d=Qz(f,b),d&&(d=Qz(Sz(a,d),b),d&&tn(d.node))?Uz(d,b):null},Wz=function(a,b,c){return!c.collapsed&&rb.foldl(c.getClientRects(),function(c,d){return c||ok(d,a,b)},!1)},Xz={isXYWithinRange:Wz},Yz=function(a,b){var c=null,d=null,e=function(){null!==c&&(clearTimeout(c),c=null,d=null)},f=function(){d=arguments,null===c&&(c=setTimeout(function(){a.apply(null,d),c=null,d=null},b))};return{cancel:e,throttle:f}},Zz=function(a,b){var c=null,d=function(){null!==c&&(clearTimeout(c),c=null)},e=function(){var d=arguments;null===c&&(c=setTimeout(function(){a.apply(null,d),c=null,d=null},b))};return{cancel:d,throttle:e}},$z=function(a,b){var c=null,d=function(){null!==c&&(clearTimeout(c),c=null)},e=function(){var d=arguments;null!==c&&clearTimeout(c),c=setTimeout(function(){a.apply(null,d),c=null,d=null},b)};return{cancel:d,throttle:e}},_z={adaptable:Yz,first:Zz,last:$z},aA=function(a){var b=_z.first(function(){if(!a.removed){var b=a.selection.getRng();if(b.collapsed){var c=Il(a,a.selection.getRng(),!1);a.selection.setRng(c)}}},0);a.on("focus",function(){b.throttle()}),a.on("blur",function(){b.cancel()})},bA={setup:aA},cA={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(a){return a.shiftKey||a.ctrlKey||a.altKey||this.metaKeyPressed(a)},metaKeyPressed:function(a){return Lb.mac?a.metaKey:a.ctrlKey&&!a.altKey}},dA=Ii.isContentEditableTrue,eA=Ii.isContentEditableFalse,fA=Tn,gA=Sn,hA=function(a,b){for(var c=a.getBody();b&&b!==c;){if(dA(b)||eA(b))return b;b=b.parentNode}return null},iA=function(a){var b,c=function(b){return a.dom.isBlock(b)},d=a.getBody(),e=sn(a.getBody(),c,function(){return Wx.hasFocus(a)}),f="sel-"+a.dom.uniqueId(),g=function(b){return a.dom.hasClass(b,"mce-offscreen-selection")},h=function(){var b=a.dom.get(f);return b?b.getElementsByTagName("*")[0]:b},i=function(b){b&&a.selection.setRng(b)},j=function(){return a.selection.getRng()},k=function(b,c,d,f){void 0===f&&(f=!0);var g;return g=a.fire("ShowCaret",{target:c,direction:b,before:d}),g.isDefaultPrevented()?null:(f&&a.selection.scrollIntoView(c,b===-1),e.show(d,c))},l=function(a,b){return b=Nn(a,d,b),a===-1?cl.fromRangeStart(b):cl.fromRangeEnd(b)},m=function(b){b.hasAttribute("data-mce-caret")&&(Sj(b),i(j()),a.selection.scrollIntoView(b[0]))},n=function(){a.on("mouseup",function(b){var c=j();c.collapsed&&hy.isXYInContentArea(a,b.clientX,b.clientY)&&i(Hl(a,c,!1))}),a.on("click",function(b){var c;c=hA(a,b.target),c&&(eA(c)&&(b.preventDefault(),a.focus()),dA(c)&&a.dom.isChildOf(c,a.selection.getNode())&&s())}),a.on("blur NewBlock",function(){s()}),a.on("ResizeWindow FullscreenStateChanged",function(){return e.reposition()});var c=function(a){var b=!1;a.on("touchstart",function(){b=!1}),a.on("touchmove",function(){b=!0}),a.on("touchend",function(c){var d=hA(a,c.target);eA(d)&&(b||(c.preventDefault(),r(Gl(a,d))))})},f=function(a){var b=ho(a);if(!a.firstChild)return!1;var c=cl.before(a.firstChild),d=b.next(c);return d&&!gA(d)&&!fA(d)},l=function(b,c){var d=a.dom.getParent(b,a.dom.isBlock),e=a.dom.getParent(c,a.dom.isBlock);return d===e},m=function(b,c){var d=a.dom.getParent(b,a.dom.isBlock),e=a.dom.getParent(c,a.dom.isBlock);return!(!d||!a.dom.isChildOf(d,e)||eA(hA(a,d))!==!1)||d&&!l(d,e)&&f(d)};c(a),a.on("mousedown",function(b){var c,e=b.target;if((e===d||"HTML"===e.nodeName||a.dom.isChildOf(e,d))&&hy.isXYInContentArea(a,b.clientX,b.clientY)!==!1)if(c=hA(a,e))eA(c)?(b.preventDefault(),r(Gl(a,c))):(s(),dA(c)&&b.shiftKey||Xz.isXYWithinRange(b.clientX,b.clientY,a.selection.getRng())||(u(),a.selection.placeCaretAt(b.clientX,b.clientY)));else if(tn(e)===!1){s(),u();var f=Vz(d,b.clientX,b.clientY);if(f&&!m(b.target,f.node)){b.preventDefault();var g=k(1,f.node,f.before,!1);a.getBody().focus(),i(g)}}}),a.on("keypress",function(b){if(!cA.modifierPressed(b))switch(b.keyCode){default:eA(a.selection.getNode())&&b.preventDefault()}}),a.on("getSelectionRange",function(a){var c=a.range;if(b){if(!b.parentNode)return void(b=null);c=c.cloneRange(),c.selectNode(b),a.range=c}}),a.on("setSelectionRange",function(a){var b;b=r(a.range,a.forward),b&&(a.range=b)}),a.on("AfterSetSelectionRange",function(a){var b=a.range;q(b)||u(),g(b.startContainer.parentNode)||s()}),a.on("copy",function(a){var b=a.clipboardData;if(!a.isDefaultPrevented()&&a.clipboardData&&!Lb.ie){var c=h();c&&(a.preventDefault(),b.clearData(),b.setData("text/html",c.outerHTML),b.setData("text/plain",c.outerText))}}),zz.init(a),bA.setup(a)},o=function(){var b=a.contentStyles,c=".mce-content-body";b.push(e.getCss()),b.push(c+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+c+" *[contentEditable=false] {cursor: default;}"+c+" *[contentEditable=true] {cursor: text;}")},p=function(a){return Ij(a)||Pj(a)||Qj(a)},q=function(a){return p(a.startContainer)||p(a.endContainer)},r=function(c,d){var e,g,h,i,j,m,n,o,p,r,s=a.$,t=a.dom;if(!c)return null;if(c.collapsed){if(!q(c))if(d===!1){if(o=l(-1,c),tn(o.getNode(!0)))return k(-1,o.getNode(!0),!1,!1);if(tn(o.getNode()))return k(-1,o.getNode(),!o.isAtEnd(),!1)}else{if(o=l(1,c),tn(o.getNode()))return k(1,o.getNode(),!o.isAtEnd(),!1);if(tn(o.getNode(!0)))return k(1,o.getNode(!0),!1,!1)}return null}return i=c.startContainer,j=c.startOffset,m=c.endOffset,3===i.nodeType&&0===j&&eA(i.parentNode)&&(i=i.parentNode,j=t.nodeIndex(i),i=i.parentNode),1!==i.nodeType?null:(m===j+1&&(e=i.childNodes[j]),eA(e)?(p=r=e.cloneNode(!0),n=a.fire("ObjectSelected",{target:e,targetClone:p}),n.isDefaultPrevented()?null:(g=or.descendant(Ef.fromDom(a.getBody()),"#"+f).fold(function(){return s([])},function(a){return s([a.dom()])}),p=n.targetClone,0===g.length&&(g=s('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",f),g.appendTo(a.getBody())),c=a.dom.createRng(),p===r&&Lb.ie?(g.empty().append('<p style="font-size: 0" data-mce-bogus="all">Â </p>').append(p),c.setStartAfter(g[0].firstChild.firstChild),c.setEndAfter(p)):(g.empty().append("Â ").append(p).append("Â "),c.setStart(g[0].firstChild,1),c.setEnd(g[0].lastChild,0)),g.css({top:t.getPos(e,a.getBody()).y}),g[0].focus(),h=a.selection.getSel(),h.removeAllRanges(),h.addRange(c),rb.each(gm.descendants(Ef.fromDom(a.getBody()),"*[data-mce-selected]"),function(a){hg.remove(a,"data-mce-selected")}),e.setAttribute("data-mce-selected","1"),b=e,u(),c)):null)},s=function(){b&&b.removeAttribute("data-mce-selected"),or.descendant(Ef.fromDom(a.getBody()),"#"+f).each(Sp.remove),b=null},t=function(){e.destroy(),b=null},u=function(){e.hide()};return Lb.ceFalse&&(n(),o()),{showCaret:k,showBlockCaretContainer:m,hideFakeCaret:u,destroy:t}},jA=function(a){return 0===a.indexOf("data-")||0===a.indexOf("aria-")},kA=function(a){return a.replace(/<!--|-->/g,"")},lA=function(a,b){return!a.allow_html_data_urls&&(/^data:image\//i.test(b)?a.allow_svg_data_urls===!1&&/^data:image\/svg\+xml/i.test(b):/^data:/i.test(b))},mA=function(a,b,c){var d,e,f,g,h=1;for(g=a.getShortEndedElements(),f=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,f.lastIndex=d=c;e=f.exec(b);){if(d=f.lastIndex,"/"===e[1])h--;else if(!e[1]){if(e[2]in g)continue;h++}if(0===h)break}return d};!function(a){a.findEndTag=mA}(V||(V={}));var nA=V,oA=function(a,b){var c=new RegExp(["\\s?("+a.join("|")+')="[^"]+"'].join("|"),"gi");return b.replace(c,"")},pA=function(a,b){var c,d,e,f,g,h=b,i=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,j=a.schema;for(h=oA(a.getTempAttrs(),h),g=j.getShortEndedElements();f=i.exec(h);)d=i.lastIndex,e=f[0].length,c=g[f[1]]?d:nA.findEndTag(j,h,d),h=h.substring(0,d-e)+h.substring(c),i.lastIndex=d-e;return Dj.trim(h)},qA=pA,rA={trimExternal:qA,trimInternal:pA},sA=0,tA=1,uA=2,vA=function(a,b){var c=a.length+b.length+2,d=new Array(c),e=new Array(c),f=function(a,b,c){return{start:a,end:b,diag:c}},g=function(c,d,e,f,h){var j=i(c,d,e,f);if(null===j||j.start===d&&j.diag===d-f||j.end===c&&j.diag===c-e)for(var k=c,l=e;k<d||l<f;)k<d&&l<f&&a[k]===b[l]?(h.push([sA,a[k]]),++k,++l):d-c>f-e?(h.push([uA,a[k]]),++k):(h.push([tA,b[l]]),++l);else{g(c,j.start,e,j.start-j.diag,h);for(var m=j.start;m<j.end;++m)h.push([sA,a[m]]);g(j.end,d,j.end-j.diag,f,h)}},h=function(c,d,e,g){for(var h=c;h-d<g&&h<e&&a[h]===b[h-d];)++h;return f(c,h,d)},i=function(c,f,g,i){var j=f-c,k=i-g;if(0===j||0===k)return null;var l=j-k,m=k+j,n=(m%2===0?m:m+1)/2;d[1+n]=c,e[1+n]=f+1;var o,p,q,r,s;
for(o=0;o<=n;++o){for(p=-o;p<=o;p+=2){for(q=p+n,p===-o||p!==o&&d[q-1]<d[q+1]?d[q]=d[q+1]:d[q]=d[q-1]+1,r=d[q],s=r-c+g-p;r<f&&s<i&&a[r]===b[s];)d[q]=++r,++s;if(l%2!==0&&l-o<=p&&p<=l+o&&e[q-l]<=d[q])return h(e[q-l],p+c-g,f,i)}for(p=l-o;p<=l+o;p+=2){for(q=p+n-l,p===l-o||p!==l+o&&e[q+1]<=e[q-1]?e[q]=e[q+1]-1:e[q]=e[q-1],r=e[q]-1,s=r-c+g-p;r>=c&&s>=g&&a[r]===b[s];)e[q]=r--,s--;if(l%2===0&&-o<=p&&p<=o&&e[q]<=d[q+l])return h(e[q],p+c-g,f,i)}}},j=[];return g(0,a.length,0,b.length,j),j},wA={KEEP:sA,DELETE:uA,INSERT:tA,diff:vA},xA=function(a){return Ii.isElement(a)?a.outerHTML:Ii.isText(a)?_i.encodeRaw(a.data,!1):Ii.isComment(a)?"<!--"+a.data+"-->":""},yA=function(a){var b,c,d;for(d=document.createElement("div"),b=document.createDocumentFragment(),a&&(d.innerHTML=a);c=d.firstChild;)b.appendChild(c);return b},zA=function(a,b,c){var d=yA(b);if(a.hasChildNodes()&&c<a.childNodes.length){var e=a.childNodes[c];e.parentNode.insertBefore(d,e)}else a.appendChild(d)},AA=function(a,b){if(a.hasChildNodes()&&b<a.childNodes.length){var c=a.childNodes[b];c.parentNode.removeChild(c)}},BA=function(a,b){var c=0;td.each(a,function(a){a[0]===wA.KEEP?c++:a[0]===wA.INSERT?(zA(b,a[1],c),c++):a[0]===wA.DELETE&&AA(b,c)})},CA=function(a){return td.filter(td.map(a.childNodes,xA),function(a){return a.length>0})},DA=function(a,b){var c=td.map(b.childNodes,xA);return BA(wA.diff(c,a),b),b},EA={read:CA,write:DA},FA=function(a,b){var c=b||document,d=c.createElement("div");return d.innerHTML=a,Bh.children(Ef.fromDom(d))},GA=function(a,b){return rb.map(a,function(a){return Ef.fromTag(a,b)})},HA=function(a,b){return rb.map(a,function(a){return Ef.fromText(a,b)})},IA=function(a){return rb.map(a,Ef.fromDom)},JA={fromHtml:FA,fromTags:GA,fromText:HA,fromDom:IA},KA=function(a){return a.dom().innerHTML},LA=function(a,b){var c=Bh.owner(a),d=c.dom(),e=Ef.fromDom(d.createDocumentFragment()),f=JA.fromHtml(b,d);Op.append(e,f),Sp.empty(a),Xm.append(a,e)},MA=function(a){var b=Ef.fromTag("div"),c=Ef.fromDom(a.dom().cloneNode(!0));return Xm.append(b,c),KA(b)},NA={get:KA,set:LA,getOuter:MA},OA=nn(Ka.none()),PA=function(){return OA.get().getOrThunk(function(){var a=document.implementation.createHTMLDocument("undo");return OA.set(Ka.some(a)),a})},QA=function(a){return a.indexOf("</iframe>")!==-1},RA=function(a){return{type:"fragmented",fragments:a,content:"",bookmark:null,beforeBookmark:null}},SA=function(a){return{type:"complete",fragments:null,content:a,bookmark:null,beforeBookmark:null}},TA=function(a){var b,c,d;return b=EA.read(a.getBody()),d=rb.bind(b,function(b){var c=rA.trimInternal(a.serializer,b);return c.length>0?[c]:[]}),c=d.join(""),QA(c)?RA(d):SA(c)},UA=function(a,b,c){"fragmented"===b.type?EA.write(b.fragments,a.getBody()):a.setContent(b.content,{format:"raw"}),a.selection.moveToBookmark(c?b.beforeBookmark:b.bookmark)},VA=function(a){return"fragmented"===a.type?a.fragments.join(""):a.content},WA=function(a){var b=Ef.fromTag("body",PA());return NA.set(b,VA(a)),rb.each(gm.descendants(b,"*[data-mce-bogus]"),Sp.unwrap),NA.get(b)},XA=function(a,b){return VA(a)===VA(b)},YA=function(a,b){return WA(a)===WA(b)},ZA=function(a,b){return!(!a||!b)&&(!!XA(a,b)||YA(a,b))},$A={createFragmentedLevel:RA,createCompleteLevel:SA,createFromEditor:TA,applyToEditor:UA,isEq:ZA},_A=function(a){return a&&/^(IMG)$/.test(a.nodeName)},aB=function(a,b,c){var d,e,f,g=c.startOffset,h=c.startContainer;if((c.startContainer!==c.endContainer||!_A(c.startContainer.childNodes[c.startOffset]))&&1===h.nodeType)for(f=h.childNodes,g<f.length?(h=f[g],d=new u(h,a.getParent(h,a.isBlock))):(h=f[f.length-1],d=new u(h,a.getParent(h,a.isBlock)),d.next(!0)),e=d.current();e;e=d.next())if(3===e.nodeType&&!eB(e))return c.setStart(e,0),void b.setRng(c)},bB=function(a,b,c){if(a)for(b=b?"nextSibling":"previousSibling",a=c?a:a[b];a;a=a[b])if(1===a.nodeType||!eB(a))return a},cB=function(a,b){return b.nodeType&&(b=b.nodeName),!!a.schema.getTextBlockElements()[b.toLowerCase()]},dB=function(a,b,c){return a.schema.isValidChild(b,c)},eB=function(a){return a&&3===a.nodeType&&/^([\t \r\n]+|)$/.test(a.nodeValue)},fB=function(a,b){return"string"!=typeof a?a=a(b):b&&(a=a.replace(/%(\w+)/g,function(a,c){return b[c]||a})),a},gB=function(a,b){return a=a||"",b=b||"",a=""+(a.nodeName||a),b=""+(b.nodeName||b),a.toLowerCase()===b.toLowerCase()},hB=function(a,b,c){return"color"!==c&&"backgroundColor"!==c||(b=a.toHex(b)),"fontWeight"===c&&700===b&&(b="bold"),"fontFamily"===c&&(b=b.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+b},iB=function(a,b,c){return hB(a,a.getStyle(b,c),c)},jB=function(a,b){var c;return a.getParent(b,function(b){return c=a.getStyle(b,"text-decoration"),c&&"none"!==c}),c},kB=function(a,b,c){return a.getParents(b,c,a.getRoot())},lB={isInlineBlock:_A,moveStart:aB,getNonWhiteSpaceSibling:bB,isTextBlock:cB,isValid:dB,isWhiteSpaceNode:eB,replaceVars:fB,isEq:gB,normalizeStyleValue:hB,getStyle:iB,getTextDecoration:jB,getParents:kB},mB=Hp.isBookmarkNode,nB=lB.getParents,oB=lB.isWhiteSpaceNode,pB=lB.isTextBlock,qB=function(a,b){for("undefined"==typeof b&&(b=3===a.nodeType?a.length:a.childNodes.length);a&&a.hasChildNodes();)a=a.childNodes[b],a&&(b=3===a.nodeType?a.length:a.childNodes.length);return{node:a,offset:b}},rB=function(a,b){var c=qB(a,b);if(c.node){for(;c.node&&0===c.offset&&c.node.previousSibling;)c=qB(c.node.previousSibling);c.node&&c.offset>0&&3===c.node.nodeType&&" "===c.node.nodeValue.charAt(c.offset-1)&&c.offset>1&&(a=c.node,a.splitText(c.offset-1))}return a},sB=function(a){return"BR"===a.nodeName&&a.getAttribute("data-mce-bogus")&&!a.nextSibling},tB=function(a,b){for(var c=b;c;){if(1===c.nodeType&&a.getContentEditable(c))return"false"===a.getContentEditable(c)?c:b;c=c.parentNode}return b},uB=function(a,b,c,d){var e,f,g=c.nodeValue;return"undefined"==typeof d&&(d=a?g.length:0),a?(e=g.lastIndexOf(" ",d),f=g.lastIndexOf("Â ",d),e=e>f?e:f,e===-1||b||e++):(e=g.indexOf(" ",d),f=g.indexOf("Â ",d),e=e!==-1&&(f===-1||e<f)?e:f),e},vB=function(a,b,c,d,e,f){var g,h,i,j;if(3===c.nodeType){if(i=uB(e,f,c,d),i!==-1)return{container:c,offset:i};j=c}for(g=new u(c,a.getParent(c,a.isBlock)||b);h=g[e?"prev":"next"]();)if(3===h.nodeType){if(j=h,i=uB(e,f,h),i!==-1)return{container:h,offset:i}}else if(a.isBlock(h))break;if(j)return d=e?0:j.length,{container:j,offset:d}},wB=function(a,b,c,d,e){var f,g,h,i;for(3===d.nodeType&&0===d.nodeValue.length&&d[e]&&(d=d[e]),f=nB(a,d),g=0;g<f.length;g++)for(h=0;h<b.length;h++)if(i=b[h],!("collapsed"in i&&i.collapsed!==c.collapsed)&&a.is(f[g],i.selector))return f[g];return d},xB=function(a,b,c,d){var e,f=a.dom,g=f.getRoot();if(b[0].wrapper||(e=f.getParent(c,b[0].block,g)),!e){var h=f.getParent(c,"LI,TD,TH");e=f.getParent(3===c.nodeType?c.parentNode:c,function(b){return b!==g&&pB(a,b)},h)}if(e&&b[0].wrapper&&(e=nB(f,e,"ul,ol").reverse()[0]||e),!e)for(e=c;e[d]&&!f.isBlock(e[d])&&(e=e[d],!lB.isEq(e,"br")););return e||c},yB=function(a,b,c,d,e,f,g){var h,i,j,k,l;if(h=i=g?c:e,k=g?"previousSibling":"nextSibling",l=a.getRoot(),3===h.nodeType&&!oB(h)&&(g?d>0:f<h.nodeValue.length))return h;for(;;){if(!b[0].block_expand&&a.isBlock(i))return i;for(j=i[k];j;j=j[k])if(!mB(j)&&!oB(j)&&!sB(j))return i;if(i===l||i.parentNode===l){h=i;break}i=i.parentNode}return h},zB=function(a,b,c,d){var e,f=b.startContainer,g=b.startOffset,h=b.endContainer,i=b.endOffset,j=a.dom;return 1===f.nodeType&&f.hasChildNodes()&&(f=tk(f,g),3===f.nodeType&&(g=0)),1===h.nodeType&&h.hasChildNodes()&&(h=tk(h,b.collapsed?i:i-1),3===h.nodeType&&(i=h.nodeValue.length)),f=tB(j,f),h=tB(j,h),(mB(f.parentNode)||mB(f))&&(f=mB(f)?f:f.parentNode,f=f.nextSibling||f,3===f.nodeType&&(g=0)),(mB(h.parentNode)||mB(h))&&(h=mB(h)?h:h.parentNode,h=h.previousSibling||h,3===h.nodeType&&(i=h.length)),c[0].inline&&(b.collapsed&&(e=vB(j,a.getBody(),f,g,!0,d),e&&(f=e.container,g=e.offset),e=vB(j,a.getBody(),h,i,!1,d),e&&(h=e.container,i=e.offset)),h=d?h:rB(h,i)),(c[0].inline||c[0].block_expand)&&(c[0].inline&&3===f.nodeType&&0!==g||(f=yB(j,c,f,g,h,i,!0)),c[0].inline&&3===h.nodeType&&i!==h.nodeValue.length||(h=yB(j,c,f,g,h,i,!1))),c[0].selector&&c[0].expand!==!1&&!c[0].inline&&(f=wB(j,c,b,f,"previousSibling"),h=wB(j,c,b,h,"nextSibling")),(c[0].block||c[0].selector)&&(f=xB(a,c,f,"previousSibling"),h=xB(a,c,h,"nextSibling"),c[0].block&&(j.isBlock(f)||(f=yB(j,c,f,g,h,i,!0)),j.isBlock(h)||(h=yB(j,c,f,g,h,i,!1)))),1===f.nodeType&&(g=j.nodeIndex(f),f=f.parentNode),1===h.nodeType&&(i=j.nodeIndex(h)+1,h=h.parentNode),{startContainer:f,startOffset:g,endContainer:h,endOffset:i}},AB={expandRng:zB},BB=lB.isEq,CB=function(a,b,c){var d=a.formatter.get(c);if(d)for(var e=0;e<d.length;e++)if(d[e].inherit===!1&&a.dom.is(b,d[e].selector))return!0;return!1},DB=function(a,b,c,d){var e=a.dom.getRoot();return b!==e&&(b=a.dom.getParent(b,function(b){return!!CB(a,b,c)||(b.parentNode===e||!!GB(a,b,c,d,!0))}),GB(a,b,c,d))},EB=function(a,b,c){return!!BB(b,c.inline)||(!!BB(b,c.block)||(c.selector?1===b.nodeType&&a.is(b,c.selector):void 0))},FB=function(a,b,c,d,e,f){var g,h,i,j=c[d];if(c.onmatch)return c.onmatch(b,c,d);if(j)if("undefined"==typeof j.length){for(g in j)if(j.hasOwnProperty(g)){if(h="attributes"===d?a.getAttrib(b,g):lB.getStyle(a,b,g),e&&!h&&!c.exact)return;if((!e||c.exact)&&!BB(h,lB.normalizeStyleValue(a,lB.replaceVars(j[g],f),g)))return}}else for(i=0;i<j.length;i++)if("attributes"===d?a.getAttrib(b,j[i]):lB.getStyle(a,b,j[i]))return c;return c},GB=function(a,b,c,d,e){var f,g,h,i,j=a.formatter.get(c),k=a.dom;if(j&&b)for(g=0;g<j.length;g++)if(f=j[g],EB(a.dom,b,f)&&FB(k,b,f,"attributes",e,d)&&FB(k,b,f,"styles",e,d)){if(i=f.classes)for(h=0;h<i.length;h++)if(!a.dom.hasClass(b,i[h]))return;return f}},HB=function(a,b,c,d){var e;return d?DB(a,d,b,c):(d=a.selection.getNode(),!!DB(a,d,b,c)||(e=a.selection.getStart(),!(e===d||!DB(a,e,b,c))))},IB=function(a,b,c){var d,e=[],f={};return d=a.selection.getStart(),a.dom.getParent(d,function(d){var g,h;for(g=0;g<b.length;g++)h=b[g],!f[h]&&GB(a,d,h,c)&&(f[h]=!0,e.push(h))},a.dom.getRoot()),e},JB=function(a,b){var c,d,e,f,g,h=a.formatter.get(b),i=a.dom;if(h)for(c=a.selection.getStart(),d=lB.getParents(i,c),f=h.length-1;f>=0;f--){if(g=h[f].selector,!g||h[f].defaultBlock)return!0;for(e=d.length-1;e>=0;e--)if(i.is(d[e],g))return!0}return!1},KB={matchNode:GB,matchName:EB,match:HB,matchAll:IB,canApply:JB,matchesUnInheritedFormatSelector:CB},LB=function(a,b){return a.splitText(b)},MB=function(a){var b=a.startContainer,c=a.startOffset,d=a.endContainer,e=a.endOffset;return b===d&&Ii.isText(b)?c>0&&c<b.nodeValue.length&&(d=LB(b,c),b=d.previousSibling,e>c?(e-=c,b=d=LB(d,e).previousSibling,e=d.nodeValue.length,c=0):e=0):(Ii.isText(b)&&c>0&&c<b.nodeValue.length&&(b=LB(b,c),c=0),Ii.isText(d)&&e>0&&e<d.nodeValue.length&&(d=LB(d,e).previousSibling,e=d.nodeValue.length)),{startContainer:b,startOffset:c,endContainer:d,endOffset:e}},NB={split:MB},OB=Dj.ZWSP,PB="_mce_caret",QB=function(a,b){return a.importNode(b,!0)},RB=function(a){for(var b=[];a;){if(3===a.nodeType&&a.nodeValue!==OB||a.childNodes.length>1)return[];1===a.nodeType&&b.push(a),a=a.firstChild}return b},SB=function(a){return RB(a).length>0},TB=function(a){var b;if(a)for(b=new u(a,a),a=b.current();a;a=b.next())if(3===a.nodeType)return a;return null},UB=function(a){var b=Ef.fromTag("span");return hg.setAll(b,{id:PB,"data-mce-bogus":"1","data-mce-type":"format-caret"}),a&&Xm.append(b,Ef.fromText(OB)),b},VB=function(a){var b=TB(a);return b&&b.nodeValue.charAt(0)===OB&&b.deleteData(0,1),b},WB=function(a,b,c,d){var e,f,g;e=b.getRng(!0),f=a.getParent(c,a.isBlock),SB(c)?(d!==!1&&(e.setStartBefore(c),e.setEndBefore(c)),a.remove(c)):(g=VB(c),e.startContainer===g&&e.startOffset>0&&e.setStart(g,e.startOffset-1),e.endContainer===g&&e.endOffset>0&&e.setEnd(g,e.endOffset-1),a.remove(c,!0)),f&&a.isEmpty(f)&&cq.fillWithPaddingBr(Ef.fromDom(f)),b.setRng(e)},XB=function(a,b,c,d,e){if(d)WB(b,c,d,e);else if(d=jp(a,c.getStart()),!d)for(;d=b.get(PB);)WB(b,c,d,!1)},YB=function(a,b,c){var d=a.dom,e=d.getParent(c,Ek.curry(lB.isTextBlock,a));e&&d.isEmpty(e)?c.parentNode.replaceChild(b,c):(cq.removeTrailingBr(Ef.fromDom(c)),d.isEmpty(c)?c.parentNode.replaceChild(b,c):d.insertAfter(b,c))},ZB=function(a,b){return a.appendChild(b),b},$B=function(a,b){var c=rb.foldr(a,function(a,b){return ZB(a,b.cloneNode(!1))},b);return ZB(c,c.ownerDocument.createTextNode(OB))},_B=function(a,b,c){var d,e,f,g,h,i,j,k=a.selection;d=k.getRng(!0),g=d.startOffset,i=d.startContainer,j=i.nodeValue,e=jp(a.getBody(),k.getStart()),e&&(f=TB(e));var l=/[^\s\u00a0\u00ad\u200b\ufeff]/;j&&g>0&&g<j.length&&l.test(j.charAt(g))&&l.test(j.charAt(g-1))?(h=k.getBookmark(),d.collapse(!0),d=AB.expandRng(a,d,a.formatter.get(b)),d=NB.split(d),a.formatter.apply(b,c,d),k.moveToBookmark(h)):(e&&f.nodeValue===OB?a.formatter.apply(b,c,e):(e=QB(a.getDoc(),UB(!0).dom()),f=e.firstChild,d.insertNode(e),g=1,a.formatter.apply(b,c,e)),k.setCursorLocation(f,g))},aC=function(a,b,c,d){var e,f,g,h,i,j,k,l=a.dom,m=a.selection,n=[],o=m.getRng();for(e=o.startContainer,f=o.startOffset,i=e,3===e.nodeType&&(f!==e.nodeValue.length&&(h=!0),i=i.parentNode);i;){if(KB.matchNode(a,i,b,c,d)){j=i;break}i.nextSibling&&(h=!0),n.push(i),i=i.parentNode}if(j)if(h){g=m.getBookmark(),o.collapse(!0);var p=AB.expandRng(a,o,a.formatter.get(b),!0);p=NB.split(p),a.formatter.remove(b,c,p),m.moveToBookmark(g)}else{k=jp(a.getBody(),j);var q=UB(!1).dom(),r=$B(n,q);k?YB(a,q,k):YB(a,q,j),WB(l,m,k,!1),m.setCursorLocation(r,1),l.isEmpty(j)&&l.remove(j)}},bC=function(a,b,c,d){XB(a,b,c,null,!1),8===d&&c.isCollapsed()&&c.getStart().innerHTML===OB&&XB(a,b,c,jp(a,c.getStart())),37!==d&&39!==d||XB(a,b,c,jp(a,c.getStart()))},cC=function(a){var b=a.dom,c=a.selection,d=a.getBody();a.on("mouseup keydown",function(a){bC(d,b,c,a.keyCode)})},dC=function(a,b){var c=UB(!1),d=$B(b,c.dom());return Xm.before(Ef.fromDom(a),c),Sp.remove(Ef.fromDom(a)),cl(d,0)},eC=function(a,b){var c=a.schema.getTextInlineElements();return c.hasOwnProperty(Of.name(b))&&!ip(b.dom())&&!Ii.isBogus(b.dom())},fC={},gC=td.filter,hC=td.each,iC=function(a,b){var c=fC[a];c||(fC[a]=c=[]),fC[a].push(b)},jC=function(a,b){hC(fC[a],function(a){a(b)})};iC("pre",function(a){var b,c,d=a.selection.getRng(),e=function(a){return b(a.previousSibling)&&td.indexOf(c,a.previousSibling)!==-1},f=function(a,b){$d(b).remove(),$d(a).append("<br><br>").append(b.childNodes)};b=Ii.matchNodeNames("pre"),d.collapsed||(c=a.selection.getSelectedBlocks(),hC(gC(gC(c,b),e),function(a){f(a.previousSibling,a)}))});var kC={postProcess:jC},lC=Gd.each,mC=function(a,b){var c=a.childNodes;return b--,b>c.length-1?b=c.length-1:b<0&&(b=0),c[b]||a},nC=function(a,b,c){var d,e,f,g,h,i,j,k=b.startContainer,l=b.startOffset,m=b.endContainer,n=b.endOffset;if(j=a.select("td[data-mce-selected],th[data-mce-selected]"),j.length>0)return void lC(j,function(a){c([a])});var o=function(a){var b;return b=a[0],3===b.nodeType&&b===k&&l>=b.nodeValue.length&&a.splice(0,1),b=a[a.length-1],0===n&&a.length>0&&b===m&&3===b.nodeType&&a.splice(a.length-1,1),a},p=function(a,b,c){for(var d=[];a&&a!==c;a=a[b])d.push(a);return d},q=function(a,b){do{if(a.parentNode===b)return a;a=a.parentNode}while(a)},r=function(a,b,d){var e=d?"nextSibling":"previousSibling";for(g=a,h=g.parentNode;g&&g!==b;g=h)h=g.parentNode,i=p(g===a?g:g[e],e),i.length&&(d||i.reverse(),c(o(i)))};if(1===k.nodeType&&k.hasChildNodes()&&(k=k.childNodes[l]),1===m.nodeType&&m.hasChildNodes()&&(m=mC(m,n)),k===m)return c(o([k]));for(d=a.findCommonAncestor(k,m),g=k;g;g=g.parentNode){if(g===m)return r(k,d,!0);if(g===d)break}for(g=m;g;g=g.parentNode){if(g===k)return r(m,d);if(g===d)break}e=q(k,d)||k,f=q(m,d)||m,r(k,e,!0),i=p(e===k?e:e.nextSibling,"nextSibling",f===m?f.nextSibling:f),i.length&&c(o(i)),r(m,f)},oC={walk:nC},pC=/^(src|href|style)$/,qC=Gd.each,rC=lB.isEq,sC=function(a){return/^(TH|TD)$/.test(a.nodeName)},tC=function(a,b,c){var d,e,f;return d=b[c?"startContainer":"endContainer"],e=b[c?"startOffset":"endOffset"],Ii.isElement(d)&&(f=d.childNodes.length-1,!c&&e&&e--,d=d.childNodes[e>f?f:e]),Ii.isText(d)&&c&&e>=d.nodeValue.length&&(d=new u(d,a.getBody()).next()||d),Ii.isText(d)&&!c&&0===e&&(d=new u(d,a.getBody()).prev()||d),d},uC=function(a,b,c,d){var e=a.create(c,d);return b.parentNode.insertBefore(e,b),e.appendChild(b),e},vC=function(a,b,c){return!!rC(b,c.inline)||(!!rC(b,c.block)||(c.selector?Ii.isElement(b)&&a.is(b,c.selector):void 0))},wC=function(a,b){return b.links&&"A"===a.tagName},xC=function(a,b,c,d){return b=lB.getNonWhiteSpaceSibling(b,c,d),!b||"BR"===b.nodeName||a.isBlock(b)},yC=function(a,b,c){var d,e=b.parentNode,f=a.dom,g=a.settings.forced_root_block;c.block&&(g?e===f.getRoot()&&(c.list_block&&rC(b,c.list_block)||qC(Gd.grep(b.childNodes),function(b){lB.isValid(a,g,b.nodeName.toLowerCase())?d?d.appendChild(b):(d=uC(f,b,g),f.setAttribs(d,a.settings.forced_root_block_attrs)):d=0})):f.isBlock(b)&&!f.isBlock(e)&&(xC(f,b,!1)||xC(f,b.firstChild,!0,1)||b.insertBefore(f.create("br"),b.firstChild),xC(f,b,!0)||xC(f,b.lastChild,!1,1)||b.appendChild(f.create("br")))),c.selector&&c.inline&&!rC(c.inline,b)||f.remove(b,1)},zC=function(a,b,c,d,e){var f,g,h,i=a.dom;if(!vC(i,d,b)&&!wC(d,b))return!1;if("all"!==b.remove)for(qC(b.styles,function(a,f){a=lB.normalizeStyleValue(i,lB.replaceVars(a,c),f),"number"==typeof f&&(f=a,e=0),(b.remove_similar||!e||rC(lB.getStyle(i,e,f),a))&&i.setStyle(d,f,""),h=1}),h&&""===i.getAttrib(d,"style")&&(d.removeAttribute("style"),d.removeAttribute("data-mce-style")),qC(b.attributes,function(a,b){var f;if(a=lB.replaceVars(a,c),"number"==typeof b&&(b=a,e=0),!e||rC(i.getAttrib(e,b),a)){if("class"===b&&(a=i.getAttrib(d,b),a&&(f="",qC(a.split(/\s+/),function(a){/mce\-\w+/.test(a)&&(f+=(f?" ":"")+a)}),f)))return void i.setAttrib(d,b,f);"class"===b&&d.removeAttribute("className"),pC.test(b)&&d.removeAttribute("data-mce-"+b),d.removeAttribute(b)}}),qC(b.classes,function(a){a=lB.replaceVars(a,c),e&&!i.hasClass(e,a)||i.removeClass(d,a)}),g=i.getAttribs(d),f=0;f<g.length;f++){var j=g[f].nodeName;if(0!==j.indexOf("_")&&0!==j.indexOf("data-"))return!1}return"none"!==b.remove?(yC(a,d,b),!0):void 0},AC=function(a,b,c,d,e){var f;return qC(lB.getParents(a.dom,b.parentNode).reverse(),function(b){var g;f||"_start"===b.id||"_end"===b.id||(g=KB.matchNode(a,b,c,d,e),g&&g.split!==!1&&(f=b))}),f},BC=function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o=a.dom;if(c){for(n=c.parentNode,i=d.parentNode;i&&i!==n;i=i.parentNode){for(j=o.clone(i,!1),m=0;m<b.length;m++)if(zC(a,b[m],h,j,j)){j=0;break}j&&(k&&j.appendChild(k),l||(l=j),k=j)}!f||g.mixed&&o.isBlock(c)||(d=o.split(c,d)),k&&(e.parentNode.insertBefore(k,e),l.appendChild(e))}return d},CC=function(a,b,c,d,e){var f,g,h=a.formatter.get(b),i=h[0],j=!0,k=a.dom,l=a.selection,m=function(d){var f=AC(a,d,b,c,e);return BC(a,h,f,d,d,!0,i,c)},n=function(b){var d,e,f,g,l;if(Ii.isElement(b)&&k.getContentEditable(b)&&(g=j,j="true"===k.getContentEditable(b),l=!0),d=Gd.grep(b.childNodes),j&&!l)for(e=0,f=h.length;e<f&&!zC(a,h[e],c,b,b);e++);if(i.deep&&d.length){for(e=0,f=d.length;e<f;e++)n(d[e]);l&&(j=g)}},o=function(a){var b=k.get(a?"_start":"_end"),c=b[a?"firstChild":"lastChild"];return Hp.isBookmarkNode(c)&&(c=c[a?"firstChild":"lastChild"]),Ii.isText(c)&&0===c.data.length&&(c=a?b.previousSibling||b.nextSibling:b.nextSibling||b.previousSibling),k.remove(b,!0),c},p=function(b){var c,d,e=b.commonAncestorContainer;if(b=AB.expandRng(a,b,h,!0),i.split){if(c=tC(a,b,!0),d=tC(a,b),c!==d){if(/^(TR|TH|TD)$/.test(c.nodeName)&&c.firstChild&&(c="TR"===c.nodeName?c.firstChild.firstChild||c:c.firstChild||c),e&&/^T(HEAD|BODY|FOOT|R)$/.test(e.nodeName)&&sC(d)&&d.firstChild&&(d=d.firstChild||d),k.isChildOf(c,d)&&c!==d&&!k.isBlock(d)&&!sC(c)&&!sC(d))return c=uC(k,c,"span",{id:"_start","data-mce-type":"bookmark"}),m(c),void(c=o(!0));c=uC(k,c,"span",{id:"_start","data-mce-type":"bookmark"}),d=uC(k,d,"span",{id:"_end","data-mce-type":"bookmark"}),m(c),m(d),c=o(!0),d=o()}else c=d=m(c);b.startContainer=c.parentNode?c.parentNode:c,b.startOffset=k.nodeIndex(c),b.endContainer=d.parentNode?d.parentNode:d,b.endOffset=k.nodeIndex(d)+1}oC.walk(k,b,function(b){qC(b,function(b){n(b),Ii.isElement(b)&&"underline"===a.dom.getStyle(b,"text-decoration")&&b.parentNode&&"underline"===lB.getTextDecoration(k,b.parentNode)&&zC(a,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,b)})})};if(d)return void(d.nodeType?(g=k.createRng(),g.setStartBefore(d),g.setEndAfter(d),p(g)):p(d));if("false"!==k.getContentEditable(l.getNode()))l.isCollapsed()&&i.inline&&!k.select("td[data-mce-selected],th[data-mce-selected]").length?aC(a,b,c,e):(f=gp.getPersistentBookmark(a.selection,!0),p(l.getRng()),l.moveToBookmark(f),i.inline&&KB.match(a,b,c,l.getStart())&&lB.moveStart(k,l,l.getRng()),a.nodeChanged());else{d=l.getNode();for(var q=0,r=h.length;q<r&&(!h[q].ceFalseOverride||!zC(a,h[q],c,d,d));q++);}},DC={removeFormat:zC,remove:CC},EC=Gd.each,FC=function(a){return a&&1===a.nodeType&&!Hp.isBookmarkNode(a)&&!ip(a)&&!Ii.isBogus(a)},GC=function(a,b){var c;for(c=a;c;c=c[b]){if(3===c.nodeType&&0!==c.nodeValue.length)return a;if(1===c.nodeType&&!Hp.isBookmarkNode(c))return c}return a},HC=function(a,b,c){var d,e,f=new Jp(a);if(b&&c&&(b=GC(b,"previousSibling"),c=GC(c,"nextSibling"),f.compare(b,c))){for(d=b.nextSibling;d&&d!==c;)e=d,d=d.nextSibling,b.appendChild(e);return a.remove(c),Gd.each(Gd.grep(c.childNodes),function(a){b.appendChild(a)}),b}return c},IC=function(a,b,c){EC(a.childNodes,function(a){FC(a)&&(b(a)&&c(a),a.hasChildNodes()&&IC(a,b,c))})},JC=function(a,b){return Da.curry(function(b,c){return!(!c||!lB.getStyle(a,c,b))},b)},KC=function(a,b,c){return Da.curry(function(b,c,d){a.setStyle(d,b,c),""===d.getAttribute("style")&&d.removeAttribute("style"),LC(a,d)},b,c)},LC=function(a,b){"SPAN"===b.nodeName&&0===a.getAttribs(b).length&&a.remove(b,!0)},MC=function(a,b){var c;1===b.nodeType&&b.parentNode&&1===b.parentNode.nodeType&&(c=lB.getTextDecoration(a,b.parentNode),a.getStyle(b,"color")&&c?a.setStyle(b,"text-decoration",c):a.getStyle(b,"text-decoration")===c&&a.setStyle(b,"text-decoration",null))},NC=function(a,b,c,d){(b.styles.color||b.styles.textDecoration)&&(Gd.walk(d,Da.curry(MC,a),"childNodes"),MC(a,d))},OC=function(a,b,c,d){b.styles&&b.styles.backgroundColor&&IC(d,JC(a,"fontSize"),KC(a,"backgroundColor",lB.replaceVars(b.styles.backgroundColor,c)))},PC=function(a,b,c,d){"sub"!==b.inline&&"sup"!==b.inline||(IC(d,JC(a,"fontSize"),KC(a,"fontSize","")),a.remove(a.select("sup"===b.inline?"sub":"sup",d),!0))},QC=function(a,b,c,d){d&&b.merge_siblings!==!1&&(d=HC(a,lB.getNonWhiteSpaceSibling(d),d),d=HC(a,d,lB.getNonWhiteSpaceSibling(d,!0)))},RC=function(a,b,c){if(b.clear_child_styles){var d=b.links?"*:not(a)":"*";EC(a.select(d,c),function(c){FC(c)&&EC(b.styles,function(b,d){a.setStyle(c,d,"")})})}},SC=function(a,b,c,d){EC(b,function(b){EC(a.dom.select(b.inline,d),function(d){FC(d)&&DC.removeFormat(a,b,c,d,b.exact?d:null)}),RC(a.dom,b,d)})},TC=function(a,b,c,d,e){KB.matchNode(a,e.parentNode,c,d)&&DC.removeFormat(a,b,d,e)||b.merge_with_parents&&a.dom.getParent(e.parentNode,function(f){if(KB.matchNode(a,f,c,d))return DC.removeFormat(a,b,d,e),!0})},UC={mergeWithChildren:SC,mergeUnderlineAndColor:NC,mergeBackgroundColorAndFontSize:OC,mergeSubSup:PC,mergeSiblings:QC,mergeWithParents:TC},VC=Gd.each,WC=function(a){return a&&1===a.nodeType&&!Hp.isBookmarkNode(a)&&!ip(a)&&!Ii.isBogus(a)},XC=function(a,b,c,d){var e,f,g=a.formatter.get(b),h=g[0],i=!d&&a.selection.isCollapsed(),j=a.dom,k=a.selection,l=function(a,b){if(b=b||h,a){if(b.onformat&&b.onformat(a,b,c,d),VC(b.styles,function(b,d){j.setStyle(a,d,lB.replaceVars(b,c))}),b.styles){var e=j.getAttrib(a,"style");e&&a.setAttribute("data-mce-style",e)}VC(b.attributes,function(b,d){j.setAttrib(a,d,lB.replaceVars(b,c))}),VC(b.classes,function(b){b=lB.replaceVars(b,c),j.hasClass(a,b)||j.addClass(a,b)})}},m=function(a,b){var c=!1;return!!h.selector&&(VC(a,function(a){if(!("collapsed"in a&&a.collapsed!==i))return j.is(b,a.selector)&&!ip(b)?(l(b,a),c=!0,!1):void 0}),c)},n=function(d,e,f,i){var j,k,n=[],o=!0;j=h.inline||h.block,k=d.create(j),l(k),oC.walk(d,e,function(e){var f,p=function(e){var q,r,s,t;if(t=o,q=e.nodeName.toLowerCase(),r=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&d.getContentEditable(e)&&(t=o,o="true"===d.getContentEditable(e),s=!0),lB.isEq(q,"br"))return f=0,void(h.block&&d.remove(e));if(h.wrapper&&KB.matchNode(a,e,b,c))return void(f=0);if(o&&!s&&h.block&&!h.wrapper&&lB.isTextBlock(a,q)&&lB.isValid(a,r,j))return e=d.rename(e,j),l(e),n.push(e),void(f=0);if(h.selector){var u=m(g,e);if(!h.inline||u)return void(f=0)}!o||s||!lB.isValid(a,j,q)||!lB.isValid(a,r,j)||!i&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||ip(e)||h.inline&&d.isBlock(e)?(f=0,VC(Gd.grep(e.childNodes),p),s&&(o=t),f=0):(f||(f=d.clone(k,!1),e.parentNode.insertBefore(f,e),n.push(f)),f.appendChild(e))};VC(e,p)}),h.links===!0&&VC(n,function(a){var b=function(a){"A"===a.nodeName&&l(a,h),VC(Gd.grep(a.childNodes),b)};b(a)}),VC(n,function(e){var f,i=function(a){var b=0;return VC(a.childNodes,function(a){lB.isWhiteSpaceNode(a)||Hp.isBookmarkNode(a)||b++}),b},j=function(a){var b=!1;return VC(a.childNodes,function(a){if(WC(a))return b=a,!1}),b},k=function(a){var b,c;return b=j(a),b&&!Hp.isBookmarkNode(b)&&KB.matchName(d,b,h)&&(c=d.clone(b,!1),l(c),d.replace(c,a,!0),d.remove(b,1)),c||a};return f=i(e),(n.length>1||!d.isBlock(e))&&0===f?void d.remove(e,1):void((h.inline||h.wrapper)&&(h.exact||1!==f||(e=k(e)),UC.mergeWithChildren(a,g,c,e),UC.mergeWithParents(a,h,b,c,e),UC.mergeBackgroundColorAndFontSize(d,h,c,e),UC.mergeSubSup(d,h,c,e),UC.mergeSiblings(d,h,c,e)))})};if("false"!==j.getContentEditable(k.getNode())){if(h){if(d)d.nodeType?m(g,d)||(f=j.createRng(),f.setStartBefore(d),f.setEndAfter(d),n(j,AB.expandRng(a,f,g),null,!0)):n(j,d,null,!0);else if(i&&h.inline&&!j.select("td[data-mce-selected],th[data-mce-selected]").length)_B(a,b,c);else{var o=a.selection.getNode();a.settings.forced_root_block||!g[0].defaultBlock||j.getParent(o,j.isBlock)||XC(a,g[0].defaultBlock),a.selection.setRng(hq.normalize(a.selection.getRng())),e=gp.getPersistentBookmark(a.selection,!0),n(j,AB.expandRng(a,k.getRng(),g),e),h.styles&&UC.mergeUnderlineAndColor(j,h,c,o),k.moveToBookmark(e),lB.moveStart(j,k,k.getRng()),a.nodeChanged()}kC.postProcess(b,a)}}else{d=k.getNode();for(var p=0,q=g.length;p<q;p++)if(g[p].ceFalseOverride&&j.is(d,g[p].selector))return void l(d,g[p])}},YC={applyFormat:XC},ZC=Gd.each,$C=function(a,b){var c={};a.set({}),b.on("NodeChange",function(d){var e=lB.getParents(b.dom,d.element),f={};e=Gd.grep(e,function(a){return 1===a.nodeType&&!a.getAttribute("data-mce-bogus")}),ZC(a.get(),function(a,d){ZC(e,function(g){return b.formatter.matchNode(g,d,{},a.similar)?(c[d]||(ZC(a,function(a){a(!0,{node:g,format:d,parents:e})}),c[d]=a),f[d]=a,!1):!KB.matchesUnInheritedFormatSelector(b,g,d)&&void 0})}),ZC(c,function(a,b){f[b]||(delete c[b],ZC(a,function(a){a(!1,{node:d.element,format:b,parents:e})}))})})},_C=function(a,b,c,d){var e=a.get();ZC(b.split(","),function(a){e[a]||(e[a]=[],e[a].similar=d),e[a].push(c)}),a.set(e)},aD=function(a,b,c,d,e){null===b.get()&&$C(b,a),_C(b,c,d,e)},bD={formatChanged:aD},cD=function(a){var b={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(b,c,d){Gd.each(d,function(c,d){a.setAttrib(b,d,c)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Gd.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(a){b[a]={block:a,remove:"all"}}),b},dD={get:cD},eD=Gd.each,fD=tj.DOM,gD=function(a,b){var c,d,e,f=b&&b.schema||v({}),g=function(a,b){b.classes.length&&fD.addClass(a,b.classes.join(" ")),fD.setAttribs(a,b.attrs)},h=function(a){var b;return d="string"==typeof a?{name:a,classes:[],attrs:{}}:a,b=fD.create(d.name),g(b,d),b},i=function(a,b){var c="string"!=typeof a?a.nodeName.toLowerCase():a,d=f.getElementRule(c),e=d&&d.parentsRequired;return!(!e||!e.length)&&(b&&Gd.inArray(e,b)!==-1?b:e[0])},j=function(a,b,c){var d,e,f,g=b.length>0&&b[0],k=g&&g.name;if(f=i(a,k))k===f?(e=b[0],b=b.slice(1)):e=f;else if(g)e=b[0],b=b.slice(1);else if(!c)return a;return e&&(d=h(e),d.appendChild(a)),c&&(d||(d=fD.create("div"),d.appendChild(a)),Gd.each(c,function(b){var c=h(b);d.insertBefore(c,a)})),j(d,b,e&&e.siblings)};return a&&a.length?(d=a[0],c=h(d),e=fD.create("div"),e.appendChild(j(c,a.slice(1),d.siblings)),e):""},hD=function(a,b){return gD(jD(a),b)},iD=function(a){var b,c={classes:[],attrs:{}};return a=c.selector=Gd.trim(a),"*"!==a&&(b=a.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(a,b,d,e,f){switch(b){case"#":c.attrs.id=d;break;case".":c.classes.push(d);break;case":":Gd.inArray("checked disabled enabled read-only required".split(" "),d)!==-1&&(c.attrs[d]=d)}if("["===e){var g=f.match(/([\w\-]+)(?:\=\"([^\"]+))?/);g&&(c.attrs[g[1]]=g[2])}return""})),c.name=b||"div",c},jD=function(a){return a&&"string"==typeof a?(a=a.split(/\s*,\s*/)[0],a=a.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Gd.map(a.split(/(?:>|\s+(?![^\[\]]+\]))/),function(a){var b=Gd.map(a.split(/(?:~\+|~|\+)/),iD),c=b.pop();return b.length&&(c.siblings=b),c}).reverse()):[]},kD=function(a,b){var c,d,e,f,g,h,i="";if(h=a.settings.preview_styles,h===!1)return"";"string"!=typeof h&&(h="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");
var j=function(a){return a.replace(/%(\w+)/g,"")};if("string"==typeof b){if(b=a.formatter.get(b),!b)return;b=b[0]}return"preview"in b&&(h=b.preview,h===!1)?"":(c=b.block||b.inline||"span",f=jD(b.selector),f.length?(f[0].name||(f[0].name=c),c=b.selector,d=gD(f,a)):d=gD([c],a),e=fD.select(c,d)[0]||d.firstChild,eD(b.styles,function(a,b){a=j(a),a&&fD.setStyle(e,b,a)}),eD(b.attributes,function(a,b){a=j(a),a&&fD.setAttrib(e,b,a)}),eD(b.classes,function(a){a=j(a),fD.hasClass(e,a)||fD.addClass(e,a)}),a.fire("PreviewFormats"),fD.setStyles(d,{position:"absolute",left:-65535}),a.getBody().appendChild(d),g=fD.getStyle(a.getBody(),"fontSize",!0),g=/px$/.test(g)?parseInt(g,10):0,eD(h.split(" "),function(b){var c=fD.getStyle(e,b,!0);if(!("background-color"===b&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(c)&&(c=fD.getStyle(a.getBody(),b,!0),"#ffffff"===fD.toHex(c).toLowerCase())||"color"===b&&"#000000"===fD.toHex(c).toLowerCase())){if("font-size"===b&&/em|%$/.test(c)){if(0===g)return;var d=parseFloat(c)/(/%$/.test(c)?100:1);c=d*g+"px"}"border"===b&&c&&(i+="padding:0 2px;"),i+=b+":"+c+";"}}),a.fire("AfterPreviewFormats"),fD.remove(d),i)},lD={getCssText:kD,parseSelector:jD,selectorToHtml:hD},mD=function(a,b,c,d,e){var f=b.get(c);!KB.match(a,c,d,e)||"toggle"in f[0]&&!f[0].toggle?YC.applyFormat(a,c,d,e):DC.remove(a,c,d,e)},nD={toggle:mD},oD=function(a){a.addShortcut("meta+b","","Bold"),a.addShortcut("meta+i","","Italic"),a.addShortcut("meta+u","","Underline");for(var b=1;b<=6;b++)a.addShortcut("access+"+b,"",["FormatBlock",!1,"h"+b]);a.addShortcut("access+7","",["FormatBlock",!1,"p"]),a.addShortcut("access+8","",["FormatBlock",!1,"div"]),a.addShortcut("access+9","",["FormatBlock",!1,"address"])},pD={setup:oD},qD=function(a,b){return b},rD=function(a,b){var c=Na.isObject(a)&&Na.isObject(b);return c?tD(a,b):b},sD=function(a){return function(){for(var b=new Array(arguments.length),c=0;c<b.length;c++)b[c]=arguments[c];if(0===b.length)throw new Error("Can't merge zero objects");for(var d={},e=0;e<b.length;e++){var f=b[e];for(var g in f)f.hasOwnProperty(g)&&(d[g]=a(d[g],f[g]))}return d}},tD=sD(rD),uD=sD(qD),vD={deepMerge:tD,merge:uD},wD=function(a,b,c){a.addAttributeFilter("data-mce-tabindex",function(a,b){for(var c,d=a.length;d--;)c=a[d],c.attr("tabindex",c.attributes.map["data-mce-tabindex"]),c.attr(b,null)}),a.addAttributeFilter("src,href,style",function(a,d){for(var e,f,g=a.length,h="data-mce-"+d,i=b.url_converter,j=b.url_converter_scope;g--;)e=a[g],f=e.attributes.map[h],void 0!==f?(e.attr(d,f.length>0?f:null),e.attr(h,null)):(f=e.attributes.map[d],"style"===d?f=c.serializeStyle(c.parseStyle(f),e.name):i&&(f=i.call(j,f,d,e.name)),e.attr(d,f.length>0?f:null))}),a.addAttributeFilter("class",function(a){for(var b,c,d=a.length;d--;)b=a[d],c=b.attr("class"),c&&(c=b.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),b.attr("class",c.length>0?c:null))}),a.addAttributeFilter("data-mce-type",function(a,b,c){for(var d,e=a.length;e--;)d=a[e],"bookmark"!==d.attributes.map["data-mce-type"]||c.cleanup||d.remove()}),a.addNodeFilter("noscript",function(a){for(var b,c=a.length;c--;)b=a[c].firstChild,b&&(b.value=_i.decode(b.value))}),a.addNodeFilter("script,style",function(a,c){for(var d,e,f,g=a.length,h=function(a){return a.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};g--;)d=a[g],e=d.firstChild?d.firstChild.value:"","script"===c?(f=d.attr("type"),f&&d.attr("type","mce-no/type"===f?null:f.replace(/^mce\-/,"")),"xhtml"===b.element_format&&e.length>0&&(d.firstChild.value="// <![CDATA[\n"+h(e)+"\n// ]]>")):"xhtml"===b.element_format&&e.length>0&&(d.firstChild.value="<!--\n"+h(e)+"\n-->")}),a.addNodeFilter("#comment",function(a){for(var b,c=a.length;c--;)b=a[c],0===b.value.indexOf("[CDATA[")?(b.name="#cdata",b.type=4,b.value=b.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===b.value.indexOf("mce:protected ")&&(b.name="#text",b.type=3,b.raw=!0,b.value=unescape(b.value).substr(14))}),a.addNodeFilter("xml:namespace,input",function(a,b){for(var c,d=a.length;d--;)c=a[d],7===c.type?c.remove():1===c.type&&("input"!==b||"type"in c.attributes.map||c.attr("type","text"))}),a.addAttributeFilter("data-mce-type",function(b){rb.each(b,function(b){"format-caret"===b.attr("data-mce-type")&&(b.isEmpty(a.schema.getNonEmptyElements())?b.remove():b.unwrap())})}),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(a,b){for(var c=a.length;c--;)a[c].attr(b,null)})},xD=function(a){var b,c,d=function(a){return a&&"br"===a.name};b=a.lastChild,d(b)&&(c=b.prev,d(c)&&(b.remove(),c.remove()))},yD={register:wD,trimTrailingBr:xD},zD=function(a,b,c){var d,e,f,g=a.dom;return b=b.cloneNode(!0),d=document.implementation,d.createHTMLDocument&&(e=d.createHTMLDocument(""),Gd.each("BODY"===b.nodeName?b.childNodes:[b],function(a){e.body.appendChild(e.importNode(a,!0))}),b="BODY"!==b.nodeName?e.body.firstChild:e.body,f=g.doc,g.doc=e),dx.firePreProcess(a,vD.merge(c,{node:b})),f&&(g.doc=f),b},AD=function(a,b){return a&&a.hasEventListeners("PreProcess")&&!b.no_events},BD=function(a,b,c){return AD(a,c)?zD(a,b,c):b},CD={process:BD},DD=function(a,b){rb.each(b,function(b){a.attr(b,null)})},ED=function(a,b,c){a.addNodeFilter("font",function(a){rb.each(a,function(a){var d=b.parse(a.attr("style")),e=a.attr("color"),f=a.attr("face"),g=a.attr("size");e&&(d.color=e),f&&(d["font-family"]=f),g&&(d["font-size"]=c[parseInt(a.attr("size"),10)-1]),a.name="span",a.attr("style",b.serialize(d)),DD(a,["color","face","size"])})})},FD=function(a,b){a.addNodeFilter("strike",function(a){rb.each(a,function(a){var c=b.parse(a.attr("style"));c["text-decoration"]="line-through",a.name="span",a.attr("style",b.serialize(c))})})},GD=function(a,b){var c=w();b.convert_fonts_to_spans&&ED(a,c,Gd.explode(b.font_size_legacy_values)),FD(a,c)},HD=function(a,b){b.inline_styles&&GD(a,b)},ID={register:HD},JD=/^[ \t\r\n]*$/,KD={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},LD=function(a,b,c){var d,e,f=c?"lastChild":"firstChild",g=c?"prev":"next";if(a[f])return a[f];if(a!==b){if(d=a[g])return d;for(e=a.parent;e&&e!==b;e=e.parent)if(d=e[g])return d}},MD=function(){function a(a,b){this.name=a,this.type=b,1===b&&(this.attributes=[],this.attributes.map={})}return a.create=function(b,c){var d,e;if(d=new a(b,KD[b]||1),c)for(e in c)d.attr(e,c[e]);return d},a.prototype.replace=function(a){var b=this;return a.parent&&a.remove(),b.insert(a,b),b.remove(),b},a.prototype.attr=function(a,b){var c,d,e=this;if("string"!=typeof a){for(d in a)e.attr(d,a[d]);return e}if(c=e.attributes){if(void 0!==b){if(null===b){if(a in c.map)for(delete c.map[a],d=c.length;d--;)if(c[d].name===a)return c=c.splice(d,1),e;return e}if(a in c.map){for(d=c.length;d--;)if(c[d].name===a){c[d].value=b;break}}else c.push({name:a,value:b});return c.map[a]=b,e}return c.map[a]}},a.prototype.clone=function(){var b,c,d,e,f,g=this,h=new a(g.name,g.type);if(d=g.attributes){for(f=[],f.map={},b=0,c=d.length;b<c;b++)e=d[b],"id"!==e.name&&(f[f.length]={name:e.name,value:e.value},f.map[e.name]=e.value);h.attributes=f}return h.value=g.value,h.shortEnded=g.shortEnded,h},a.prototype.wrap=function(a){var b=this;return b.parent.insert(a,b),a.append(b),b},a.prototype.unwrap=function(){var a,b,c=this;for(a=c.firstChild;a;)b=a.next,c.insert(a,c,!0),a=b;c.remove()},a.prototype.remove=function(){var a=this,b=a.parent,c=a.next,d=a.prev;return b&&(b.firstChild===a?(b.firstChild=c,c&&(c.prev=null)):d.next=c,b.lastChild===a?(b.lastChild=d,d&&(d.next=null)):c.prev=d,a.parent=a.next=a.prev=null),a},a.prototype.append=function(a){var b,c=this;return a.parent&&a.remove(),b=c.lastChild,b?(b.next=a,a.prev=b,c.lastChild=a):c.lastChild=c.firstChild=a,a.parent=c,a},a.prototype.insert=function(a,b,c){var d;return a.parent&&a.remove(),d=b.parent||this,c?(b===d.firstChild?d.firstChild=a:b.prev.next=a,a.prev=b.prev,a.next=b,b.prev=a):(b===d.lastChild?d.lastChild=a:b.next.prev=a,a.next=b.next,a.prev=b,b.next=a),a.parent=d,a},a.prototype.getAll=function(a){var b,c=this,d=[];for(b=c.firstChild;b;b=LD(b,c))b.name===a&&d.push(b);return d},a.prototype.empty=function(){var a,b,c,d=this;if(d.firstChild){for(a=[],c=d.firstChild;c;c=LD(c,d))a.push(c);for(b=a.length;b--;)c=a[b],c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}return d.firstChild=d.lastChild=null,d},a.prototype.isEmpty=function(a,b,c){var d,e,f=this,g=f.firstChild;if(b=b||{},g)do{if(1===g.type){if(g.attributes.map["data-mce-bogus"])continue;if(a[g.name])return!1;for(d=g.attributes.length;d--;)if(e=g.attributes[d].name,"name"===e||0===e.indexOf("data-mce-bookmark"))return!1}if(8===g.type)return!1;if(3===g.type&&!JD.test(g.value))return!1;if(3===g.type&&g.parent&&b[g.parent.name]&&JD.test(g.value))return!1;if(c&&c(g))return!1}while(g=LD(g,f));return!0},a.prototype.walk=function(a){return LD(this,null,a)},a}(),ND=function(a,b,c,d){var e=a.padd_empty_with_br||b.insert;e&&c[d.name]?d.empty().append(new MD("br",1)).shortEnded=!0:d.empty().append(new MD("#text",3)).value="Â "},OD=function(a){return PD(a,"#text")&&"Â "===a.firstChild.value},PD=function(a,b){return a&&a.firstChild&&a.firstChild===a.lastChild&&a.firstChild.name===b},QD=function(a,b){var c=a.getElementRule(b.name);return c&&c.paddEmpty},RD=function(a,b,c,d){return d.isEmpty(b,c,function(b){return QD(a,b)})},SD=function(a,b){return a&&(b[a.name]||"br"===a.name)},TD=function(a,b){var c=a.schema;b.remove_trailing_brs&&a.addNodeFilter("br",function(a,d,e){var f,g,h,i,j,k,l,m,n=a.length,o=Gd.extend({},c.getBlockElements()),p=c.getNonEmptyElements(),q=c.getNonEmptyElements();for(o.body=1,f=0;f<n;f++)if(g=a[f],h=g.parent,o[g.parent.name]&&g===h.lastChild){for(j=g.prev;j;){if(k=j.name,"span"!==k||"bookmark"!==j.attr("data-mce-type")){if("br"!==k)break;if("br"===k){g=null;break}}j=j.prev}g&&(g.remove(),RD(c,p,q,h)&&(l=c.getElementRule(h.name),l&&(l.removeEmpty?h.remove():l.paddEmpty&&ND(b,e,o,h))))}else{for(i=g;h&&h.firstChild===i&&h.lastChild===i&&(i=h,!o[h.name]);)h=h.parent;i===h&&b.padd_empty_with_br!==!0&&(m=new MD("#text",3),m.value="Â ",g.replace(m))}}),a.addAttributeFilter("href",function(a){var c,d=a.length,e=function(a){var b=a.split(" ").filter(function(a){return a.length>0});return b.concat(["noopener"]).sort().join(" ")},f=function(a){var b=a?Gd.trim(a):"";return/\b(noopener)\b/g.test(b)?b:e(b)};if(!b.allow_unsafe_link_target)for(;d--;)c=a[d],"a"===c.name&&"_blank"===c.attr("target")&&c.attr("rel",f(c.attr("rel")))}),b.allow_html_in_named_anchor||a.addAttributeFilter("id,name",function(a){for(var b,c,d,e,f=a.length;f--;)if(e=a[f],"a"===e.name&&e.firstChild&&!e.attr("href")){d=e.parent,b=e.lastChild;do c=b.prev,d.insert(b,e),b=c;while(b)}}),b.fix_list_elements&&a.addNodeFilter("ul,ol",function(a){for(var b,c,d=a.length;d--;)if(b=a[d],c=b.parent,"ul"===c.name||"ol"===c.name)if(b.prev&&"li"===b.prev.name)b.prev.append(b);else{var e=new MD("li",1);e.attr("style","list-style-type: none"),b.wrap(e)}}),b.validate&&c.getValidClasses()&&a.addAttributeFilter("class",function(a){for(var b,d,e,f,g,h,i,j=a.length,k=c.getValidClasses();j--;){for(b=a[j],d=b.attr("class").split(" "),g="",e=0;e<d.length;e++)f=d[e],i=!1,h=k["*"],h&&h[f]&&(i=!0),h=k[b.name],!i&&h&&h[f]&&(i=!0),i&&(g&&(g+=" "),g+=f);g.length||(g=null),b.attr("class",g)}})},UD=Gd.makeMap,VD=Gd.each,WD=Gd.explode,XD=Gd.extend,YD=function(a,b,c){Gd.inArray(b,c)===-1&&(a.addAttributeFilter(c,function(a,b){for(var c=a.length;c--;)a[c].attr(b,null)}),b.push(c))},ZD=function(a,b,c){if(!b.no_events&&a){var d=dx.firePostProcess(a,vD.merge(b,{content:c}));return d.content}return c},$D=function(a,b,c){var d=Dj.trim(c.getInner?b.innerHTML:a.getOuterHTML(b));return c.selection||qi(Ef.fromDom(b))?d:Gd.trim(d)},_D=function(a,b,c){var d=c.selection?vD.merge({forced_root_block:!1},c):c,e=a.parse(b,d);return yD.trimTrailingBr(e),e},aE=function(a,b,c){var d=C(a,b);return d.serialize(c)},bE=function(a,b,c,d,e){var f=aE(b,c,d);return ZD(a,e,f)};!function(a){a.isBookmarkNode=Hp.isBookmarkNode}(aa||(aa={}));var cE=aa,dE=Ii.isContentEditableFalse,eE=Ii.isContentEditableTrue,fE=function(a,b){for(;b&&b!==a;){if(eE(b)||dE(b))return b;b=b.parentNode}return null},gE=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=b.dom,u=Gd.each,v=b.getDoc(),w=document,x=Math.abs,y=Math.round,z=b.getBody();f={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var A=".mce-content-body";b.contentStyles.push(A+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+A+" .mce-resizehandle:hover {background: #000}"+A+" img[data-mce-selected],"+A+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+A+" .mce-clonedresizable {position: absolute;"+(Lb.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+A+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var B=function(a){return a&&("IMG"===a.nodeName||b.dom.is(a,"figure.image"))},C=function(a,b){return B(a.target)&&!Xz.isXYWithinRange(a.clientX,a.clientY,b)},D=function(a){var c=a.target;C(a,b.selection.getRng())&&!a.isDefaultPrevented()&&(a.preventDefault(),b.selection.select(c))},E=function(a){return b.dom.is(a,"figure.image")?a.querySelector("img"):a},F=function(a){var c=b.settings.object_resizing;return c!==!1&&!Lb.iOS&&("string"!=typeof c&&(c="table,img,figure.image,div"),"false"!==a.getAttribute("data-mce-resize")&&(a!==b.getBody()&&$g.is(Ef.fromDom(a),c)))},G=function(a){var f,u,v,w,A;f=a.screenX-h,u=a.screenY-i,p=f*g[2]+l,q=u*g[3]+m,p=p<5?5:p,q=q<5?5:q,v=B(c)&&b.settings.resize_img_proportional!==!1?!cA.modifierPressed(a):cA.modifierPressed(a)||B(c)&&g[2]*g[3]!==0,v&&(x(f)>x(u)?(q=y(p*n),p=y(q/n)):(p=y(q/n),q=y(p*n))),t.setStyles(E(d),{width:p,height:q}),w=g.startPos.x+f,A=g.startPos.y+u,w=w>0?w:0,A=A>0?A:0,t.setStyles(e,{left:w,top:A,display:"block"}),e.innerHTML=p+" &times; "+q,g[2]<0&&d.clientWidth<=p&&t.setStyle(d,"left",j+(l-p)),g[3]<0&&d.clientHeight<=q&&t.setStyle(d,"top",k+(m-q)),f=z.scrollWidth-r,u=z.scrollHeight-s,f+u!==0&&t.setStyles(e,{left:w-f,top:A-u}),o||(dx.fireObjectResizeStart(b,c,l,m),o=!0)},H=function(){o=!1;var a=function(a,d){d&&(c.style[a]||!b.schema.isValid(c.nodeName.toLowerCase(),a)?t.setStyle(E(c),a,d):t.setAttrib(E(c),a,d))};a("width",p),a("height",q),t.unbind(v,"mousemove",G),t.unbind(v,"mouseup",H),w!==v&&(t.unbind(w,"mousemove",G),t.unbind(w,"mouseup",H)),t.remove(d),t.remove(e),I(c),dx.fireObjectResized(b,c,p,q),t.setAttrib(c,"style",t.getAttrib(c,"style")),b.nodeChanged()},I=function(a){var o,x,y,A,B;J(),M(),o=t.getPos(a,z),j=o.x,k=o.y,B=a.getBoundingClientRect(),x=B.width||B.right-B.left,y=B.height||B.bottom-B.top,c!==a&&(c=a,p=q=0),A=b.fire("ObjectSelected",{target:a}),F(a)&&!A.isDefaultPrevented()?u(f,function(a,b){var f,o=function(b){h=b.screenX,i=b.screenY,l=E(c).clientWidth,m=E(c).clientHeight,n=m/l,g=a,a.startPos={x:x*a[0]+j,y:y*a[1]+k},r=z.scrollWidth,s=z.scrollHeight,d=c.cloneNode(!0),t.addClass(d,"mce-clonedresizable"),t.setAttrib(d,"data-mce-bogus","all"),d.contentEditable=!1,d.unSelectabe=!0,t.setStyles(d,{left:j,top:k,margin:0}),d.removeAttribute("data-mce-selected"),z.appendChild(d),t.bind(v,"mousemove",G),t.bind(v,"mouseup",H),w!==v&&(t.bind(w,"mousemove",G),t.bind(w,"mouseup",H)),e=t.add(z,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},l+" &times; "+m)};f=t.get("mceResizeHandle"+b),f&&t.remove(f),f=t.add(z,"div",{id:"mceResizeHandle"+b,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,style:"cursor:"+b+"-resize; margin:0; padding:0"}),11===Lb.ie&&(f.contentEditable=!1),t.bind(f,"mousedown",function(a){a.stopImmediatePropagation(),a.preventDefault(),o(a)}),a.elm=f,t.setStyles(f,{left:x*a[0]+j-f.offsetWidth/2,top:y*a[1]+k-f.offsetHeight/2})}):J(),c.setAttribute("data-mce-selected","1")},J=function(){var a,b;M(),c&&c.removeAttribute("data-mce-selected");for(a in f)b=t.get("mceResizeHandle"+a),b&&(t.unbind(b),t.remove(b))},K=function(c){var d,e,f=function(a,b){if(a)do if(a===b)return!0;while(a=a.parentNode)};if(!o&&!b.removed)return u(t.select("img[data-mce-selected],hr[data-mce-selected]"),function(a){a.removeAttribute("data-mce-selected")}),e="mousedown"===c.type?c.target:a.getNode(),e=t.$(e).closest("table,img,figure.image,hr")[0],f(e,z)&&(N(),d=a.getStart(!0),f(d,e)&&f(a.getEnd(!0),e))?void I(e):void J()},L=function(a){return dE(fE(b.getBody(),a))},M=function(){for(var a in f){var b=f[a];b.elm&&(t.unbind(b.elm),delete b.elm)}},N=function(){try{b.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(a){}};b.on("init",function(){N(),Lb.ie&&Lb.ie>=11&&(b.on("mousedown click",function(a){var c=a.target,d=c.nodeName;o||!/^(TABLE|IMG|HR)$/.test(d)||L(c)||(2!==a.button&&b.selection.select(c,"TABLE"===d),"mousedown"===a.type&&b.nodeChanged())}),b.dom.bind(z,"mscontrolselect",function(a){var c=function(a){Ub.setEditorTimeout(b,function(){b.selection.select(a)})};return L(a.target)?(a.preventDefault(),void c(a.target)):void(/^(TABLE|IMG|HR)$/.test(a.target.nodeName)&&(a.preventDefault(),"IMG"===a.target.tagName&&c(a.target)))}));var a=Ub.throttle(function(a){b.composing||K(a)});b.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",a),b.on("keyup compositionend",function(b){c&&"TABLE"===c.nodeName&&a(b)}),b.on("hide blur",J),b.on("contextmenu",D)}),b.on("remove",M);var O=function(){c=d=null};return{isResizable:F,showResizeRect:I,hideResizeRect:J,updateResizeRect:K,destroy:O}},hE=function(a){return Ii.isContentEditableTrue(a)||Ii.isContentEditableFalse(a)},iE=function(a,b,c){for(;a&&a!==b;){if(c(a))return a;a=a.parentNode}return null},jE=function(a,b,c){var d,e,f;if(d=c.elementFromPoint(a,b),e=c.body.createTextRange(),d&&"HTML"!==d.tagName||(d=c.body),e.moveToElementText(d),f=Gd.toArray(e.getClientRects()),f=f.sort(function(a,c){return a=Math.abs(Math.max(a.top-b,a.bottom-b)),c=Math.abs(Math.max(c.top-b,c.bottom-b)),a-c}),f.length>0){b=(f[0].bottom+f[0].top)/2;try{return e.moveToPoint(a,b),e.collapse(!0),e}catch(g){}}return null},kE=function(a,b){var c=a&&a.parentElement?a.parentElement():null;return Ii.isContentEditableFalse(iE(c,b,hE))?null:a},lE=function(a,b,c){var d,e,f=c;if(f.caretPositionFromPoint)e=f.caretPositionFromPoint(a,b),e&&(d=c.createRange(),d.setStart(e.offsetNode,e.offset),d.collapse(!0));else if(c.caretRangeFromPoint)d=c.caretRangeFromPoint(a,b);else if(f.body.createTextRange){d=f.body.createTextRange();try{d.moveToPoint(a,b),d.collapse(!0)}catch(g){d=jE(a,b,c)}return kE(d,c.body)}return d},mE={fromPoint:lE},nE=function(a,b){return rb.map(b,function(b){var c=a.fire("GetSelectionRange",{range:b});return c.range!==b?c.range:b})},oE={processRanges:nE},pE=function(a,b){return Ef.fromDom(a.dom().cloneNode(b))},qE=function(a){return pE(a,!1)},rE=function(a){return pE(a,!0)},sE=function(a,b){var c=Ef.fromTag(b),d=hg.clone(a);return hg.setAll(c,d),c},tE=function(a,b){var c=sE(a,b),d=Bh.children(rE(a));return Op.append(c,d),c},uE=function(a,b){var c=sE(a,b);Xm.before(a,c);var d=Bh.children(a);return Op.append(c,d),Sp.remove(a),c},vE={shallow:qE,shallowAs:sE,deep:rE,copy:tE,mutate:uE},wE=function(a,b){var c=b||document,d=c.createDocumentFragment();return rb.each(a,function(a){d.appendChild(a.dom())}),Ef.fromDom(d)},xE={fromElements:wE},yE=Mg.immutable("element","width","rows"),zE=Mg.immutable("element","cells"),AE=Mg.immutable("x","y"),BE=function(a,b){var c=parseInt(hg.get(a,b),10);return isNaN(c)?1:c},CE=function(a,b,c,d,e){for(var f=BE(e,"rowspan"),g=BE(e,"colspan"),h=a.rows(),i=c;i<c+f;i++){h[i]||(h[i]=zE(vE.deep(d),[]));for(var j=b;j<b+g;j++){var k=h[i].cells();k[j]=i===c&&j===b?e:vE.shallow(e)}}},DE=function(a,b,c){var d=a.rows(),e=d[c]?d[c].cells():[];return!!e[b]},EE=function(a,b,c){for(;DE(a,b,c);)b++;return b},FE=function(a){return rb.foldl(a,function(a,b){return b.cells().length>a?b.cells().length:a},0)},GE=function(a,b){for(var c=a.rows(),d=0;d<c.length;d++)for(var e=c[d].cells(),f=0;f<e.length;f++)if(gh.eq(e[f],b))return Ka.some(AE(f,d));return Ka.none()},HE=function(a,b,c,d,e){for(var f=[],g=a.rows(),h=c;h<=e;h++){var i=g[h].cells(),j=b<d?i.slice(b,d+1):i.slice(d,b+1);f.push(zE(g[h].element(),j))}return f},IE=function(a,b,c){var d=b.x(),e=b.y(),f=c.x(),g=c.y(),h=e<g?HE(a,d,e,f,g):HE(a,d,g,f,e);return yE(a.element(),FE(h),h)},JE=function(a,b){var c=vE.shallow(a.element()),d=Ef.fromTag("tbody");return Op.append(d,b),Xm.append(c,d),c},KE=function(a){return rb.map(a.rows(),function(a){var b=rb.map(a.cells(),function(a){var b=vE.deep(a);return hg.remove(b,"colspan"),hg.remove(b,"rowspan"),b}),c=vE.shallow(a.element());return Op.append(c,b),c})},LE=function(a){var b=yE(vE.shallow(a),0,[]);return rb.each(gm.descendants(a,"tr"),function(a,c){rb.each(gm.descendants(a,"td,th"),function(d,e){CE(b,EE(b,e,c),c,a,d)})}),yE(b.element(),FE(b.rows()),b.rows())},ME=function(a){return JE(a,KE(a))},NE=function(a,b,c){return GE(a,b).bind(function(b){return GE(a,c).map(function(c){return IE(a,b,c)})})},OE={fromDom:LE,toDom:ME,subsection:NE},PE=function(a){return rb.find(a,function(a){return"ul"===Of.name(a)||"ol"===Of.name(a)})},QE=function(a,b){return rb.find(a,function(a){return"li"===Of.name(a)&&Vy(a,b)}).fold(Da.constant([]),function(b){return PE(a).map(function(a){return[Ef.fromTag("li"),Ef.fromTag(Of.name(a))]}).getOr([])})},RE=function(a,b){var c=rb.foldl(b,function(a,b){return Xm.append(b,a),b},a);return b.length>0?xE.fromElements([c]):c},SE=function(a){return mi(a)?Bh.parent(a).filter(li).fold(Da.constant([]),function(b){return[a,b]}):li(a)?[a]:[]},TE=function(a,b){var c=Ef.fromDom(b.commonAncestorContainer),d=Ur.parentsAndSelf(c,a),e=rb.filter(d,function(a){return ii(a)||gi(a)}),f=QE(d,b),g=e.concat(f.length?f:SE(c));return rb.map(g,vE.shallow)},UE=function(){return xE.fromElements([])},VE=function(a,b){return RE(Ef.fromDom(b.cloneContents()),TE(a,b))},WE=function(a,b){return or.ancestor(b,"table",Da.curry(gh.eq,a))},XE=function(a,b){return WE(a,b[0]).bind(function(a){var c=b[0],d=b[b.length-1],e=OE.fromDom(a);return OE.subsection(e,c,d).map(function(a){return xE.fromElements([OE.toDom(a)])})}).getOrThunk(UE)},YE=function(a,b){return b.length>0&&b[0].collapsed?UE():VE(a,b[0])},ZE=function(a,b){var c=Lu.getCellsFromElementOrRanges(b,a);return c.length>0?XE(a,c):YE(a,b)},$E={read:ZE},_E=function(a,b){var c,d=a.selection.getRng(),e=a.dom.create("body"),f=a.selection.getSel(),g=oE.processRanges(a,Gu.getRanges(f));if(b=b||{},b.get=!0,b.format=b.format||"html",b.selection=!0,b=a.fire("BeforeGetContent",b),b.isDefaultPrevented())return a.fire("GetContent",b),b.content;if("text"===b.format)return a.selection.isCollapsed()?"":Dj.trim(d.text||(f.toString?f.toString():""));d.cloneContents?(c=b.contextual?$E.read(Ef.fromDom(a.getBody()),g).dom():d.cloneContents(),c&&e.appendChild(c)):void 0!==d.item||void 0!==d.htmlText?(e.innerHTML="<br>"+(d.item?d.item(0).outerHTML:d.htmlText),e.removeChild(e.firstChild)):e.innerHTML=d.toString(),b.getInner=!0;var h=a.selection.serializer.serialize(e,b);return"tree"===b.format?h:(b.content=a.selection.isCollapsed()?"":h,a.fire("GetContent",b),b.content)},aF={getContent:_E},bF=function(a,b,c){var d,e,f,g=a.selection.getRng(),h=a.getDoc();if(c=c||{format:"html"},c.set=!0,c.selection=!0,c.content=b,!c.no_events&&(c=a.fire("BeforeSetContent",c),c.isDefaultPrevented()))return void a.fire("SetContent",c);if(b=c.content,g.insertNode){b+='<span id="__caret">_</span>',g.startContainer===h&&g.endContainer===h?h.body.innerHTML=b:(g.deleteContents(),0===h.body.childNodes.length?h.body.innerHTML=b:g.createContextualFragment?g.insertNode(g.createContextualFragment(b)):(e=h.createDocumentFragment(),f=h.createElement("div"),e.appendChild(f),f.outerHTML=b,g.insertNode(e))),d=a.dom.get("__caret"),g=h.createRange(),g.setStartBefore(d),g.setEndBefore(d),a.selection.setRng(g),a.dom.remove("__caret");try{a.selection.setRng(g)}catch(i){}}else g.item&&(h.execCommand("Delete",!1,null),g=a.getRng()),/^\s+/.test(b)?(g.pasteHTML('<span id="__mce_tmp">_</span>'+b),a.dom.remove("__mce_tmp")):g.pasteHTML(b);c.no_events||a.fire("SetContent",c)},cF={setContent:bF},dF=function(a,b,c,d,e){var f=c?b.startContainer:b.endContainer,g=c?b.startOffset:b.endOffset;return Ka.from(f).map(Ef.fromDom).map(function(a){return d&&b.collapsed?a:Bh.child(a,e(a,g)).getOr(a)}).bind(function(a){return Of.isElement(a)?Ka.some(a):Bh.parent(a)}).map(function(a){return a.dom()}).getOr(a)},eF=function(a,b,c){return dF(a,b,!0,c,function(a,b){return Math.min(Bh.childNodesCount(a),b)})},fF=function(a,b,c){return dF(a,b,!1,c,function(a,b){return b>0?b-1:b})},gF=function(a,b){for(var c=a;a&&Ii.isText(a)&&0===a.length;)a=b?a.nextSibling:a.previousSibling;return a||c},hF=function(a,b){var c,d,e,f,g;return b?(d=b.startContainer,e=b.endContainer,f=b.startOffset,g=b.endOffset,c=b.commonAncestorContainer,!b.collapsed&&(d===e&&g-f<2&&d.hasChildNodes()&&(c=d.childNodes[f]),3===d.nodeType&&3===e.nodeType&&(d=d.length===f?gF(d.nextSibling,!0):d.parentNode,e=0===g?gF(e.previousSibling,!1):e.parentNode,d&&d===e))?d:c&&3===c.nodeType?c.parentNode:c):a},iF=function(a,b,c,d){var e,f,g=[];if(f=a.getRoot(),c=a.getParent(c||eF(f,b,!1),a.isBlock),d=a.getParent(d||fF(f,b,!1),a.isBlock),c&&c!==f&&g.push(c),c&&d&&c!==d){e=c;for(var h=new u(c,f);(e=h.next())&&e!==d;)a.isBlock(e)&&g.push(e)}return d&&c!==d&&d!==f&&g.push(d),g},jF=function(a,b,c){return Ka.from(b).map(function(b){var d=a.nodeIndex(b),e=a.createRng();return e.setStart(b.parentNode,d),e.setEnd(b.parentNode,d+1),c&&(Wy(a,e,b,!0),Wy(a,e,b,!1)),e})},kF=Gd.each,lF=function(a){return!!a.select},mF=function(a){return!(!a||!a.ownerDocument)&&gh.contains(Ef.fromDom(a.ownerDocument),Ef.fromDom(a))},nF=function(a){return!!a&&(!!lF(a)||mF(a.startContainer)&&mF(a.endContainer))},oF=function(a,b,c,d){var e,f,g,h,i,j=function(b,c){var e=a.createRng();b?(e.setStart(b,c),e.setEnd(b,c),v(e),s(!1)):(Wy(a,e,d.getBody(),!0),v(e))},k=function(a){return aF.getContent(d,a)},l=function(a,b){return cF.setContent(d,a,b)},m=function(a){return eF(d.getBody(),u(),a)},n=function(a){return fF(d.getBody(),u(),a)},o=function(a,b){return e.getBookmark(a,b)},p=function(a){return e.moveToBookmark(a)},q=function(b,c){return jF(a,b,c).each(v),b},r=function(){var a=u(),b=t();return!(!a||a.item)&&(a.compareEndPoints?0===a.compareEndPoints("StartToEnd",a):!b||a.collapsed)},s=function(a){var b=u();b.collapse(!!a),v(b)},t=function(){return b.getSelection?b.getSelection():b.document.selection},u=function(){var c,e,f,i,j=function(a,b,c){try{return b.compareBoundaryPoints(a,c)}catch(d){return-1}};if(!b)return null;if(i=b.document,"undefined"==typeof i||null===i)return null;if(void 0!==d.bookmark&&Wx.hasFocus(d)===!1){var k=ww.getRng(d);if(k.isSome())return k.map(function(a){return oE.processRanges(d,[a])[0]}).getOr(i.createRange())}try{(c=t())&&(e=c.rangeCount>0?c.getRangeAt(0):c.createRange?c.createRange():i.createRange())}catch(l){}return e=oE.processRanges(d,[e])[0],e||(e=i.createRange?i.createRange():i.body.createTextRange()),e.setStart&&9===e.startContainer.nodeType&&e.collapsed&&(f=a.getRoot(),e.setStart(f,0),e.setEnd(f,0)),g&&h&&(0===j(e.START_TO_START,e,g)&&0===j(e.END_TO_END,e,g)?e=h:(g=null,h=null)),e},v=function(a,b){var c,e,f;if(nF(a)){var i=lF(a)?a:null;if(i){h=null;try{i.select()}catch(j){}}else{if(c=t(),f=d.fire("SetSelectionRange",{range:a,forward:b}),a=f.range,c){h=a;try{c.removeAllRanges(),c.addRange(a)}catch(j){}b===!1&&c.extend&&(c.collapse(a.endContainer,a.endOffset),c.extend(a.startContainer,a.startOffset)),g=c.rangeCount>0?c.getRangeAt(0):null}a.collapsed||a.startContainer!==a.endContainer||!c.setBaseAndExtent||Lb.ie||a.endOffset-a.startOffset<2&&a.startContainer.hasChildNodes()&&(e=a.startContainer.childNodes[a.startOffset],e&&"IMG"===e.tagName&&(c.setBaseAndExtent(a.startContainer,a.startOffset,a.endContainer,a.endOffset),c.anchorNode===a.startContainer&&c.focusNode===a.endContainer||c.setBaseAndExtent(e,0,e,1))),d.fire("AfterSetSelectionRange",{range:a,forward:b})}}},w=function(b){return l(a.getOuterHTML(b)),b},x=function(){return hF(d.getBody(),u())},y=function(b,c){return iF(a,u(),b,c)},z=function(){var b,c,d=t();return!(d&&d.anchorNode&&d.focusNode)||(b=a.createRng(),b.setStart(d.anchorNode,d.anchorOffset),b.collapse(!0),c=a.createRng(),c.setStart(d.focusNode,d.focusOffset),c.collapse(!0),b.compareBoundaryPoints(b.START_TO_START,c)<=0)},A=function(){var b=u(),c=t();if(!Gu.hasMultipleRanges(c)&&Xy(d)){var e=Kv.normalize(a,b);return e.each(function(a){v(a,z())}),e.getOr(b)}return b},B=function(b,c){var e;return i||(i={},e={},d.on("NodeChange",function(b){var c=b.element,d=a.getParents(c,null,a.getRoot()),f={};kF(i,function(b,c){kF(d,function(g){if(a.is(g,c))return e[c]||(kF(b,function(a){a(!0,{node:g,selector:c,parents:d})}),e[c]=b),f[c]=b,!1})}),kF(e,function(a,b){f[b]||(delete e[b],kF(a,function(a){a(!1,{node:c,selector:b,parents:d})}))})})),i[b]||(i[b]=[]),i[b].push(c),H},C=function(){for(var b,c=a.getRoot();c&&"BODY"!==c.nodeName;){if(c.scrollHeight>c.clientHeight){b=c;break}c=c.parentNode}return b},D=function(a,b){return zm.scrollElementIntoView(d,a,b)},E=function(a,b){return v(mE.fromPoint(a,b,d.getDoc()))},F=function(){var a=u();return a.collapsed?cl.fromRangeStart(a).getClientRects()[0]:a.getBoundingClientRect()},G=function(){b=g=h=null,f.destroy()},H={bookmarkManager:null,controlSelection:null,dom:a,win:b,serializer:c,editor:d,collapse:s,setCursorLocation:j,getContent:k,setContent:l,getBookmark:o,moveToBookmark:p,select:q,isCollapsed:r,isForward:z,setNode:w,getNode:x,getSel:t,setRng:v,getRng:u,getStart:m,getEnd:n,getSelectedBlocks:y,normalize:A,selectorChanged:B,getScrollContainer:C,scrollIntoView:D,placeCaretAt:E,getBoundingClientRect:F,destroy:G};return e=cE(H),f=gE(H,d),H.bookmarkManager=e,H.controlSelection=f,H},pF=Ii.isContentEditableFalse,qF=sk,rF=Tn,sF=Sn,tF=function(a,b){for(;b=a(b);)if(b.isVisible())return b;return b},uF=function(a,b){var c=Gn(a,b);return!(c||!Ii.isBr(a.getNode()))||c},vF=function(a,b,c,d){var e,f,g,h,i=a===Jl.Forwards,j=i?sF:rF;return!d.collapsed&&(e=qF(d),pF(e))?El(a,b,e,a===Jl.Backwards,!0):(h=Tj(d),f=Rn(a,b.getBody(),d),j(f)?Gl(b,f.getNode(!i)):(f=c(f))?j(f)?El(a,b,f.getNode(!i),i,!0):(g=c(f),j(g)&&uF(f,g)?El(a,b,g.getNode(!i),i,!0):h?Il(b,f.toRange(),!0):null):h?d:null)},wF=function(a,b,c,d){var e,f,g,h,i,j,k,l,m;if(m=qF(d),e=Rn(a,b.getBody(),d),f=c(b.getBody(),Jz(1),e),g=td.filter(f,Kz(1)),i=td.last(e.getClientRects()),(sF(e)||Un(e))&&(m=e.getNode()),(rF(e)||Vn(e))&&(m=e.getNode(!0)),!i)return null;if(j=i.left,h=Qz(g,j),h&&pF(h.node))return k=Math.abs(j-h.left),l=Math.abs(j-h.right),El(a,b,h.node,k<l,!0);if(m){var n=Iz(a,b.getBody(),Jz(1),m);if(h=Qz(td.filter(n,Kz(1)),j))return Il(b,h.position.toRange(),!0);if(h=td.last(td.filter(n,Kz(0))))return Il(b,h.position.toRange(),!0)}},xF=function(a){var b=a.dom.create(a.settings.forced_root_block);return(!Lb.ie||Lb.ie>=11)&&(b.innerHTML='<br data-mce-bogus="1">'),b},yF=function(a,b,c){var d,e,f,g=ho(a.getBody()),h=Ek.curry(tF,g.next),i=Ek.curry(tF,g.prev);if(c.collapsed&&a.settings.forced_root_block){if(d=a.dom.getParent(c.startContainer,"PRE"),!d)return;e=1===b?h(cl.fromRangeStart(c)):i(cl.fromRangeStart(c)),e||(f=xF(a),1===b?a.$(d).after(f):a.$(d).before(f),a.selection.select(f,!0),a.selection.collapse())}},zF=function(a,b){var c,d=ho(a.getBody()),e=Ek.curry(tF,d.next),f=Ek.curry(tF,d.prev),g=b?Jl.Forwards:Jl.Backwards,h=b?e:f,i=a.selection.getRng();return(c=vF(g,a,h,i))?c:(c=yF(a,g,i),c?c:null)},AF=function(a,b){var c,d=b?1:-1,e=b?Hz:Gz,f=a.selection.getRng();return(c=wF(d,a,e,f))?c:(c=yF(a,d,f),
c?c:null)},BF=function(a,b){return function(){var c=zF(a,b);return!!c&&(a.selection.setRng(c),!0)}},CF=function(a,b){return function(){var c=AF(a,b);return!!c&&(a.selection.setRng(c),!0)}},DF=function(a){return rb.map(a,function(a){return vD.merge({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:Da.noop},a)})},EF=function(a,b){return b.keyCode===a.keyCode&&b.shiftKey===a.shiftKey&&b.altKey===a.altKey&&b.ctrlKey===a.ctrlKey&&b.metaKey===a.metaKey},FF=function(a,b){return rb.bind(DF(a),function(a){return EF(a,b)?[a]:[]})},GF=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,d)}},HF=function(a,b){return rb.find(FF(a,b),function(a){return a.action()})},IF={match:FF,action:GF,execute:HF},JF=function(a,b,c){var d=yf.detect().os;IF.execute([{keyCode:cA.RIGHT,action:BF(a,!0)},{keyCode:cA.LEFT,action:BF(a,!1)},{keyCode:cA.UP,action:CF(a,!1)},{keyCode:cA.DOWN,action:CF(a,!0)},{keyCode:cA.RIGHT,action:ln(a,!0)},{keyCode:cA.LEFT,action:ln(a,!1)},{keyCode:cA.UP,action:mn(a,!1)},{keyCode:cA.DOWN,action:mn(a,!0)},{keyCode:cA.RIGHT,action:$t.move(a,b,!0)},{keyCode:cA.LEFT,action:$t.move(a,b,!1)},{keyCode:cA.RIGHT,ctrlKey:!d.isOSX(),altKey:d.isOSX(),action:$t.moveNextWord(a,b)},{keyCode:cA.LEFT,ctrlKey:!d.isOSX(),altKey:d.isOSX(),action:$t.movePrevWord(a,b)}],c).each(function(a){c.preventDefault()})},KF=function(a,b){a.on("keydown",function(c){c.isDefaultPrevented()===!1&&JF(a,b,c)})},LF={setup:KF},MF=function(a,b){var c=Ur.parentsAndSelf(b,a);return rb.findIndex(c,hi).fold(Da.constant(c),function(a){return c.slice(0,a)})},NF=function(a){return 1===Bh.children(a).length},OF=function(a,b,c,d){var e=Da.curry(eC,b),f=rb.map(rb.filter(d,e),function(a){return a.dom()});if(0===f.length)Qs.deleteElement(b,a,c);else{var g=dC(c.dom(),f);b.selection.setRng(g.toRange())}},PF=function(a,b){var c=Ef.fromDom(a.getBody()),d=Ef.fromDom(a.selection.getStart()),e=rb.filter(MF(c,d),NF);return rb.last(e).map(function(c){var d=cl.fromRangeStart(a.selection.getRng());return!!hr.willDeleteLastPositionInElement(b,d,c.dom())&&(OF(b,a,c,e),!0)}).getOr(!1)},QF=function(a,b){return!!a.selection.isCollapsed()&&PF(a,b)},RF={backspaceDelete:QF},SF=function(a,b,c){IF.execute([{keyCode:cA.BACKSPACE,action:IF.action($s.backspaceDelete,a,!1)},{keyCode:cA.DELETE,action:IF.action($s.backspaceDelete,a,!0)},{keyCode:cA.BACKSPACE,action:IF.action(hu.backspaceDelete,a,b,!1)},{keyCode:cA.DELETE,action:IF.action(hu.backspaceDelete,a,b,!0)},{keyCode:cA.BACKSPACE,action:IF.action(ls.backspaceDelete,a,!1)},{keyCode:cA.DELETE,action:IF.action(ls.backspaceDelete,a,!0)},{keyCode:cA.BACKSPACE,action:IF.action(ds.backspaceDelete,a,!1)},{keyCode:cA.DELETE,action:IF.action(ds.backspaceDelete,a,!0)},{keyCode:cA.BACKSPACE,action:IF.action(cv.backspaceDelete,a,!1)},{keyCode:cA.DELETE,action:IF.action(cv.backspaceDelete,a,!0)},{keyCode:cA.BACKSPACE,action:IF.action(RF.backspaceDelete,a,!1)},{keyCode:cA.DELETE,action:IF.action(RF.backspaceDelete,a,!0)}],c).each(function(a){c.preventDefault()})},TF=function(a,b){IF.execute([{keyCode:cA.BACKSPACE,action:IF.action($s.paddEmptyElement,a)},{keyCode:cA.DELETE,action:IF.action($s.paddEmptyElement,a)}],b)},UF=function(a,b){a.on("keydown",function(c){c.isDefaultPrevented()===!1&&SF(a,b,c)}),a.on("keyup",function(b){b.isDefaultPrevented()===!1&&TF(a,b)})},VF={setup:UF},WF=function(a){for(;a;){if(1===a.nodeType||3===a.nodeType&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}},XF=function(a,b){var c,d,e,f,g=b,h=a.dom,i=a.schema.getMoveCaretBeforeOnEnterElements();if(b){if(/^(LI|DT|DD)$/.test(b.nodeName)){var j=WF(b.firstChild);j&&/^(UL|OL|DL)$/.test(j.nodeName)&&b.insertBefore(h.doc.createTextNode("Â "),b.firstChild)}if(e=h.createRng(),b.normalize(),b.hasChildNodes()){for(c=new u(b,b);d=c.current();){if(Ii.isText(d)){e.setStart(d,0),e.setEnd(d,0);break}if(i[d.nodeName.toLowerCase()]){e.setStartBefore(d),e.setEndBefore(d);break}g=d,d=c.next()}d||(e.setStart(g,0),e.setEnd(g,0))}else Ii.isBr(b)?b.nextSibling&&h.isBlock(b.nextSibling)?(e.setStartBefore(b),e.setEndBefore(b)):(e.setStartAfter(b),e.setEndAfter(b)):(e.setStart(b,0),e.setEnd(b,0));a.selection.setRng(e),h.remove(f),a.selection.scrollIntoView(b)}},YF=function(a,b){var c,d,e=a.getRoot();for(c=b;c!==e&&"false"!==a.getContentEditable(c);)"true"===a.getContentEditable(c)&&(d=c),c=c.parentNode;return c!==e?d:e},ZF=function(a){return Ka.from(a.dom.getParent(a.selection.getStart(!0),a.dom.isBlock))},$F=function(a){return ZF(a).fold(Da.constant(""),function(a){return a.nodeName.toUpperCase()})},_F=function(a){return ZF(a).filter(function(a){return mi(Ef.fromDom(a))}).isSome()},aG={moveToCaretPosition:XF,getEditableRoot:YF,getParentBlock:ZF,getParentBlockName:$F,isListItemParentBlock:_F},bG=function(a,b){return a.firstChild&&a.firstChild.nodeName===b},cG=function(a,b){return a&&a.parentNode&&a.parentNode.nodeName===b},dG=function(a){return a&&/^(OL|UL|LI)$/.test(a.nodeName)},eG=function(a){return dG(a)&&dG(a.parentNode)},fG=function(a){var b=a.parentNode;return/^(LI|DT|DD)$/.test(b.nodeName)?b:a},gG=function(a,b,c){for(var d=a[c?"firstChild":"lastChild"];d&&!Ii.isElement(d);)d=d[c?"nextSibling":"previousSibling"];return d===b},hG=function(a,b,c,d,e){var f=a.dom,g=a.selection.getRng();if(c!==a.getBody()){eG(c)&&(e="LI");var h=e?b(e):f.create("BR");if(gG(c,d,!0)&&gG(c,d,!1))cG(c,"LI")?f.insertAfter(h,fG(c)):f.replace(h,c);else if(gG(c,d,!0))cG(c,"LI")?(f.insertAfter(h,fG(c)),h.appendChild(f.doc.createTextNode(" ")),h.appendChild(c)):c.parentNode.insertBefore(h,c);else if(gG(c,d,!1))f.insertAfter(h,fG(c));else{c=fG(c);var i=g.cloneRange();i.setStartAfter(d),i.setEndAfter(c);var j=i.extractContents();"LI"===e&&bG(j,"LI")?(h=j.firstChild,f.insertAfter(j,c)):(f.insertAfter(j,c),f.insertAfter(h,c))}f.remove(d),aG.moveToCaretPosition(a,h)}},iG={insert:hG},jG=function(a){return a&&"A"===a.nodeName&&0===Gd.trim(Dj.trim(a.innerText||a.textContent)).length},kG=function(a){return a&&/^(TD|TH|CAPTION)$/.test(a.nodeName)},lG=function(a){a.innerHTML='<br data-mce-bogus="1">'},mG=function(a,b){return a.nodeName===b||a.previousSibling&&a.previousSibling.nodeName===b},nG=function(a,b){return b&&a.isBlock(b)&&!/^(TD|TH|CAPTION|FORM)$/.test(b.nodeName)&&!/^(fixed|absolute)/i.test(b.style.position)&&"true"!==a.getContentEditable(b)},oG=function(a,b,c){var d,e=c,f=[];if(e){for(;e=e.firstChild;){if(a.isBlock(e))return;Ii.isElement(e)&&!b[e.nodeName.toLowerCase()]&&f.push(e)}for(d=f.length;d--;)e=f[d],!e.hasChildNodes()||e.firstChild===e.lastChild&&""===e.firstChild.nodeValue?a.remove(e):jG(e)&&a.remove(e)}},pG=function(a,b,c){return Ii.isText(b)===!1?c:a?1===c&&b.data.charAt(c-1)===Dj.ZWSP?0:c:c===b.data.length-1&&b.data.charAt(c)===Dj.ZWSP?b.data.length:c},qG=function(a){var b=a.cloneRange();return b.setStart(a.startContainer,pG(!0,a.startContainer,a.startOffset)),b.setEnd(a.endContainer,pG(!1,a.endContainer,a.endOffset)),b},rG=function(a){do Ii.isText(a)&&(a.nodeValue=a.nodeValue.replace(/^[\r\n]+/,"")),a=a.firstChild;while(a)},sG=function(a,b){var c,d,e=a.getRoot();for(c=b;c!==e&&"false"!==a.getContentEditable(c);)"true"===a.getContentEditable(c)&&(d=c),c=c.parentNode;return c!==e?d:e},tG=function(a,b){var c=Qm.getForcedRootBlock(a);c&&c.toLowerCase()===b.tagName.toLowerCase()&&a.dom.setAttribs(b,Qm.getForcedRootBlockAttrs(a))},uG=function(a,b,c,d,e){var f,g,h,i,j,k,l=b||"P",m=a.dom,n=sG(m,d);if(g=m.getParent(d,m.isBlock),!g||!nG(m,g)){if(g=g||n,k=g===a.getBody()||kG(g)?g.nodeName.toLowerCase():g.parentNode.nodeName.toLowerCase(),!g.hasChildNodes())return f=m.create(l),tG(a,f),g.appendChild(f),c.setStart(f,0),c.setEnd(f,0),f;for(i=d;i.parentNode!==g;)i=i.parentNode;for(;i&&!m.isBlock(i);)h=i,i=i.previousSibling;if(h&&a.schema.isValidChild(k,l.toLowerCase())){for(f=m.create(l),tG(a,f),h.parentNode.insertBefore(f,h),i=h;i&&!m.isBlock(i);)j=i.nextSibling,f.appendChild(i),i=j;c.setStart(d,e),c.setEnd(d,e)}}return d},vG=function(a,b){var c;b.normalize(),c=b.lastChild,c&&!/^(left|right)$/gi.test(a.getStyle(c,"float",!0))||a.add(b,"br")},wG=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p=a.dom,q=a.schema,r=q.getNonEmptyElements(),s=a.selection.getRng(),t=function(b){var c,f,h,i=e,j=q.getTextInlineElements();if(b||"TABLE"===l||"HR"===l?(c=p.create(b||n),tG(a,c)):c=g.cloneNode(!1),h=c,Qm.shouldKeepStyles(a)===!1)p.setAttrib(c,"style",null),p.setAttrib(c,"class",null);else do if(j[i.nodeName]){if(ip(i))continue;f=i.cloneNode(!1),p.setAttrib(f,"id",""),c.hasChildNodes()?(f.appendChild(c.firstChild),c.appendChild(f)):(h=f,c.appendChild(f))}while((i=i.parentNode)&&i!==d);return lG(h),c},v=function(a){var b,c,d,h;if(h=pG(a,e,f),Ii.isText(e)&&(a?h>0:h<e.nodeValue.length))return!1;if(e.parentNode===g&&o&&!a)return!0;if(a&&Ii.isElement(e)&&e===g.firstChild)return!0;if(mG(e,"TABLE")||mG(e,"HR"))return o&&!a||!o&&a;for(b=new u(e,g),Ii.isText(e)&&(a&&0===h?b.prev():a||h!==e.nodeValue.length||b.next());c=b.current();){if(Ii.isElement(c)){if(!c.getAttribute("data-mce-bogus")&&(d=c.nodeName.toLowerCase(),r[d]&&"br"!==d))return!1}else if(Ii.isText(c)&&!/^[ \t\r\n]*$/.test(c.nodeValue))return!1;a?b.prev():b.next()}return!0},w=function(){i=/^(H[1-6]|PRE|FIGURE)$/.test(l)&&"HGROUP"!==m?t(n):t(),Qm.shouldEndContainerOnEmptyBlock(a)&&nG(p,k)&&p.isEmpty(g)?i=p.split(k,g):p.insertAfter(i,g),aG.moveToCaretPosition(a,i)};if(Kv.normalize(p,s).each(function(a){s.setStart(a.startContainer,a.startOffset),s.setEnd(a.endContainer,a.endOffset)}),e=s.startContainer,f=s.startOffset,n=Qm.getForcedRootBlock(a),h=b.shiftKey,Ii.isElement(e)&&e.hasChildNodes()&&(o=f>e.childNodes.length-1,e=e.childNodes[Math.min(f,e.childNodes.length-1)]||e,f=o&&Ii.isText(e)?e.nodeValue.length:0),d=sG(p,e))return(n&&!h||!n&&h)&&(e=uG(a,n,s,e,f)),g=p.getParent(e,p.isBlock),k=g?p.getParent(g.parentNode,p.isBlock):null,l=g?g.nodeName.toUpperCase():"",m=k?k.nodeName.toUpperCase():"","LI"!==m||b.ctrlKey||(g=k,k=k.parentNode,l=m),/^(LI|DT|DD)$/.test(l)&&p.isEmpty(g)?void iG.insert(a,t,k,g,n):void(n&&g===a.getBody()||(n=n||"P",Gj(g)?(i=Sj(g),p.isEmpty(g)&&lG(g),aG.moveToCaretPosition(a,i)):v()?w():v(!0)?(i=g.parentNode.insertBefore(t(),g),aG.moveToCaretPosition(a,mG(g,"HR")?i:g)):(c=qG(s).cloneRange(),c.setEndAfter(g),j=c.extractContents(),rG(j),i=j.firstChild,p.insertAfter(j,g),oG(p,r,i),vG(p,g),p.isEmpty(g)&&lG(g),i.normalize(),p.isEmpty(i)?(p.remove(i),w()):aG.moveToCaretPosition(a,i)),p.setAttrib(i,"id",""),a.fire("NewBlock",{newBlock:i})))},xG={insert:wG},yG=function(a,b){return aG.getParentBlock(a).filter(function(a){return b.length>0&&$g.is(Ef.fromDom(a),b)}).isSome()},zG=function(a){return yG(a,Qm.getBrNewLineSelector(a))},AG=function(a){return yG(a,Qm.getNoNewLineSelector(a))},BG={shouldInsertBr:zG,shouldBlockNewLine:AG},CG=ns.generate([{br:[]},{block:[]},{none:[]}]),DG=function(a,b){return BG.shouldBlockNewLine(a)},EG=function(a){return function(b,c){var d=""===Qm.getForcedRootBlock(b);return d===a}},FG=function(a){return function(b,c){return aG.isListItemParentBlock(b)===a}},GG=function(a,b){return function(c,d){var e=aG.getParentBlockName(c)===a.toUpperCase();return e===b}},HG=function(a){return GG("pre",a)},IG=function(){return GG("summary",!0)},JG=function(a){return function(b,c){return Qm.shouldPutBrInPre(b)===a}},KG=function(a,b){return BG.shouldInsertBr(a)},LG=function(a,b){return b},MG=function(a){var b=Qm.getForcedRootBlock(a),c=aG.getEditableRoot(a.dom,a.selection.getStart());return c&&a.schema.isValidChild(c.nodeName,b?b:"P")},NG=function(a,b){return function(c,d){var e=rb.foldl(a,function(a,b){return a&&b(c,d)},!0);return e?Ka.some(b):Ka.none()}},OG=function(a,b){return nt.evaluateUntil([NG([DG],CG.none()),NG([IG()],CG.br()),NG([HG(!0),JG(!1),LG],CG.br()),NG([HG(!0),JG(!1)],CG.block()),NG([HG(!0),JG(!0),LG],CG.block()),NG([HG(!0),JG(!0)],CG.br()),NG([FG(!0),LG],CG.br()),NG([FG(!0)],CG.block()),NG([EG(!0),LG,MG],CG.block()),NG([EG(!0)],CG.br()),NG([KG],CG.br()),NG([EG(!1),LG],CG.br()),NG([MG],CG.block())],[a,b.shiftKey]).getOr(CG.none())},PG={getAction:OG},QG=function(a,b){PG.getAction(a,b).fold(function(){Yv.insert(a,b)},function(){xG.insert(a,b)},Da.noop)},RG={insert:QG},SG=function(a){a.typing&&(a.typing=!1,a.add())},TG=function(a,b){b.isDefaultPrevented()||(b.preventDefault(),SG(a.undoManager),a.undoManager.transact(function(){a.selection.isCollapsed()===!1&&a.execCommand("Delete"),RG.insert(a,b)}))},UG=function(a){a.on("keydown",function(b){b.keyCode===cA.ENTER&&TG(a,b)})},VG={setup:UG},WG=function(a,b){return $G(a)&&Ii.isText(b.container())},XG=function(a,b){var c=b.container(),d=b.offset();c.insertData(d,"Â "),a.selection.setCursorLocation(c,d+1)},YG=function(a,b,c){return!!WG(c,b)&&(XG(a,b),!0)},ZG=function(a){var b=Da.curry(br.isInlineTarget,a),c=cl.fromRangeStart(a.selection.getRng()),d=It.readLocation(b,a.getBody(),c);return d.map(Da.curry(YG,a,c)).getOr(!1)},$G=function(a){return a.fold(Da.constant(!1),Da.constant(!0),Da.constant(!0),Da.constant(!1))},_G=function(a){return!!a.selection.isCollapsed()&&ZG(a)},aH={insertAtSelection:_G},bH=function(a,b){IF.execute([{keyCode:cA.SPACEBAR,action:IF.action(aH.insertAtSelection,a)}],b).each(function(a){b.preventDefault()})},cH=function(a){a.on("keydown",function(b){b.isDefaultPrevented()===!1&&bH(a,b)})},dH={setup:cH},eH=function(a){return or.descendant(Ef.fromDom(a.getBody()),"*[data-mce-caret]").fold(Da.constant(null),function(a){return a.dom()})},fH=function(a){a.selection.setRng(a.selection.getRng())},gH=function(a,b){b.hasAttribute("data-mce-caret")&&(Sj(b),fH(a),a.selection.scrollIntoView(b))},hH=function(a,b){var c=eH(a);if(c)return"compositionstart"===b.type?(b.preventDefault(),b.stopPropagation(),void gH(a,c)):void(Jj(c)&&(gH(a,c),a.undoManager.add()))},iH=function(a){a.on("keyup compositionstart",Da.curry(hH,a))},jH={setup:iH},kH=function(a){var b=$t.setupSelectedState(a);jH.setup(a),LF.setup(a,b),VF.setup(a,b),VG.setup(a),dH.setup(a)},lH={setup:kH},mH=function(a){return Ii.isElement(a)&&ki(Ef.fromDom(a))},nH=function(a){var b=a.selection.getRng(),c=z.fromRangeStart(b),d=z.fromRangeEnd(b);if(z.isElementPosition(c)){var e=c.container();mH(e)&&Bl.firstPositionIn(e).each(function(a){return b.setStart(a.container(),a.offset())})}if(z.isElementPosition(d)){var e=c.container();mH(e)&&Bl.lastPositionIn(e).each(function(a){return b.setEnd(a.container(),a.offset())})}a.selection.setRng(hq.normalize(b))},oH=function(a){a.on("click",function(b){3===b.detail&&nH(a)})},pH={setup:oH},qH=function(a){a.on("click",function(b){a.dom.getParent(b.target,"details")&&b.preventDefault()})},rH=function(a){a.parser.addNodeFilter("details",function(a){rb.each(a,function(a){a.attr("data-mce-open",a.attr("open")),a.attr("open","open")})}),a.serializer.addNodeFilter("details",function(a){rb.each(a,function(a){var b=a.attr("data-mce-open");a.attr("open",Na.isString(b)?b:null),a.attr("data-mce-open",null)})})},sH=function(a){qH(a),rH(a)},tH=tj.DOM,uH=function(a,b){var c=Ef.fromDom(a.getDoc().head),d=Ef.fromTag("style");hg.set(d,"type","text/css"),Xm.append(d,Ef.fromText(b)),Xm.append(c,d)},vH=function(a){var b=Z(a.settings,a.schema);return b.addAttributeFilter("src,href,style,tabindex",function(b,c){for(var d,e,f,g=b.length,h=a.dom;g--;)if(d=b[g],e=d.attr(c),f="data-mce-"+c,!d.attributes.map[f]){if(0===e.indexOf("data:")||0===e.indexOf("blob:"))continue;"style"===c?(e=h.serializeStyle(h.parseStyle(e),d.name),e.length||(e=null),d.attr(f,e),d.attr(c,e)):"tabindex"===c?(d.attr(f,e),d.attr(c,null)):d.attr(f,a.convertURL(e,c,d.name))}}),b.addNodeFilter("script",function(a){for(var b,c,d=a.length;d--;)b=a[d],c=b.attr("type")||"no/type",0!==c.indexOf("mce-")&&b.attr("type","mce-"+c)}),b.addNodeFilter("#cdata",function(a){for(var b,c=a.length;c--;)b=a[c],b.type=8,b.name="#comment",b.value="[CDATA["+b.value+"]]"}),b.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(b){for(var c,d=b.length,e=a.schema.getNonEmptyElements();d--;)c=b[d],c.isEmpty(e)&&0===c.getAll("br").length&&(c.append(new MD("br",1)).shortEnded=!0)}),b},wH=function(a){a.settings.auto_focus&&Ub.setEditorTimeout(a,function(){var b;b=a.settings.auto_focus===!0?a:a.editorManager.get(a.settings.auto_focus),b.destroyed||b.focus()},100)},xH=function(a){a.bindPendingEventDelegates(),a.initialized=!0,a.fire("init"),a.focus(!0),a.nodeChanged({initial:!0}),a.execCallback("init_instance_callback",a),wH(a)},yH=function(a){return a.inline?tH.styleSheetLoader:a.dom.styleSheetLoader},zH=function(a,b){var c,d,e=a.settings,f=a.getElement(),g=a.getDoc();e.inline||(a.getElement().style.visibility=a.orgVisibility),b||e.content_editable||(g.open(),g.write(a.iframeHTML),g.close()),e.content_editable&&(a.on("remove",function(){var a=this.getBody();tH.removeClass(a,"mce-content-body"),tH.removeClass(a,"mce-edit-focus"),tH.setAttrib(a,"contentEditable",null)}),tH.addClass(f,"mce-content-body"),a.contentDocument=g=e.content_document||document,a.contentWindow=e.content_window||window,a.bodyElement=f,e.content_document=e.content_window=null,e.root_name=f.nodeName.toLowerCase()),c=a.getBody(),c.disabled=!0,a.readonly=e.readonly,a.readonly||(a.inline&&"static"===tH.getStyle(c,"position",!0)&&(c.style.position="relative"),c.contentEditable=a.getParam("content_editable_state",!0)),c.disabled=!1,a.editorUpload=T(a),a.schema=v(e),a.dom=tj(g,{keep_values:!0,url_converter:a.convertURL,url_converter_scope:a,hex_colors:e.force_hex_style_colors,class_filter:e.class_filter,update_styles:!0,root_element:a.inline?a.getBody():null,collect:e.content_editable,schema:a.schema,onSetAttrib:function(b){a.fire("SetAttrib",b)}}),a.parser=vH(a),a.serializer=_(e,a),a.selection=oF(a.dom,a.getWin(),a.serializer,a),a.formatter=Y(a),a.undoManager=W(a),a._nodeChangeDispatcher=new U(a),a._selectionOverrides=iA(a),sH(a),pH.setup(a),lH.setup(a),Qy.setup(a),a.fire("PreInit"),e.browser_spellcheck||e.gecko_spellcheck||(g.body.spellcheck=!1,tH.setAttrib(c,"spellcheck","false")),a.quirks=ba(a),a.fire("PostRender"),e.directionality&&(c.dir=e.directionality),e.nowrap&&(c.style.whiteSpace="nowrap"),e.protect&&a.on("BeforeSetContent",function(a){Gd.each(e.protect,function(b){a.content=a.content.replace(b,function(a){return"<!--mce:protected "+escape(a)+"-->"})})}),a.on("SetContent",function(){a.addVisual(a.getBody())}),a.load({initial:!0,format:"html"}),a.startContent=a.getContent({format:"raw"}),a.on("compositionstart compositionend",function(b){a.composing="compositionstart"===b.type}),a.contentStyles.length>0&&(d="",Gd.each(a.contentStyles,function(a){d+=a+"\r\n"}),a.dom.addStyle(d)),yH(a).loadAll(a.contentCSS,function(b){xH(a)},function(b){xH(a)}),e.content_style&&uH(a,e.content_style)},AH={initContentBody:zH},BH=tj.DOM,CH=function(a,b){if(document.domain!==window.location.hostname&&Lb.ie&&Lb.ie<12){var c=Jy.uuid("mce");a[c]=function(){AH.initContentBody(a)};var d='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+a.id+'");document.write(ed.iframeHTML);document.close();ed.'+c+"(true);})()";return BH.setAttrib(b,"src",d),!0}return!1},DH=function(a){var b="number"==typeof a?a+"px":a;return b?b:""},EH=function(a,b,c,d){var e=Ef.fromTag("iframe");return hg.setAll(e,d),hg.setAll(e,{id:a+"_ifr",frameBorder:"0",allowTransparency:"true",title:b}),Eg.setAll(e,{width:"100%",height:DH(c),display:"block"}),e},FH=function(a){var b,c,d;return d=Qm.getDocType(a)+"<html><head>",Qm.getDocumentBaseUrl(a)!==a.documentBaseUrl&&(d+='<base href="'+a.documentBaseURI.getURI()+'" />'),d+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',b=Qm.getBodyId(a),c=Qm.getBodyClass(a),Qm.getContentSecurityPolicy(a)&&(d+='<meta http-equiv="Content-Security-Policy" content="'+Qm.getContentSecurityPolicy(a)+'" />'),d+='</head><body id="'+b+'" class="mce-content-body '+c+'" data-id="'+a.id+'"><br></body></html>'},GH=function(a,b){var c=a.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),d=EH(a.id,c,b.height,Qm.getIframeAttrs(a)).dom();d.onload=function(){d.onload=null,a.fire("load")};var e=CH(a,d);return a.contentAreaContainer=b.iframeContainer,a.iframeElement=d,a.iframeHTML=FH(a),BH.add(b.iframeContainer,d),e},HH=function(a,b){var c=GH(a,b);b.editorContainer&&(BH.get(b.editorContainer).style.display=a.orgDisplay,a.hidden=BH.isHidden(b.editorContainer)),a.getElement().style.display="none",BH.setAttrib(a.id,"aria-hidden","true"),c||AH.initContentBody(a)},IH={init:HH},JH=tj.DOM,KH=function(a,b,c){var d,e,f=ry.get(c);if(d=ry.urls[c]||a.documentBaseUrl.replace(/\/$/,""),c=Gd.trim(c),f&&Gd.inArray(b,c)===-1){if(Gd.each(ry.dependencies(c),function(c){KH(a,b,c)}),a.plugins[c])return;e=new f(a,d,a.$),a.plugins[c]=e,e.init&&(e.init(a,d),b.push(c))}},LH=function(a){return a.replace(/^\-/,"")},MH=function(a){var b=[];Gd.each(a.settings.plugins.split(/[ ,]/),function(c){KH(a,b,LH(c))})},NH=function(a){var b,c=a.settings.theme;Na.isString(c)?(a.settings.theme=LH(c),b=sy.get(c),a.theme=new b(a,sy.urls[c]),a.theme.init&&a.theme.init(a,sy.urls[c]||a.documentBaseUrl.replace(/\/$/,""),a.$)):a.theme={}},OH=function(a){var b,c,d,e,f,g=a.settings,h=a.getElement();return b=g.width||JH.getStyle(h,"width")||"100%",c=g.height||JH.getStyle(h,"height")||h.offsetHeight,d=g.min_height||100,e=/^[0-9\.]+(|px)$/i,e.test(""+b)&&(b=Math.max(parseInt(b,10),100)),e.test(""+c)&&(c=Math.max(parseInt(c,10),d)),f=a.theme.renderUI({targetNode:h,width:b,height:c,deltaWidth:g.delta_width,deltaHeight:g.delta_height}),g.content_editable||(c=(f.iframeHeight||c)+("number"==typeof c?f.deltaHeight||0:""),c<d&&(c=d)),f.height=c,f},PH=function(a){var b,c=a.getElement();return b=a.settings.theme(a,c),b.editorContainer.nodeType&&(b.editorContainer.id=b.editorContainer.id||a.id+"_parent"),b.iframeContainer&&b.iframeContainer.nodeType&&(b.iframeContainer.id=b.iframeContainer.id||a.id+"_iframecontainer"),b.height=b.iframeHeight?b.iframeHeight:c.offsetHeight,b},QH=function(a){return{editorContainer:a,iframeContainer:a}},RH=function(a){var b=JH.create("div");return JH.insertAfter(b,a),QH(b)},SH=function(a){var b=a.getElement();return a.inline?QH(null):RH(b)},TH=function(a){var b=a.settings,c=a.getElement();return a.orgDisplay=c.style.display,Na.isString(b.theme)?OH(a):Na.isFunction(b.theme)?PH(a):SH(a)},UH=function(a){var b,c=a.settings,d=a.getElement();return a.rtl=c.rtl_ui||a.editorManager.i18n.rtl,a.editorManager.i18n.setCode(c.language),c.aria_label=c.aria_label||JH.getAttrib(d,"aria-label",a.getLang("aria.rich_text_area")),a.fire("ScriptsLoaded"),NH(a),MH(a),b=TH(a),a.editorContainer=b.editorContainer?b.editorContainer:null,c.content_css&&Gd.each(Gd.explode(c.content_css),function(b){a.contentCSS.push(a.documentBaseURI.toAbsolute(b))}),c.content_editable?AH.initContentBody(a):IH.init(a,b)},VH={init:UH},WH=tj.DOM,XH=function(a){return"-"===a.charAt(0)},YH=function(a,b){var c=b.settings;c.language&&"en"!==c.language&&!c.language_url&&(c.language_url=b.editorManager.baseURL+"/langs/"+c.language+".js"),c.language_url&&!b.editorManager.i18n.data[c.language]&&a.add(c.language_url)},ZH=function(a,b,c,d){var e=b.settings,f=e.theme;if(Na.isString(f)){if(!XH(f)&&!sy.urls.hasOwnProperty(f)){var g=e.theme_url;g?sy.load(f,b.documentBaseURI.toAbsolute(g)):sy.load(f,"themes/"+f+"/theme"+c+".js")}a.loadQueue(function(){sy.waitFor(f,d)})}else d()},$H=function(a,b){Gd.isArray(a.plugins)&&(a.plugins=a.plugins.join(" ")),Gd.each(a.external_plugins,function(b,c){ry.load(c,b),a.plugins+=" "+c}),Gd.each(a.plugins.split(/[ ,]/),function(a){if(a=Gd.trim(a),a&&!ry.urls[a])if(XH(a)){a=a.substr(1,a.length);var c=ry.dependencies(a);Gd.each(c,function(a){var c={prefix:"plugins/",resource:a,suffix:"/plugin"+b+".js"};a=ry.createUrl(c,a),ry.load(a.resource,a)})}else ry.load(a,{prefix:"plugins/",resource:a,suffix:"/plugin"+b+".js"})})},_H=function(a,b){var c=yj.ScriptLoader;ZH(c,a,b,function(){YH(c,a),$H(a.settings,b),c.loadQueue(function(){a.removed||VH.init(a)},a,function(b){qy.pluginLoadError(a,b[0]),a.removed||VH.init(a)})})},aI=function(a){var b=a.settings,c=a.id,d=function(){WH.unbind(window,"ready",d),a.render()};if(!ec.Event.domLoaded)return void WH.bind(window,"ready",d);if(a.getElement()&&Lb.contentEditable){b.inline?a.inline=!0:(a.orgVisibility=a.getElement().style.visibility,a.getElement().style.visibility="hidden");var e=a.getElement().form||WH.getParent(c,"form");e&&(a.formElement=e,b.hidden_input&&!/TEXTAREA|INPUT/i.test(a.getElement().nodeName)&&(WH.insertAfter(WH.create("input",{type:"hidden",name:c}),c),a.hasHiddenInput=!0),a.formEventDelegate=function(b){a.fire(b.type,b)},WH.bind(e,"submit reset",a.formEventDelegate),a.on("reset",function(){a.setContent(a.startContent,{format:"raw"})}),!b.submit_patch||e.submit.nodeType||e.submit.length||e._mceOldSubmit||(e._mceOldSubmit=e.submit,e.submit=function(){return a.editorManager.triggerSave(),a.setDirty(!1),e._mceOldSubmit(e)})),a.windowManager=K(a),a.notificationManager=I(a),"xml"===b.encoding&&a.on("GetContent",function(a){a.save&&(a.content=WH.encode(a.content))}),b.add_form_submit_trigger&&a.on("submit",function(){a.initialized&&a.save()}),b.add_unload_trigger&&(a._beforeUnload=function(){!a.initialized||a.destroyed||a.isHidden()||a.save({format:"raw",no_events:!0,set_dirty:!1})},a.editorManager.on("BeforeUnload",a._beforeUnload)),a.editorManager.add(a),_H(a,a.suffix)}},bI={render:aI},cI=function(a,b,c){var d=a.sidebars?a.sidebars:[];d.push({name:b,settings:c}),a.sidebars=d},dI={add:cI},eI=Gd.each,fI=Gd.trim,gI="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),hI={ftp:21,http:80,https:443,mailto:25},iI=function(a,b){var c,d,e=this;if(a=fI(a),b=e.settings=b||{},c=b.base_uri,/^([\w\-]+):([^\/]{2})/i.test(a)||/^\s*#/.test(a))return void(e.source=a);var f=0===a.indexOf("//");0!==a.indexOf("/")||f||(a=(c?c.protocol||"http":"http")+"://mce_host"+a),/^[\w\-]*:?\/\//.test(a)||(d=b.base_uri?b.base_uri.path:new iI(document.location.href).directory,""==b.base_uri.protocol?a="//mce_host"+e.toAbsPath(d,a):(a=/([^#?]*)([#?]?.*)/.exec(a),a=(c&&c.protocol||"http")+"://mce_host"+e.toAbsPath(d,a[1])+a[2])),a=a.replace(/@@/g,"(mce_at)"),a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a),eI(gI,function(b,c){var d=a[c];d&&(d=d.replace(/\(mce_at\)/g,"@@")),e[b]=d}),c&&(e.protocol||(e.protocol=c.protocol),e.userInfo||(e.userInfo=c.userInfo),e.port||"mce_host"!==e.host||(e.port=c.port),e.host&&"mce_host"!==e.host||(e.host=c.host),e.source=""),f&&(e.protocol="")};iI.prototype={setPath:function(a){var b=this;a=/^(.*?)\/?(\w+)?$/.exec(a),b.path=a[0],b.directory=a[1],b.file=a[2],b.source="",b.getURI()},toRelative:function(a){var b,c=this;if("./"===a)return a;if(a=new iI(a,{base_uri:c}),"mce_host"!==a.host&&c.host!==a.host&&a.host||c.port!==a.port||c.protocol!==a.protocol&&""!==a.protocol)return a.getURI();var d=c.getURI(),e=a.getURI();return d===e||"/"===d.charAt(d.length-1)&&d.substr(0,d.length-1)===e?d:(b=c.toRelPath(c.path,a.path),a.query&&(b+="?"+a.query),a.anchor&&(b+="#"+a.anchor),b)},toAbsolute:function(a,b){return a=new iI(a,{base_uri:this}),a.getURI(b&&this.isSameOrigin(a))},isSameOrigin:function(a){if(this.host==a.host&&this.protocol==a.protocol){if(this.port==a.port)return!0;var b=hI[this.protocol];if(b&&(this.port||b)==(a.port||b))return!0}return!1},toRelPath:function(a,b){var c,d,e,f=0,g="";if(a=a.substring(0,a.lastIndexOf("/")),a=a.split("/"),c=b.split("/"),a.length>=c.length)for(d=0,e=a.length;d<e;d++)if(d>=c.length||a[d]!==c[d]){f=d+1;break}if(a.length<c.length)for(d=0,e=c.length;d<e;d++)if(d>=a.length||a[d]!==c[d]){f=d+1;break}if(1===f)return b;for(d=0,e=a.length-(f-1);d<e;d++)g+="../";for(d=f-1,e=c.length;d<e;d++)g+=d!==f-1?"/"+c[d]:c[d];return g},toAbsPath:function(a,b){var c,d,e,f=0,g=[];for(d=/\/$/.test(b)?"/":"",a=a.split("/"),b=b.split("/"),eI(a,function(a){a&&g.push(a)}),a=g,c=b.length-1,g=[];c>=0;c--)0!==b[c].length&&"."!==b[c]&&(".."!==b[c]?f>0?f--:g.push(b[c]):f++);return c=a.length-f,e=c<=0?g.reverse().join("/"):a.slice(0,c).join("/")+"/"+g.reverse().join("/"),0!==e.indexOf("/")&&(e="/"+e),d&&e.lastIndexOf("/")!==e.length-1&&(e+=d),e},getURI:function(a){var b,c=this;return c.source&&!a||(b="",a||(b+=c.protocol?c.protocol+"://":"//",c.userInfo&&(b+=c.userInfo+"@"),c.host&&(b+=c.host),c.port&&(b+=":"+c.port)),c.path&&(b+=c.path),c.query&&(b+="?"+c.query),c.anchor&&(b+="#"+c.anchor),c.source=b),c.source}},iI.parseDataUri=function(a){var b,c;return a=decodeURIComponent(a).split(","),c=/data:([^;]+)/.exec(a[0]),c&&(b=c[1]),{type:b,data:a[1]}},iI.getDocumentBaseUrl=function(a){var b;return b=0!==a.protocol.indexOf("http")&&"file:"!==a.protocol?a.href:a.protocol+"//"+a.host+a.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(b)&&(b=b.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(b)||(b+="/")),b};var jI="html",kI=function(a,b){var c=Qm.getForcedRootBlock(a),d=new RegExp("^(<"+c+"[^>]*>(&nbsp;|&#160;|\\s|Â |<br \\/>|)<\\/"+c+">[\r\n]*|<br \\/>[\r\n]*)$");return b.replace(d,"")},lI=function(a,b,c){var d;if(b.format=b.format?b.format:jI,b.get=!0,b.getInner=!0,b.no_events||a.fire("BeforeGetContent",b),"raw"===b.format)d=Gd.trim(rA.trimExternal(a.serializer,c.innerHTML));else if("text"===b.format)d=Dj.trim(c.innerText||c.textContent);else{if("tree"===b.format)return a.serializer.serialize(c,b);d=kI(a,a.serializer.serialize(c,b))}return"text"===b.format||qi(Ef.fromDom(c))?b.content=d:b.content=Gd.trim(d),b.no_events||a.fire("GetContent",b),b.content},mI=function(a,b){return void 0===b&&(b={}),Ka.from(a.getBody()).fold(Da.constant("tree"===b.format?new MD("body",11):""),function(c){return lI(a,b,c)})},nI=function(a,b){b(a),a.firstChild&&nI(a.firstChild,b),a.next&&nI(a.next,b)},oI=function(a,b,c){var d={},e={},f=[];c.firstChild&&nI(c.firstChild,function(c){rb.each(a,function(a){a.name===c.name&&(d[a.name]?d[a.name].nodes.push(c):d[a.name]={filter:a,nodes:[c]})}),rb.each(b,function(a){"string"==typeof c.attr(a.name)&&(e[a.name]?e[a.name].nodes.push(c):e[a.name]={filter:a,nodes:[c]})})});for(var g in d)d.hasOwnProperty(g)&&f.push(d[g]);for(var h in e)e.hasOwnProperty(h)&&f.push(e[h]);return f},pI=function(a,b,c){var d=oI(a,b,c);rb.each(d,function(a){rb.each(a.filter.callbacks,function(b){b(a.nodes,a.filter.name,{})})})},qI="html",rI=function(a){return a instanceof MD},sI=function(a){Wx.hasFocus(a)&&Bl.firstPositionIn(a.getBody()).each(function(b){var c=b.getNode(),d=Ii.isTable(c)?Bl.firstPositionIn(c).getOr(b):b;a.selection.setRng(d.toRange())})},tI=function(a,b){a.dom.setHTML(a.getBody(),b),sI(a)},uI=function(a,b,c,d){var e,f;return 0===c.length||/^\s+$/.test(c)?(f='<br data-mce-bogus="1">',"TABLE"===b.nodeName?c="<tr><td>"+f+"</td></tr>":/^(UL|OL)$/.test(b.nodeName)&&(c="<li>"+f+"</li>"),e=Qm.getForcedRootBlock(a),e&&a.schema.isValidChild(b.nodeName.toLowerCase(),e.toLowerCase())?(c=f,c=a.dom.createHTML(e,a.settings.forced_root_block_attrs,c)):c||(c='<br data-mce-bogus="1">'),tI(a,c),a.fire("SetContent",d)):("raw"!==d.format&&(c=C({validate:a.validate},a.schema).serialize(a.parser.parse(c,{isRootContent:!0,insert:!0}))),d.content=qi(Ef.fromDom(b))?c:Gd.trim(c),tI(a,d.content),d.no_events||a.fire("SetContent",d)),d.content},vI=function(a,b,c,d){pI(a.parser.getNodeFilters(),a.parser.getAttributeFilters(),c);var e=C({validate:a.validate},a.schema).serialize(c);return d.content=qi(Ef.fromDom(b))?e:Gd.trim(e),tI(a,d.content),d.no_events||a.fire("SetContent",d),c},wI=function(a,b,c){return void 0===c&&(c={}),c.format=c.format?c.format:qI,c.set=!0,c.content=rI(b)?"":b,rI(b)||c.no_events||(a.fire("BeforeSetContent",c),b=c.content),Ka.from(a.getBody()).fold(Da.constant(b),function(d){return rI(b)?vI(a,d,b,c):uI(a,d,b,c)})},xI=tj.DOM,yI=function(a){xI.setStyle(a.id,"display",a.orgDisplay)},zI=function(a){return Ka.from(a).each(function(a){return a.destroy()})},AI=function(a){a.contentAreaContainer=a.formElement=a.container=a.editorContainer=null,
a.bodyElement=a.contentDocument=a.contentWindow=null,a.iframeElement=a.targetElm=null,a.selection&&(a.selection=a.selection.win=a.selection.dom=a.selection.dom.doc=null)},BI=function(a){var b=a.formElement;b&&(b._mceOldSubmit&&(b.submit=b._mceOldSubmit,b._mceOldSubmit=null),xI.unbind(b,"submit reset",a.formEventDelegate))},CI=function(a){if(!a.removed){var b=a._selectionOverrides,c=a.editorUpload,d=a.getBody(),e=a.getElement();d&&a.save(),a.removed=!0,a.unbindAllNativeEvents(),a.hasHiddenInput&&e&&xI.remove(e.nextSibling),!a.inline&&d&&yI(a),dx.fireRemove(a),a.editorManager.remove(a),xI.remove(a.getContainer()),zI(b),zI(c),a.destroy()}},DI=function(a,b){var c=a.selection,d=a.dom;if(!a.destroyed){if(!b&&!a.removed)return void a.remove();b||(a.editorManager.off("beforeunload",a._beforeUnload),a.theme&&a.theme.destroy&&a.theme.destroy(),zI(c),zI(d)),BI(a),AI(a),a.destroyed=!0}},EI=tj.DOM,FI=Gd.extend,GI=Gd.each,HI=Gd.resolve,II=Lb.ie,JI=function(a,b,c){var d=this,e=d.documentBaseUrl=c.documentBaseURL,f=c.baseURI;b=Mq(d,a,e,c.defaultSettings,b),d.settings=b,y.language=b.language||"en",y.languageLoad=b.language_load,y.baseURL=c.baseURL,d.id=a,d.setDirty(!1),d.plugins={},d.documentBaseURI=new iI(b.document_base_url,{base_uri:f}),d.baseURI=f,d.contentCSS=[],d.contentStyles=[],d.shortcuts=new G(d),d.loadedCSS={},d.editorCommands=new E(d),d.suffix=c.suffix,d.editorManager=c,d.inline=b.inline,d.buttons={},d.menuItems={},b.cache_suffix&&(Lb.cacheSuffix=b.cache_suffix.replace(/^[\?\&]+/,"")),b.override_viewport===!1&&(Lb.overrideViewPort=!1),c.fire("SetupEditor",{editor:d}),d.execCallback("setup",d),d.$=$d.overrideDefaults(function(){return{context:d.inline?d.getBody():d.getDoc(),element:d.getBody()}})};JI.prototype={render:function(){bI.render(this)},focus:function(a){Wx.focus(this,a)},hasFocus:function(){return Wx.hasFocus(this)},execCallback:function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d,e=this,f=e.settings[a];if(f)return e.callbackLookup&&(d=e.callbackLookup[a])&&(f=d.func,d=d.scope),"string"==typeof f&&(d=f.replace(/\.\w+$/,""),d=d?HI(d):0,f=HI(f),e.callbackLookup=e.callbackLookup||{},e.callbackLookup[a]={func:f,scope:d}),f.apply(d||e,Array.prototype.slice.call(arguments,1))},translate:function(a){if(a&&Gd.is(a,"string")){var b=this.settings.language||"en",c=this.editorManager.i18n;a=c.data[b+"."+a]||a.replace(/\{\#([^\}]+)\}/g,function(a,d){return c.data[b+"."+d]||"{#"+d+"}"})}return this.editorManager.translate(a)},getLang:function(a,b){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+a]||(void 0!==b?b:"{#"+a+"}")},getParam:function(a,b,c){return Rq(this,a,b,c)},nodeChanged:function(a){this._nodeChangeDispatcher.nodeChanged(a)},addButton:function(a,b){var c=this;b.cmd&&(b.onclick=function(){c.execCommand(b.cmd)}),b.stateSelector&&"undefined"==typeof b.active&&(b.active=!1),b.text||b.icon||(b.icon=a),c.buttons=c.buttons,b.tooltip=b.tooltip||b.title,c.buttons[a]=b},addSidebar:function(a,b){return dI.add(this,a,b)},addMenuItem:function(a,b){var c=this;b.cmd&&(b.onclick=function(){c.execCommand(b.cmd)}),c.menuItems=c.menuItems,c.menuItems[a]=b},addContextToolbar:function(a,b){var c,d=this;d.contextToolbars=d.contextToolbars||[],"string"==typeof a&&(c=a,a=function(a){return d.dom.is(a,c)}),d.contextToolbars.push({id:Jy.uuid("mcet"),predicate:a,items:b})},addCommand:function(a,b,c){this.editorCommands.addCommand(a,b,c)},addQueryStateHandler:function(a,b,c){this.editorCommands.addQueryStateHandler(a,b,c)},addQueryValueHandler:function(a,b,c){this.editorCommands.addQueryValueHandler(a,b,c)},addShortcut:function(a,b,c,d){this.shortcuts.add(a,b,c,d)},execCommand:function(a,b,c,d){return this.editorCommands.execCommand(a,b,c,d)},queryCommandState:function(a){return this.editorCommands.queryCommandState(a)},queryCommandValue:function(a){return this.editorCommands.queryCommandValue(a)},queryCommandSupported:function(a){return this.editorCommands.queryCommandSupported(a)},show:function(){var a=this;a.hidden&&(a.hidden=!1,a.inline?a.getBody().contentEditable=!0:(EI.show(a.getContainer()),EI.hide(a.id)),a.load(),a.fire("show"))},hide:function(){var a=this,b=a.getDoc();a.hidden||(II&&b&&!a.inline&&b.execCommand("SelectAll"),a.save(),a.inline?(a.getBody().contentEditable=!1,a===a.editorManager.focusedEditor&&(a.editorManager.focusedEditor=null)):(EI.hide(a.getContainer()),EI.setStyle(a.id,"display",a.orgDisplay)),a.hidden=!0,a.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(a,b){this.fire("ProgressState",{state:a,time:b})},load:function(a){var b,c=this,d=c.getElement();return c.removed?"":d?(a=a||{},a.load=!0,b=c.setContent(void 0!==d.value?d.value:d.innerHTML,a),a.element=d,a.no_events||c.fire("LoadContent",a),a.element=d=null,b):void 0},save:function(a){var b,c,d=this,e=d.getElement();if(e&&d.initialized&&!d.removed)return a=a||{},a.save=!0,a.element=e,b=a.content=d.getContent(a),a.no_events||d.fire("SaveContent",a),"raw"===a.format&&d.fire("RawSaveContent",a),b=a.content,/TEXTAREA|INPUT/i.test(e.nodeName)?e.value=b:(d.inline||(e.innerHTML=b),(c=EI.getParent(d.id,"form"))&&GI(c.elements,function(a){if(a.name===d.id)return a.value=b,!1})),a.element=e=null,a.set_dirty!==!1&&d.setDirty(!1),b},setContent:function(a,b){return wI(this,a,b)},getContent:function(a){return mI(this,a)},insertContent:function(a,b){b&&(a=FI({content:a},b)),this.execCommand("mceInsertContent",!1,a)},isDirty:function(){return!this.isNotDirty},setDirty:function(a){var b=!this.isNotDirty;this.isNotDirty=!a,a&&a!==b&&this.fire("dirty")},setMode:function(a){hx(this,a)},getContainer:function(){var a=this;return a.container||(a.container=EI.get(a.editorContainer||a.id+"_parent")),a.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=EI.get(this.id)),this.targetElm},getWin:function(){var a,b=this;return b.contentWindow||(a=b.iframeElement,a&&(b.contentWindow=a.contentWindow)),b.contentWindow},getDoc:function(){var a,b=this;return b.contentDocument||(a=b.getWin(),a&&(b.contentDocument=a.document)),b.contentDocument},getBody:function(){var a=this.getDoc();return this.bodyElement||(a?a.body:null)},convertURL:function(a,b,c){var d=this,e=d.settings;return e.urlconverter_callback?d.execCallback("urlconverter_callback",a,c,!0,b):!e.convert_urls||c&&"LINK"===c.nodeName||0===a.indexOf("file:")||0===a.length?a:e.relative_urls?d.documentBaseURI.toRelative(a):a=d.documentBaseURI.toAbsolute(a,e.remove_script_host)},addVisual:function(a){var b,c=this,d=c.settings,e=c.dom;a=a||c.getBody(),void 0===c.hasVisual&&(c.hasVisual=d.visual),GI(e.select("table,a",a),function(a){var f;switch(a.nodeName){case"TABLE":return b=d.visual_table_class||"mce-item-table",f=e.getAttrib(a,"border"),void(f&&"0"!==f||!c.hasVisual?e.removeClass(a,b):e.addClass(a,b));case"A":return void(e.getAttrib(a,"href")||(f=e.getAttrib(a,"name")||a.id,b=d.visual_anchor_class||"mce-item-anchor",f&&c.hasVisual?e.addClass(a,b):e.removeClass(a,b)))}}),c.fire("VisualAid",{element:a,hasVisual:c.hasVisual})},remove:function(){CI(this)},destroy:function(a){DI(this,a)},uploadImages:function(a){return this.editorUpload.uploadImages(a)},_scanForImages:function(){return this.editorUpload.scanForImages()}},FI(JI.prototype,rx);var KI,LI,MI,NI=function(a){return a.className.toString().indexOf("mce-")!==-1},OI={isEditorUIElement:NI},PI=function(a){return"nodechange"===a.type&&a.selectionChange},QI=function(a,b){var c=function(){b.throttle()};tj.DOM.bind(document,"mouseup",c),a.on("remove",function(){tj.DOM.unbind(document,"mouseup",c)})},RI=function(a){a.on("focusout",function(){ww.store(a)})},SI=function(a,b){a.on("mouseup touchend",function(a){b.throttle()})},TI=function(a,b){var c=yf.detect().browser;c.isIE()?RI(a):SI(a,b),a.on("keyup nodechange",function(b){PI(b)||ww.store(a)})},UI=function(a){var b=_z.first(function(){ww.store(a)},0);a.inline&&QI(a,b),a.on("init",function(){TI(a,b)}),a.on("remove",function(){b.cancel()})},VI={register:UI},WI=tj.DOM,XI=function(a){return OI.isEditorUIElement(a)},YI=function(a,b){var c=a?a.settings.custom_ui_selector:"",d=WI.getParent(b,function(b){return XI(b)||!!c&&a.dom.is(b,c)});return null!==d},ZI=function(){try{return document.activeElement}catch(a){return document.body}},$I=function(a,b){var c=b.editor;VI.register(c),c.on("focusin",function(){var b=this,c=a.focusedEditor;c!==b&&(c&&c.fire("blur",{focusedEditor:b}),a.setActive(b),a.focusedEditor=b,b.fire("focus",{blurredEditor:c}),b.focus(!0))}),c.on("focusout",function(){var b=this;Ub.setEditorTimeout(b,function(){var c=a.focusedEditor;YI(b,ZI())||c!==b||(b.fire("blur",{focusedEditor:null}),a.focusedEditor=null)})}),KI||(KI=function(b){var c,d=a.activeEditor;c=b.target,d&&c.ownerDocument===document&&(c===document.body||YI(d,c)||a.focusedEditor!==d||(d.fire("blur",{focusedEditor:null}),a.focusedEditor=null))},WI.bind(document,"focusin",KI))},_I=function(a,b){a.focusedEditor===b.editor&&(a.focusedEditor=null),a.activeEditor||(WI.unbind(document,"focusin",KI),KI=null)},aJ=function(a){a.on("AddEditor",Da.curry($I,a)),a.on("RemoveEditor",Da.curry(_I,a))},bJ={setup:aJ,isEditorUIElement:XI,isUIElement:YI},cJ={},dJ="en",eJ={setCode:function(a){a&&(dJ=a,this.rtl=!!this.data[a]&&"rtl"===this.data[a]._dir)},getCode:function(){return dJ},rtl:!1,add:function(a,b){var c=cJ[a];c||(cJ[a]=c={});for(var d in b)c[d]=b[d];this.setCode(a)},translate:function(a){var b=cJ[dJ]||{},c=function(a){return Gd.is(a,"function")?Object.prototype.toString.call(a):d(a)?"":""+a},d=function(a){return""===a||null===a||Gd.is(a,"undefined")},e=function(a){return a=c(a),Gd.hasOwn(b,a)?c(b[a]):a};if(d(a))return"";if(Gd.is(a,"object")&&Gd.hasOwn(a,"raw"))return c(a.raw);if(Gd.is(a,"array")){var f=a.slice(1);a=e(a[0]).replace(/\{([0-9]+)\}/g,function(a,b){return Gd.hasOwn(f,b)?c(f[b]):a})}return e(a).replace(/{context:\w+}$/,"")},data:cJ},fJ=tj.DOM,gJ=Gd.explode,hJ=Gd.each,iJ=Gd.extend,jJ=0,kJ=!1,lJ=[],mJ=[],nJ=function(a){return"length"!==a},oJ=function(a){hJ(MI.get(),function(b){"scroll"===a.type?b.fire("ScrollWindow",a):b.fire("ResizeWindow",a)})},pJ=function(a){a!==kJ&&(a?$d(window).on("resize scroll",oJ):$d(window).off("resize scroll",oJ),kJ=a)},qJ=function(a){var b=mJ;delete lJ[a.id];for(var c=0;c<lJ.length;c++)if(lJ[c]===a){lJ.splice(c,1);break}return mJ=rb.filter(mJ,function(b){return a!==b}),MI.activeEditor===a&&(MI.activeEditor=mJ.length>0?mJ[0]:null),MI.focusedEditor===a&&(MI.focusedEditor=null),b.length!==mJ.length},rJ=function(a){return a&&a.initialized&&!(a.getContainer()||a.getBody()).parentNode&&(qJ(a),a.unbindAllNativeEvents(),a.destroy(!0),a.removed=!0,a=null),a};MI={defaultSettings:{},$:$d,majorVersion:"4",minorVersion:"7.13",releaseDate:"2018-05-16",editors:lJ,i18n:eJ,activeEditor:null,settings:{},setup:function(){var a,b,c,d,e=this,f="";if(b=iI.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(b)&&(b=b.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(b)||(b+="/")),c=window.tinymce||window.tinyMCEPreInit)a=c.base||c.baseURL,f=c.suffix;else{for(var g=document.getElementsByTagName("script"),h=0;h<g.length;h++){d=g[h].src;var i=d.substring(d.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(d)){i.indexOf(".min")!==-1&&(f=".min"),a=d.substring(0,d.lastIndexOf("/"));break}}!a&&document.currentScript&&(d=document.currentScript.src,d.indexOf(".min")!==-1&&(f=".min"),a=d.substring(0,d.lastIndexOf("/")))}e.baseURL=new iI(b).toAbsolute(a),e.documentBaseURL=b,e.baseURI=new iI(e.baseURL),e.suffix=f,bJ.setup(e)},overrideDefaults:function(a){var b,c;b=a.base_url,b&&(this.baseURL=new iI(this.documentBaseURL).toAbsolute(b.replace(/\/+$/,"")),this.baseURI=new iI(this.baseURL)),c=a.suffix,a.suffix&&(this.suffix=c),this.defaultSettings=a;var d=a.plugin_base_urls;for(var e in d)y.PluginManager.urls[e]=d[e]},init:function(a){var b,c,d=this;c=Gd.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var e=function(a,b){return a.inline&&b.tagName.toLowerCase()in c},f=function(a){var b=a.id;return b||(b=a.name,b=b&&!fJ.get(b)?a.name:fJ.uniqueId(),a.setAttribute("id",b)),b},g=function(b){var c=a[b];if(c)return c.apply(d,Array.prototype.slice.call(arguments,2))},h=function(a,b){return b.constructor===RegExp?b.test(a.className):fJ.hasClass(a,b)},i=function(a){var b,c=[];if(Lb.ie&&Lb.ie<11)return qy.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(a.types)return hJ(a.types,function(a){c=c.concat(fJ.select(a.selector))}),c;if(a.selector)return fJ.select(a.selector);if(a.target)return[a.target];switch(a.mode){case"exact":b=a.elements||"",b.length>0&&hJ(gJ(b),function(a){var b;(b=fJ.get(a))?c.push(b):hJ(document.forms,function(b){hJ(b.elements,function(b){b.name===a&&(a="mce_editor_"+jJ++,fJ.setAttrib(b,"id",a),c.push(b))})})});break;case"textareas":case"specific_textareas":hJ(fJ.select("textarea"),function(b){a.editor_deselector&&h(b,a.editor_deselector)||a.editor_selector&&!h(b,a.editor_selector)||c.push(b)})}return c},j=function(a){b=a},k=function(){var b,c=0,h=[],l=function(a,e,f){var g=new JI(a,e,d);h.push(g),g.on("init",function(){++c===b.length&&j(h)}),g.targetElm=g.targetElm||f,g.render()};return fJ.unbind(window,"ready",k),g("onpageload"),b=$d.unique(i(a)),a.types?void hJ(a.types,function(c){Gd.each(b,function(b){return!fJ.is(b,c.selector)||(l(f(b),iJ({},a,c),b),!1)})}):(Gd.each(b,function(a){rJ(d.get(a.id))}),b=Gd.grep(b,function(a){return!d.get(a.id)}),void(0===b.length?j([]):hJ(b,function(b){e(a,b)?qy.initError("Could not initialize inline editor on invalid inline target element",b):l(f(b),a,b)})))};return d.settings=a,fJ.bind(window,"ready",k),new Nb(function(a){b?a(b):j=function(b){a(b)}})},get:function(a){return 0===arguments.length?mJ.slice(0):Na.isString(a)?rb.find(mJ,function(b){return b.id===a}).getOr(null):Na.isNumber(a)&&mJ[a]?mJ[a]:null},add:function(a){var b,c=this;return b=lJ[a.id],b===a?a:(null===c.get(a.id)&&(nJ(a.id)&&(lJ[a.id]=a),lJ.push(a),mJ.push(a)),pJ(!0),c.activeEditor=a,c.fire("AddEditor",{editor:a}),LI||(LI=function(){c.fire("BeforeUnload")},fJ.bind(window,"beforeunload",LI)),a)},createEditor:function(a,b){return this.add(new JI(a,b,this))},remove:function(a){var b,c,d=this;if(a)return Na.isString(a)?(a=a.selector||a,void hJ(fJ.select(a),function(a){c=d.get(a.id),c&&d.remove(c)})):(c=a,Na.isNull(d.get(c.id))?null:(qJ(c)&&d.fire("RemoveEditor",{editor:c}),0===mJ.length&&fJ.unbind(window,"beforeunload",LI),c.remove(),pJ(mJ.length>0),c));for(b=mJ.length-1;b>=0;b--)d.remove(mJ[b])},execCommand:function(a,b,c){var d=this,e=d.get(c);switch(a){case"mceAddEditor":return d.get(c)||new JI(c,d.settings,d).render(),!0;case"mceRemoveEditor":return e&&e.remove(),!0;case"mceToggleEditor":return e?(e.isHidden()?e.show():e.hide(),!0):(d.execCommand("mceAddEditor",0,c),!0)}return!!d.activeEditor&&d.activeEditor.execCommand(a,b,c)},triggerSave:function(){hJ(mJ,function(a){a.save()})},addI18n:function(a,b){eJ.add(a,b)},translate:function(a){return eJ.translate(a)},setActive:function(a){var b=this.activeEditor;this.activeEditor!==a&&(b&&b.fire("deactivate",{relatedTarget:a}),a.fire("activate",{relatedTarget:b})),this.activeEditor=a}},iJ(MI,Hw),MI.setup();var sJ=MI;!function(a){a.compareRanges=xv.isEq,a.getCaretRangeFromPoint=mE.fromPoint,a.getSelectedNode=sk,a.getNode=tk}(ca||(ca={}));var tJ,uJ,vJ=ca,wJ=Math.min,xJ=Math.max,yJ=Math.round,zJ=function(a,b,c){var d,e,f,g,h,i;return d=b.x,e=b.y,f=a.w,g=a.h,h=b.w,i=b.h,c=(c||"").split(""),"b"===c[0]&&(e+=i),"r"===c[1]&&(d+=h),"c"===c[0]&&(e+=yJ(i/2)),"c"===c[1]&&(d+=yJ(h/2)),"b"===c[3]&&(e-=g),"r"===c[4]&&(d-=f),"c"===c[3]&&(e-=yJ(g/2)),"c"===c[4]&&(d-=yJ(f/2)),EJ(d,e,f,g)},AJ=function(a,b,c,d){var e,f;for(f=0;f<d.length;f++)if(e=zJ(a,b,d[f]),e.x>=c.x&&e.x+e.w<=c.w+c.x&&e.y>=c.y&&e.y+e.h<=c.h+c.y)return d[f];return null},BJ=function(a,b,c){return EJ(a.x-b,a.y-c,a.w+2*b,a.h+2*c)},CJ=function(a,b){var c,d,e,f;return c=xJ(a.x,b.x),d=xJ(a.y,b.y),e=wJ(a.x+a.w,b.x+b.w),f=wJ(a.y+a.h,b.y+b.h),e-c<0||f-d<0?null:EJ(c,d,e-c,f-d)},DJ=function(a,b,c){var d,e,f,g,h,i,j,k,l,m;return h=a.x,i=a.y,j=a.x+a.w,k=a.y+a.h,l=b.x+b.w,m=b.y+b.h,d=xJ(0,b.x-h),e=xJ(0,b.y-i),f=xJ(0,j-l),g=xJ(0,k-m),h+=d,i+=e,c&&(j+=d,k+=e,h-=f,i-=g),j-=f,k-=g,EJ(h,i,j-h,k-i)},EJ=function(a,b,c,d){return{x:a,y:b,w:c,h:d}},FJ=function(a){return EJ(a.left,a.top,a.width,a.height)},GJ={inflate:BJ,relativePosition:zJ,findBestRelativePosition:AJ,intersect:CJ,clamp:DJ,create:EJ,fromClientRect:FJ},HJ={},IJ={add:function(a,b){HJ[a.toLowerCase()]=b},has:function(a){return!!HJ[a.toLowerCase()]},get:function(a){var b=a.toLowerCase(),c=HJ.hasOwnProperty(b)?HJ[b]:null;if(null===c)throw new Error("Could not find module for type: "+a);return c},create:function(a,b){var c;if("string"==typeof a?(b=b||{},b.type=a):(b=a,a=b.type),a=a.toLowerCase(),c=HJ[a],!c)throw new Error("Could not find control by type: "+a);return c=new c(b),c.type=a,c}},JJ=Gd.each,KJ=Gd.extend,LJ=function(){};LJ.extend=tJ=function(a){var b,c,d,e=this,f=e.prototype,g=function(){var a,b,c,d=this;if(!uJ&&(d.init&&d.init.apply(d,arguments),b=d.Mixins))for(a=b.length;a--;)c=b[a],c.init&&c.init.apply(d,arguments)},h=function(){return this},i=function(a,b){return function(){var c,d=this,e=d._super;return d._super=f[a],c=b.apply(d,arguments),d._super=e,c}};uJ=!0,b=new e,uJ=!1,a.Mixins&&(JJ(a.Mixins,function(b){for(var c in b)"init"!==c&&(a[c]=b[c])}),f.Mixins&&(a.Mixins=f.Mixins.concat(a.Mixins))),a.Methods&&JJ(a.Methods.split(","),function(b){a[b]=h}),a.Properties&&JJ(a.Properties.split(","),function(b){var c="_"+b;a[b]=function(a){var b=this;return void 0!==a?(b[c]=a,b):b[c]}}),a.Statics&&JJ(a.Statics,function(a,b){g[b]=a}),a.Defaults&&f.Defaults&&(a.Defaults=KJ({},f.Defaults,a.Defaults));for(c in a)d=a[c],"function"==typeof d&&f[c]?b[c]=i(c,d):b[c]=d;return g.prototype=b,g.constructor=g,g.extend=tJ,g};var MJ=Math.min,NJ=Math.max,OJ=Math.round,PJ=function(a){var b={},c=0,d=0,e=0,f=function(a,b,c){var d,e,f,g,h,i;return d=0,e=0,f=0,a/=255,b/=255,c/=255,h=MJ(a,MJ(b,c)),i=NJ(a,NJ(b,c)),h===i?(f=h,{h:0,s:0,v:100*f}):(g=a===h?b-c:c===h?a-b:c-a,d=a===h?3:c===h?1:5,d=60*(d-g/(i-h)),e=(i-h)/i,f=i,{h:OJ(d),s:OJ(100*e),v:OJ(100*f)})},g=function(a,b,f){var g,h,i,j;if(a=(parseInt(a,10)||0)%360,b=parseInt(b,10)/100,f=parseInt(f,10)/100,b=NJ(0,MJ(b,1)),f=NJ(0,MJ(f,1)),0===b)return void(c=d=e=OJ(255*f));switch(g=a/60,h=f*b,i=h*(1-Math.abs(g%2-1)),j=f-h,Math.floor(g)){case 0:c=h,d=i,e=0;break;case 1:c=i,d=h,e=0;break;case 2:c=0,d=h,e=i;break;case 3:c=0,d=i,e=h;break;case 4:c=i,d=0,e=h;break;case 5:c=h,d=0,e=i;break;default:c=d=e=0}c=OJ(255*(c+j)),d=OJ(255*(d+j)),e=OJ(255*(e+j))},h=function(){var a=function(a){return a=parseInt(a,10).toString(16),a.length>1?a:"0"+a};return"#"+a(c)+a(d)+a(e)},i=function(){return{r:c,g:d,b:e}},j=function(){return f(c,d,e)},k=function(a){var f;return"object"==typeof a?"r"in a?(c=a.r,d=a.g,e=a.b):"v"in a&&g(a.h,a.s,a.v):(f=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(a))?(c=parseInt(f[1],10),d=parseInt(f[2],10),e=parseInt(f[3],10)):(f=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(a))?(c=parseInt(f[1],16),d=parseInt(f[2],16),e=parseInt(f[3],16)):(f=/#([0-F])([0-F])([0-F])/gi.exec(a))&&(c=parseInt(f[1]+f[1],16),d=parseInt(f[2]+f[2],16),e=parseInt(f[3]+f[3],16)),c=c<0?0:c>255?255:c,d=d<0?0:d>255?255:d,e=e<0?0:e>255?255:e,b};return a&&k(a),b.toRgb=i,b.toHsv=j,b.toHex=h,b.parse=k,b},QJ=function(a,b){var c,d,e,f;if(b=b||'"',null===a)return"null";if(e=typeof a,"string"===e)return d="\bb\tt\nn\ff\rr\"\"''\\\\",b+a.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,e){return'"'===b&&"'"===a?a:(c=d.indexOf(e),c+1?"\\"+d.charAt(c+1):(a=e.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a))})+b;if("object"===e){if(a.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(a)){for(c=0,d="[";c<a.length;c++)d+=(c>0?",":"")+QJ(a[c],b);return d+"]"}d="{";for(f in a)a.hasOwnProperty(f)&&(d+="function"!=typeof a[f]?(d.length>1?","+b:b)+f+b+":"+QJ(a[f],b):"");return d+"}"}return""+a},RJ={serialize:QJ,parse:function(a){try{return JSON.parse(a)}catch(b){}}},SJ={callbacks:{},count:0,send:function(a){var b=this,c=tj.DOM,d=void 0!==a.count?a.count:b.count,e="tinymce_jsonp_"+d;b.callbacks[d]=function(f){c.remove(e),delete b.callbacks[d],a.callback(f)},c.add(c.doc.body,"script",{id:e,src:a.url,type:"text/javascript"}),b.count++}},TJ={send:function(a){var b,c=0,d=function(){!a.async||4===b.readyState||c++>1e4?(a.success&&c<1e4&&200===b.status?a.success.call(a.success_scope,""+b.responseText,b,a):a.error&&a.error.call(a.error_scope,c>1e4?"TIMED_OUT":"GENERAL",b,a),b=null):setTimeout(d,10)};if(a.scope=a.scope||this,a.success_scope=a.success_scope||a.scope,a.error_scope=a.error_scope||a.scope,a.async=a.async!==!1,a.data=a.data||"",TJ.fire("beforeInitialize",{settings:a}),b=new L){if(b.overrideMimeType&&b.overrideMimeType(a.content_type),b.open(a.type||(a.data?"POST":"GET"),a.url,a.async),a.crossDomain&&(b.withCredentials=!0),a.content_type&&b.setRequestHeader("Content-Type",a.content_type),a.requestheaders&&Gd.each(a.requestheaders,function(a){b.setRequestHeader(a.key,a.value)}),b.setRequestHeader("X-Requested-With","XMLHttpRequest"),b=TJ.fire("beforeSend",{xhr:b,settings:a}).xhr,b.send(a.data),!a.async)return d();setTimeout(d,10)}}};Gd.extend(TJ,Hw);var UJ=Gd.extend,VJ=function(a){this.settings=UJ({},a),this.count=0};VJ.sendRPC=function(a){return(new VJ).send(a)},VJ.prototype={send:function(a){var b=a.error,c=a.success;a=UJ(this.settings,a),a.success=function(d,e){d=RJ.parse(d),"undefined"==typeof d&&(d={error:"JSON Parse error."}),d.error?b.call(a.error_scope||a.scope,d.error,e):c.call(a.success_scope||a.scope,d.result)},a.error=function(c,d){b&&b.call(a.error_scope||a.scope,c,d)},a.data=RJ.serialize({id:a.id||"c"+this.count++,method:a.method,params:a.params}),a.content_type="application/json",TJ.send(a)}};var WJ=window.localStorage,XJ=sJ,YJ={geom:{Rect:GJ},util:{Promise:Nb,Delay:Ub,Tools:Gd,VK:cA,URI:iI,Class:LJ,EventDispatcher:Ew,Observable:Hw,I18n:eJ,XHR:TJ,JSON:RJ,JSONRequest:VJ,JSONP:SJ,LocalStorage:WJ,Color:PJ},dom:{EventUtils:ec,Sizzle:id,DomQuery:$d,TreeWalker:u,DOMUtils:tj,ScriptLoader:yj,RangeUtils:vJ,Serializer:_,ControlSelection:gE,BookmarkManager:cE,Selection:oF,Event:ec.Event},html:{Styles:w,Entities:_i,Node:MD,Schema:v,SaxParser:nA,DomParser:Z,Writer:B,Serializer:C},ui:{Factory:IJ},Env:Lb,AddOnManager:y,Formatter:Y,UndoManager:W,EditorCommands:E,WindowManager:K,NotificationManager:I,EditorObservable:rx,Shortcuts:G,Editor:JI,FocusManager:OI,EditorManager:sJ,DOM:tj.DOM,ScriptLoader:yj.ScriptLoader,PluginManager:y.PluginManager,ThemeManager:y.ThemeManager,trim:Gd.trim,isArray:Gd.isArray,is:Gd.is,toArray:Gd.toArray,makeMap:Gd.makeMap,each:Gd.each,map:Gd.map,grep:Gd.grep,inArray:Gd.inArray,extend:Gd.extend,create:Gd.create,walk:Gd.walk,createNS:Gd.createNS,resolve:Gd.resolve,explode:Gd.explode,_addCacheSuffix:Gd._addCacheSuffix,isOpera:Lb.opera,isWebKit:Lb.webkit,isIE:Lb.ie,isGecko:Lb.gecko,isMac:Lb.mac};XJ=Gd.extend(XJ,YJ);var ZJ=XJ,$J=function(a){if("object"==typeof module)try{module.exports=a}catch(b){}},_J=function(a){window.tinymce=a,window.tinyMCE=a};_J(ZJ),$J(ZJ)}()}(),function(){return this.tinyMCE.DOM.events.domLoaded=!0,this.tinyMCE}.apply(this,arguments)||window.tinyMCE}.apply(a,arguments)})}(this),define("text",["module"],function(a){"use strict";function b(a,b){return void 0===a||""===a?b:a}function c(a,c,d,e){if(c===e)return!0;if(a===d){if("http"===a)return b(c,"80")===b(e,"80");if("https"===a)return b(c,"443")===b(e,"443")}return!1}var d,e,f,g,h,i=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],j=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,k=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,l="undefined"!=typeof location&&location.href,m=l&&location.protocol&&location.protocol.replace(/\:/,""),n=l&&location.hostname,o=l&&(location.port||void 0),p={},q=a.config&&a.config()||{};return d={version:"2.0.15",strip:function(a){if(a){a=a.replace(j,"");var b=a.match(k);b&&(a=b[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:q.createXhr||function(){var a,b,c;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(b=0;b<3;b+=1){c=i[b];try{a=new ActiveXObject(c)}catch(d){}if(a){i=[c];break}}return a},parseName:function(a){var b,c,d,e=!1,f=a.lastIndexOf("."),g=0===a.indexOf("./")||0===a.indexOf("../");return f!==-1&&(!g||f>1)?(b=a.substring(0,f),c=a.substring(f+1)):b=a,d=c||b,f=d.indexOf("!"),f!==-1&&(e="strip"===d.substring(f+1),d=d.substring(0,f),c?c=d:b=d),{moduleName:b,ext:c,strip:e}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,b,e,f){var g,h,i,j=d.xdRegExp.exec(a);return!j||(g=j[2],h=j[3],h=h.split(":"),i=h[1],h=h[0],(!g||g===b)&&(!h||h.toLowerCase()===e.toLowerCase())&&(!i&&!h||c(g,i,b,f)))},finishLoad:function(a,b,c,e){c=b?d.strip(c):c,q.isBuild&&(p[a]=c),e(c)},load:function(a,b,c,e){if(e&&e.isBuild&&!e.inlineText)return void c();q.isBuild=e&&e.isBuild;var f=d.parseName(a),g=f.moduleName+(f.ext?"."+f.ext:""),h=b.toUrl(g),i=q.useXhr||d.useXhr;return 0===h.indexOf("empty:")?void c():void(!l||i(h,m,n,o)?d.get(h,function(b){d.finishLoad(a,f.strip,b,c)},function(a){c.error&&c.error(a)}):b([g],function(a){d.finishLoad(f.moduleName+"."+f.ext,f.strip,a,c)}))},write:function(a,b,c,e){if(p.hasOwnProperty(b)){var f=d.jsEscape(p[b]);c.asModule(a+"!"+b,"define(function () { return '"+f+"';});\n")}},writeFile:function(a,b,c,e,f){var g=d.parseName(b),h=g.ext?"."+g.ext:"",i=g.moduleName+h,j=c.toUrl(g.moduleName+h)+".js";d.load(i,c,function(b){var c=function(a){return e(j,a)};c.asModule=function(a,b){return e.asModule(a,j,b)},d.write(a,i,c,f)},f)}},"node"===q.env||!q.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(e=require.nodeRequire("fs"),d.get=function(a,b,c){try{var d=e.readFileSync(a,"utf8");"\ufeff"===d[0]&&(d=d.substring(1)),b(d)}catch(f){c&&c(f)}}):"xhr"===q.env||!q.env&&d.createXhr()?d.get=function(a,b,c,e){var f,g=d.createXhr();if(g.open("GET",a,!0),e)for(f in e)e.hasOwnProperty(f)&&g.setRequestHeader(f.toLowerCase(),e[f]);q.onXhr&&q.onXhr(g,a),g.onreadystatechange=function(d){var e,f;4===g.readyState&&(e=g.status||0,e>399&&e<600?(f=new Error(a+" HTTP status: "+e),f.xhr=g,c&&c(f)):b(g.responseText),q.onXhrComplete&&q.onXhrComplete(g,a))},g.send(null)}:"rhino"===q.env||!q.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?d.get=function(a,b){var c,d,e="utf-8",f=new java.io.File(a),g=java.lang.System.getProperty("line.separator"),h=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(f),e)),i="";try{for(c=new java.lang.StringBuffer,d=h.readLine(),d&&d.length()&&65279===d.charAt(0)&&(d=d.substring(1)),null!==d&&c.append(d);null!==(d=h.readLine());)c.append(g),c.append(d);i=String(c.toString())}finally{h.close()}b(i)}:("xpconnect"===q.env||!q.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(f=Components.classes,g=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),h="@mozilla.org/windows-registry-key;1"in f,d.get=function(a,b){var c,d,e,i={};h&&(a=a.replace(/\//g,"\\")),e=new FileUtils.File(a);try{c=f["@mozilla.org/network/file-input-stream;1"].createInstance(g.nsIFileInputStream),c.init(e,1,0,!1),d=f["@mozilla.org/intl/converter-input-stream;1"].createInstance(g.nsIConverterInputStream),d.init(c,"utf-8",c.available(),g.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),d.readString(c.available(),i),d.close(),c.close(),b(i.value)}catch(j){throw new Error((e&&e.path||"")+": "+j)}}),d}),define("text!mockup-patterns-tinymce-url/templates/link.xml",[],function(){return'<div>\n  <div class="linkModal">\n    <h1><%- insertHeading %></h1>\n    <% if(upload){ %>\n    <p class="info">Specify the object to link to. It can be on this site already ("Internal"), an object you upload ("Upload"), from an external site ("External"), an email address ("Email"), or an anchor on this page ("Anchor").</p>\n    <% } %>\n\n    <div class="linkTypes pat-autotoc autotabs"\n         data-pat-autotoc="section:fieldset;levels:legend;IDPrefix:tinymce-autotoc-">\n\n      <fieldset class="linkType internal" data-linkType="internal">\n        <legend id="tinylink-internal">Internal</legend>\n        <div>\n          <div class="form-group main">\n            <!-- this gives the name to the "linkType" -->\n            <input type="text" name="internal" />\n          </div>\n        </div>\n      </fieldset>\n\n      <% if(upload){ %>\n      <fieldset class="linkType upload" data-linkType="upload">\n        <legend id="tinylink-upload">Upload</legend>\n        <div class="uploadify-me"></div>\n      </fieldset>\n      <% } %>\n\n      <fieldset class="linkType external" data-linkType="external">\n        <legend id="tinylink-external">External</legend>\n        <div class="form-group main">\n          <label for="external"><%- externalText %></label>\n          <input type="text" name="external" />\n        </div>\n      </fieldset>\n\n      <fieldset class="linkType email" data-linkType="email">\n        <legend id="tinylink-email">Email</legend>\n        <div class="form-inline">\n          <div class="form-group main">\n            <label><%- emailText %></label>\n            <input type="text" name="email" />\n          </div>\n          <div class="form-group">\n            <label><%- subjectText %></label>\n            <input type="text" name="subject" />\n          </div>\n        </div>\n      </fieldset>\n\n      <fieldset class="linkType anchor" data-linkType="anchor">\n        <legend id="tinylink-anchor">Anchor</legend>\n        <div>\n          <div class="form-group main">\n            <label>Select an anchor</label>\n            <div class="input-wrapper">\n              <select name="anchor" class="pat-select2" data-pat-select2="width:500px" />\n            </div>\n          </div>\n        </div>\n      </fieldset>\n\n    </div><!-- / tabs -->\n\n    <div class="common-controls">\n      <div class="form-group">\n        <label>Target</label>\n        <select name="target">\n          <% _.each(targetList, function(target){ %>\n            <option value="<%- target.value %>"><%- target.text %></option>\n          <% }); %>\n        </select>\n      </div>\n      <div class="form-group">\n        <label><%- titleText %></label>\n        <input type="text" name="title" />\n      </div>\n    </div>\n\n    <input type="submit" class="plone-btn" name="cancel" value="<%- cancelBtn %>" />\n    <input type="submit" class="plone-btn plone-btn-primary context" name="insert" value="<%- insertBtn %>" />\n  </div>\n</div>\n'}),define("text!mockup-patterns-tinymce-url/templates/image.xml",[],function(){return'<div>\n  <div class="linkModal">\n    <h1><%- insertHeading %></h1>\n    <% if(_.contains(linkTypes, \'uploadImage\')){ %>\n    <p class="info">Specify an image. It can be on this site already ("Internal Image"), an image you upload ("Upload"), or from an external site ("External Image").</p>\n    <% } %>\n\n    <div class="linkTypes pat-autotoc autotabs"\n         data-pat-autotoc="section:fieldset;levels:legend;IDPrefix:tinymce-autotoc-">\n\n        <% if(_.contains(linkTypes, \'image\')){ %>\n      <fieldset class="linkType image" data-linkType="image">\n        <legend id="tinylink-image">Internal Image</legend>\n        <div class="form-inline">\n          <div class="form-group main">\n            <input type="text" name="image" />\n          </div>\n          <div class="form-group scale">\n            <label><%- scaleText %></label>\n            <select name="scale">\n              <option value="">Original</option>\n                <% _.each(imageScales, function(scale){ %>\n                  <option value="<%- scale.value %>" <% if(scale.value === options.defaultScale){ %>selected<% } %> >\n                    <%- scale.title %>\n                  </option>\n                <% }); %>\n            </select>\n          </div>\n        </div>\n      </fieldset>\n        <% } %>\n\n      <% if(_.contains(linkTypes, \'uploadImage\')){ %>\n      <fieldset class="linkType uploadImage" data-linkType="uploadImage">\n        <legend id="tinylink-uploadImage">Upload</legend>\n        <div class="uploadify-me"></div>\n      </fieldset>\n      <% } %>\n\n      <% if(_.contains(linkTypes, \'externalImage\')){ %>\n      <fieldset class="linkType externalImage" data-linkType="externalImage">\n        <legend id="tinylink-externalImage">External Image</legend>\n        <div>\n          <div class="form-group main">\n            <label><%- externalImageText %></label>\n            <input type="text" name="externalImage" />\n          </div>\n        </div>\n      </fieldset>\n      <% } %>\n\n    </div><!-- / tabs -->\n\n    <div class="common-controls">\n      <div class="form-group title">\n        <label><%- titleText %></label>\n        <input type="text" name="title" />\n      </div>\n      <div class="form-group text">\n        <label><%- altText %></label>\n        <input type="text" name="alt" />\n      </div>\n      <div class="form-group align">\n        <label><%- imageAlignText %></label>\n        <select name="align">\n          <% _.each(Object.keys(options.imageClasses), function(align){ %>\n              <option value="<%- align %>">\n              <%- options.imageClasses[align] %>\n              </option>\n          <% }); %>\n        <select>\n      </div>\n    </div>\n\n    <input type="submit" class="plone-btn" name="cancel" value="<%- cancelBtn %>" />\n    <input type="submit" class="plone-btn plone-btn-primary context" name="insert" value="<%- insertBtn %>" />\n\n  </div>\n</div>\n';
}),define("mockup-ui-url/views/base",["jquery","underscore","backbone","translate"],function(a,b,c,d){"use strict";var e=c.View.extend({isUIView:!0,eventPrefix:"ui",template:null,idPrefix:"base-",appendInContainer:!0,initialize:function(a){this.options=a;for(var b in this.options)this[b]=this.options[b];this.options._t=d},render:function(){return this.applyTemplate(),this.trigger("render",this),this.afterRender(),this.options.id&&this.$el.attr("id",this.idPrefix+this.options.id),this},afterRender:function(){},serializedModel:function(){return this.options},applyTemplate:function(){if(null!==this.template){var c=a.extend({_t:d},this.options,this.serializedModel()),e=this.template;"string"==typeof e&&(e=b.template(e)),this.$el.html(e(c))}},propagateEvent:function(a){if(a.indexOf(":")>0){var b=a.split(":")[0];if(""!==this.eventPrefix&&(b===this.eventPrefix||b===this.eventPrefix+"."+this.id))return!0}return!1},uiEventTrigger:function(a){var b=[].slice.call(arguments,0);""!==this.eventPrefix&&(b[0]=this.eventPrefix+":"+a,c.View.prototype.trigger.apply(this,b),this.id&&(b[0]=this.eventPrefix+"."+this.id+":"+a,c.View.prototype.trigger.apply(this,b)))}});return e}),define("mockup-patterns-tooltip",["jquery","pat-base"],function(a,b,c){"use strict";var d=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};d.VERSION="3.2.0",d.DEFAULTS={animation:!0,placement:"auto",selector:!1,template:'<div class="tooltip mockup-tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!0,container:!1,viewport:{selector:"body",padding:0}},d.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},d.prototype.getDefaults=function(){return d.DEFAULTS},d.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},d.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},d.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},d.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},d.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var c=a.contains(document.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!c)return;var d=this,e=this.tip(),f=this.getUID(this.type);this.setContent(),e.attr("id",f),this.$element.attr("aria-describedby",f),this.options.animation&&e.addClass("fade");var g="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,h=/\s?auto?\s?/i,i=h.test(g);i&&(g=g.replace(h,"")||"top"),e.detach().css({top:0,left:0,display:"block"}).addClass(g).data("bs."+this.type,this),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element);var j=this.getPosition(),k=e[0].offsetWidth,l=e[0].offsetHeight;if(i){var m=g,n=this.$element.parent(),o=this.getPosition(n);g="bottom"==g&&j.top+j.height+l-o.scroll>o.height?"top":"top"==g&&j.top-o.scroll-l<0?"bottom":"right"==g&&j.right+k>o.width?"left":"left"==g&&j.left-k<o.left?"right":g,e.removeClass(m).addClass(g)}var p=this.getCalculatedOffset(g,j,k,l);this.applyPlacement(p,g);var q=function(){d.$element.trigger("shown.bs."+d.type),d.hoverState=null};a.support.transition&&this.$tip.hasClass("fade")?e.one("bsTransitionEnd",q).emulateTransitionEnd(150):q()}},d.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=k.left?2*k.left-e+i:2*k.top-f+j,m=k.left?"left":"top",n=k.left?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(l,d[0][n],m)},d.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},d.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},d.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);if(this.$element.removeAttr("aria-describedby"),this.$element.trigger(e),!e.isDefaultPrevented())return d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one("bsTransitionEnd",b).emulateTransitionEnd(150):b(),this.hoverState=null,this},d.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},d.prototype.hasContent=function(){return this.getTitle()},d.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName;return a.extend({},"function"==typeof c.getBoundingClientRect?c.getBoundingClientRect():null,{scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop(),width:d?a(window).width():b.outerWidth(),height:d?a(window).height():b.outerHeight()},d?{top:0,left:0}:b.offset())},d.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},d.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},d.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},d.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},d.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},d.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},d.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},d.prototype.enable=function(){this.enabled=!0},d.prototype.disable=function(){this.enabled=!1},d.prototype.toggleEnabled=function(){this.enabled=!this.enabled},d.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},d.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var e=b.extend({name:"tooltip",trigger:".pat-tooltip",parser:"mockup",defaults:{html:!1,placement:"top"},init:function(){"true"===this.options.html?this.options.html=!0:this.options.html=!1,this.data=new d(this.$el[0],this.options)}});return e}),define("mockup-ui-url/views/button",["underscore","mockup-ui-url/views/base","mockup-patterns-tooltip"],function(a,b,c){"use strict";var d=b.extend({tagName:"a",className:"btn",eventPrefix:"button",context:"default",idPrefix:"btn-",attributes:{href:"#"},extraClasses:[],tooltip:null,template:'<% if (icon) { %><span class="glyphicon glyphicon-<%= icon %>"></span><% } %> <%= title %>',events:{click:"handleClick"},initialize:function(d){if(!d.id){var e=d.title||"";d.id=""!==e?e.toLowerCase().replace(" ","-"):this.cid}b.prototype.initialize.apply(this,[d]),this.on("render",function(){if(this.$el.attr("title",this.options.title||""),this.$el.attr("aria-label",this.options.title||this.options.tooltip||""),null!==this.context&&this.$el.addClass("btn-"+this.context),a.each(this.extraClasses,function(a){this.$el.addClass(a)}),null!==this.tooltip){this.$el.attr("title",this.tooltip);new c(this.$el);this.$el.on("hidden",function(a){"hidden"===a.type&&a.stopPropagation()})}},this)},handleClick:function(a){a.preventDefault(),this.$el.prop("disabled")||this.uiEventTrigger("click",this,a)},serializedModel:function(){return a.extend({icon:"",title:""},this.options)},disable:function(){this.$el.prop("disabled",!0)},enable:function(){this.$el.prop("disabled",!1)}});return d}),define("text!mockup-patterns-relateditems-url/templates/breadcrumb.xml",[],function(){return'<span class="separator">/<span>\n<a href="<%- path %>" class="crumb"><%- text %></a>\n'}),define("text!mockup-patterns-relateditems-url/templates/favorite.xml",[],function(){return'<li><a href="<%- path %>" class="fav" aria-labelledby="blip"><%- title %></a></li>\n'}),define("text!mockup-patterns-relateditems-url/templates/recentlyused.xml",[],function(){return'<div class="pattern-relateditems-recentlyused">\n  <a class="pattern-relateditems-recentlyused-select" data-uid="<%- UID %>">\n    <% if (getURL && (getIcon || portal_type === "Image")) { %><img src="<%- getURL %>/@@images/image/icon "><br><% } %>\n    <span class="pattern-relateditems-recentlyused-title<%- portal_type ? \' contenttype-\' + portal_type.toLowerCase() : \'\' %><%- review_state ? \' state-\' + review_state : \'\' %>" title="<%- portal_type %>"><%- Title %></span>\n    <span class="pattern-relateditems-recentlyused-path"><%- path %></span>\n  </a>\n</div>\n'}),define("text!mockup-patterns-relateditems-url/templates/result.xml",[],function(){return'<div class="pattern-relateditems-result<% if (oneLevelUp) { %> one-level-up<% } %>">\n  <span class="pattern-relateditems-buttons">\n  <% if (is_folderish) { %>\n    <a class="pattern-relateditems-result-browse" data-path="<%- path %>" title="<%- open_folder %>"></a>\n  <% } %>\n  </span>\n  <a class="pattern-relateditems-result-select<% if (selectable) { %> selectable<% } else if (browsing && is_folderish) { %> pattern-relateditems-result-browse<% } %><% if (oneLevelUp) { %> one-level-up<% } %>" data-path="<%- path %>">\n    <% if (getURL && (getIcon || portal_type === "Image")) { %><img src="<%- getURL %>/@@images/image/icon "><br><% } %>\n    <span class="pattern-relateditems-result-title<%- portal_type ? \' contenttype-\' + portal_type.toLowerCase() : \'\' %><%- review_state ? \' state-\' + review_state : \'\' %>" title="<%- portal_type %>"><%- Title %></span>\n    <span class="pattern-relateditems-result-path"><%- path %></span>\n  </a>\n</div>\n'}),define("text!mockup-patterns-relateditems-url/templates/selection.xml",[],function(){return'<span class="pattern-relateditems-item">\n  <% if (getURL && (getIcon || portal_type === "Image")) { %><img src="<%- getURL %>/@@images/image/icon"><br><% } %>\n  <span class="pattern-relateditems-item-title<%- portal_type ? \' contenttype-\' + portal_type.toLowerCase() : \'\' %><%- review_state ? \' state-\' + review_state : \'\' %>" title="<%- portal_type %>"><%- Title %></span>\n  <span class="pattern-relateditems-item-path"><%- path %></span>\n</span>\n'}),define("text!mockup-patterns-relateditems-url/templates/toolbar.xml",[],function(){return'<% if (mode!==\'auto\') { %>\n<div class="btn-group mode-selector" role="group">\n  <button type="button" class="mode search btn <% if (mode==\'search\') { %>btn-primary<% } else {%>btn-default<% } %>"><%- searchModeText %></button>\n  <button type="button" class="mode browse btn <% if (mode==\'browse\') { %>btn-primary<% } else {%>btn-default<% } %>"><%- browseModeText %></button>\n</div>\n<% } %>\n<div class="path-wrapper">\n  <span class="pattern-relateditems-path-label"><%- searchText %></span>\n  <a class="crumb" href="/"><span class="glyphicon glyphicon-home"/></a>\n  <%= items %>\n</div>\n<div class="controls pull-right">\n\n  <% if (recentlyUsedItems) { %>\n  <div class="recentlyUsed dropdown pull-right">\n    <button type="button" class="recentlyUsed dropdown-toggle btn btn-primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n      <span class="glyphicon glyphicon-time"/>\n      <%- recentlyUsedText %>\n      <span class="caret"/>\n    </button>\n    <ul class="dropdown-menu">\n      <%= recentlyUsedItems %>\n    </ul>\n  </div>\n  <% } %>\n\n  <% if (favorites.length > 0) { %>\n  <div class="favorites dropdown pull-right">\n    <button type="button" class="favorites dropdown-toggle btn btn-primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n      <span class="glyphicon glyphicon-star"/>\n      <%- favText %>\n      <span class="caret"/>\n    </button>\n    <ul class="dropdown-menu">\n      <%= favItems %>\n    </ul>\n  </div>\n  <% } %>\n</div>\n'}),define("mockup-patterns-relateditems",["jquery","underscore","pat-base","mockup-patterns-select2","mockup-ui-url/views/button","mockup-utils","pat-registry","translate","text!mockup-patterns-relateditems-url/templates/breadcrumb.xml","text!mockup-patterns-relateditems-url/templates/favorite.xml","text!mockup-patterns-relateditems-url/templates/recentlyused.xml","text!mockup-patterns-relateditems-url/templates/result.xml","text!mockup-patterns-relateditems-url/templates/selection.xml","text!mockup-patterns-relateditems-url/templates/toolbar.xml","bootstrap-dropdown"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";var o=c.extend({name:"relateditems",trigger:".pat-relateditems",parser:"mockup",currentPath:void 0,selectedUIDs:[],openAfterInit:void 0,defaults:{vocabularyUrl:null,attributes:["UID","Title","portal_type","path","getURL","getIcon","is_folderish","review_state"],basePath:"",pageSize:10,browsing:void 0,closeOnSelect:!0,contextPath:void 0,dropdownCssClass:"pattern-relateditems-dropdown",favorites:[],recentlyUsed:!1,recentlyUsedMaxItems:20,recentlyUsedKey:"relateditems_recentlyused",maximumSelectionSize:-1,minimumInputLength:0,mode:"auto",orderable:!0,pathOperator:"plone.app.querystring.operation.string.path",rootPath:"/",rootUrl:"",scanSelection:!1,selectableTypes:null,separator:",",sortOn:null,sortOrder:"ascending",tokenSeparators:[","," "],upload:!1,uploadAllowView:void 0,width:"100%",breadcrumbTemplate:i,breadcrumbTemplateSelector:null,favoriteTemplate:j,favoriteTemplateSelector:null,recentlyusedTemplate:k,recentlyusedTemplateSelector:null,resultTemplate:l,resultTemplateSelector:null,selectionTemplate:m,selectionTemplateSelector:null,toolbarTemplate:n,toolbarTemplateSelector:null,multiple:!0},recentlyUsed:function(a){var b=f.storage.get(this.options.recentlyUsedKey)||[];b=b.slice(b.length-1e3,b.length),a&&b.filter(this.isSelectable.bind(this));var c=parseInt(this.options.recentlyUsedMaxItems,10);return c&&(b=b.slice(b.length-c,b.length)),b},applyTemplate:function(c,d){var e,f=this;f.options[c+"TemplateSelector"]?(e=a(f.options[c+"TemplateSelector"]).html(),e||(e=f.options[c+"Template"])):e=f.options[c+"Template"];var g=a.extend(!0,{},f.options,d,{browsing:f.browsing,open_folder:h("Open folder")});return g._item=d,b.template(e)(g)},setAjax:function(){var a={url:this.options.vocabularyUrl,dataType:"JSON",quietMillis:500,data:function(a,b){var c=[];a&&(a="*"+a+"*",c.push({i:"SearchableText",o:"plone.app.querystring.operation.string.contains",v:a})),!this.browsing&&this.options.selectableTypes&&c.push({i:"portal_type",o:"plone.app.querystring.operation.selection.any",v:this.options.selectableTypes}),c.push({i:"path",o:this.options.pathOperator,v:this.options.rootPath+this.currentPath+(this.browsing?"::1":"")});var d=this.options.sortOn,e=d?this.options.sortOrder:null;this.browsing&&null===d&&(d="getObjPositionInParent",e="ascending");var f={query:JSON.stringify({criteria:c,sort_on:d,sort_order:e}),attributes:JSON.stringify(this.options.attributes),batch:JSON.stringify({page:b?b:1,size:this.options.pageSize})};return f}.bind(this),results:function(a,b){var c=b*this.options.pageSize<a.total,d=a.results;this.selectedUIDs=(this.$el.select2("data")||[]).map(function(a){return a.UID}),d=d.filter(function(a){return!!(this.browsing&&a.is_folderish||this.isSelectable(a)&&this.selectedUIDs.indexOf(a.UID)==-1)}.bind(this));var e=this.currentPath.split("/");return 1===b&&this.browsing&&e.length>1&&"/"!==this.currentPath&&(d=[{oneLevelUp:!0,Title:h("One level up"),path:e.slice(0,e.length-1).join("/")||"/",is_folderish:!0,selectable:!1}].concat(d)),{results:d,more:c}}.bind(this)};this.options.ajax=a},renderToolbar:function(){function c(b,c){var d="upload-"+f.generateId(),i=new e({id:d,title:h("Upload"),tooltip:h("Upload files"),icon:"upload"});c&&i.disable(),a(".controls",g.$toolbar).prepend(i.render().el),g.uploadView=new b({triggerView:i,app:g}),a("#btn-"+d,g.$toolbar).append(g.uploadView.render().el)}var d,g=this,i=g.currentPath,j=i.split("/"),k="",l="";b.each(j,function(a){if(""!==a){var b={};b.path=k=k+"/"+a,b.text=a,l+=g.applyTemplate("breadcrumb",b)}});var m="";b.each(g.options.favorites,function(a){var c=b.clone(a);c.path=c.path.substr(g.options.rootPath.length)||"/",m+=g.applyTemplate("favorite",c)});var n="";if(g.options.recentlyUsed){var o=g.recentlyUsed(!0);b.each(o.reverse(),function(a){n+=g.applyTemplate("recentlyused",a)})}d=g.applyTemplate("toolbar",{items:l,favItems:m,favText:h("Favorites"),searchText:h("Current path:"),searchModeText:h("Search"),browseModeText:h("Browse"),recentlyUsedItems:n,recentlyUsedText:h("Recently Used")}),g.$toolbar.html(d),a(".dropdown-toggle",g.$toolbar).dropdown(),a("button.mode.search",g.$toolbar).on("click",function(b){b.preventDefault(),g.browsing?(a("button.mode.search",g.$toolbar).toggleClass("btn-primary btn-default"),a("button.mode.browse",g.$toolbar).toggleClass("btn-primary btn-default"),g.browsing=!1,g.$el.select2("data").length>0&&(g.openAfterInit=!0),g.openAfterInit||(g.$el.select2("close"),g.$el.select2("open"))):(g.$el.select2("close"),g.$el.select2("open"))}),a("button.mode.browse",g.$toolbar).on("click",function(b){b.preventDefault(),g.browsing?(g.$el.select2("close"),g.$el.select2("open")):(a("button.mode.search",g.$toolbar).toggleClass("btn-primary btn-default"),a("button.mode.browse",g.$toolbar).toggleClass("btn-primary btn-default"),g.browsing=!0,g.$el.select2("data").length>0&&(g.openAfterInit=!0),g.openAfterInit||(g.$el.select2("close"),g.$el.select2("open")))}),a("a.crumb",g.$toolbar).on("click",function(b){b.preventDefault(),g.browseTo(a(this).attr("href"))}),a("a.fav",g.$toolbar).on("click",function(b){b.preventDefault(),g.browseTo(a(this).attr("href"))}),g.options.recentlyUsed&&a(".pattern-relateditems-recentlyused-select",g.$toolbar).on("click",function(b){b.preventDefault();var c=a(this).data("uid"),d=g.recentlyUsed().filter(function(a){return a.UID===c});if(d.length>0&&(d=d[0],g.selectItem(d),g.options.maximumSelectionSize>0)){var e=g.$el.select2("data");if(e.length>=g.options.maximumSelectionSize)return}}),g.options.upload&&f.featureSupport.dragAndDrop()&&f.featureSupport.fileApi()&&require(["mockup-patterns-relateditems-upload"],function(b){g.options.uploadAllowView?a.ajax({url:g.options.uploadAllowView,dataType:"JSON",data:{path:g.options.rootPath+g.currentPath},type:"GET",success:function(a){c(b,!a.allowUpload)}}):c(b)})},browseTo:function(a){var b=this;b.emit("before-browse"),b.currentPath=a,b.$el.select2("close"),b.renderToolbar(),b.$el.select2("open"),b.emit("after-browse")},selectItem:function(a){var b=this;b.emit("selecting");var c=b.$el.select2("data");if(c.push(a),b.$el.select2("data",c,!0),b.options.recentlyUsed){var d=b.recentlyUsed(),e=d.filter(function(b){return b.UID===a.UID});e.length>0&&d.splice(d.indexOf(e[0]),1),d.push(a),f.storage.set(b.options.recentlyUsedKey,d)}b.emit("selected")},deselectItem:function(a){var c=this;c.emit("deselecting");var d=c.$el.select2("data");b.each(d,function(b,c){b.UID===a.UID&&d.splice(c,1)}),c.$el.select2("data",d,!0),c.emit("deselected")},isSelectable:function(a){var c=this;return a.selectable!==!1&&(null===c.options.selectableTypes||b.indexOf(c.options.selectableTypes,a.portal_type)>-1)},init:function(){var b=this;b.browsing="search"!==b.options.mode,b.options.rootPath=b.options.rootPath.replace(/\/$/,""),b.currentPath=b.options.basePath.substr(b.options.rootPath.length)||"/",b.setAjax(),b.$el.wrap('<div class="pattern-relateditems-container" />'),b.$container=b.$el.parents(".pattern-relateditems-container"),b.$container.width(b.options.width),d.prototype.initializeValues.call(b),d.prototype.initializeTags.call(b),b.options.formatSelection=function(c){c=a.extend(!0,{Title:"",getIcon:"",getURL:"",path:"",portal_type:"",review_state:""},c);var d=a(b.applyTemplate("selection",c));if(b.options.scanSelection&&g.scan(d),1==b.options.maximumSelectionSize){var e=c.path,f=e.split("/");f=f.slice(0,-1),e=f.join("/"),b.currentPath=e,b.renderToolbar()}return d},d.prototype.initializeOrdering.call(b),b.options.formatResult=function(c){c.selectable=b.isSelectable(c),c=a.extend(!0,{Title:"",getIcon:"",getURL:"",is_folderish:!1,oneLevelUp:!1,path:"",portal_type:"",review_state:"",selectable:!1},c),b.selectedUIDs.indexOf(c.UID)!=-1&&(c.selectable=!1);var d=a(b.applyTemplate("result",c));return a(".pattern-relateditems-result-select",d).on("click",function(d){if(d.preventDefault(),a(this).is(".selectable")){var e=a(this).parents(".pattern-relateditems-result");if(e.is(".pattern-relateditems-active"))e.removeClass("pattern-relateditems-active"),b.deselectItem(c);else{if(b.options.maximumSelectionSize>0){var f=b.$el.select2("data");f.length>=b.options.maximumSelectionSize&&b.$el.select2("close")}b.selectItem(c),e.addClass("pattern-relateditems-active"),b.options.closeOnSelect&&b.$el.select2("close")}}}),a(".pattern-relateditems-result-browse",d).on("click",function(c){c.preventDefault(),c.stopPropagation();var d=a(this).data("path");b.browseTo(d)}),a(d)},b.options.initSelection=function(c,d){var e=a(c).val();if(""!==e){var g=e.split(b.options.separator),h=new f.QueryHelper(a.extend(!0,{},b.options,{pattern:b}));h.search("UID","plone.app.querystring.operation.list.contains",g,function(a){var c=a.results.reduce(function(a,b){return a[b.UID]=b,a},{});try{d(g.map(function(a){return c[a]}).filter(function(a){return void 0!==a}))}catch(e){console.log(a)}b.openAfterInit&&(b.$el.select2("open"),b.openAfterInit=void 0)},!1)}},b.options.tokenizer=function(a){"auto"===this.options.mode&&(a?this.browsing=!1:this.browsing=!0)}.bind(this),b.options.id=function(a){return a.UID},d.prototype.initializeSelect2.call(b),b.$toolbar=a('<div class="toolbar ui-offset-parent" />'),b.$container.prepend(b.$toolbar),b.$el.on("select2-selecting",function(a){a.preventDefault()}),b.renderToolbar()}});return o}),function(a){"function"==typeof define&&define.amd?define("dropzone",["jquery"],a):a(jQuery)}(function(a){var b={exports:{}};return function(){var c,d,e,f,g,h,i,j,k=[].slice,l={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=function(){},d=function(){function a(){}return a.prototype.addEventListener=a.prototype.on,a.prototype.on=function(a,b){return this._callbacks=this._callbacks||{},this._callbacks[a]||(this._callbacks[a]=[]),this._callbacks[a].push(b),this},a.prototype.emit=function(){var a,b,c,d,e,f;if(d=arguments[0],a=2<=arguments.length?k.call(arguments,1):[],this._callbacks=this._callbacks||{},c=this._callbacks[d])for(e=0,f=c.length;e<f;e++)b=c[e],b.apply(this,a);return this},a.prototype.removeListener=a.prototype.off,a.prototype.removeAllListeners=a.prototype.off,a.prototype.removeEventListener=a.prototype.off,a.prototype.off=function(a,b){var c,d,e,f,g;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(d=this._callbacks[a],!d)return this;if(1===arguments.length)return delete this._callbacks[a],this;for(e=f=0,g=d.length;f<g;e=++f)if(c=d[e],c===b){d.splice(e,1);break}return this},a}(),c=function(a){function b(a,d){var e,f,g;if(this.element=a,this.version=b.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(b.instances.push(this),this.element.dropzone=this,e=null!=(g=b.optionsForElement(this.element))?g:{},this.options=c({},this.defaultOptions,e,null!=d?d:{}),this.options.forceFallback||!b.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(f=this.getExistingFallback())&&f.parentNode&&f.parentNode.removeChild(f),this.options.previewsContainer!==!1&&(this.options.previewsContainer?this.previewsContainer=b.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(this.options.clickable===!0?this.clickableElements=[this.element]:this.clickableElements=b.getElements(this.options.clickable,"clickable")),this.init()}var c,e;return m(b,a),b.prototype.Emitter=d,b.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],b.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(a,b){return b()},init:function(){return i},forceFallback:!1,fallback:function(){var a,c,d,e,f,g;for(this.element.className=""+this.element.className+" dz-browser-not-supported",g=this.element.getElementsByTagName("div"),e=0,f=g.length;e<f;e++)a=g[e],/(^| )dz-message($| )/.test(a.className)&&(c=a,a.className="dz-message");return c||(c=b.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(c)),d=c.getElementsByTagName("span")[0],d&&(null!=d.textContent?d.textContent=this.options.dictFallbackMessage:null!=d.innerText&&(d.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(a){var b,c,d;return b={srcX:0,srcY:0,srcWidth:a.width,srcHeight:a.height},c=a.width/a.height,b.optWidth=this.options.thumbnailWidth,b.optHeight=this.options.thumbnailHeight,null==b.optWidth&&null==b.optHeight?(b.optWidth=b.srcWidth,b.optHeight=b.srcHeight):null==b.optWidth?b.optWidth=c*b.optHeight:null==b.optHeight&&(b.optHeight=1/c*b.optWidth),d=b.optWidth/b.optHeight,a.height<b.optHeight||a.width<b.optWidth?(b.trgHeight=b.srcHeight,b.trgWidth=b.srcWidth):c>d?(b.srcHeight=a.height,b.srcWidth=b.srcHeight*d):(b.srcWidth=a.width,b.srcHeight=b.srcWidth/d),b.srcX=(a.width-b.srcWidth)/2,b.srcY=(a.height-b.srcHeight)/2,b},drop:function(a){return this.element.classList.remove("dz-drag-hover")},dragstart:i,dragend:function(a){return this.element.classList.remove("dz-drag-hover")},dragenter:function(a){return this.element.classList.add("dz-drag-hover")},dragover:function(a){return this.element.classList.add("dz-drag-hover")},dragleave:function(a){return this.element.classList.remove("dz-drag-hover")},paste:i,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(a.previewElement=b.createElement(this.options.previewTemplate.trim()),a.previewTemplate=a.previewElement,this.previewsContainer.appendChild(a.previewElement),l=a.previewElement.querySelectorAll("[data-dz-name]"),f=0,i=l.length;f<i;f++)c=l[f],c.textContent=this._renameFilename(a.name);for(m=a.previewElement.querySelectorAll("[data-dz-size]"),g=0,j=m.length;g<j;g++)c=m[g],c.innerHTML=this.filesize(a.size);for(this.options.addRemoveLinks&&(a._removeLink=b.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),a.previewElement.appendChild(a._removeLink)),d=function(c){return function(d){return d.preventDefault(),d.stopPropagation(),a.status===b.UPLOADING?b.confirm(c.options.dictCancelUploadConfirmation,function(){return c.removeFile(a)}):c.options.dictRemoveFileConfirmation?b.confirm(c.options.dictRemoveFileConfirmation,function(){return c.removeFile(a)}):c.removeFile(a)}}(this),n=a.previewElement.querySelectorAll("[data-dz-remove]"),o=[],h=0,k=n.length;h<k;h++)e=n[h],o.push(e.addEventListener("click",d));return o}},removedfile:function(a){var b;return a.previewElement&&null!=(b=a.previewElement)&&b.parentNode.removeChild(a.previewElement),
this._updateMaxFilesReachedClass()},thumbnail:function(a,b){var c,d,e,f;if(a.previewElement){for(a.previewElement.classList.remove("dz-file-preview"),f=a.previewElement.querySelectorAll("[data-dz-thumbnail]"),d=0,e=f.length;d<e;d++)c=f[d],c.alt=a.name,c.src=b;return setTimeout(function(b){return function(){return a.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(a,b){var c,d,e,f,g;if(a.previewElement){for(a.previewElement.classList.add("dz-error"),"String"!=typeof b&&b.error&&(b=b.error),f=a.previewElement.querySelectorAll("[data-dz-errormessage]"),g=[],d=0,e=f.length;d<e;d++)c=f[d],g.push(c.textContent=b);return g}},errormultiple:i,processing:function(a){if(a.previewElement&&(a.previewElement.classList.add("dz-processing"),a._removeLink))return a._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:i,uploadprogress:function(a,b,c){var d,e,f,g,h;if(a.previewElement){for(g=a.previewElement.querySelectorAll("[data-dz-uploadprogress]"),h=[],e=0,f=g.length;e<f;e++)d=g[e],"PROGRESS"===d.nodeName?h.push(d.value=b):h.push(d.style.width=""+b+"%");return h}},totaluploadprogress:i,sending:i,sendingmultiple:i,success:function(a){if(a.previewElement)return a.previewElement.classList.add("dz-success")},successmultiple:i,canceled:function(a){return this.emit("error",a,"Upload canceled.")},canceledmultiple:i,complete:function(a){if(a._removeLink&&(a._removeLink.textContent=this.options.dictRemoveFile),a.previewElement)return a.previewElement.classList.add("dz-complete")},completemultiple:i,maxfilesexceeded:i,maxfilesreached:i,queuecomplete:i,addedfiles:i,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},c=function(){var a,b,c,d,e,f,g;for(d=arguments[0],c=2<=arguments.length?k.call(arguments,1):[],f=0,g=c.length;f<g;f++){b=c[f];for(a in b)e=b[a],d[a]=e}return d},b.prototype.getAcceptedFiles=function(){var a,b,c,d,e;for(d=this.files,e=[],b=0,c=d.length;b<c;b++)a=d[b],a.accepted&&e.push(a);return e},b.prototype.getRejectedFiles=function(){var a,b,c,d,e;for(d=this.files,e=[],b=0,c=d.length;b<c;b++)a=d[b],a.accepted||e.push(a);return e},b.prototype.getFilesWithStatus=function(a){var b,c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;c<d;c++)b=e[c],b.status===a&&f.push(b);return f},b.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(b.QUEUED)},b.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(b.UPLOADING)},b.prototype.getAddedFiles=function(){return this.getFilesWithStatus(b.ADDED)},b.prototype.getActiveFiles=function(){var a,c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;c<d;c++)a=e[c],a.status!==b.UPLOADING&&a.status!==b.QUEUED||f.push(a);return f},b.prototype.init=function(){var a,c,d,e,f,g,h;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(b.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(d=function(a){return function(){return a.hiddenFileInput&&a.hiddenFileInput.parentNode.removeChild(a.hiddenFileInput),a.hiddenFileInput=document.createElement("input"),a.hiddenFileInput.setAttribute("type","file"),(null==a.options.maxFiles||a.options.maxFiles>1)&&a.hiddenFileInput.setAttribute("multiple","multiple"),a.hiddenFileInput.className="dz-hidden-input",null!=a.options.acceptedFiles&&a.hiddenFileInput.setAttribute("accept",a.options.acceptedFiles),null!=a.options.capture&&a.hiddenFileInput.setAttribute("capture",a.options.capture),a.hiddenFileInput.style.visibility="hidden",a.hiddenFileInput.style.position="absolute",a.hiddenFileInput.style.top="0",a.hiddenFileInput.style.left="0",a.hiddenFileInput.style.height="0",a.hiddenFileInput.style.width="0",document.querySelector(a.options.hiddenInputContainer).appendChild(a.hiddenFileInput),a.hiddenFileInput.addEventListener("change",function(){var b,c,e,f;if(c=a.hiddenFileInput.files,c.length)for(e=0,f=c.length;e<f;e++)b=c[e],a.addFile(b);return a.emit("addedfiles",c),d()})}}(this))(),this.URL=null!=(g=window.URL)?g:window.webkitURL,h=this.events,e=0,f=h.length;e<f;e++)a=h[e],this.on(a,this.options[a]);return this.on("uploadprogress",function(a){return function(){return a.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(a){return function(){return a.updateTotalUploadProgress()}}(this)),this.on("canceled",function(a){return function(b){return a.emit("complete",b)}}(this)),this.on("complete",function(a){return function(b){if(0===a.getAddedFiles().length&&0===a.getUploadingFiles().length&&0===a.getQueuedFiles().length)return setTimeout(function(){return a.emit("queuecomplete")},0)}}(this)),c=function(a){return a.stopPropagation(),a.preventDefault?a.preventDefault():a.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(a){return function(b){return a.emit("dragstart",b)}}(this),dragenter:function(a){return function(b){return c(b),a.emit("dragenter",b)}}(this),dragover:function(a){return function(b){var d;try{d=b.dataTransfer.effectAllowed}catch(e){}return b.dataTransfer.dropEffect="move"===d||"linkMove"===d?"move":"copy",c(b),a.emit("dragover",b)}}(this),dragleave:function(a){return function(b){return a.emit("dragleave",b)}}(this),drop:function(a){return function(b){return c(b),a.drop(b)}}(this),dragend:function(a){return function(b){return a.emit("dragend",b)}}(this)}}],this.clickableElements.forEach(function(a){return function(c){return a.listeners.push({element:c,events:{click:function(d){return(c!==a.element||d.target===a.element||b.elementInside(d.target,a.element.querySelector(".dz-message")))&&a.hiddenFileInput.click(),!0}}})}}(this)),this.enable(),this.options.init.call(this)},b.prototype.destroy=function(){var a;return this.disable(),this.removeAllFiles(!0),(null!=(a=this.hiddenFileInput)?a.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,b.instances.splice(b.instances.indexOf(this),1)},b.prototype.updateTotalUploadProgress=function(){var a,b,c,d,e,f,g,h;if(d=0,c=0,a=this.getActiveFiles(),a.length){for(h=this.getActiveFiles(),f=0,g=h.length;f<g;f++)b=h[f],d+=b.upload.bytesSent,c+=b.upload.total;e=100*d/c}else e=100;return this.emit("totaluploadprogress",e,c,d)},b.prototype._getParamName=function(a){return"function"==typeof this.options.paramName?this.options.paramName(a):""+this.options.paramName+(this.options.uploadMultiple?"["+a+"]":"")},b.prototype._renameFilename=function(a){return"function"!=typeof this.options.renameFilename?a:this.options.renameFilename(a)},b.prototype.getFallbackForm=function(){var a,c,d,e;return(a=this.getExistingFallback())?a:(d='<div class="dz-fallback">',this.options.dictFallbackText&&(d+="<p>"+this.options.dictFallbackText+"</p>"),d+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',c=b.createElement(d),"FORM"!==this.element.tagName?(e=b.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),e.appendChild(c)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=e?e:c)},b.prototype.getExistingFallback=function(){var a,b,c,d,e,f;for(b=function(a){var b,c,d;for(c=0,d=a.length;c<d;c++)if(b=a[c],/(^| )fallback($| )/.test(b.className))return b},f=["div","form"],d=0,e=f.length;d<e;d++)if(c=f[d],a=b(this.element.getElementsByTagName(c)))return a},b.prototype.setupEventListeners=function(){var a,b,c,d,e,f,g;for(f=this.listeners,g=[],d=0,e=f.length;d<e;d++)a=f[d],g.push(function(){var d,e;d=a.events,e=[];for(b in d)c=d[b],e.push(a.element.addEventListener(b,c,!1));return e}());return g},b.prototype.removeEventListeners=function(){var a,b,c,d,e,f,g;for(f=this.listeners,g=[],d=0,e=f.length;d<e;d++)a=f[d],g.push(function(){var d,e;d=a.events,e=[];for(b in d)c=d[b],e.push(a.element.removeEventListener(b,c,!1));return e}());return g},b.prototype.disable=function(){var a,b,c,d,e;for(this.clickableElements.forEach(function(a){return a.classList.remove("dz-clickable")}),this.removeEventListeners(),d=this.files,e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(this.cancelUpload(a));return e},b.prototype.enable=function(){return this.clickableElements.forEach(function(a){return a.classList.add("dz-clickable")}),this.setupEventListeners()},b.prototype.filesize=function(a){var b,c,d,e,f,g,h,i;if(d=0,e="b",a>0){for(g=["TB","GB","MB","KB","b"],c=h=0,i=g.length;h<i;c=++h)if(f=g[c],b=Math.pow(this.options.filesizeBase,4-c)/10,a>=b){d=a/Math.pow(this.options.filesizeBase,4-c),e=f;break}d=Math.round(10*d)/10}return"<strong>"+d+"</strong> "+e},b.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},b.prototype.drop=function(a){var b,c;a.dataTransfer&&(this.emit("drop",a),b=a.dataTransfer.files,this.emit("addedfiles",b),b.length&&(c=a.dataTransfer.items,c&&c.length&&null!=c[0].webkitGetAsEntry?this._addFilesFromItems(c):this.handleFiles(b)))},b.prototype.paste=function(a){var b,c;if(null!=(null!=a&&null!=(c=a.clipboardData)?c.items:void 0))return this.emit("paste",a),b=a.clipboardData.items,b.length?this._addFilesFromItems(b):void 0},b.prototype.handleFiles=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;c<d;c++)b=a[c],e.push(this.addFile(b));return e},b.prototype._addFilesFromItems=function(a){var b,c,d,e,f;for(f=[],d=0,e=a.length;d<e;d++)c=a[d],null!=c.webkitGetAsEntry&&(b=c.webkitGetAsEntry())?b.isFile?f.push(this.addFile(c.getAsFile())):b.isDirectory?f.push(this._addFilesFromDirectory(b,b.name)):f.push(void 0):null!=c.getAsFile&&(null==c.kind||"file"===c.kind)?f.push(this.addFile(c.getAsFile())):f.push(void 0);return f},b.prototype._addFilesFromDirectory=function(a,b){var c,d,e;return c=a.createReader(),d=function(a){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(a):void 0},(e=function(a){return function(){return c.readEntries(function(c){var d,f,g;if(c.length>0){for(f=0,g=c.length;f<g;f++)d=c[f],d.isFile?d.file(function(c){if(!a.options.ignoreHiddenFiles||"."!==c.name.substring(0,1))return c.fullPath=""+b+"/"+c.name,a.addFile(c)}):d.isDirectory&&a._addFilesFromDirectory(d,""+b+"/"+d.name);e()}return null},d)}}(this))()},b.prototype.accept=function(a,c){return a.size>1024*this.options.maxFilesize*1024?c(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(a.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):b.isValidFile(a,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(c(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",a)):this.options.accept.call(this,a,c):c(this.options.dictInvalidFileType)},b.prototype.addFile=function(a){return a.upload={progress:0,total:a.size,bytesSent:0},this.files.push(a),a.status=b.ADDED,this.emit("addedfile",a),this._enqueueThumbnail(a),this.accept(a,function(b){return function(c){return c?(a.accepted=!1,b._errorProcessing([a],c)):(a.accepted=!0,b.options.autoQueue&&b.enqueueFile(a)),b._updateMaxFilesReachedClass()}}(this))},b.prototype.enqueueFiles=function(a){var b,c,d;for(c=0,d=a.length;c<d;c++)b=a[c],this.enqueueFile(b);return null},b.prototype.enqueueFile=function(a){if(a.status!==b.ADDED||a.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(a.status=b.QUEUED,this.options.autoProcessQueue)return setTimeout(function(a){return function(){return a.processQueue()}}(this),0)},b.prototype._thumbnailQueue=[],b.prototype._processingThumbnail=!1,b.prototype._enqueueThumbnail=function(a){if(this.options.createImageThumbnails&&a.type.match(/image.*/)&&a.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(a),setTimeout(function(a){return function(){return a._processThumbnailQueue()}}(this),0)},b.prototype._processThumbnailQueue=function(){if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(a){return function(){return a._processingThumbnail=!1,a._processThumbnailQueue()}}(this))},b.prototype.removeFile=function(a){if(a.status===b.UPLOADING&&this.cancelUpload(a),this.files=j(this.files,a),this.emit("removedfile",a),0===this.files.length)return this.emit("reset")},b.prototype.removeAllFiles=function(a){var c,d,e,f;for(null==a&&(a=!1),f=this.files.slice(),d=0,e=f.length;d<e;d++)c=f[d],(c.status!==b.UPLOADING||a)&&this.removeFile(c);return null},b.prototype.createThumbnail=function(a,b){var c;return c=new FileReader,c.onload=function(d){return function(){return"image/svg+xml"===a.type?(d.emit("thumbnail",a,c.result),void(null!=b&&b())):d.createThumbnailFromUrl(a,c.result,b)}}(this),c.readAsDataURL(a)},b.prototype.createThumbnailFromUrl=function(a,b,c,d){var e;return e=document.createElement("img"),d&&(e.crossOrigin=d),e.onload=function(b){return function(){var d,f,g,i,j,k,l,m;if(a.width=e.width,a.height=e.height,g=b.options.resize.call(b,a),null==g.trgWidth&&(g.trgWidth=g.optWidth),null==g.trgHeight&&(g.trgHeight=g.optHeight),d=document.createElement("canvas"),f=d.getContext("2d"),d.width=g.trgWidth,d.height=g.trgHeight,h(f,e,null!=(j=g.srcX)?j:0,null!=(k=g.srcY)?k:0,g.srcWidth,g.srcHeight,null!=(l=g.trgX)?l:0,null!=(m=g.trgY)?m:0,g.trgWidth,g.trgHeight),i=d.toDataURL("image/png"),b.emit("thumbnail",a,i),null!=c)return c()}}(this),null!=c&&(e.onerror=c),e.src=b},b.prototype.processQueue=function(){var a,b,c,d;if(b=this.options.parallelUploads,c=this.getUploadingFiles().length,a=c,!(c>=b)&&(d=this.getQueuedFiles(),d.length>0)){if(this.options.uploadMultiple)return this.processFiles(d.slice(0,b-c));for(;a<b;){if(!d.length)return;this.processFile(d.shift()),a++}}},b.prototype.processFile=function(a){return this.processFiles([a])},b.prototype.processFiles=function(a){var c,d,e;for(d=0,e=a.length;d<e;d++)c=a[d],c.processing=!0,c.status=b.UPLOADING,this.emit("processing",c);return this.options.uploadMultiple&&this.emit("processingmultiple",a),this.uploadFiles(a)},b.prototype._getFilesWithXhr=function(a){var b,c;return c=function(){var c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;c<d;c++)b=e[c],b.xhr===a&&f.push(b);return f}.call(this)},b.prototype.cancelUpload=function(a){var c,d,e,f,g,h,i;if(a.status===b.UPLOADING){for(d=this._getFilesWithXhr(a.xhr),e=0,g=d.length;e<g;e++)c=d[e],c.status=b.CANCELED;for(a.xhr.abort(),f=0,h=d.length;f<h;f++)c=d[f],this.emit("canceled",c);this.options.uploadMultiple&&this.emit("canceledmultiple",d)}else(i=a.status)!==b.ADDED&&i!==b.QUEUED||(a.status=b.CANCELED,this.emit("canceled",a),this.options.uploadMultiple&&this.emit("canceledmultiple",[a]));if(this.options.autoProcessQueue)return this.processQueue()},e=function(){var a,b;return b=arguments[0],a=2<=arguments.length?k.call(arguments,1):[],"function"==typeof b?b.apply(this,a):b},b.prototype.uploadFile=function(a){return this.uploadFiles([a])},b.prototype.uploadFiles=function(a){var d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;for(w=new XMLHttpRequest,x=0,B=a.length;x<B;x++)d=a[x],d.xhr=w;p=e(this.options.method,a),u=e(this.options.url,a),w.open(p,u,!0),w.withCredentials=!!this.options.withCredentials,s=null,g=function(b){return function(){var c,e,f;for(f=[],c=0,e=a.length;c<e;c++)d=a[c],f.push(b._errorProcessing(a,s||b.options.dictResponseError.replace("{{statusCode}}",w.status),w));return f}}(this),t=function(b){return function(c){var e,f,g,h,i,j,k,l,m;if(null!=c)for(f=100*c.loaded/c.total,g=0,j=a.length;g<j;g++)d=a[g],d.upload={progress:f,total:c.total,bytesSent:c.loaded};else{for(e=!0,f=100,h=0,k=a.length;h<k;h++)d=a[h],100===d.upload.progress&&d.upload.bytesSent===d.upload.total||(e=!1),d.upload.progress=f,d.upload.bytesSent=d.upload.total;if(e)return}for(m=[],i=0,l=a.length;i<l;i++)d=a[i],m.push(b.emit("uploadprogress",d,f,d.upload.bytesSent));return m}}(this),w.onload=function(c){return function(d){var e;if(a[0].status!==b.CANCELED&&4===w.readyState){if(s=w.responseText,w.getResponseHeader("content-type")&&~w.getResponseHeader("content-type").indexOf("application/json"))try{s=JSON.parse(s)}catch(f){d=f,s="Invalid JSON response from server."}return t(),200<=(e=w.status)&&e<300?c._finished(a,s,d):g()}}}(this),w.onerror=function(c){return function(){if(a[0].status!==b.CANCELED)return g()}}(this),r=null!=(G=w.upload)?G:w,r.onprogress=t,j={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&c(j,this.options.headers);for(h in j)i=j[h],i&&w.setRequestHeader(h,i);if(f=new FormData,this.options.params){H=this.options.params;for(o in H)v=H[o],f.append(o,v)}for(y=0,C=a.length;y<C;y++)d=a[y],this.emit("sending",d,w,f);if(this.options.uploadMultiple&&this.emit("sendingmultiple",a,w,f),"FORM"===this.element.tagName)for(I=this.element.querySelectorAll("input, textarea, select, button"),z=0,D=I.length;z<D;z++)if(l=I[z],m=l.getAttribute("name"),n=l.getAttribute("type"),"SELECT"===l.tagName&&l.hasAttribute("multiple"))for(J=l.options,A=0,E=J.length;A<E;A++)q=J[A],q.selected&&f.append(m,q.value);else(!n||"checkbox"!==(K=n.toLowerCase())&&"radio"!==K||l.checked)&&f.append(m,l.value);for(k=F=0,L=a.length-1;0<=L?F<=L:F>=L;k=0<=L?++F:--F)f.append(this._getParamName(k),a[k],this._renameFilename(a[k].name));return this.submitRequest(w,f,a)},b.prototype.submitRequest=function(a,b,c){return a.send(b)},b.prototype._finished=function(a,c,d){var e,f,g;for(f=0,g=a.length;f<g;f++)e=a[f],e.status=b.SUCCESS,this.emit("success",e,c,d),this.emit("complete",e);if(this.options.uploadMultiple&&(this.emit("successmultiple",a,c,d),this.emit("completemultiple",a)),this.options.autoProcessQueue)return this.processQueue()},b.prototype._errorProcessing=function(a,c,d){var e,f,g;for(f=0,g=a.length;f<g;f++)e=a[f],e.status=b.ERROR,this.emit("error",e,c,d),this.emit("complete",e);if(this.options.uploadMultiple&&(this.emit("errormultiple",a,c,d),this.emit("completemultiple",a)),this.options.autoProcessQueue)return this.processQueue()},b}(d),c.version="4.3.0",c.options={},c.optionsForElement=function(a){return a.getAttribute("id")?c.options[e(a.getAttribute("id"))]:void 0},c.instances=[],c.forElement=function(a){if("string"==typeof a&&(a=document.querySelector(a)),null==(null!=a?a.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return a.dropzone},c.autoDiscover=!0,c.discover=function(){var a,b,d,e,f,g;for(document.querySelectorAll?d=document.querySelectorAll(".dropzone"):(d=[],a=function(a){var b,c,e,f;for(f=[],c=0,e=a.length;c<e;c++)b=a[c],/(^| )dropzone($| )/.test(b.className)?f.push(d.push(b)):f.push(void 0);return f},a(document.getElementsByTagName("div")),a(document.getElementsByTagName("form"))),g=[],e=0,f=d.length;e<f;e++)b=d[e],c.optionsForElement(b)!==!1?g.push(new c(b)):g.push(void 0);return g},c.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],c.isBrowserSupported=function(){var a,b,d,e,f;if(a=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(f=c.blacklistedBrowsers,d=0,e=f.length;d<e;d++)b=f[d],b.test(navigator.userAgent)&&(a=!1);else a=!1;else a=!1;return a},j=function(a,b){var c,d,e,f;for(f=[],d=0,e=a.length;d<e;d++)c=a[d],c!==b&&f.push(c);return f},e=function(a){return a.replace(/[\-_](\w)/g,function(a){return a.charAt(1).toUpperCase()})},c.createElement=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.childNodes[0]},c.elementInside=function(a,b){if(a===b)return!0;for(;a=a.parentNode;)if(a===b)return!0;return!1},c.getElement=function(a,b){var c;if("string"==typeof a?c=document.querySelector(a):null!=a.nodeType&&(c=a),null==c)throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector or a plain HTML element.");return c},c.getElements=function(a,b){var c,d,e,f,g,h,i,j;if(a instanceof Array){e=[];try{for(f=0,h=a.length;f<h;f++)d=a[f],e.push(this.getElement(d,b))}catch(k){c=k,e=null}}else if("string"==typeof a)for(e=[],j=document.querySelectorAll(a),g=0,i=j.length;g<i;g++)d=j[g],e.push(d);else null!=a.nodeType&&(e=[a]);if(null==e||!e.length)throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return e},c.confirm=function(a,b,c){return window.confirm(a)?b():null!=c?c():void 0},c.isValidFile=function(a,b){var c,d,e,f,g;if(!b)return!0;for(b=b.split(","),d=a.type,c=d.replace(/\/.*$/,""),f=0,g=b.length;f<g;f++)if(e=b[f],e=e.trim(),"."===e.charAt(0)){if(a.name.toLowerCase().indexOf(e.toLowerCase(),a.name.length-e.length)!==-1)return!0}else if(/\/\*$/.test(e)){if(c===e.replace(/\/.*$/,""))return!0}else if(d===e)return!0;return!1},"undefined"!=typeof a&&null!==a&&(a.fn.dropzone=function(a){return this.each(function(){return new c(this,a)})}),"undefined"!=typeof b&&null!==b?b.exports=c:window.Dropzone=c,c.ADDED="added",c.QUEUED="queued",c.ACCEPTED=c.QUEUED,c.UPLOADING="uploading",c.PROCESSING=c.UPLOADING,c.CANCELED="canceled",c.ERROR="error",c.SUCCESS="success",g=function(a){var b,c,d,e,f,g,h,i,j,k;for(h=a.naturalWidth,g=a.naturalHeight,c=document.createElement("canvas"),c.width=1,c.height=g,d=c.getContext("2d"),d.drawImage(a,0,0),e=d.getImageData(0,0,1,g).data,k=0,f=g,i=g;i>k;)b=e[4*(i-1)+3],0===b?f=i:k=i,i=f+k>>1;return j=i/g,0===j?1:j},h=function(a,b,c,d,e,f,h,i,j,k){var l;return l=g(b),a.drawImage(b,c,d,e,f,h,i,j,k/l)},f=function(a,b){var c,d,e,f,g,h,i,j,k;if(e=!1,k=!0,d=a.document,j=d.documentElement,c=d.addEventListener?"addEventListener":"attachEvent",i=d.addEventListener?"removeEventListener":"detachEvent",h=d.addEventListener?"":"on",f=function(c){if("readystatechange"!==c.type||"complete"===d.readyState)return("load"===c.type?a:d)[i](h+c.type,f,!1),!e&&(e=!0)?b.call(a,c.type||c):void 0},g=function(){var a;try{j.doScroll("left")}catch(b){return a=b,void setTimeout(g,50)}return f("poll")},"complete"!==d.readyState){if(d.createEventObject&&j.doScroll){try{k=!a.frameElement}catch(l){}k&&g()}return d[c](h+"DOMContentLoaded",f,!1),d[c](h+"readystatechange",f,!1),a[c](h+"load",f,!1)}},c._autoDiscoverFunction=function(){if(c.autoDiscover)return c.discover()},f(window,c._autoDiscoverFunction)}.call(this),b.exports}),define("text!mockup-patterns-upload-url/templates/upload.xml",[],function(){return'<div class="upload-container upload-multiple">\n    <h2 class="title"><%- _t("Upload here") %></h2>\n    <p class="help">\n        <%- _t(\'Drag and drop files from your computer onto the area below or click the Browse button.\') %>\n    </p>\n    <div class="upload-area">\n        <div class="fallback">\n            <input name="file" type="file" multiple />\n        </div>\n        <div class="dz-message"><p><%-_t("Drop files here...")%></p></div>\n        <div class="row browse-select">\n            <div class="col-md-9">\n                <input\n                    id="fakeUploadFile"\n                    placeholder="<%- _t("Choose File") %>"\n                    disabled\n                    />\n            </div>\n            <div class="col-md-3">\n                <button\n                    type="button"\n                    class="btn btn-primary browse">\n                    <%- _t("Browse") %>\n                </button>\n            </div>\n        </div>\n        <div class="upload-queue">\n            <div class="previews">\n            </div>\n            <div class="controls">\n                <% if (allowPathSelection) { %>\n                <div class="path">\n                    <label><%- _t("Upload to...") %></label>\n                    <p class="form-help">\n                        <%- _t("Select another destination folder or leave blank to add files to the current location.") %>\n                    </p>\n                    <input\n                        type="text"\n                        name="location"\n                        />\n                </div>\n                <% } %>\n                <div class="actions row">\n                    <div class="col-md-9">\n                        <div class="progress progress-striped active">\n                            <div class="progress-bar progress-bar-success"\n                                 role="progressbar"\n                                 aria-valuenow="0"\n                                 aria-valuemin="0"\n                                 aria-valuemax="100"\n                                 style="width: 0%">\n                                <span class="sr-only">40% Complete (success)</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-md-3 align-right">\n                        <button\n                            type="button"\n                            class="btn btn-primary upload-all">\n                            <%- _t("Upload") %>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("text!mockup-patterns-upload-url/templates/preview.xml",[],function(){return'<div class="row item form-inline">\n    <div class="col-md-1 action">\n        <button\n            type="button"\n            class="btn btn-danger btn-xs remove-item"\n            data-dz-remove=""\n            href="javascript:undefined;">\n            <span class="glyphicon glyphicon-remove"></span>\n        </button>\n    </div>\n    <div class="col-md-8 title">\n        <div class="dz-preview">\n          <div class="dz-details">\n            <div class="dz-filename"><span data-dz-name></span></div>\n          </div>\n          <div class="dz-error-message"><span data-dz-errormessage></span></div>\n        </div>\n        <div class="dz-progress">\n            <span class="dz-upload" data-dz-uploadprogress></span>\n        </div>\n    </div>\n    <div class="col-md-3 info">\n        <div class="dz-size" data-dz-size></div>\n        <img data-dz-thumbnail />\n    </div>\n</div>\n'}),define("mockup-patterns-upload",["jquery","underscore","pat-base","mockup-patterns-relateditems","dropzone","text!mockup-patterns-upload-url/templates/upload.xml","text!mockup-patterns-upload-url/templates/preview.xml","mockup-utils","translate"],function(a,b,c,d,e,f,g,h,i){"use strict";e.autoDiscover=!1;var j=c.extend({name:"upload",trigger:".pat-upload",parser:"mockup",defaults:{showTitle:!0,url:null,className:"upload",wrap:!1,wrapperTemplate:'<div class="upload-wrapper"/>',fileaddedClassName:"dropping",useTus:!1,container:"",ajaxUpload:!0,paramName:"file",addRemoveLinks:!1,autoCleanResults:!0,previewsContainer:".previews",previewTemplate:null,maxFiles:null,maxFilesize:99999999,allowPathSelection:void 0,relatedItems:{attributes:["UID","Title","Description","getURL","portal_type","path","ModificationDate"],batchSize:20,basePath:"/",vocabularyUrl:null,width:500,maximumSelectionSize:1,selectableTypes:["Folder"]}},init:function(){var c=this,d=f;"undefined"==typeof c.options.allowPathSelection&&(c.options.allowPathSelection=c.options.baseUrl&&c.options.relativePath),a(document).bind("paste",function(a){var b=a.originalEvent,d=b.clipboardData.items;if(d)for(var e=0;e<d.length;e++)if(d[e].type.indexOf("image")!==-1){var f=d[e].getAsFile();c.dropzone.addFile(f)}}),c.currentPath=c.options.currentPath,c.currentFile=0,d=b.template(d)({_t:i,allowPathSelection:c.options.allowPathSelection}),c.$el.addClass(c.options.className),c.$el.append(d),c.$progress=a(".progress-bar-success",c.$el),c.options.showTitle||c.$el.find("h2.title").hide(),c.options.ajaxUpload||(a(".fallback",this.$el).remove(),this.$el.hasClass(".upload-container")?this.$el.addClass("no-ajax-upload"):this.$el.closest(".upload-container").addClass("no-ajax-upload")),c.options.wrap&&(c.$el.wrap(c.options.wrapperTemplate),c.$el=c.$el.parent()),c.options.allowPathSelection?(c.$pathInput=a('input[name="location"]',c.$el),c.relatedItems=c.setupRelatedItems(c.$pathInput)):(a('input[name="location"]',c.$el).parent().remove(),c.relatedItems=null),c.$dropzone=a(".upload-area",c.$el),a("div.browse-select button.browse",c.$el).click(function(a){a.preventDefault(),a.stopPropagation(),(!c.options.maxFiles||c.dropzone.files.length<c.options.maxFiles)&&c.dropzone.hiddenFileInput.click();
});var g=this.getDzoneOptions();try{c.dropzone=new e(c.$dropzone[0],g)}catch(h){throw window.DEBUG&&console.log(h),h}c.dropzone.on("maxfilesreached",function(){c.showHideControls()}),c.dropzone.on("addedfile",function(){c.showHideControls()}),c.dropzone.on("removedfile",function(){c.showHideControls()}),c.dropzone.on("success",function(b,d){var e;try{e=a.parseJSON(d)}catch(f){e=d}c.$el.trigger("uploadAllCompleted",{data:e,path_uid:c.$pathInput?c.$pathInput.val():null})}),c.options.autoCleanResults&&c.dropzone.on("complete",function(b){b.status===e.SUCCESS&&setTimeout(function(){a(b.previewElement).fadeOut()},3e3)}),c.dropzone.on("complete",function(a){a.status===e.SUCCESS&&1===c.dropzone.files.length&&c.showHideControls()}),c.dropzone.on("error",function(b,c,d){"undefined"!=typeof d&&403!==d.status&&a(".dz-error-message span",b.previewElement).html(i("The file transfer failed"))}),c.dropzone.on("totaluploadprogress",function(a){a=(100*(c.currentFile-1)+a)/(100*c.dropzone.files.length)*100,c.$progress.attr("aria-valuenow",a).css("width",a+"%")}),a(".upload-all",c.$el).click(function(a){a.preventDefault(),a.stopPropagation(),c.processUpload({finished:function(){c.$progress.attr("aria-valuenow",0).css("width","0%")}})}),c.options.clipboardfile&&c.dropzone.addFile(c.options.clipboardfile)},showHideControls:function(){var a=this;a._showHideTimeout&&clearTimeout(a._showHideTimeout),a._showHideTimeout=setTimeout(function(){a._showHideControls()},50)},_showHideControls:function(){var b=this,c=a(".controls",b.$el),d=a(".browse-select",b.$el),e=a(".dz-hidden-input");if(b.options.maxFiles&&(b.dropzone.files.length<b.options.maxFiles?(d.show(),e.prop("disabled",!1)):(d.hide(),e.prop("disabled",!0))),b.dropzone.files.length>0){c.fadeIn("slow");var f=b.dropzone.files[0];a(".dz-error-message span",f.previewElement).html("")}else c.fadeOut("slow")},pathJoin:function(){var a=[];return b.each(arguments,function(b){b&&("/"===b[0]&&(b=b.substring(1)),"/"===b[b.length-1]&&(b=b.substring(0,b.length-1)),a.push(b))}),a.join("/")},getUrl:function(){var a=this,b=a.options.url;if(!b)if(a.options.baseUrl&&a.options.relativePath)b=a.options.baseUrl,"/"!==b[b.length-1]&&(b+="/"),b+=a.pathJoin(a.currentPath,a.options.relativePath);else{var c=a.$el.parents("form");b=c.length>0?c.attr("action"):window.location.href}return b},getDzoneOptions:function(){var b=this;b.options.clickable=!0;var c=a.extend({},b.options);if(c.url=b.getUrl(),c.headers={"X-CSRF-TOKEN":h.getAuthenticator()},c.uploadMultiple=!1,delete c.wrap,delete c.wrapperTemplate,delete c.resultTemplate,delete c.autoCleanResults,delete c.fileaddedClassName,delete c.useTus,b.options.previewsContainer){var d=b.$el.find(b.options.previewsContainer);d.length>0&&(c.previewsContainer=d[0])}return c.autoProcessQueue=!1,c.previewTemplate=g,c},processUpload:function(a){function b(){d=!0,0===c.dropzone.files.length&&(d=!1);var a=c.dropzone.files[0];return d&&a.status===e.ERROR&&(a.status=e.QUEUED,d=!1),d?void([e.SUCCESS,e.CANCELED].indexOf(a.status)!==-1?(c.dropzone.removeFile(a),b()):a.status!==e.UPLOADING?(f&&window.tus?c.handleTusUpload(a):(c.currentFile+=1,c.dropzone.processFile(a)),setTimeout(b,100)):setTimeout(b,100)):(c.$el.removeClass(g),void(void 0!==h&&"function"==typeof h&&h()))}a||(a={});var c=this,d=!1,f=c.options.useTus,g=c.options.fileaddedClassName,h=a.finished;c.currentFile=0,b()},handleTusUpload:function(b){var c=this,d=(a(b.previewElement),5242880);b.status=e.UPLOADING,window.tus.upload(b,{endpoint:c.dropzone.options.url,headers:{FILENAME:b.name,"X-CSRF-TOKEN":h.getAuthenticator()},chunkSize:d}).fail(function(){window.DEBUG&&console.alert(i("Error uploading with TUS resumable uploads")),b.status=e.ERROR}).progress(function(a,b,d){var e=b/d*100;c.$progress.attr("aria-valuenow",e).css("width",e+"%"),c.$progress.html(i("uploading...")+"<br />"+c.formatBytes(b)+" / "+c.formatBytes(d))}).done(function(a,b){b.status=e.SUCCESS,c.dropzone.emit("success",b),c.dropzone.emit("complete",b)})},formatBytes:function(a){var b=Math.round(a/1024);if(b<1024)return b+" KiB";var c=Math.round(b/1024);return c<1024?c+" MB":Math.round(c/1024)+" GB"},setPath:function(a){var b=this;b.currentPath=a,b.options.url=null,b.options.url=b.dropzone.options.url=b.getUrl()},setupRelatedItems:function(b){var c=this,e=c.options.relatedItems;e.upload=!1,c.options.initialFolder&&b.attr("value",c.options.initialFolder);var f=new d(b,e);return f.$el.on("change",function(){var b=a(this).select2("data"),d=null;b.length>0&&(d=b[0].path),c.setPath(d)}),f}});return j}),define("mockup-patterns-tinymce-url/js/links",["jquery","underscore","pat-registry","pat-base","tinymce","text!mockup-patterns-tinymce-url/templates/link.xml","text!mockup-patterns-tinymce-url/templates/image.xml","mockup-patterns-relateditems","mockup-patterns-autotoc","mockup-patterns-modal","mockup-patterns-upload"],function(a,b,c,d,e,f,g,h){"use strict";var i=d.extend({name:"linktype",trigger:".pat-linktype-dummy",defaults:{linkModal:null},init:function(){this.linkModal=this.options.linkModal,this.tinypattern=this.options.tinypattern,this.tiny=this.tinypattern.tiny,this.dom=this.tiny.dom},getEl:function(){return this.$el.find("input")},value:function(){return a.trim(this.getEl().val())},toUrl:function(){return this.value()},load:function(a){this.getEl().attr("value",this.tiny.dom.getAttrib(a,"data-val"))},set:function(a){var b=this.getEl();b.attr("value",a),b.val(a)},attributes:function(){return{"data-val":this.value()}}}),j=i.extend({name:"externallinktype",trigger:".pat-externallinktype-dummy",init:function(){i.prototype.init.call(this),this.getEl().on("change",function(){var b=a(this).val();if(!new RegExp("https?://").test(b)){var c=a(this).val().split("/")[0];c.indexOf(".")!==-1&&a(this).val("http://"+b)}})}}),k=i.extend({name:"internallinktype",trigger:".pat-internallinktype-dummy",init:function(){i.prototype.init.call(this),this.getEl().addClass("pat-relateditems"),this.createRelatedItems()},getEl:function(){return this.$el.find("input:not(.select2-input)")},createRelatedItems:function(){var a=this.linkModal.options.relatedItems;a.upload=!1,this.relatedItems=new h(this.getEl(),a)},value:function(){var a=this.getEl().select2("data");return a&&"object"==typeof a&&(a=a[0]),a},toUrl:function(){var a=this.value();return a?this.tinypattern.generateUrl(a):null},load:function(a){var b=this.tiny.dom.getAttrib(a,"data-val");b&&this.set(b)},set:function(a){var b=this.getEl();b.select2("destroy"),b.removeData("pattern-relateditems"),b.parent().replaceWith(b),b.attr("value",a),b.val(a),this.createRelatedItems()},attributes:function(){var a=this.value();return a?{"data-val":a.UID}:{}}}),l=i.extend({name:"uploadlinktype",trigger:".pat-uploadlinktype-dummy",getDelegatedLinkType:function(){return"uploadImage"===this.linkModal.linkType?this.linkModal.linkTypes.image:this.linkModal.linkTypes.internal},toUrl:function(){return this.getDelegatedLinkType().toUrl()},attributes:function(){return this.getDelegatedLinkType().attributes()},set:function(a){return this.getDelegatedLinkType().set(a)},load:function(a){return this.getDelegatedLinkType().load(a)},value:function(){return this.getDelegatedLinkType().value()}}),m=k.extend({name:"imagelinktype",trigger:".pat-imagelinktype-dummy",toUrl:function(){var a=this.value();return this.tinypattern.generateImageUrl(a,this.linkModal.$scale.val())}}),n=i.extend({name:"emaillinktype",trigger:".pat-emaillinktype-dummy",toUrl:function(){var a=this,b=a.value();if(b){var c=a.getSubject(),d="mailto:"+b;return c&&(d+="?subject="+c),d}return null},load:function(a){i.prototype.load.apply(this,[a]),this.linkModal.$subject.val(this.tiny.dom.getAttrib(a,"data-subject"))},getSubject:function(){return this.linkModal.$subject.val()},attributes:function(){var a=i.prototype.attributes.call(this);return a["data-subject"]=this.getSubject(),a}}),o=i.extend({name:"anchorlinktype",trigger:".pat-anchorlinktype-dummy",init:function(){i.prototype.init.call(this),this.$select=this.$el.find("select"),this.anchorNodes=[],this.anchorData=[],this.populate()},value:function(){var a=this.$select.select2("data");return a&&"object"==typeof a&&(a=a.id),a},populate:function(){var b=this;b.$select.find("option").remove(),b.anchorNodes=[],b.anchorData=[];var c,d,e,f,g,h=b.tiny.dom.select(".mceItemAnchor,.mce-item-anchor");for(d=0;d<h.length;d+=1)c=h[d],f=b.tiny.dom.getAttrib(c,"name"),f||(f=b.tiny.dom.getAttrib(c,"id")),""!==f&&(b.anchorNodes.push(c),b.anchorData.push({name:f,title:f}));if(h=b.tiny.dom.select(b.linkModal.options.anchorSelector),h.length>0)for(d=0;d<h.length;d+=1)if(c=h[d],g=a(c).text().replace(/^\s+|\s+$/g,""),""!==g){f=g.toLowerCase().substring(0,1024),f=f.replace(/[^a-z0-9]/g,"-");var i=!1;for(e=0;e<b.anchorNodes.length;e+=1){var j=b.anchorData[e];if(j.name===f){i=!0,j.title=g;break}}i||(b.anchorData.push({name:f,title:g,newAnchor:!0}),b.anchorNodes.push(c))}if(b.anchorNodes.length>0)for(d=0;d<b.anchorData.length;d+=1){var k=b.anchorData[d];b.$select.append('<option value="'+d+'">'+k.title+"</option>")}else b.$select.append("<option>No anchors found..</option>")},getIndex:function(a){for(var b=0;b<this.anchorData.length;b+=1){var c=this.anchorData[b];if(c.name===a)return b}return 0},toUrl:function(){var a=this.value();if(a){var b=parseInt(a,10),c=this.anchorNodes[b],d=this.anchorData[b];return d.newAnchor&&(c.innerHTML='<a name="'+d.name+'" class="mce-item-anchor"></a>'+c.innerHTML),"#"+d.name}return null},set:function(a){var b=this.getIndex(a);this.$select.select2("data",""+b)}});e.PluginManager.add("ploneimage",function(a){a.addButton("ploneimage",{icon:"image",tooltip:"Insert/edit image",onclick:a.settings.addImageClicked,stateSelector:"img:not([data-mce-object])"}),a.addMenuItem("ploneimage",{icon:"image",text:"Insert image",onclick:a.settings.addImageClicked,context:"insert",prependToContext:!0})}),e.PluginManager.add("plonelink",function(a){a.addButton("plonelink",{icon:"link",tooltip:"Insert/edit link",shortcut:"Ctrl+K",onclick:a.settings.addLinkClicked,stateSelector:"a[href]"}),a.addButton("unlink",{icon:"unlink",tooltip:"Remove link(s)",cmd:"unlink",stateSelector:"a[href]"}),a.addShortcut("Ctrl+K","",a.settings.addLinkClicked),a.addMenuItem("plonelink",{icon:"link",text:"Insert link",shortcut:"Ctrl+K",onclick:a.settings.addLinkClicked,stateSelector:"a[href]",context:"insert",prependToContext:!0})});var p=d.extend({name:"linkmodal",trigger:".pat-linkmodal",defaults:{anchorSelector:"h1,h2,h3",linkTypes:[],initialLinkType:"internal",text:{insertHeading:"Insert Link"},linkTypeClassMapping:{internal:k,upload:l,external:j,email:n,anchor:o,image:m,uploadImage:l,externalImage:i}},linkTypeTemplateMapping:{internal:f,upload:f,external:f,email:f,anchor:f,image:g,uploadImage:g,externalImage:g},template:function(a){return b.template(this.linkTypeTemplateMapping[this.linkType])(a)},init:function(){var a=this;a.tinypattern=a.options.tinypattern,a.tinypattern.options.anchorSelector&&(a.options.anchorSelector=a.tinypattern.options.anchorSelector),a.tiny=a.tinypattern.tiny,a.dom=a.tiny.dom,a.linkType=a.options.initialLinkType,a.linkTypes={},a.modal=c.patterns["plone-modal"].init(a.$el,{html:a.generateModalHtml(),content:null,buttons:".plone-btn"}),a.modal.on("shown",function(b){a.modalShown.apply(a,[b])})},isOnlyTextSelected:function(){var a=this.tiny.selection.getContent();if(/</.test(a)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(a)||a.indexOf("href=")===-1))return!1;if(this.anchorElm){var b=this.anchorElm.childNodes;if(0===b.length)return!1;for(var c=b.length-1;c>=0;c--)if(3!==b[c].nodeType)return!1}return!0},generateModalHtml:function(){return this.template({options:this.options,upload:this.options.upload,text:this.options.text,insertHeading:this.options.text.insertHeading,linkTypes:this.options.linkTypes,externalText:this.options.text.external,emailText:this.options.text.email,subjectText:this.options.text.subject,targetList:this.options.targetList,titleText:this.options.text.title,externalImageText:this.options.text.externalImage,altText:this.options.text.alt,imageAlignText:this.options.text.imageAlign,scaleText:this.options.text.scale,imageScales:this.options.imageScales,cancelBtn:this.options.text.cancelBtn,insertBtn:this.options.text.insertBtn})},isImageMode:function(){return["image","uploadImage","externalImage"].indexOf(this.linkType)!==-1},initElements:function(){var c=this;c.$target=a('select[name="target"]',c.modal.$modal),c.$button=a('.plone-modal-footer input[name="insert"]',c.modal.$modal),c.$title=a('input[name="title"]',c.modal.$modal),c.$subject=a('input[name="subject"]',c.modal.$modal),c.$alt=a('input[name="alt"]',c.modal.$modal),c.$align=a('select[name="align"]',c.modal.$modal),c.$scale=a('select[name="scale"]',c.modal.$modal),b.each(c.options.linkTypes,function(b){var d=a(".linkType."+b+" .main",c.modal.$modal);c.linkTypes[b]=new c.options.linkTypeClassMapping[b](d,{linkModal:c,tinypattern:c.tinypattern})}),a(".autotoc-nav a",c.modal.$modal).click(function(){var d=a("fieldset.linkType",c.modal.$modal).eq(a(this).index()),e=d[0].className.split(/\s+/);b.each(e,function(a){b.indexOf(c.options.linkTypes,a)!==-1&&(c.linkType=a)})})},getLinkUrl:function(){return this.linkTypes[this.linkType].toUrl()},getValue:function(){return this.linkTypes[this.linkType].value()},updateAnchor:function(b){var c=this;c.tiny.focus(),c.tiny.selection.setRng(c.rng);var d=c.$target.val(),e=c.$title.val(),f=a.extend(!0,c.data,{title:e?e:null,target:d?d:null,"data-linkType":c.linkType,href:b},c.linkTypes[c.linkType].attributes());c.anchorElm?(c.onlyText&&f.text!==c.initialText&&("innerText"in c.anchorElm?c.anchorElm.innerText=c.data.text:c.anchorElm.textContent=c.data.text),c.tiny.dom.setAttribs(c.anchorElm,f),c.tiny.selection.select(c.anchorElm),c.tiny.undoManager.add()):c.onlyText?c.tiny.insertContent(c.tiny.dom.createHTML("a",f,c.tiny.dom.encode(c.data.text))):c.tiny.execCommand("mceInsertLink",!1,f)},focusElement:function(a){this.tiny.focus(),this.tiny.selection.select(a),this.tiny.nodeChanged()},updateImage:function(b){function c(a){a.onload=a.onerror=function(){a.onload=a.onerror=null,d.focusElement(a)}}var d=this,e=d.$title.val();d.tiny.focus(),d.tiny.selection.setRng(d.rng);var f=a.extend(!0,{},{src:b,title:e?e:null,alt:d.$alt.val(),"class":d.$align.val(),"data-linkType":d.linkType,"data-scale":d.$scale.val()},d.linkTypes[d.linkType].attributes());d.imgElm&&!d.imgElm.getAttribute("data-mce-object")?(f.width=d.dom.getAttrib(d.imgElm,"width"),f.height=d.dom.getAttrib(d.imgElm,"height")):d.imgElm=null,d.imgElm?d.dom.setAttribs(d.imgElm,f):(f.id="__mcenew",d.tiny.insertContent(d.dom.createHTML("img",f)),d.imgElm=d.dom.get("__mcenew"),d.dom.setAttrib(d.imgElm,"id",null)),c(d.imgElm),d.imgElm.complete&&d.focusElement(d.imgElm)},modalShown:function(b){var c=this;c.initElements(),c.initData(),c.options.upload&&(c.$upload=a(".uploadify-me",c.modal.$modal),c.options.upload.relatedItems=a.extend(!0,{},c.options.relatedItems),c.options.upload.relatedItems.selectableTypes=c.options.folderTypes,c.$upload.addClass("pat-upload").patternUpload(c.options.upload),c.$upload.on("uploadAllCompleted",function(b,d){c.linkTypes.image?(c.linkTypes.image.set(d.data.UID),a("#"+a("#tinylink-image",c.modal.$modal).data("navref")).trigger("click")):(c.linkTypes.internal.set(d.data.UID),a("#"+a("#tinylink-internal",c.modal.$modal).data("navref")).trigger("click"))})),c.$button.off("click").on("click",function(a){if(a.preventDefault(),a.stopPropagation(),c.linkType=c.modal.$modal.find("fieldset.active").data("linktype"),"uploadImage"===c.linkType||"upload"===c.linkType){var b=c.$upload.data().patternUpload;b.dropzone.files.length>0&&(b.processUpload(),c.$upload.on("uploadAllCompleted",function(a,b){var d=0,e=function(){if(d<5&&!c.linkTypes[c.linkType].value())return d+=1,void setTimeout(e,100);var a=c.getLinkUrl();c.updateImage(a),c.hide()};e()}))}var d;try{d=c.getLinkUrl()}catch(e){return}d&&(c.isImageMode()?c.updateImage(d):c.updateAnchor(d),c.hide())}),a('.plone-modal-footer input[name="cancel"]',c.modal.$modal).click(function(a){a.preventDefault(),c.hide()})},show:function(){this.modal.show()},hide:function(){this.modal.hide()},initData:function(){var b=this;b.data={},b.initialText=null;var c;b.rng=b.tiny.selection.getRng(),b.selectedElm=b.tiny.selection.getNode(),b.anchorElm=b.tiny.dom.getParent(b.selectedElm,"a[href]"),b.onlyText=b.isOnlyTextSelected(),b.data.text=b.initialText=b.anchorElm?b.anchorElm.innerText||b.anchorElm.textContent:b.tiny.selection.getContent({format:"text"}),b.data.href=b.anchorElm?b.tiny.dom.getAttrib(b.anchorElm,"href"):"",b.anchorElm?b.data.target=b.tiny.dom.getAttrib(b.anchorElm,"target"):b.tiny.settings.default_link_target&&(b.data.target=b.tiny.settings.default_link_target),(c=b.tiny.dom.getAttrib(b.anchorElm,"rel"))&&(b.data.rel=c),(c=b.tiny.dom.getAttrib(b.anchorElm,"class"))&&(b.data["class"]=c),(c=b.tiny.dom.getAttrib(b.anchorElm,"title"))&&(b.data.title=c),b.selection=b.tiny.selection,b.tiny.focus();var d=b.imgElm=b.selection.getNode();b.anchorElm=b.dom.getParent(d,"a[href]");var e;if(b.isImageMode()){if("IMG"!==b.imgElm.nodeName&&b.anchorElm){var f=b.anchorElm.getElementsByTagName("img");f.length>0&&(b.imgElm=f[0],b.focusElement(b.imgElm))}if("IMG"!==b.imgElm.nodeName&&(b.imgElm=null),b.imgElm){var g=b.dom.getAttrib(b.imgElm,"src");if(b.$title.val(b.dom.getAttrib(b.imgElm,"title")),b.$alt.val(b.dom.getAttrib(b.imgElm,"alt")),e=b.dom.getAttrib(b.imgElm,"data-linktype")){b.linkType=e,b.linkTypes[b.linkType].load(b.imgElm);var h=b.dom.getAttrib(b.imgElm,"data-scale");b.$scale.val(h),a("#tinylink-"+b.linkType,b.modal.$modal).trigger("click")}else g&&b.guessImageLink(g);for(var i=b.dom.getAttrib(b.imgElm,"class"),j=i.split(" "),k=0;k<j.length;k+=1){var l=j[k];for(var m in b.options.imageClasses)m.indexOf(l)!==-1&&b.$align.val(l)}}}else if(b.anchorElm){b.focusElement(b.anchorElm);var n="";n=b.dom.getAttrib(b.anchorElm,"href"),b.$target.val(b.dom.getAttrib(b.anchorElm,"target")),b.$title.val(b.dom.getAttrib(b.anchorElm,"title")),e=b.dom.getAttrib(b.anchorElm,"data-linktype"),e?(b.linkType=e,b.linkTypes[b.linkType].load(b.anchorElm),a("#tinylink-"+b.linkType,b.modal.$modal).trigger("click")):n&&b.guessAnchorLink(n)}},guessImageLink:function(a){a.indexOf(this.options.prependToScalePart)!==-1?(this.linkType="image",this.$scale.val(this.tinypattern.getScaleFromUrl(a)),this.linkTypes.image.set(this.tinypattern.stripGeneratedUrl(a))):(this.linkType="externalImage",this.linkTypes.externalImage.set(a))},guessAnchorLink:function(a){if(this.options.prependToUrl&&a.indexOf(this.options.prependToUrl)!==-1)this.linkType="internal",this.linkTypes.internal.set(this.tinypattern.stripGeneratedUrl(a));else if(a.indexOf("mailto:")!==-1){this.linkType="email";var b=a.substring("mailto:".length,a.length),c=b.split("?subject=");this.linkTypes.email.set(c[0]),c.length>1&&this.$subject.val(decodeURIComponent(c[1]))}else"#"===a[0]?(this.linkType="anchor",this.linkTypes.anchor.set(a.substring(1))):(this.linkType="external",this.linkTypes.external.set(a))},setSelectElement:function(a,b){a.find("option:selected").prop("selected",!1),b&&a.find('option[value="'+b+'"]').prop("selected",!0)},reinitialize:function(){this.modal.options.html=this.generateModalHtml()}});return p}),function(a){define("tinymce-modern-theme",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(a,b,c){var d,e,f,g,h,i,j,k,l,m;return l=wc(),e=sc.getPos(b,Ra.getUiContainer(a)),f=e.x,g=e.y,uc(a)&&tc(document.body)&&(f-=l.x,g-=l.y),d=a.getEl(),m=sc.getSize(d),h=m.width,i=m.height,m=sc.getSize(b),j=m.width,k=m.height,c=(c||"").split(""),"b"===c[0]&&(g+=k),"r"===c[1]&&(f+=j),"c"===c[0]&&(g+=Math.round(k/2)),"c"===c[1]&&(f+=Math.round(j/2)),"b"===c[3]&&(g-=i),"r"===c[4]&&(f-=h),"c"===c[3]&&(g-=Math.round(i/2)),"c"===c[4]&&(f-=Math.round(h/2)),{x:f,y:g,w:h,h:i}}function b(){}function c(a){this.cls=[],this.cls._map={},this.onchange=a||b,this.prefix=""}function d(a){for(var b,c=[],d=a.length;d--;)b=a[d],b.__checked||(c.push(b),b.__checked=1);for(d=c.length;d--;)delete c[d].__checked;return c}function e(a){return a.nodeType>0}function f(a,b){var c,d;if(a===b)return!0;if(null===a||null===b)return a===b;if("object"!=typeof a||"object"!=typeof b)return a===b;if(N.isArray(b)){if(a.length!==b.length)return!1;for(c=a.length;c--;)if(!f(a[c],b[c]))return!1}if(e(a)||e(b))return a===b;d={};for(c in b){if(!f(a[c],b[c]))return!1;d[c]=!0}for(c in a)if(!d[c]&&!f(a[c],b[c]))return!1;return!0}function g(a){return a._eventDispatcher||(a._eventDispatcher=new Ac({scope:a,toggleEvent:function(b,c){c&&Ac.isNative(b)&&(a._nativeEvents||(a._nativeEvents={}),a._nativeEvents[b]=!0,a.state.get("rendered")&&h(a))}})),a._eventDispatcher}function h(a){function b(b){var c=a.getParentCtrl(b.target);c&&c.fire(b.type,b)}function c(){var a=i._lastHoverCtrl;a&&(a.fire("mouseleave",{target:a.getEl()}),a.parents().each(function(a){a.fire("mouseleave",{target:a.getEl()})}),i._lastHoverCtrl=null)}function d(b){var c,d,e,f=a.getParentCtrl(b.target),g=i._lastHoverCtrl,h=0;if(f!==g){if(i._lastHoverCtrl=f,d=f.parents().toArray().reverse(),d.push(f),g){for(e=g.parents().toArray().reverse(),e.push(g),h=0;h<e.length&&d[h]===e[h];h++);for(c=e.length-1;c>=h;c--)g=e[c],g.fire("mouseleave",{target:g.getEl()})}for(c=h;c<d.length;c++)f=d[c],f.fire("mouseenter",{target:f.getEl()})}}function e(b){b.preventDefault(),"mousewheel"===b.type?(b.deltaY=-.025*b.wheelDelta,b.wheelDeltaX&&(b.deltaX=-.025*b.wheelDeltaX)):(b.deltaX=0,b.deltaY=b.detail),b=a.fire("wheel",b)}var f,g,h,i,j,k;if(j=a._nativeEvents){for(h=a.parents().toArray(),h.unshift(a),f=0,g=h.length;!i&&f<g;f++)i=h[f]._eventsRoot;for(i||(i=h[h.length-1]||a),a._eventsRoot=i,g=f,f=0;f<g;f++)h[f]._eventsRoot=i;var l=i._delegates;l||(l=i._delegates={});for(k in j){if(!j)return!1;"wheel"!==k||Uc?("mouseenter"===k||"mouseleave"===k?i._hasMouseEnter||(qc(i.getEl()).on("mouseleave",c).on("mouseover",d),i._hasMouseEnter=1):l[k]||(qc(i.getEl()).on(k,b),l[k]=!0),j[k]=!1):Tc?qc(a.getEl()).on("mousewheel",e):qc(a.getEl()).on("DOMMouseScroll",e)}}}function i(a){function b(a){return a&&1===a.nodeType}function c(a){return a=a||t,b(a)?a.getAttribute("role"):null}function d(a){for(var b,d=a||t;d=d.parentNode;)if(b=c(d))return b}function e(a){var c=t;if(b(c))return c.getAttribute("aria-"+a)}function f(a){var b=a.tagName.toUpperCase();return"INPUT"===b||"TEXTAREA"===b||"SELECT"===b}function g(a){return!(!f(a)||a.hidden)||(!!bd(a)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(c(a)))}function h(a){function b(a){if(1===a.nodeType&&"none"!==a.style.display&&!a.disabled){g(a)&&c.push(a);for(var d=0;d<a.childNodes.length;d++)b(a.childNodes[d])}}var c=[];return b(a||v.getEl()),c}function i(a){var b,c;a=a||u,c=a.parents().toArray(),c.unshift(a);for(var d=0;d<c.length&&(b=c[d],!b.settings.ariaRoot);d++);return b}function j(a){var b=i(a),c=h(b.getEl());b.settings.ariaRemember&&"lastAriaIndex"in b?k(b.lastAriaIndex,c):k(0,c)}function k(a,b){return a<0?a=b.length-1:a>=b.length&&(a=0),b[a]&&b[a].focus(),a}function l(a,b){var c=-1,d=i();b=b||h(d.getEl());for(var e=0;e<b.length;e++)b[e]===t&&(c=e);c+=a,d.lastAriaIndex=k(c,b)}function m(){var a=d();"tablist"===a?l(-1,h(t.parentNode)):u.parent().submenu?r():l(-1)}function n(){var a=c(),b=d();"tablist"===b?l(1,h(t.parentNode)):"menuitem"===a&&"menu"===b&&e("haspopup")?s():l(1)}function o(){l(-1)}function p(){var a=c(),b=d();"menuitem"===a&&"menubar"===b?s():"button"===a&&e("haspopup")?s({key:"down"}):l(1)}function q(a){var b=d();if("tablist"===b){var c=h(u.getEl("body"))[0];c&&c.focus()}else l(a.shiftKey?-1:1)}function r(){u.fire("cancel")}function s(a){a=a||{},u.fire("click",{target:t,aria:a})}var t,u,v=a.root;try{t=document.activeElement}catch(w){t=document.body}return u=v.getParentCtrl(t),v.on("keydown",function(a){function b(a,b){f(t)||bd(t)||"slider"!==c(t)&&b(a)!==!1&&a.preventDefault()}if(!a.isDefaultPrevented())switch(a.keyCode){case 37:b(a,m);break;case 39:b(a,n);break;case 38:b(a,o);break;case 40:b(a,p);break;case 27:r();break;case 14:case 13:case 32:b(a,s);break;case 9:q(a),a.preventDefault()}}),v.on("focusin",function(a){t=a.target,u=a.control}),{focusFirst:j}}function j(a){var b,c,d,e,f,g,h,i,j=Math.max;return b=a.documentElement,c=a.body,d=j(b.scrollWidth,c.scrollWidth),e=j(b.clientWidth,c.clientWidth),f=j(b.offsetWidth,c.offsetWidth),g=j(b.scrollHeight,c.scrollHeight),h=j(b.clientHeight,c.clientHeight),i=j(b.offsetHeight,c.offsetHeight),{width:d<f?e:d,height:g<i?h:g}}function k(a){var b,c;if(a.changedTouches)for(b="screenX screenY pageX pageY clientX clientY".split(" "),c=0;c<b.length;c++)a[b[c]]=a.changedTouches[0][b[c]]}function l(a,b){var c,d,e,f,g,h,i,l=b.document||document;b=b||{};var m=l.getElementById(b.handle||a);e=function(a){var e,n,o=j(l);k(a),a.preventDefault(),d=a.button,e=m,h=a.screenX,i=a.screenY,n=window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue("cursor"):e.runtimeStyle.cursor,c=qc("<div></div>").css({position:"absolute",top:0,left:0,width:o.width,height:o.height,zIndex:2147483647,opacity:1e-4,cursor:n}).appendTo(l.body),qc(l).on("mousemove touchmove",g).on("mouseup touchend",f),b.start(a)},g=function(a){return k(a),a.button!==d?f(a):(a.deltaX=a.screenX-h,a.deltaY=a.screenY-i,a.preventDefault(),void b.drag(a))},f=function(a){k(a),qc(l).off("mousemove touchmove",g).off("mouseup touchend",f),c.remove(),b.stop&&b.stop(a)},this.destroy=function(){qc(m).off()},qc(m).on("mousedown touchstart",e)}function m(a,b){for(;a;){if(a===b)return!0;a=a.parent()}}function n(a){for(var b=hd.length;b--;){var c=hd[b],d=c.getParentCtrl(a.target);if(c.settings.autohide){if(d&&(m(d,c)||c.parent()===d))continue;a=c.fire("autohide",{target:a.target}),a.isDefaultPrevented()||c.hide()}}}function o(){Yc||(Yc=function(a){2!==a.button&&n(a)},qc(document).on("click touchstart",Yc))}function p(){Zc||(Zc=function(){var a;for(a=hd.length;a--;)r(hd[a])},qc(window).on("scroll",Zc))}function q(){if(!$c){var a=document.documentElement,b=a.clientWidth,c=a.clientHeight;$c=function(){document.all&&b===a.clientWidth&&c===a.clientHeight||(b=a.clientWidth,c=a.clientHeight,jd.hideAll())},qc(window).on("resize",$c)}}function r(a){function b(b,c){for(var d,e=0;e<hd.length;e++)if(hd[e]!==a)for(d=hd[e].parent();d&&(d=d.parent());)d===a&&hd[e].fixed(b).moveBy(0,c).repaint()}var c=sc.getViewPort().y;a.settings.autofix&&(a.state.get("fixed")?a._autoFixY>c&&(a.fixed(!1).layoutRect({y:a._autoFixY}).repaint(),b(!1,a._autoFixY-c)):(a._autoFixY=a.layoutRect().y,a._autoFixY<c&&(a.fixed(!0).layoutRect({y:0}).repaint(),b(!0,c-a._autoFixY))))}function s(a,b){var c,d,e=jd.zIndex||65535;if(a)id.push(b);else for(c=id.length;c--;)id[c]===b&&id.splice(c,1);if(id.length)for(c=0;c<id.length;c++)id[c].modal&&(e++,d=id[c]),id[c].getEl().style.zIndex=e,id[c].zIndex=e,e++;var f=qc("#"+b.classPrefix+"modal-block",b.getContainerElm())[0];d?qc(f).css("z-index",d.zIndex-1):f&&(f.parentNode.removeChild(f),_c=!1),jd.currentZIndex=e}function t(a){var b;for(b=hd.length;b--;)hd[b]===a&&hd.splice(b,1);for(b=id.length;b--;)id[b]===a&&id.splice(b,1)}function u(a,b){var c,d,e=this,f=ad.classPrefix;e.show=function(g,h){function i(){c&&(qc(a).append('<div class="'+f+"throbber"+(b?" "+f+"throbber-inline":"")+'"></div>'),h&&h())}return e.hide(),c=!0,g?d=ra.setTimeout(i,g):i(),e},e.hide=function(){var b=a.lastChild;return ra.clearTimeout(d),b&&b.className.indexOf("throbber")!==-1&&b.parentNode.removeChild(b),c=!1,e}}function v(a){var b=function(a){return a.inline?a.getElement():a.getContentAreaContainer()},c=function(){var c=b(a);return sc.getSize(c).width},d=function(a){Jb.each(a,function(a){a.moveTo(0,0)})},e=function(c){if(c.length>0){var d=c.slice(0,1)[0],e=b(a);d.moveRel(e,"tc-tc"),Jb.each(c,function(a,b){b>0&&a.moveRel(c[b-1].getEl(),"bc-tc")})}},f=function(a){d(a),e(a)},g=function(a,b){var d=N.extend(a,{maxWidth:c()}),e=new vd(d);return e.args=d,d.timeout>0&&(e.timer=setTimeout(function(){e.close(),b()},d.timeout)),e.on("close",function(){b()}),e.renderTo(),e},h=function(a){a.close()},i=function(a){return a.args};return{open:g,close:h,reposition:f,getArgs:i}}function w(a){var b,c="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0",d=qc("meta[name=viewport]")[0];Zb.overrideViewPort!==!1&&(d||(d=document.createElement("meta"),d.setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(d)),b=d.getAttribute("content"),b&&"undefined"!=typeof xd&&(xd=b),d.setAttribute("content",a?c:xd))}function x(a,b){y()&&b===!1&&qc([document.documentElement,document.body]).removeClass(a+"fullscreen")}function y(){for(var a=0;a<wd.length;a++)if(wd[a]._fullscreen)return!0;return!1}function z(){function a(){var a,b,c=sc.getWindowSize();for(a=0;a<wd.length;a++)b=wd[a].layoutRect(),wd[a].moveTo(wd[a].settings.x||Math.max(0,c.w/2-b.w/2),wd[a].settings.y||Math.max(0,c.h/2-b.h/2))}if(!Zb.desktop){var b={w:window.innerWidth,h:window.innerHeight};ra.setInterval(function(){var a=window.innerWidth,c=window.innerHeight;b.w===a&&b.h===c||(b={w:a,h:c},qc(window).trigger("resize"))},100)}qc(window).on("resize",a)}function A(a){var b=function(a,b,c){var d;return a.title=a.title||" ",a.url=a.url||a.file,a.url&&(a.width=parseInt(a.width||320,10),a.height=parseInt(a.height||240,10)),a.body&&(a.items={defaults:a.defaults,type:a.bodyType||"form",items:a.body,data:a.data,callbacks:a.commands}),a.url||a.buttons||(a.buttons=[{text:"Ok",subtype:"primary",onclick:function(){d.find("form")[0].submit()}},{text:"Cancel",onclick:function(){d.close()}}]),d=new yd(a),d.on("close",function(){c(d)}),a.data&&d.on("postRender",function(){this.find("*").each(function(b){var c=b.name();c in a.data&&b.value(a.data[c])})}),d.features=a||{},d.params=b||{},d=d.renderTo(document.body).reflow()},c=function(a,b,c){var d;return d=zd.alert(a,function(){b()}),d.on("close",function(){c(d)}),d},d=function(a,b,c){var d;return d=zd.confirm(a,function(a){b(a)}),d.on("close",function(){c(d)}),d},e=function(a){a.close()},f=function(a){return a.params},g=function(a,b){a.params=b};return{open:b,alert:c,confirm:d,close:e,getParams:f,setParams:g}}function B(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];if(a.length!==b.length)throw new Error('Wrong number of arguments to struct. Expected "['+a.length+']", got '+b.length+" arguments");var d={};return Jb.each(a,function(a,c){d[a]=Fa.constant(b[c])}),d}}function C(a,b){var c=a.concat(b);if(0===c.length)throw new Error("You must specify at least one required or optional field.");return Je.validateStrArr("required",a),Je.validateStrArr("optional",b),Je.checkDupes(c),function(d){var e=Ce.keys(d),f=Jb.forall(a,function(a){return Jb.contains(e,a)});f||Je.reqMessage(a,e);var g=Jb.filter(e,function(a){return!Jb.contains(c,a)});g.length>0&&Je.unsuppMessage(g);var h={};return Jb.each(a,function(a){h[a]=Fa.constant(d[a])}),Jb.each(b,function(a){h[a]=Fa.constant(Object.prototype.hasOwnProperty.call(d,a)?Ma.some(d[a]):Ma.none())}),h}}function D(a,b,c){var d=a.isiOS()&&/ipad/i.test(c)===!0,e=a.isiOS()&&!d,f=a.isAndroid()&&3===a.version.major,g=a.isAndroid()&&4===a.version.major,h=d||f||g&&/mobile/i.test(c)===!0,i=a.isiOS()||a.isAndroid(),j=i&&!h,k=b.isSafari()&&a.isiOS()&&/safari/i.test(c)===!1;return{isiPad:Fa.constant(d),isiPhone:Fa.constant(e),isTablet:Fa.constant(h),isPhone:Fa.constant(j),isTouch:Fa.constant(i),isAndroid:a.isAndroid,isiOS:a.isiOS,isWebView:Fa.constant(k)}}function E(a,b,c,d,e){return a(c,d)?Ma.some(c):db.isFunction(e)&&e(c)?Ma.none():b(c,d,e)}function F(a,b){for(;a;){if(b===a)return!0;a=a.parentNode}return!1}function G(a){var b="";if(a)for(var c=0;c<a.length;c++)b+='<option value="'+a[c]+'">'+a[c]+"</option>";return b}function H(a,b,c){return a<b&&(a=b),a>c&&(a=c),a}function I(a,b,c){a.setAttribute("aria-"+b,c)}function J(a,b){var c,d,e,f,g,h;"v"===a.settings.orientation?(f="top",e="height",d="h"):(f="left",e="width",
d="w"),h=a.getEl("handle"),c=(a.layoutRect()[d]||100)-sc.getSize(h)[e],g=c*((b-a._minValue)/(a._maxValue-a._minValue))+"px",h.style[f]=g,h.style.height=a.layoutRect().h+"px",I(h,"valuenow",b),I(h,"valuetext",""+a.settings.previewFilter(b)),I(h,"valuemin",a._minValue),I(h,"valuemax",a._maxValue)}function K(){}var L=tinymce.util.Tools.resolve("tinymce.ThemeManager"),M=tinymce.util.Tools.resolve("tinymce.EditorManager"),N=tinymce.util.Tools.resolve("tinymce.util.Tools"),O=function(a){return a.getParam("branding",!0,"boolean")},P=function(a){return Q(a)!==!1},Q=function(a){return a.getParam("menubar")},R=function(a){return a.getParam("statusbar",!0,"boolean")},S=function(a){return a.getParam("toolbar_items_size")},T=function(a){return a.getParam("readonly",!1,"boolean")},U=function(a){return a.getParam("fixed_toolbar_container")},V=function(a){return a.getParam("inline_toolbar_position_handler")},W=function(a){return a.getParam("menu")},X=function(a){return a.getParam("removed_menuitems","")},Y=function(a){return a.getParam("min_width",100,"number")},Z=function(a){return a.getParam("min_height",100,"number")},$=function(a){return a.getParam("max_width",65535,"number")},_=function(a){return a.getParam("max_height",65535,"number")},aa=function(a){return a.settings.skin===!1},ba=function(a){return a.getParam("inline",!1,"boolean")},ca=function(a){var b=a.getParam("resize","vertical");return b===!1?"none":"both"===b?"both":"vertical"},da=function(a){var b=a.settings,c=b.skin,d=b.skin_url;if(c!==!1){var e=c?c:"lightgray";d=d?a.documentBaseURI.toAbsolute(d):M.baseURL+"/skins/"+e}return d},ea=function(a,b){for(var c=[],d=1;d<10;d++){var e=a["toolbar"+d];if(!e)break;c.push(e)}var f=a.toolbar?[a.toolbar]:[b];return c.length>0?c:f},fa=function(a){var b=a.getParam("toolbar"),c="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";return b===!1?[]:N.isArray(b)?N.grep(b,function(a){return a.length>0}):ea(a.settings,c)},ga=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ha=tinymce.util.Tools.resolve("tinymce.ui.Factory"),ia=tinymce.util.Tools.resolve("tinymce.util.I18n"),ja=function(a){return a.fire("SkinLoaded")},ka=function(a){return a.fire("ResizeEditor")},la=function(a){return a.fire("BeforeRenderUI")},ma={fireSkinLoaded:ja,fireResizeEditor:ka,fireBeforeRenderUI:la},na=function(a,b){return function(){var c=a.find(b)[0];c&&c.focus(!0)}},oa=function(a,b){a.shortcuts.add("Alt+F9","",na(b,"menubar")),a.shortcuts.add("Alt+F10,F10","",na(b,"toolbar")),a.shortcuts.add("Alt+F11","",na(b,"elementpath")),b.on("cancel",function(){a.focus()})},pa={addKeys:oa},qa=tinymce.util.Tools.resolve("tinymce.geom.Rect"),ra=tinymce.util.Tools.resolve("tinymce.util.Delay"),sa=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b]},ta=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return a()}},ua=function(a,b){return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a(b.apply(null,arguments))}},va=function(a){return function(){return a}},wa=function(a){return a},xa=function(a,b){return a===b},ya=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var d=new Array(arguments.length-1),e=1;e<arguments.length;e++)d[e-1]=arguments[e];return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];for(var e=new Array(arguments.length),f=0;f<e.length;f++)e[f]=arguments[f];var g=d.concat(e);return a.apply(null,g)}},za=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return!a.apply(null,arguments)}},Aa=function(a){return function(){throw new Error(a)}},Ba=function(a){return a()},Ca=function(a){a()},Da=va(!1),Ea=va(!0),Fa={noop:sa,noarg:ta,compose:ua,constant:va,identity:wa,tripleEquals:xa,curry:ya,not:za,die:Aa,apply:Ba,call:Ca,never:Da,always:Ea},Ga=Fa.never,Ha=Fa.always,Ia=function(){return Ja},Ja=function(){var a=function(a){return a.isNone()},b=function(a){return a()},c=function(a){return a},d=function(){},e={fold:function(a,b){return a()},is:Ga,isSome:Ga,isNone:Ha,getOr:c,getOrThunk:b,getOrDie:function(a){throw new Error(a||"error: getOrDie called on none.")},or:c,orThunk:b,map:Ia,ap:Ia,each:d,bind:Ia,flatten:Ia,exists:Ga,forall:Ha,filter:Ia,equals:a,equals_:a,toArray:function(){return[]},toString:Fa.constant("none()")};return Object.freeze&&Object.freeze(e),e}(),Ka=function(a){var b=function(){return a},c=function(){return f},d=function(b){return Ka(b(a))},e=function(b){return b(a)},f={fold:function(b,c){return c(a)},is:function(b){return a===b},isSome:Ha,isNone:Ga,getOr:b,getOrThunk:b,getOrDie:b,or:c,orThunk:c,map:d,ap:function(b){return b.fold(Ia,function(b){return Ka(b(a))})},each:function(b){b(a)},bind:e,flatten:b,exists:e,forall:e,filter:function(b){return b(a)?f:Ja},equals:function(b){return b.is(a)},equals_:function(b,c){return b.fold(Ga,function(b){return c(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return f},La=function(a){return null===a||void 0===a?Ja:Ka(a)},Ma={some:Ka,none:Ia,from:La},Na=function(a){var b=Pa(a);if(b&&"static"!==ga.DOM.getStyle(b,"position",!0)){var c=ga.DOM.getPos(b),d=b.scrollLeft-c.x,e=b.scrollTop-c.y;return Ma.some({x:d,y:e})}return Ma.none()},Oa=function(a,b){var c=ga.DOM.select(a.settings.ui_container)[0];b.getRoot().uiContainer=c},Pa=function(a){return a?a.getRoot().uiContainer:null},Qa=function(a,b){return b.uiContainer=Pa(a)},Ra={getUiContainerDelta:Na,setUiContainer:Oa,getUiContainer:Pa,inheritUiContainer:Qa},Sa=function(a,b,c){var d,e=[];if(b)return N.each(b.split(/[ ,]/),function(b){var f,g=function(){var c=a.selection;b.settings.stateSelector&&c.selectorChanged(b.settings.stateSelector,function(a){b.active(a)},!0),b.settings.disabledStateSelector&&c.selectorChanged(b.settings.disabledStateSelector,function(a){b.disabled(a)})};"|"===b?d=null:(d||(d={type:"buttongroup",items:[]},e.push(d)),a.buttons[b]&&(f=b,b=a.buttons[f],"function"==typeof b&&(b=b()),b.type=b.type||"button",b.size=c,b=ha.create(b),d.items.push(b),a.initialized?g():a.on("init",g)))}),{type:"toolbar",layout:"flow",items:e}},Ta=function(a,b){var c=[],d=function(d){d&&c.push(Sa(a,d,b))};if(N.each(fa(a),function(a){d(a)}),c.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:c}},Ua={createToolbar:Sa,createToolbars:Ta},Va=ga.DOM,Wa=function(a){return{left:a.x,top:a.y,width:a.w,height:a.h,right:a.x+a.w,bottom:a.y+a.h}},Xa=function(a){N.each(a.contextToolbars,function(a){a.panel&&a.panel.hide()})},Ya=function(a,b){a.moveTo(b.left,b.top)},Za=function(a,b,c){b=b?b.substr(0,2):"",N.each({t:"down",b:"up"},function(d,e){a.classes.toggle("arrow-"+d,c(e,b.substr(0,1)))}),N.each({l:"left",r:"right"},function(d,e){a.classes.toggle("arrow-"+d,c(e,b.substr(1,1)))})},$a=function(a,b,c,d,e,f){return f=Wa({x:b,y:c,w:f.w,h:f.h}),a&&(f=a({elementRect:Wa(d),contentAreaRect:Wa(e),panelRect:f})),f},_a=function(a){var b,c=function(){return a.contextToolbars||[]},d=function(b){var c,d,e;return c=Va.getPos(a.getContentAreaContainer()),d=a.dom.getRect(b),e=a.dom.getRoot(),"BODY"===e.nodeName&&(d.x-=e.ownerDocument.documentElement.scrollLeft||e.scrollLeft,d.y-=e.ownerDocument.documentElement.scrollTop||e.scrollTop),d.x+=c.x,d.y+=c.y,d},e=function(b,c){var e,f,g,h,i,j,k,l,m=V(a);if(!a.removed){if(!b||!b.toolbar.panel)return void Xa(a);k=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],i=b.toolbar.panel,c&&i.show(),g=d(b.element),f=Va.getRect(i.getEl()),h=Va.getRect(a.getContentAreaContainer()||a.getBody());var n=Ra.getUiContainerDelta(i).getOr({x:0,y:0});if(g.x+=n.x,g.y+=n.y,f.x+=n.x,f.y+=n.y,h.x+=n.x,h.y+=n.y,l=25,"inline"!==Va.getStyle(b.element,"display",!0)){var o=b.element.getBoundingClientRect();g.w=o.width,g.h=o.height}a.inline||(h.w=a.getDoc().documentElement.offsetWidth),a.selection.controlSelection.isResizable(b.element)&&g.w<l&&(g=qa.inflate(g,0,8)),e=qa.findBestRelativePosition(f,g,h,k),g=qa.clamp(g,h),e?(j=qa.relativePosition(f,g,e),Ya(i,$a(m,j.x,j.y,g,h,f))):(h.h+=f.h,g=qa.intersect(h,g),g?(e=qa.findBestRelativePosition(f,g,h,["bc-tc","bl-tl","br-tr"]),e?(j=qa.relativePosition(f,g,e),Ya(i,$a(m,j.x,j.y,g,h,f))):Ya(i,$a(m,g.x,g.y,g,h,f))):i.hide()),Za(i,e,function(a,b){return a===b})}},f=function(b){return function(){var c=function(){a.selection&&e(j(a.selection.getNode()),b)};ra.requestAnimationFrame(c)}},g=function(c){if(!b){var d=f(!0),e=Ra.getUiContainer(c);b=a.selection.getScrollContainer()||a.getWin(),Va.bind(b,"scroll",d),Va.bind(e,"scroll",d),a.on("remove",function(){Va.unbind(b,"scroll",d),Va.unbind(e,"scroll",d)})}},h=function(b){var c;return b.toolbar.panel?(b.toolbar.panel.show(),void e(b)):(c=ha.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:Ua.createToolbar(a,b.toolbar.items),oncancel:function(){a.focus()}}),Ra.setUiContainer(a,c),g(c),b.toolbar.panel=c,c.renderTo().reflow(),void e(b))},i=function(){N.each(c(),function(a){a.panel&&a.panel.hide()})},j=function(b){var d,e,f,g=c();for(f=a.$(b).parents().add(b),d=f.length-1;d>=0;d--)for(e=g.length-1;e>=0;e--)if(g[e].predicate(f[d]))return{toolbar:g[e],element:f[d]};return null};a.on("click keyup setContent ObjectResized",function(b){("setcontent"!==b.type||b.selection)&&ra.setEditorTimeout(a,function(){var b;b=j(a.selection.getNode()),b?(i(),h(b)):i()})}),a.on("blur hide contextmenu",i),a.on("ObjectResizeStart",function(){var b=j(a.selection.getNode());b&&b.toolbar.panel&&b.toolbar.panel.hide()}),a.on("ResizeEditor ResizeWindow",f(!0)),a.on("nodeChange",f(!1)),a.on("remove",function(){N.each(c(),function(a){a.panel&&a.panel.remove()}),a.contextToolbars={}}),a.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var b=j(a.selection.getNode());b&&b.toolbar.panel&&b.toolbar.panel.items()[0].focus()})},ab={addContextualToolbars:_a},bb=function(a){if(null===a)return"null";var b=typeof a;return"object"===b&&Array.prototype.isPrototypeOf(a)?"array":"object"===b&&String.prototype.isPrototypeOf(a)?"string":b},cb=function(a){return function(b){return bb(b)===a}},db={isString:cb("string"),isObject:cb("object"),isArray:cb("array"),isNull:cb("null"),isBoolean:cb("boolean"),isUndefined:cb("undefined"),isFunction:cb("function"),isNumber:cb("number")},eb=function(){var a=Array.prototype.indexOf,b=function(b,c){return a.call(b,c)},c=function(a,b){return ub(a,b)};return void 0===a?c:b}(),fb=function(a,b){var c=eb(a,b);return c===-1?Ma.none():Ma.some(c)},gb=function(a,b){return eb(a,b)>-1},hb=function(a,b){return tb(a,b).isSome()},ib=function(a,b){for(var c=[],d=0;d<a;d++)c.push(b(d));return c},jb=function(a,b){for(var c=[],d=0;d<a.length;d+=b){var e=a.slice(d,d+b);c.push(e)}return c},kb=function(a,b){for(var c=a.length,d=new Array(c),e=0;e<c;e++){var f=a[e];d[e]=b(f,e,a)}return d},lb=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];b(e,c,a)}},mb=function(a,b){for(var c=a.length-1;c>=0;c--){var d=a[c];b(d,c,a)}},nb=function(a,b){for(var c=[],d=[],e=0,f=a.length;e<f;e++){var g=a[e],h=b(g,e,a)?c:d;h.push(g)}return{pass:c,fail:d}},ob=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var f=a[d];b(f,d,a)&&c.push(f)}return c},pb=function(a,b){if(0===a.length)return[];for(var c=b(a[0]),d=[],e=[],f=0,g=a.length;f<g;f++){var h=a[f],i=b(h);i!==c&&(d.push(e),e=[]),c=i,e.push(h)}return 0!==e.length&&d.push(e),d},qb=function(a,b,c){return mb(a,function(a){c=b(c,a)}),c},rb=function(a,b,c){return lb(a,function(a){c=b(c,a)}),c},sb=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(b(e,c,a))return Ma.some(e)}return Ma.none()},tb=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(b(e,c,a))return Ma.some(c)}return Ma.none()},ub=function(a,b){for(var c=0,d=a.length;c<d;++c)if(a[c]===b)return c;return-1},vb=Array.prototype.push,wb=function(a){for(var b=[],c=0,d=a.length;c<d;++c){if(!Array.prototype.isPrototypeOf(a[c]))throw new Error("Arr.flatten item "+c+" was not an array, input: "+a);vb.apply(b,a[c])}return b},xb=function(a,b){var c=kb(a,b);return wb(c)},yb=function(a,b){for(var c=0,d=a.length;c<d;++c){var e=a[c];if(b(e,c,a)!==!0)return!1}return!0},zb=function(a,b){return a.length===b.length&&yb(a,function(a,c){return a===b[c]})},Ab=Array.prototype.slice,Bb=function(a){var b=Ab.call(a,0);return b.reverse(),b},Cb=function(a,b){return ob(a,function(a){return!gb(b,a)})},Db=function(a,b){for(var c={},d=0,e=a.length;d<e;d++){var f=a[d];c[String(f)]=b(f,d)}return c},Eb=function(a){return[a]},Fb=function(a,b){var c=Ab.call(a,0);return c.sort(b),c},Gb=function(a){return 0===a.length?Ma.none():Ma.some(a[0])},Hb=function(a){return 0===a.length?Ma.none():Ma.some(a[a.length-1])},Ib=db.isFunction(Array.from)?Array.from:function(a){return Ab.call(a)},Jb={map:kb,each:lb,eachr:mb,partition:nb,filter:ob,groupBy:pb,indexOf:fb,foldr:qb,foldl:rb,find:sb,findIndex:tb,flatten:wb,bind:xb,forall:yb,exists:hb,contains:gb,equal:zb,reverse:Bb,chunk:jb,difference:Cb,mapToObject:Db,pure:Eb,sort:Fb,range:ib,head:Gb,last:Hb,from:Ib},Kb={file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}},Lb=function(){return{name:"|",item:{text:"|"}}},Mb=function(a,b){var c=b?{name:a,item:b}:null;return"|"===a?Lb():c},Nb=function(a,b){return Jb.findIndex(a,function(a){return a.name===b}).isSome()},Ob=function(a){return a&&"|"===a.item.text},Pb=function(a,b){var c=Jb.filter(a,function(a){return b.hasOwnProperty(a.name)===!1}),d=Jb.filter(c,function(a,b,c){return!Ob(a)||!Ob(c[b-1])});return Jb.filter(d,function(a,b,c){return!Ob(a)||b>0&&b<c.length-1})},Qb=function(a,b,c,d){var e,f,g,h;return b?(f=b[d],h=!0):f=Kb[d],f&&(e={text:f.title},g=[],N.each((f.items||"").split(/[ ,]/),function(b){var c=Mb(b,a[b]);c&&g.push(c)}),h||N.each(a,function(a,b){a.context!==d||Nb(g,b)||("before"===a.separator&&g.push(Lb()),a.prependToContext?g.unshift(Mb(b,a)):g.push(Mb(b,a)),"after"===a.separator&&g.push(Lb()))}),e.menu=Jb.map(Pb(g,c),function(a){return a.item}),!e.menu.length)?null:e},Rb=function(a){var b,c=[],d=W(a);if(d)for(b in d)c.push(b);else for(b in Kb)c.push(b);return c},Sb=function(a){for(var b=[],c=Rb(a),d=N.makeMap(X(a).split(/[ ,]/)),e=Q(a),f="string"==typeof e?e.split(/[ ,]/):c,g=0;g<f.length;g++){var h=f[g],i=Qb(a.menuItems,W(a),d,h);i&&b.push(i)}return b},Tb={createMenuButtons:Sb},Ub=ga.DOM,Vb=function(a){return{width:a.clientWidth,height:a.clientHeight}},Wb=function(a,b,c){var d,e,f,g;d=a.getContainer(),e=a.getContentAreaContainer().firstChild,f=Vb(d),g=Vb(e),null!==b&&(b=Math.max(Y(a),b),b=Math.min($(a),b),Ub.setStyle(d,"width",b+(f.width-g.width)),Ub.setStyle(e,"width",b)),c=Math.max(Z(a),c),c=Math.min(_(a),c),Ub.setStyle(e,"height",c),ma.fireResizeEditor(a)},Xb=function(a,b,c){var d=a.getContentAreaContainer();Wb(a,d.clientWidth+b,d.clientHeight+c)},Yb={resizeTo:Wb,resizeBy:Xb},Zb=tinymce.util.Tools.resolve("tinymce.Env"),$b=function(a){return{element:function(){return a}}},_b=function(a,b,c){var d=a.settings[c];d&&d($b(b.getEl("body")))},ac=function(a,b,c){N.each(c,function(c){var d=b.items().filter("#"+c.name)[0];d&&d.visible()&&c.name!==a&&(_b(c,d,"onhide"),d.visible(!1))})},bc=function(a){a.items().each(function(a){a.active(!1)})},cc=function(a,b){return N.grep(a,function(a){return a.name===b})[0]},dc=function(a,b,c){return function(d){var e=d.control,f=e.parents().filter("panel")[0],g=f.find("#"+b)[0],h=cc(c,b);ac(b,f,c),bc(e.parent()),g&&g.visible()?(_b(h,g,"onhide"),g.hide(),e.active(!1)):(g?(g.show(),_b(h,g,"onshow")):(g=ha.create({type:"container",name:b,layout:"stack",classes:"sidebar-panel",html:""}),f.prepend(g),_b(h,g,"onrender"),_b(h,g,"onshow")),e.active(!0)),ma.fireResizeEditor(a)}},ec=function(){return!Zb.ie||Zb.ie>=11},fc=function(a){return!(!ec()||!a.sidebars)&&a.sidebars.length>0},gc=function(a){var b=N.map(a.sidebars,function(b){var c=b.settings;return{type:"button",icon:c.icon,image:c.image,tooltip:c.tooltip,onclick:dc(a,b.name,a.sidebars)}});return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:b}]}},hc={hasSidebar:fc,createSidebar:gc},ic=function(a){var b=function(){a._skinLoaded=!0,ma.fireSkinLoaded(a)};return function(){a.initialized?b():a.on("init",b)}},jc={fireSkinLoaded:ic},kc=ga.DOM,lc=function(a){return function(b){a.find("*").disabled("readonly"===b.mode)}},mc=function(a){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:a,html:""}},nc=function(a){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[mc("0"),hc.createSidebar(a)]}},oc=function(a,b,c){var d,e,f;if(aa(a)===!1&&c.skinUiCss?kc.styleSheetLoader.load(c.skinUiCss,jc.fireSkinLoaded(a)):jc.fireSkinLoaded(a)(),d=b.panel=ha.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[P(a)===!1?null:{type:"menubar",border:"0 0 1 0",items:Tb.createMenuButtons(a)},Ua.createToolbars(a,S(a))]},hc.hasSidebar(a)?nc(a):mc("1 0 0 0")]}),Ra.setUiContainer(a,d),"none"!==ca(a)&&(e={type:"resizehandle",direction:ca(a),onResizeStart:function(){var b=a.getContentAreaContainer().firstChild;f={width:b.clientWidth,height:b.clientHeight}},onResize:function(b){"both"===ca(a)?Yb.resizeTo(a,f.width+b.deltaX,f.height+b.deltaY):Yb.resizeTo(a,null,f.height+b.deltaY)}}),R(a)){var g='<a href="https://www.tinymce.com/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce</a>',h=ia.translate(["Powered by {0}",g]),i=O(a)?{type:"label",classes:"branding",html:" "+h}:null;d.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:a},e,i]})}return ma.fireBeforeRenderUI(a),a.on("SwitchMode",lc(d)),d.renderBefore(c.targetNode).reflow(),T(a)&&a.setMode("readonly"),c.width&&kc.setStyle(d.getEl(),"width",c.width),a.on("remove",function(){d.remove(),d=null}),pa.addKeys(a,d),ab.addContextualToolbars(a),{iframeContainer:d.find("#iframe")[0].getEl(),editorContainer:d.getEl()}},pc={render:oc},qc=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),rc=0,sc={id:function(){return"mceu_"+rc++},create:function(a,b,c){var d=document.createElement(a);return ga.DOM.setAttribs(d,b),"string"==typeof c?d.innerHTML=c:N.each(c,function(a){a.nodeType&&d.appendChild(a)}),d},createFragment:function(a){return ga.DOM.createFragment(a)},getWindowSize:function(){return ga.DOM.getViewPort()},getSize:function(a){var b,c;if(a.getBoundingClientRect){var d=a.getBoundingClientRect();b=Math.max(d.width||d.right-d.left,a.offsetWidth),c=Math.max(d.height||d.bottom-d.bottom,a.offsetHeight)}else b=a.offsetWidth,c=a.offsetHeight;return{width:b,height:c}},getPos:function(a,b){return ga.DOM.getPos(a,b||sc.getContainer())},getContainer:function(){return Zb.container?Zb.container:document.body},getViewPort:function(a){return ga.DOM.getViewPort(a)},get:function(a){return document.getElementById(a)},addClass:function(a,b){return ga.DOM.addClass(a,b)},removeClass:function(a,b){return ga.DOM.removeClass(a,b)},hasClass:function(a,b){return ga.DOM.hasClass(a,b)},toggleClass:function(a,b,c){return ga.DOM.toggleClass(a,b,c)},css:function(a,b,c){return ga.DOM.setStyle(a,b,c)},getRuntimeStyle:function(a,b){return ga.DOM.getStyle(a,b,!0)},on:function(a,b,c,d){return ga.DOM.bind(a,b,c,d)},off:function(a,b,c){return ga.DOM.unbind(a,b,c)},fire:function(a,b,c){return ga.DOM.fire(a,b,c)},innerHtml:function(a,b){ga.DOM.setHTML(a,b)}},tc=function(a){return"static"===sc.getRuntimeStyle(a,"position")},uc=function(a){return a.state.get("fixed")},vc=function(a){return{x:0,y:0,w:a.scrollWidth-1,h:a.scrollHeight-1}},wc=function(){var a=window,b=Math.max(a.pageXOffset,document.body.scrollLeft,document.documentElement.scrollLeft),c=Math.max(a.pageYOffset,document.body.scrollTop,document.documentElement.scrollTop),d=a.innerWidth||document.documentElement.clientWidth,e=a.innerHeight||document.documentElement.clientHeight;return{x:b,y:c,w:b+d,h:c+e}},xc=function(a){var b=Ra.getUiContainer(a);return b&&!uc(a)?vc(b):wc()},yc={testMoveRel:function(b,c){for(var d=xc(this),e=0;e<c.length;e++){var f=a(this,b,c[e]);if(uc(this)){if(f.x>0&&f.x+f.w<d.w&&f.y>0&&f.y+f.h<d.h)return c[e]}else if(f.x>d.x&&f.x+f.w<d.w&&f.y>d.y&&f.y+f.h<d.h)return c[e]}return c[0]},moveRel:function(b,c){"string"!=typeof c&&(c=this.testMoveRel(b,c));var d=a(this,b,c);return this.moveTo(d.x,d.y)},moveBy:function(a,b){var c=this,d=c.layoutRect();return c.moveTo(d.x+a,d.y+b),c},moveTo:function(a,b){function c(a,b,c){return a<0?0:a+c>b?(a=b-c,a<0?0:a):a}var d=this;if(d.settings.constrainToViewport){var e=xc(this),f=d.layoutRect();a=c(a,e.w,f.w),b=c(b,e.h,f.h)}var g=Ra.getUiContainer(d);return g&&tc(g)&&!uc(d)&&(a-=g.scrollLeft,b-=g.scrollTop),g&&(a+=1,b+=1),d.state.get("rendered")?d.layoutRect({x:a,y:b}).repaint():(d.settings.x=a,d.settings.y=b),d.fire("move",{x:a,y:b}),d}},zc=tinymce.util.Tools.resolve("tinymce.util.Class"),Ac=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),Bc={parseBox:function(a){var b,c=10;if(a)return"number"==typeof a?(a=a||0,{top:a,left:a,bottom:a,right:a}):(a=a.split(" "),b=a.length,1===b?a[1]=a[2]=a[3]=a[0]:2===b?(a[2]=a[0],a[3]=a[1]):3===b&&(a[3]=a[1]),{top:parseInt(a[0],c)||0,right:parseInt(a[1],c)||0,bottom:parseInt(a[2],c)||0,left:parseInt(a[3],c)||0})},measureBox:function(a,b){function c(b){var c=a.ownerDocument.defaultView;if(c){var d=c.getComputedStyle(a,null);return d?(b=b.replace(/[A-Z]/g,function(a){return"-"+a}),d.getPropertyValue(b)):null}return a.currentStyle[b]}function d(a){var b=parseFloat(c(a));return isNaN(b)?0:b}return{top:d(b+"TopWidth"),right:d(b+"RightWidth"),bottom:d(b+"BottomWidth"),left:d(b+"LeftWidth")}}};N.extend(c.prototype,{add:function(a){return a&&!this.contains(a)&&(this.cls._map[a]=!0,this.cls.push(a),this._change()),this},remove:function(a){if(this.contains(a)){var b=void 0;for(b=0;b<this.cls.length&&this.cls[b]!==a;b++);this.cls.splice(b,1),delete this.cls._map[a],this._change()}return this},toggle:function(a,b){var c=this.contains(a);return c!==b&&(c?this.remove(a):this.add(a),this._change()),this},contains:function(a){return!!this.cls._map[a]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),c.prototype.toString=function(){var a;if(this.clsValue)return this.clsValue;a="";for(var b=0;b<this.cls.length;b++)b>0&&(a+=" "),a+=this.prefix+this.cls[b];return a};var Cc,Dc,Ec,Fc=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,Gc=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,Hc=/^\s*|\s*$/g,Ic=zc.extend({init:function(a){function b(a){if(a)return a=a.toLowerCase(),function(b){return"*"===a||b.type===a}}function c(a){if(a)return function(b){return b._name===a}}function d(a){if(a)return a=a.split("."),function(b){for(var c=a.length;c--;)if(!b.classes.contains(a[c]))return!1;return!0}}function e(a,b,c){if(a)return function(d){var e=d[a]?d[a]():"";return b?"="===b?e===c:"*="===b?e.indexOf(c)>=0:"~="===b?(" "+e+" ").indexOf(" "+c+" ")>=0:"!="===b?e!==c:"^="===b?0===e.indexOf(c):"$="===b&&e.substr(e.length-c.length)===c:!!c}}function f(a){var b;if(a)return a=/(?:not\((.+)\))|(.+)/i.exec(a),a[1]?(b=h(a[1],[]),function(a){return!i(a,b)}):(a=a[2],function(b,c,d){return"first"===a?0===c:"last"===a?c===d-1:"even"===a?c%2===0:"odd"===a?c%2===1:!!b[a]&&b[a]()})}function g(a,g,h){function i(a){a&&g.push(a)}var j;return j=Fc.exec(a.replace(Hc,"")),i(b(j[1])),i(c(j[2])),i(d(j[3])),i(e(j[4],j[5],j[6])),i(f(j[7])),g.pseudo=!!j[7],g.direct=h,g}function h(a,b){var c,d,e,f=[];do if(Gc.exec(""),d=Gc.exec(a),d&&(a=d[3],f.push(d[1]),d[2])){c=d[3];break}while(d);for(c&&h(c,b),a=[],e=0;e<f.length;e++)">"!==f[e]&&a.push(g(f[e],[],">"===f[e-1]));return b.push(a),b}var i=this.match;this._selectors=h(a,[])},match:function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o;for(b=b||this._selectors,c=0,d=b.length;c<d;c++){for(g=b[c],f=g.length,o=a,n=0,e=f-1;e>=0;e--)for(j=g[e];o;){if(j.pseudo)for(m=o.parent().items(),k=l=m.length;k--&&m[k]!==o;);for(h=0,i=j.length;h<i;h++)if(!j[h](o,k,l)){h=i+1;break}if(h===i){n++;break}if(e===f-1)break;o=o.parent()}if(n===f)return!0}return!1},find:function(a){function b(a,c,d){var e,g,h,i,j,k=c[d];for(e=0,g=a.length;e<g;e++){for(j=a[e],h=0,i=k.length;h<i;h++)if(!k[h](j,e,g)){h=i+1;break}if(h===i)d===c.length-1?f.push(j):j.items&&b(j.items(),c,d+1);else if(k.direct)return;j.items&&b(j.items(),c,d)}}var c,e,f=[],g=this._selectors;if(a.items){for(c=0,e=g.length;c<e;c++)b(a.items(),g[c],0);e>1&&(f=d(f))}return Cc||(Cc=Ic.Collection),new Cc(f)}}),Jc=Array.prototype.push,Kc=Array.prototype.slice;Ec={length:0,init:function(a){a&&this.add(a)},add:function(a){var b=this;return N.isArray(a)?Jc.apply(b,a):a instanceof Dc?b.add(a.toArray()):Jc.call(b,a),b},set:function(a){var b,c=this,d=c.length;for(c.length=0,c.add(a),b=c.length;b<d;b++)delete c[b];return c},filter:function(a){var b,c,d,e,f=this,g=[];for("string"==typeof a?(a=new Ic(a),e=function(b){return a.match(b)}):e=a,b=0,c=f.length;b<c;b++)d=f[b],e(d)&&g.push(d);return new Dc(g)},slice:function(){return new Dc(Kc.apply(this,arguments))},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},each:function(a){return N.each(this,a),this},toArray:function(){return N.toArray(this)},indexOf:function(a){for(var b=this,c=b.length;c--&&b[c]!==a;);return c},reverse:function(){return new Dc(N.toArray(this).reverse())},hasClass:function(a){return!!this[0]&&this[0].classes.contains(a)},prop:function(a,b){var c,d=this;return void 0!==b?(d.each(function(c){c[a]&&c[a](b)}),d):(c=d[0],c&&c[a]?c[a]():void 0)},exec:function(a){var b=this,c=N.toArray(arguments).slice(1);return b.each(function(b){b[a]&&b[a].apply(b,c)}),b},remove:function(){for(var a=this.length;a--;)this[a].remove();return this},addClass:function(a){return this.each(function(b){b.classes.add(a)})},removeClass:function(a){return this.each(function(b){b.classes.remove(a)})}},N.each("fire on off show hide append prepend before after reflow".split(" "),function(a){Ec[a]=function(){var b=N.toArray(arguments);return this.each(function(c){a in c&&c[a].apply(c,b)}),this}}),N.each("text name disabled active selected checked visible parent value data".split(" "),function(a){Ec[a]=function(b){return this.prop(a,b)}}),Dc=zc.extend(Ec),Ic.Collection=Dc;var Lc=Dc,Mc=function(a){this.create=a.create};Mc.create=function(a,b){return new Mc({create:function(c,d){var e,f=function(a){c.set(d,a.value)},g=function(c){a.set(b,c.value)};return c.on("change:"+d,g),a.on("change:"+b,f),e=c._bindings,e||(e=c._bindings=[],c.on("destroy",function(){for(var a=e.length;a--;)e[a]()})),e.push(function(){a.off("change:"+b,f)}),a.get(b)}})};var Nc,Oc,Pc=tinymce.util.Tools.resolve("tinymce.util.Observable"),Qc=zc.extend({Mixins:[Pc],init:function(a){var b,c;a=a||{};for(b in a)c=a[b],c instanceof Mc&&(a[b]=c.create(this,b));this.data=a},set:function(a,b){var c,d,e=this.data[a];if(b instanceof Mc&&(b=b.create(this,a)),"object"==typeof a){for(c in a)this.set(c,a[c]);return this}return f(e,b)||(this.data[a]=b,d={target:this,name:a,value:b,oldValue:e},this.fire("change:"+a,d),this.fire("change",d)),this},get:function(a){return this.data[a]},has:function(a){return a in this.data},bind:function(a){return Mc.create(this,a)},destroy:function(){this.fire("destroy")}}),Rc={},Sc={add:function(a){var b=a.parent();if(b){if(!b._layout||b._layout.isNative())return;Rc[b._id]||(Rc[b._id]=b),Nc||(Nc=!0,ra.requestAnimationFrame(function(){var a,b;Nc=!1;for(a in Rc)b=Rc[a],b.state.get("rendered")&&b.reflow();Rc={}},document.body))}},remove:function(a){Rc[a._id]&&delete Rc[a._id]}},Tc="onmousewheel"in document,Uc=!1,Vc="mce-",Wc=0,Xc={Statics:{classPrefix:Vc},isRtl:function(){return Oc.rtl},classPrefix:Vc,init:function(a){function b(a){var b;for(a=a.split(" "),b=0;b<a.length;b++)f.classes.add(a[b])}var d,e,f=this;f.settings=a=N.extend({},f.Defaults,a),f._id=a.id||"mceu_"+Wc++,f._aria={role:a.role},f._elmCache={},f.$=qc,f.state=new Qc({visible:!0,active:!1,disabled:!1,value:""}),f.data=new Qc(a.data),f.classes=new c(function(){f.state.get("rendered")&&(f.getEl().className=this.toString())}),f.classes.prefix=f.classPrefix,d=a.classes,d&&(f.Defaults&&(e=f.Defaults.classes,e&&d!==e&&b(e)),b(d)),N.each("title text name visible disabled active value".split(" "),function(b){b in a&&f[b](a[b])}),f.on("click",function(){if(f.disabled())return!1}),f.settings=a,f.borderBox=Bc.parseBox(a.border),f.paddingBox=Bc.parseBox(a.padding),f.marginBox=Bc.parseBox(a.margin),a.hidden&&f.hide()},Properties:"parent,name",getContainerElm:function(){var a=Ra.getUiContainer(this);return a?a:sc.getContainer()},getParentCtrl:function(a){for(var b,c=this.getRoot().controlIdLookup;a&&c&&!(b=c[a.id]);)a=a.parentNode;return b},initLayoutRect:function(){var a,b,c,d,e,f,g,h,i,j,k=this,l=k.settings,m=k.getEl();a=k.borderBox=k.borderBox||Bc.measureBox(m,"border"),k.paddingBox=k.paddingBox||Bc.measureBox(m,"padding"),k.marginBox=k.marginBox||Bc.measureBox(m,"margin"),j=sc.getSize(m),h=l.minWidth,i=l.minHeight,e=h||j.width,f=i||j.height,c=l.width,d=l.height,g=l.autoResize,g="undefined"!=typeof g?g:!c&&!d,c=c||e,d=d||f;var n=a.left+a.right,o=a.top+a.bottom,p=l.maxWidth||65535,q=l.maxHeight||65535;return k._layoutRect=b={x:l.x||0,y:l.y||0,w:c,h:d,deltaW:n,deltaH:o,contentW:c-n,contentH:d-o,innerW:c-n,innerH:d-o,startMinWidth:h||0,startMinHeight:i||0,minW:Math.min(e,p),minH:Math.min(f,q),maxW:p,maxH:q,autoResize:g,scrollW:0},k._lastLayoutRect={},b},layoutRect:function(a){var b,c,d,e,f,g=this,h=g._layoutRect;return h||(h=g.initLayoutRect()),a?(d=h.deltaW,e=h.deltaH,void 0!==a.x&&(h.x=a.x),void 0!==a.y&&(h.y=a.y),void 0!==a.minW&&(h.minW=a.minW),void 0!==a.minH&&(h.minH=a.minH),c=a.w,void 0!==c&&(c=c<h.minW?h.minW:c,c=c>h.maxW?h.maxW:c,h.w=c,h.innerW=c-d),c=a.h,void 0!==c&&(c=c<h.minH?h.minH:c,c=c>h.maxH?h.maxH:c,h.h=c,h.innerH=c-e),c=a.innerW,void 0!==c&&(c=c<h.minW-d?h.minW-d:c,c=c>h.maxW-d?h.maxW-d:c,h.innerW=c,h.w=c+d),c=a.innerH,void 0!==c&&(c=c<h.minH-e?h.minH-e:c,c=c>h.maxH-e?h.maxH-e:c,h.innerH=c,h.h=c+e),void 0!==a.contentW&&(h.contentW=a.contentW),void 0!==a.contentH&&(h.contentH=a.contentH),b=g._lastLayoutRect,b.x===h.x&&b.y===h.y&&b.w===h.w&&b.h===h.h||(f=Oc.repaintControls,f&&f.map&&!f.map[g._id]&&(f.push(g),f.map[g._id]=!0),b.x=h.x,b.y=h.y,b.w=h.w,b.h=h.h),g):h},repaint:function(){var a,b,c,d,e,f,g,h,i,j,k=this;i=document.createRange?function(a){return a}:Math.round,a=k.getEl().style,d=k._layoutRect,h=k._lastRepaintRect||{},e=k.borderBox,f=e.left+e.right,g=e.top+e.bottom,d.x!==h.x&&(a.left=i(d.x)+"px",h.x=d.x),d.y!==h.y&&(a.top=i(d.y)+"px",h.y=d.y),d.w!==h.w&&(j=i(d.w-f),a.width=(j>=0?j:0)+"px",h.w=d.w),d.h!==h.h&&(j=i(d.h-g),a.height=(j>=0?j:0)+"px",h.h=d.h),k._hasBody&&d.innerW!==h.innerW&&(j=i(d.innerW),c=k.getEl("body"),c&&(b=c.style,b.width=(j>=0?j:0)+"px"),h.innerW=d.innerW),k._hasBody&&d.innerH!==h.innerH&&(j=i(d.innerH),c=c||k.getEl("body"),c&&(b=b||c.style,b.height=(j>=0?j:0)+"px"),h.innerH=d.innerH),k._lastRepaintRect=h,k.fire("repaint",{},!1)},updateLayoutRect:function(){var a=this;a.parent()._lastRect=null,sc.css(a.getEl(),{width:"",height:""}),a._layoutRect=a._lastRepaintRect=a._lastLayoutRect=null,
a.initLayoutRect()},on:function(a,b){function c(a){var b,c;return"string"!=typeof a?a:function(e){return b||d.parentsAndSelf().each(function(d){var e=d.settings.callbacks;if(e&&(b=e[a]))return c=d,!1}),b?b.call(c,e):(e.action=a,void this.fire("execute",e))}}var d=this;return g(d).on(a,c(b)),d},off:function(a,b){return g(this).off(a,b),this},fire:function(a,b,c){var d=this;if(b=b||{},b.control||(b.control=d),b=g(d).fire(a,b),c!==!1&&d.parent)for(var e=d.parent();e&&!b.isPropagationStopped();)e.fire(a,b,!1),e=e.parent();return b},hasEventListeners:function(a){return g(this).has(a)},parents:function(a){var b,c=this,d=new Lc;for(b=c.parent();b;b=b.parent())d.add(b);return a&&(d=d.filter(a)),d},parentsAndSelf:function(a){return new Lc(this).add(this.parents(a))},next:function(){var a=this.parent().items();return a[a.indexOf(this)+1]},prev:function(){var a=this.parent().items();return a[a.indexOf(this)-1]},innerHtml:function(a){return this.$el.html(a),this},getEl:function(a){var b=a?this._id+"-"+a:this._id;return this._elmCache[b]||(this._elmCache[b]=qc("#"+b)[0]),this._elmCache[b]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(a){}return this},blur:function(){return this.getEl().blur(),this},aria:function(a,b){var c=this,d=c.getEl(c.ariaTarget);return"undefined"==typeof b?c._aria[a]:(c._aria[a]=b,c.state.get("rendered")&&d.setAttribute("role"===a?a:"aria-"+a,b),c)},encode:function(a,b){return b!==!1&&(a=this.translate(a)),(a||"").replace(/[&<>"]/g,function(a){return"&#"+a.charCodeAt(0)+";"})},translate:function(a){return Oc.translate?Oc.translate(a):a},before:function(a){var b=this,c=b.parent();return c&&c.insert(a,c.items().indexOf(b),!0),b},after:function(a){var b=this,c=b.parent();return c&&c.insert(a,c.items().indexOf(b)),b},remove:function(){var a,b,c=this,d=c.getEl(),e=c.parent();if(c.items){var f=c.items().toArray();for(b=f.length;b--;)f[b].remove()}e&&e.items&&(a=[],e.items().each(function(b){b!==c&&a.push(b)}),e.items().set(a),e._lastRect=null),c._eventsRoot&&c._eventsRoot===c&&qc(d).off();var g=c.getRoot().controlIdLookup;return g&&delete g[c._id],d&&d.parentNode&&d.parentNode.removeChild(d),c.state.set("rendered",!1),c.state.destroy(),c.fire("remove"),c},renderBefore:function(a){return qc(a).before(this.renderHtml()),this.postRender(),this},renderTo:function(a){return qc(a||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var a,b,c,d,e,f=this,g=f.settings;f.$el=qc(f.getEl()),f.state.set("rendered",!0);for(d in g)0===d.indexOf("on")&&f.on(d.substr(2),g[d]);if(f._eventsRoot){for(c=f.parent();!e&&c;c=c.parent())e=c._eventsRoot;if(e)for(d in e._nativeEvents)f._nativeEvents[d]=!0}h(f),g.style&&(a=f.getEl(),a&&(a.setAttribute("style",g.style),a.style.cssText=g.style)),f.settings.border&&(b=f.borderBox,f.$el.css({"border-top-width":b.top,"border-right-width":b.right,"border-bottom-width":b.bottom,"border-left-width":b.left}));var i=f.getRoot();i.controlIdLookup||(i.controlIdLookup={}),i.controlIdLookup[f._id]=f;for(var j in f._aria)f.aria(j,f._aria[j]);f.state.get("visible")===!1&&(f.getEl().style.display="none"),f.bindStates(),f.state.on("change:visible",function(a){var b,c=a.value;f.state.get("rendered")&&(f.getEl().style.display=c===!1?"none":"",f.getEl().getBoundingClientRect()),b=f.parent(),b&&(b._lastRect=null),f.fire(c?"show":"hide"),Sc.add(f)}),f.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(a){function b(a,b){var c,d,e=a;for(c=d=0;e&&e!==b&&e.nodeType;)c+=e.offsetLeft||0,d+=e.offsetTop||0,e=e.offsetParent;return{x:c,y:d}}var c,d,e,f,g,h,i=this.getEl(),j=i.parentNode,k=b(i,j);return c=k.x,d=k.y,e=i.offsetWidth,f=i.offsetHeight,g=j.clientWidth,h=j.clientHeight,"end"===a?(c-=g-e,d-=h-f):"center"===a&&(c-=g/2-e/2,d-=h/2-f/2),j.scrollLeft=c,j.scrollTop=d,this},getRoot:function(){for(var a,b=this,c=[];b;){if(b.rootControl){a=b.rootControl;break}c.push(b),a=b,b=b.parent()}a||(a=this);for(var d=c.length;d--;)c[d].rootControl=a;return a},reflow:function(){Sc.remove(this);var a=this.parent();return a&&a._layout&&!a._layout.isNative()&&a.reflow(),this}};N.each("text title visible disabled active value".split(" "),function(a){Xc[a]=function(b){return 0===arguments.length?this.state.get(a):("undefined"!=typeof b&&this.state.set(a,b),this)}}),Oc=zc.extend(Xc);var Yc,Zc,$c,_c,ad=Oc,bd=function(a){return!!a.getAttribute("data-mce-tabstop")},cd={},dd=ad.extend({init:function(a){var b=this;b._super(a),a=b.settings,a.fixed&&b.state.set("fixed",!0),b._items=new Lc,b.isRtl()&&b.classes.add("rtl"),b.bodyClasses=new c(function(){b.state.get("rendered")&&(b.getEl("body").className=this.toString())}),b.bodyClasses.prefix=b.classPrefix,b.classes.add("container"),b.bodyClasses.add("container-body"),a.containerCls&&b.classes.add(a.containerCls),b._layout=ha.create((a.layout||"")+"layout"),b.settings.items?b.add(b.settings.items):b.add(b.render()),b._hasBody=!0},items:function(){return this._items},find:function(a){return a=cd[a]=cd[a]||new Ic(a),a.find(this)},add:function(a){var b=this;return b.items().add(b.create(a)).parent(b),b},focus:function(a){var b,c,d,e=this;return a&&(c=e.keyboardNav||e.parents().eq(-1)[0].keyboardNav)?void c.focusFirst(e):(d=e.find("*"),e.statusbar&&d.add(e.statusbar.items()),d.each(function(a){return a.settings.autofocus?(b=null,!1):void(a.canFocus&&(b=b||a))}),b&&b.focus(),e)},replace:function(a,b){for(var c,d=this.items(),e=d.length;e--;)if(d[e]===a){d[e]=b;break}e>=0&&(c=b.getEl(),c&&c.parentNode.removeChild(c),c=a.getEl(),c&&c.parentNode.removeChild(c)),b.parent(this)},create:function(a){var b,c=this,d=[];return N.isArray(a)||(a=[a]),N.each(a,function(a){a&&(a instanceof ad||("string"==typeof a&&(a={type:a}),b=N.extend({},c.settings.defaults,a),a.type=b.type=b.type||a.type||c.settings.defaultType||(b.defaults?b.defaults.type:null),a=ha.create(b)),d.push(a))}),d},renderNew:function(){var a=this;return a.items().each(function(b,c){var d;b.parent(a),b.state.get("rendered")||(d=a.getEl("body"),d.hasChildNodes()&&c<=d.childNodes.length-1?qc(d.childNodes[c]).before(b.renderHtml()):qc(d).append(b.renderHtml()),b.postRender(),Sc.add(b))}),a._layout.applyClasses(a.items().filter(":visible")),a._lastRect=null,a},append:function(a){return this.add(a).renderNew()},prepend:function(a){var b=this;return b.items().set(b.create(a).concat(b.items().toArray())),b.renderNew()},insert:function(a,b,c){var d,e,f,g=this;return a=g.create(a),d=g.items(),!c&&b<d.length-1&&(b+=1),b>=0&&b<d.length&&(e=d.slice(0,b).toArray(),f=d.slice(b).toArray(),d.set(e.concat(a,f))),g.renderNew()},fromJSON:function(a){var b=this;for(var c in a)b.find("#"+c).value(a[c]);return b},toJSON:function(){var a=this,b={};return a.find("*").each(function(a){var c=a.name(),d=a.value();c&&"undefined"!=typeof d&&(b[c]=d)}),b},renderHtml:function(){var a=this,b=a._layout,c=this.settings.role;return a.preRender(),b.preRender(a),'<div id="'+a._id+'" class="'+a.classes+'"'+(c?' role="'+this.settings.role+'"':"")+'><div id="'+a._id+'-body" class="'+a.bodyClasses+'">'+(a.settings.html||"")+b.renderHtml(a)+"</div></div>"},postRender:function(){var a,b=this;return b.items().exec("postRender"),b._super(),b._layout.postRender(b),b.state.set("rendered",!0),b.settings.style&&b.$el.css(b.settings.style),b.settings.border&&(a=b.borderBox,b.$el.css({"border-top-width":a.top,"border-right-width":a.right,"border-bottom-width":a.bottom,"border-left-width":a.left})),b.parent()||(b.keyboardNav=i({root:b})),b},initLayoutRect:function(){var a=this,b=a._super();return a._layout.recalc(a),b},recalc:function(){var a=this,b=a._layoutRect,c=a._lastRect;if(!c||c.w!==b.w||c.h!==b.h)return a._layout.recalc(a),b=a.layoutRect(),a._lastRect={x:b.x,y:b.y,w:b.w,h:b.h},!0},reflow:function(){var a;if(Sc.remove(this),this.visible()){for(ad.repaintControls=[],ad.repaintControls.map={},this.recalc(),a=ad.repaintControls.length;a--;)ad.repaintControls[a].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),ad.repaintControls=[]}return this}}),ed={init:function(){var a=this;a.on("repaint",a.renderScroll)},renderScroll:function(){function a(){function a(a,f,g,h,i,j){var k,l,m,n,o,p,q,r,s;if(l=c.getEl("scroll"+a)){if(r=f.toLowerCase(),s=g.toLowerCase(),qc(c.getEl("absend")).css(r,c.layoutRect()[h]-1),!i)return void qc(l).css("display","none");qc(l).css("display","block"),k=c.getEl("body"),m=c.getEl("scroll"+a+"t"),n=k["client"+g]-2*d,n-=b&&e?l["client"+j]:0,o=k["scroll"+g],p=n/o,q={},q[r]=k["offset"+f]+d,q[s]=n,qc(l).css(q),q={},q[r]=k["scroll"+f]*p,q[s]=n*p,qc(m).css(q)}}var b,e,f;f=c.getEl("body"),b=f.scrollWidth>f.clientWidth,e=f.scrollHeight>f.clientHeight,a("h","Left","Width","contentW",b,"Height"),a("v","Top","Height","contentH",e,"Width")}function b(){function a(a,b,e,f,g){var h,i=c._id+"-scroll"+a,j=c.classPrefix;qc(c.getEl()).append('<div id="'+i+'" class="'+j+"scrollbar "+j+"scrollbar-"+a+'"><div id="'+i+'t" class="'+j+'scrollbar-thumb"></div></div>'),c.draghelper=new l(i+"t",{start:function(){h=c.getEl("body")["scroll"+b],qc("#"+i).addClass(j+"active")},drag:function(i){var j,k,l,m,n=c.layoutRect();k=n.contentW>n.innerW,l=n.contentH>n.innerH,m=c.getEl("body")["client"+e]-2*d,m-=k&&l?c.getEl("scroll"+a)["client"+g]:0,j=m/c.getEl("body")["scroll"+e],c.getEl("body")["scroll"+b]=h+i["delta"+f]/j},stop:function(){qc("#"+i).removeClass(j+"active")}})}c.classes.add("scroll"),a("v","Top","Height","Y","Width"),a("h","Left","Width","X","Height")}var c=this,d=2;c.settings.autoScroll&&(c._hasScroll||(c._hasScroll=!0,b(),c.on("wheel",function(b){var d=c.getEl("body");d.scrollLeft+=10*(b.deltaX||0),d.scrollTop+=10*b.deltaY,a()}),qc(c.getEl("body")).on("scroll",a)),a())}},fd=dd.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[ed],renderHtml:function(){var a=this,b=a._layout,c=a.settings.html;return a.preRender(),b.preRender(a),"undefined"==typeof c?c='<div id="'+a._id+'-body" class="'+a.bodyClasses+'">'+b.renderHtml(a)+"</div>":("function"==typeof c&&(c=c.call(a)),a._hasBody=!1),'<div id="'+a._id+'" class="'+a.classes+'" hidefocus="1" tabindex="-1" role="group">'+(a._preBodyHtml||"")+c+"</div>"}}),gd={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(a,b){if(a<=1||b<=1){var c=sc.getWindowSize();a=a<=1?a*c.w:a,b=b<=1?b*c.h:b}return this._layoutRect.autoResize=!1,this.layoutRect({minW:a,minH:b,w:a,h:b}).reflow()},resizeBy:function(a,b){var c=this,d=c.layoutRect();return c.resizeTo(d.w+a,d.h+b)}},hd=[],id=[],jd=fd.extend({Mixins:[yc,gd],init:function(a){var b=this;b._super(a),b._eventsRoot=b,b.classes.add("floatpanel"),a.autohide&&(o(),q(),hd.push(b)),a.autofix&&(p(),b.on("move",function(){r(this)})),b.on("postrender show",function(a){if(a.control===b){var c,d=b.classPrefix;b.modal&&!_c&&(c=qc("#"+d+"modal-block",b.getContainerElm()),c[0]||(c=qc('<div id="'+d+'modal-block" class="'+d+"reset "+d+'fade"></div>').appendTo(b.getContainerElm())),ra.setTimeout(function(){c.addClass(d+"in"),qc(b.getEl()).addClass(d+"in")}),_c=!0),s(!0,b)}}),b.on("show",function(){b.parents().each(function(a){if(a.state.get("fixed"))return b.fixed(!0),!1})}),a.popover&&(b._preBodyHtml='<div class="'+b.classPrefix+'arrow"></div>',b.classes.add("popover").add("bottom").add(b.isRtl()?"end":"start")),b.aria("label",a.ariaLabel),b.aria("labelledby",b._id),b.aria("describedby",b.describedBy||b._id+"-none")},fixed:function(a){var b=this;if(b.state.get("fixed")!==a){if(b.state.get("rendered")){var c=sc.getViewPort();a?b.layoutRect().y-=c.y:b.layoutRect().y+=c.y}b.classes.toggle("fixed",a),b.state.set("fixed",a)}return b},show:function(){var a,b=this,c=b._super();for(a=hd.length;a--&&hd[a]!==b;);return a===-1&&hd.push(b),c},hide:function(){return t(this),s(!1,this),this._super()},hideAll:function(){jd.hideAll()},close:function(){var a=this;return a.fire("close").isDefaultPrevented()||(a.remove(),s(!1,a)),a},remove:function(){t(this),this._super()},postRender:function(){var a=this;return a.settings.bodyRole&&this.getEl("body").setAttribute("role",a.settings.bodyRole),a._super()}});jd.hideAll=function(){for(var a=hd.length;a--;){var b=hd[a];b&&b.settings.autohide&&(b.hide(),hd.splice(a,1))}};var kd=function(a,b){return!(!a||b.settings.ui_container)},ld=function(a,b,c){var d,e,f=ga.DOM,g=U(a);g&&(e=f.select(g)[0]);var h=function(){if(d&&d.moveRel&&d.visible()&&!d._fixed){var b=a.selection.getScrollContainer(),c=a.getBody(),e=0,g=0;if(b){var h=f.getPos(c),i=f.getPos(b);e=Math.max(0,i.x-h.x),g=Math.max(0,i.y-h.y)}d.fixed(!1).moveRel(c,a.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(e,g)}},i=function(){d&&(d.show(),h(),f.addClass(a.getBody(),"mce-edit-focus"))},j=function(){d&&(d.hide(),jd.hideAll(),f.removeClass(a.getBody(),"mce-edit-focus"))},k=function(){return d?void(d.visible()||i()):(d=b.panel=ha.create({type:e?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:kd(e,a),fixed:kd(e,a),border:1,items:[P(a)===!1?null:{type:"menubar",border:"0 0 1 0",items:Tb.createMenuButtons(a)},Ua.createToolbars(a,S(a))]}),Ra.setUiContainer(a,d),ma.fireBeforeRenderUI(a),e?d.renderTo(e).reflow():d.renderTo().reflow(),pa.addKeys(a,d),i(),ab.addContextualToolbars(a),a.on("nodeChange",h),a.on("ResizeWindow",h),a.on("activate",i),a.on("deactivate",j),void a.nodeChanged())};return a.settings.content_editable=!0,a.on("focus",function(){aa(a)===!1&&c.skinUiCss?f.styleSheetLoader.load(c.skinUiCss,k,k):k()}),a.on("blur hide",j),a.on("remove",function(){d&&(d.remove(),d=null)}),aa(a)===!1&&c.skinUiCss?f.styleSheetLoader.load(c.skinUiCss,jc.fireSkinLoaded(a)):jc.fireSkinLoaded(a)(),{}},md={render:ld},nd=function(a,b){var c;a.on("ProgressState",function(a){c=c||new u(b.panel.getEl("body")),a.state?c.show(a.time):c.hide()})},od={setup:nd},pd=function(a,b,c){var d=da(a);return d&&(c.skinUiCss=d+"/skin.min.css",a.contentCSS.push(d+"/content"+(a.inline?".inline":"")+".min.css")),od.setup(a,b),ba(a)?md.render(a,b,c):pc.render(a,b,c)},qd={renderUI:pd},rd=ad.extend({Mixins:[yc],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var a=this,b=a.classPrefix;return'<div id="'+a._id+'" class="'+a.classes+'" role="presentation"><div class="'+b+'tooltip-arrow"></div><div class="'+b+'tooltip-inner">'+a.encode(a.state.get("text"))+"</div></div>"},bindStates:function(){var a=this;return a.state.on("change:text",function(b){a.getEl().lastChild.innerHTML=a.encode(b.value)}),a._super()},repaint:function(){var a,b,c=this;a=c.getEl().style,b=c._layoutRect,a.left=b.x+"px",a.top=b.y+"px",a.zIndex=131070}}),sd=ad.extend({init:function(a){var b=this;b._super(a),a=b.settings,b.canFocus=!0,a.tooltip&&sd.tooltips!==!1&&(b.on("mouseenter",function(c){var d=b.tooltip().moveTo(-65535);if(c.control===b){var e=d.text(a.tooltip).show().testMoveRel(b.getEl(),["bc-tc","bc-tl","bc-tr"]);d.classes.toggle("tooltip-n","bc-tc"===e),d.classes.toggle("tooltip-nw","bc-tl"===e),d.classes.toggle("tooltip-ne","bc-tr"===e),d.moveRel(b.getEl(),e)}else d.hide()}),b.on("mouseleave mousedown click",function(){b.tooltip().remove(),b._tooltip=null})),b.aria("label",a.ariaLabel||a.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new rd({type:"tooltip"}),Ra.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var a=this,b=a.settings;a._super(),a.parent()||!b.width&&!b.height||(a.initLayoutRect(),a.repaint()),b.autofocus&&a.focus()},bindStates:function(){function a(a){c.aria("disabled",a),c.classes.toggle("disabled",a)}function b(a){c.aria("pressed",a),c.classes.toggle("active",a)}var c=this;return c.state.on("change:disabled",function(b){a(b.value)}),c.state.on("change:active",function(a){b(a.value)}),c.state.get("disabled")&&a(!0),c.state.get("active")&&b(!0),c._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),td=sd.extend({Defaults:{value:0},init:function(a){var b=this;b._super(a),b.classes.add("progress"),b.settings.filter||(b.settings.filter=function(a){return Math.round(a)})},renderHtml:function(){var a=this,b=a._id,c=this.classPrefix;return'<div id="'+b+'" class="'+a.classes+'"><div class="'+c+'bar-container"><div class="'+c+'bar"></div></div><div class="'+c+'text">0%</div></div>'},postRender:function(){var a=this;return a._super(),a.value(a.settings.value),a},bindStates:function(){function a(a){a=b.settings.filter(a),b.getEl().lastChild.innerHTML=a+"%",b.getEl().firstChild.firstChild.style.width=a+"%"}var b=this;return b.state.on("change:value",function(b){a(b.value)}),a(b.state.get("value")),b._super()}}),ud=function(a,b){a.getEl().lastChild.textContent=b+(a.progressBar?" "+a.progressBar.value()+"%":"")},vd=ad.extend({Mixins:[yc],Defaults:{classes:"widget notification"},init:function(a){var b=this;b._super(a),b.maxWidth=a.maxWidth,a.text&&b.text(a.text),a.icon&&(b.icon=a.icon),a.color&&(b.color=a.color),a.type&&b.classes.add("notification-"+a.type),a.timeout&&(a.timeout<0||a.timeout>0)&&!a.closeButton?b.closeButton=!1:(b.classes.add("has-close"),b.closeButton=!0),a.progressBar&&(b.progressBar=new td),b.on("click",function(a){a.target.className.indexOf(b.classPrefix+"close")!==-1&&b.close()})},renderHtml:function(){var a=this,b=a.classPrefix,c="",d="",e="",f="";return a.icon&&(c='<i class="'+b+"ico "+b+"i-"+a.icon+'"></i>'),f=' style="max-width: '+a.maxWidth+"px;"+(a.color?"background-color: "+a.color+';"':'"'),a.closeButton&&(d='<button type="button" class="'+b+'close" aria-hidden="true">Ã—</button>'),a.progressBar&&(e=a.progressBar.renderHtml()),'<div id="'+a._id+'" class="'+a.classes+'"'+f+' role="presentation">'+c+'<div class="'+b+'notification-inner">'+a.state.get("text")+"</div>"+e+d+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var a=this;return ra.setTimeout(function(){a.$el.addClass(a.classPrefix+"in"),ud(a,a.state.get("text"))},100),a._super()},bindStates:function(){var a=this;return a.state.on("change:text",function(b){a.getEl().firstChild.innerHTML=b.value,ud(a,b.value)}),a.progressBar&&(a.progressBar.bindStates(),a.progressBar.state.on("change:value",function(b){ud(a,a.state.get("text"))})),a._super()},close:function(){var a=this;return a.fire("close").isDefaultPrevented()||a.remove(),a},repaint:function(){var a,b,c=this;a=c.getEl().style,b=c._layoutRect,a.left=b.x+"px",a.top=b.y+"px",a.zIndex=65534}}),wd=[],xd="",yd=jd.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(a){var b=this;b._super(a),b.isRtl()&&b.classes.add("rtl"),b.classes.add("window"),b.bodyClasses.add("window-body"),b.state.set("fixed",!0),a.buttons&&(b.statusbar=new fd({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:b.isRtl()?"start":"end",defaults:{type:"button"},items:a.buttons}),b.statusbar.classes.add("foot"),b.statusbar.parent(b)),b.on("click",function(a){var c=b.classPrefix+"close";(sc.hasClass(a.target,c)||sc.hasClass(a.target.parentNode,c))&&b.close()}),b.on("cancel",function(){b.close()}),b.on("move",function(a){a.control===b&&jd.hideAll()}),b.aria("describedby",b.describedBy||b._id+"-none"),b.aria("label",a.title),b._fullscreen=!1},recalc:function(){var a,b,c,d,e=this,f=e.statusbar;e._fullscreen&&(e.layoutRect(sc.getWindowSize()),e.layoutRect().contentH=e.layoutRect().innerH),e._super(),a=e.layoutRect(),e.settings.title&&!e._fullscreen&&(b=a.headerW,b>a.w&&(c=a.x-Math.max(0,b/2),e.layoutRect({w:b,x:c}),d=!0)),f&&(f.layoutRect({w:e.layoutRect().innerW}).recalc(),b=f.layoutRect().minW+a.deltaW,b>a.w&&(c=a.x-Math.max(0,b-a.w),e.layoutRect({w:b,x:c}),d=!0)),d&&e.recalc()},initLayoutRect:function(){var a,b=this,c=b._super(),d=0;if(b.settings.title&&!b._fullscreen){a=b.getEl("head");var e=sc.getSize(a);c.headerW=e.width,c.headerH=e.height,d+=c.headerH}b.statusbar&&(d+=b.statusbar.layoutRect().h),c.deltaH+=d,c.minH+=d,c.h+=d;var f=sc.getWindowSize();return c.x=b.settings.x||Math.max(0,f.w/2-c.w/2),c.y=b.settings.y||Math.max(0,f.h/2-c.h/2),c},renderHtml:function(){var a=this,b=a._layout,c=a._id,d=a.classPrefix,e=a.settings,f="",g="",h=e.html;return a.preRender(),b.preRender(a),e.title&&(f='<div id="'+c+'-head" class="'+d+'window-head"><div id="'+c+'-title" class="'+d+'title">'+a.encode(e.title)+'</div><div id="'+c+'-dragh" class="'+d+'dragh"></div><button type="button" class="'+d+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),e.url&&(h='<iframe src="'+e.url+'" tabindex="-1"></iframe>'),"undefined"==typeof h&&(h=b.renderHtml(a)),a.statusbar&&(g=a.statusbar.renderHtml()),'<div id="'+c+'" class="'+a.classes+'" hidefocus="1"><div class="'+a.classPrefix+'reset" role="application">'+f+'<div id="'+c+'-body" class="'+a.bodyClasses+'">'+h+"</div>"+g+"</div></div>"},fullscreen:function(a){var b,c,d=this,e=document.documentElement,f=d.classPrefix;if(a!==d._fullscreen)if(qc(window).on("resize",function(){var a;if(d._fullscreen)if(b)d._timer||(d._timer=ra.setTimeout(function(){var a=sc.getWindowSize();d.moveTo(0,0).resizeTo(a.w,a.h),d._timer=0},50));else{a=(new Date).getTime();var c=sc.getWindowSize();d.moveTo(0,0).resizeTo(c.w,c.h),(new Date).getTime()-a>50&&(b=!0)}}),c=d.layoutRect(),d._fullscreen=a,a){d._initial={x:c.x,y:c.y,w:c.w,h:c.h},d.borderBox=Bc.parseBox("0"),d.getEl("head").style.display="none",c.deltaH-=c.headerH+2,qc([e,document.body]).addClass(f+"fullscreen"),d.classes.add("fullscreen");var g=sc.getWindowSize();d.moveTo(0,0).resizeTo(g.w,g.h)}else d.borderBox=Bc.parseBox(d.settings.border),d.getEl("head").style.display="",c.deltaH+=c.headerH,qc([e,document.body]).removeClass(f+"fullscreen"),d.classes.remove("fullscreen"),d.moveTo(d._initial.x,d._initial.y).resizeTo(d._initial.w,d._initial.h);return d.reflow()},postRender:function(){var a,b=this;setTimeout(function(){b.classes.add("in"),b.fire("open")},0),b._super(),b.statusbar&&b.statusbar.postRender(),b.focus(),this.dragHelper=new l(b._id+"-dragh",{start:function(){a={x:b.layoutRect().x,y:b.layoutRect().y}},drag:function(c){b.moveTo(a.x+c.deltaX,a.y+c.deltaY)}}),b.on("submit",function(a){a.isDefaultPrevented()||b.close()}),wd.push(b),w(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var a,b=this;for(b.dragHelper.destroy(),b._super(),b.statusbar&&this.statusbar.remove(),x(b.classPrefix,!1),a=wd.length;a--;)wd[a]===b&&wd.splice(a,1);w(wd.length>0)},getContentWindow:function(){var a=this.getEl().getElementsByTagName("iframe")[0];return a?a.contentWindow:null}});z();var zd=yd.extend({init:function(a){a={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(a)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(a){function b(a,b,c){return{type:"button",text:a,subtype:c?"primary":"",onClick:function(a){a.control.parents()[1].close(),d(b)}}}var c,d=a.callback||function(){};switch(a.buttons){case zd.OK_CANCEL:c=[b("Ok",!0,!0),b("Cancel",!1)];break;case zd.YES_NO:case zd.YES_NO_CANCEL:c=[b("Yes",1,!0),b("No",0)],a.buttons===zd.YES_NO_CANCEL&&c.push(b("Cancel",-1));break;default:c=[b("Ok",!0,!0)]}return new yd({padding:20,x:a.x,y:a.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:c,title:a.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:a.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:a.onClose,onCancel:function(){d(!1)}}).renderTo(document.body).reflow()},alert:function(a,b){return"string"==typeof a&&(a={text:a}),a.callback=b,zd.msgBox(a)},confirm:function(a,b){return"string"==typeof a&&(a={text:a}),a.callback=b,a.buttons=zd.OK_CANCEL,zd.msgBox(a)}}}),Ad=function(a){var b=function(b){return qd.renderUI(a,this,b)},c=function(b,c){return Yb.resizeTo(a,b,c)},d=function(b,c){return Yb.resizeBy(a,b,c)},e=function(){return v(a)},f=function(){return A(a)};return{renderUI:b,resizeTo:c,resizeBy:d,getNotificationManagerImpl:e,getWindowManagerImpl:f}},Bd={get:Ad},Cd=zc.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(a){this.settings=N.extend({},this.Defaults,a)},preRender:function(a){a.bodyClasses.add(this.settings.containerClass)},applyClasses:function(a){var b,c,d,e,f=this,g=f.settings;b=g.firstControlClass,c=g.lastControlClass,a.each(function(a){a.classes.remove(b).remove(c).add(g.controlClass),a.visible()&&(d||(d=a),e=a)}),d&&d.classes.add(b),e&&e.classes.add(c)},renderHtml:function(a){var b=this,c="";return b.applyClasses(a.items()),a.items().each(function(a){c+=a.renderHtml()}),c},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),Dd=Cd.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(a){a.items().filter(":visible").each(function(a){var b=a.settings;a.layoutRect({x:b.x,y:b.y,w:b.w,h:b.h}),a.recalc&&a.recalc()})},renderHtml:function(a){return'<div id="'+a._id+'-absend" class="'+a.classPrefix+'abs-end"></div>'+this._super(a)}}),Ed=sd.extend({Defaults:{classes:"widget btn",role:"button"},init:function(a){var b,c=this;c._super(a),a=c.settings,b=c.settings.size,c.on("click mousedown",function(a){a.preventDefault()}),c.on("touchstart",function(a){c.fire("click",a),a.preventDefault()}),a.subtype&&c.classes.add(a.subtype),b&&c.classes.add("btn-"+b),a.icon&&c.icon(a.icon)},icon:function(a){return arguments.length?(this.state.set("icon",a),this):this.state.get("icon")},repaint:function(){var a,b=this.getEl().firstChild;b&&(a=b.style,a.width=a.height="100%"),this._super()},renderHtml:function(){var a,b,c=this,d=c._id,e=c.classPrefix,f=c.state.get("icon"),g=c.state.get("text"),h="",i=c.settings;return a=i.image,a?(f="none","string"!=typeof a&&(a=window.getSelection?a[0]:a[1]),a=" style=\"background-image: url('"+a+"')\""):a="",g&&(c.classes.add("btn-has-text"),h='<span class="'+e+'txt">'+c.encode(g)+"</span>"),f=f?e+"ico "+e+"i-"+f:"",b="boolean"==typeof i.active?' aria-pressed="'+i.active+'"':"",'<div id="'+d+'" class="'+c.classes+'" tabindex="-1"'+b+'><button id="'+d+'-button" role="presentation" type="button" tabindex="-1">'+(f?'<i class="'+f+'"'+a+"></i>":"")+h+"</button></div>"},bindStates:function(){function a(a){var e=c("span."+d,b.getEl());a?(e[0]||(c("button:first",b.getEl()).append('<span class="'+d+'"></span>'),e=c("span."+d,b.getEl())),e.html(b.encode(a))):e.remove(),b.classes.toggle("btn-has-text",!!a)}var b=this,c=b.$,d=b.classPrefix+"txt";return b.state.on("change:text",function(b){a(b.value)}),b.state.on("change:icon",function(c){var d=c.value,e=b.classPrefix;b.settings.icon=d,d=d?e+"ico "+e+"i-"+b.settings.icon:"";var f=b.getEl().firstChild,g=f.getElementsByTagName("i")[0];d?(g&&g===f.firstChild||(g=document.createElement("i"),f.insertBefore(g,f.firstChild)),g.className=d):g&&f.removeChild(g),a(b.state.get("text"))}),b._super()}}),Fd=Ed.extend({init:function(a){var b=this;a=N.extend({text:"Browse...",multiple:!1,accept:null},a),b._super(a),b.classes.add("browsebutton"),a.multiple&&b.classes.add("multiple")},postRender:function(){var a=this,b=sc.create("input",{type:"file",id:a._id+"-browse",accept:a.settings.accept});a._super(),qc(b).on("change",function(b){var c=b.target.files;a.value=function(){return c.length?a.settings.multiple?c:c[0]:null},b.preventDefault(),c.length&&a.fire("change",b)}),qc(b).on("click",function(a){a.stopPropagation()}),qc(a.getEl("button")).on("click",function(a){a.stopPropagation(),b.click()}),a.getEl().appendChild(b)},remove:function(){qc(this.getEl("button")).off(),qc(this.getEl("input")).off(),this._super()}}),Gd=dd.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var a=this,b=a._layout;return a.classes.add("btn-group"),a.preRender(),b.preRender(a),'<div id="'+a._id+'" class="'+a.classes+'"><div id="'+a._id+'-body">'+(a.settings.html||"")+b.renderHtml(a)+"</div></div>"}}),Hd=sd.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(a){var b=this;b._super(a),b.on("click mousedown",function(a){a.preventDefault()}),b.on("click",function(a){a.preventDefault(),b.disabled()||b.checked(!b.checked())}),b.checked(b.settings.checked)},checked:function(a){return arguments.length?(this.state.set("checked",a),this):this.state.get("checked")},value:function(a){return arguments.length?this.checked(a):this.checked()},renderHtml:function(){var a=this,b=a._id,c=a.classPrefix;return'<div id="'+b+'" class="'+a.classes+'" unselectable="on" aria-labelledby="'+b+'-al" tabindex="-1"><i class="'+c+"ico "+c+'i-checkbox"></i><span id="'+b+'-al" class="'+c+'label">'+a.encode(a.state.get("text"))+"</span></div>"},bindStates:function(){function a(a){b.classes.toggle("checked",a),b.aria("checked",a)}var b=this;return b.state.on("change:text",function(a){b.getEl("al").firstChild.data=b.translate(a.value)}),b.state.on("change:checked change:value",function(c){b.fire("change"),a(c.value)}),b.state.on("change:icon",function(a){var c=a.value,d=b.classPrefix;if("undefined"==typeof c)return b.settings.icon;b.settings.icon=c,c=c?d+"ico "+d+"i-"+b.settings.icon:"";var e=b.getEl().firstChild,f=e.getElementsByTagName("i")[0];c?(f&&f===e.firstChild||(f=document.createElement("i"),e.insertBefore(f,e.firstChild)),f.className=c):f&&e.removeChild(f)}),b.state.get("checked")&&a(!0),b._super()}}),Id=tinymce.util.Tools.resolve("tinymce.util.VK"),Jd=sd.extend({init:function(a){var b=this;b._super(a),a=b.settings,b.classes.add("combobox"),b.subinput=!0,b.ariaTarget="inp",a.menu=a.menu||a.values,a.menu&&(a.icon="caret"),b.on("click",function(c){var d=c.target,e=b.getEl();if(qc.contains(e,d)||d===e)for(;d&&d!==e;)d.id&&d.id.indexOf("-open")!==-1&&(b.fire("action"),a.menu&&(b.showMenu(),c.aria&&b.menu.items()[0].focus())),d=d.parentNode}),b.on("keydown",function(a){var c;13===a.keyCode&&"INPUT"===a.target.nodeName&&(a.preventDefault(),b.parents().reverse().each(function(a){if(a.toJSON)return c=a,!1}),b.fire("submit",{data:c.toJSON()}))}),b.on("keyup",function(a){if("INPUT"===a.target.nodeName){var c=b.state.get("value"),d=a.target.value;d!==c&&(b.state.set("value",d),b.fire("autocomplete",a))}}),b.on("mouseover",function(a){var c=b.tooltip().moveTo(-65535);if(b.statusLevel()&&a.target.className.indexOf(b.classPrefix+"status")!==-1){var d=b.statusMessage()||"Ok",e=c.text(d).show().testMoveRel(a.target,["bc-tc","bc-tl","bc-tr"]);c.classes.toggle("tooltip-n","bc-tc"===e),c.classes.toggle("tooltip-nw","bc-tl"===e),c.classes.toggle("tooltip-ne","bc-tr"===e),c.moveRel(a.target,e)}})},statusLevel:function(a){return arguments.length>0&&this.state.set("statusLevel",a),this.state.get("statusLevel")},statusMessage:function(a){return arguments.length>0&&this.state.set("statusMessage",a),this.state.get("statusMessage")},showMenu:function(){var a,b=this,c=b.settings;b.menu||(a=c.menu||[],a.length?a={type:"menu",items:a}:a.type=a.type||"menu",b.menu=ha.create(a).parent(b).renderTo(b.getContainerElm()),b.fire("createmenu"),b.menu.reflow(),b.menu.on("cancel",function(a){a.control===b.menu&&b.focus()}),b.menu.on("show hide",function(a){a.control.items().each(function(a){a.active(a.value()===b.value())})}).fire("show"),b.menu.on("select",function(a){b.value(a.control.value())}),b.on("focusin",function(a){"INPUT"===a.target.tagName.toUpperCase()&&b.menu.hide()}),b.aria("expanded",!0)),b.menu.show(),b.menu.layoutRect({w:b.layoutRect().w}),b.menu.moveRel(b.getEl(),b.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus();
},repaint:function(){var a,b,c=this,d=c.getEl(),e=c.getEl("open"),f=c.layoutRect(),g=0,h=d.firstChild;c.statusLevel()&&"none"!==c.statusLevel()&&(g=parseInt(sc.getRuntimeStyle(h,"padding-right"),10)-parseInt(sc.getRuntimeStyle(h,"padding-left"),10)),a=e?f.w-sc.getSize(e).width-10:f.w-10;var i=document;return i.all&&(!i.documentMode||i.documentMode<=8)&&(b=c.layoutRect().h-2+"px"),qc(h).css({width:a-g,lineHeight:b}),c._super(),c},postRender:function(){var a=this;return qc(this.getEl("inp")).on("change",function(b){a.state.set("value",b.target.value),a.fire("change",b)}),a._super()},renderHtml:function(){var a,b,c=this,d=c._id,e=c.settings,f=c.classPrefix,g=c.state.get("value")||"",h="",i="",j="";return"spellcheck"in e&&(i+=' spellcheck="'+e.spellcheck+'"'),e.maxLength&&(i+=' maxlength="'+e.maxLength+'"'),e.size&&(i+=' size="'+e.size+'"'),e.subtype&&(i+=' type="'+e.subtype+'"'),j='<i id="'+d+'-status" class="mce-status mce-ico" style="display: none"></i>',c.disabled()&&(i+=' disabled="disabled"'),a=e.icon,a&&"caret"!==a&&(a=f+"ico "+f+"i-"+e.icon),b=c.state.get("text"),(a||b)&&(h='<div id="'+d+'-open" class="'+f+"btn "+f+'open" tabIndex="-1" role="button"><button id="'+d+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==a?'<i class="'+a+'"></i>':'<i class="'+f+'caret"></i>')+(b?(a?" ":"")+b:"")+"</button></div>",c.classes.add("has-open")),'<div id="'+d+'" class="'+c.classes+'"><input id="'+d+'-inp" class="'+f+'textbox" value="'+c.encode(g,!1)+'" hidefocus="1"'+i+' placeholder="'+c.encode(e.placeholder)+'" />'+j+h+"</div>"},value:function(a){return arguments.length?(this.state.set("value",a),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(a,b){var c=this;if(0===a.length)return void c.hideMenu();var d=function(a,b){return function(){c.fire("selectitem",{title:b,value:a})}};c.menu?c.menu.items().remove():c.menu=ha.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(c).renderTo(),N.each(a,function(a){c.menu.add({text:a.title,url:a.previewUrl,match:b,classes:"menu-item-ellipsis",onclick:d(a.value,a.title)})}),c.menu.renderNew(),c.hideMenu(),c.menu.on("cancel",function(a){a.control.parent()===c.menu&&(a.stopPropagation(),c.focus(),c.hideMenu())}),c.menu.on("select",function(){c.focus()});var e=c.layoutRect().w;c.menu.layoutRect({w:e,minW:0,maxW:e}),c.menu.repaint(),c.menu.reflow(),c.menu.show(),c.menu.moveRel(c.getEl(),c.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var a=this;a.state.on("change:value",function(b){a.getEl("inp").value!==b.value&&(a.getEl("inp").value=b.value)}),a.state.on("change:disabled",function(b){a.getEl("inp").disabled=b.value}),a.state.on("change:statusLevel",function(b){var c=a.getEl("status"),d=a.classPrefix,e=b.value;sc.css(c,"display","none"===e?"none":""),sc.toggleClass(c,d+"i-checkmark","ok"===e),sc.toggleClass(c,d+"i-warning","warn"===e),sc.toggleClass(c,d+"i-error","error"===e),a.classes.toggle("has-status","none"!==e),a.repaint()}),sc.on(a.getEl("status"),"mouseleave",function(){a.tooltip().hide()}),a.on("cancel",function(b){a.menu&&a.menu.visible()&&(b.stopPropagation(),a.hideMenu())});var b=function(a,b){b&&b.items().length>0&&b.items().eq(a)[0].focus()};return a.on("keydown",function(c){var d=c.keyCode;"INPUT"===c.target.nodeName&&(d===Id.DOWN?(c.preventDefault(),a.fire("autocomplete"),b(0,a.menu)):d===Id.UP&&(c.preventDefault(),b(-1,a.menu)))}),a._super()},remove:function(){qc(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),Kd=Jd.extend({init:function(a){var b=this;a.spellcheck=!1,a.onaction&&(a.icon="none"),b._super(a),b.classes.add("colorbox"),b.on("change keyup postrender",function(){b.repaintColor(b.value())})},repaintColor:function(a){var b=this.getEl("open"),c=b?b.getElementsByTagName("i")[0]:null;if(c)try{c.style.background=a}catch(d){}},bindStates:function(){var a=this;return a.state.on("change:value",function(b){a.state.get("rendered")&&a.repaintColor(b.value)}),a._super()}}),Ld=Ed.extend({showPanel:function(){var a=this,b=a.settings;if(a.classes.add("opened"),a.panel)a.panel.show();else{var c=b.panel;c.type&&(c={layout:"grid",items:c}),c.role=c.role||"dialog",c.popover=!0,c.autohide=!0,c.ariaRoot=!0,a.panel=new jd(c).on("hide",function(){a.classes.remove("opened")}).on("cancel",function(b){b.stopPropagation(),a.focus(),a.hidePanel()}).parent(a).renderTo(a.getContainerElm()),a.panel.fire("show"),a.panel.reflow()}var d=["bc-tc","bc-tl","bc-tr"],e=["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"],f=a.panel.testMoveRel(a.getEl(),b.popoverAlign||(a.isRtl()?d:e));a.panel.classes.toggle("start","l"===f.substr(-1)),a.panel.classes.toggle("end","r"===f.substr(-1));var g="t"===f.substr(0,1);a.panel.classes.toggle("bottom",!g),a.panel.classes.toggle("top",g),a.panel.moveRel(a.getEl(),f)},hidePanel:function(){var a=this;a.panel&&a.panel.hide()},postRender:function(){var a=this;return a.aria("haspopup",!0),a.on("click",function(b){b.control===a&&(a.panel&&a.panel.visible()?a.hidePanel():(a.showPanel(),a.panel.focus(!!b.aria)))}),a._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),Md=ga.DOM,Nd=Ld.extend({init:function(a){this._super(a),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(a){return a?(this._color=a,this.getEl("preview").style.backgroundColor=a,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var a=this,b=a._id,c=a.classPrefix,d=a.state.get("text"),e=a.settings.icon?c+"ico "+c+"i-"+a.settings.icon:"",f=a.settings.image?" style=\"background-image: url('"+a.settings.image+"')\"":"",g="";return d&&(a.classes.add("btn-has-text"),g='<span class="'+c+'txt">'+a.encode(d)+"</span>"),'<div id="'+b+'" class="'+a.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(e?'<i class="'+e+'"'+f+"></i>":"")+'<span id="'+b+'-preview" class="'+c+'preview"></span>'+g+'</button><button type="button" class="'+c+'open" hidefocus="1" tabindex="-1"> <i class="'+c+'caret"></i></button></div>'},postRender:function(){var a=this,b=a.settings.onclick;return a.on("click",function(c){c.aria&&"down"===c.aria.key||c.control!==a||Md.getParent(c.target,"."+a.classPrefix+"open")||(c.stopImmediatePropagation(),b.call(a,c))}),delete a.settings.onclick,a._super()}}),Od=tinymce.util.Tools.resolve("tinymce.util.Color"),Pd=sd.extend({Defaults:{classes:"widget colorpicker"},init:function(a){this._super(a)},postRender:function(){function a(a,b){var c,d,e=sc.getPos(a);return c=b.pageX-e.x,d=b.pageY-e.y,c=Math.max(0,Math.min(c/a.clientWidth,1)),d=Math.max(0,Math.min(d/a.clientHeight,1)),{x:c,y:d}}function b(a,b){var c=(360-a.h)/360;sc.css(g,{top:100*c+"%"}),b||sc.css(i,{left:a.s+"%",top:100-a.v+"%"}),h.style.background=Od({s:100,v:100,h:a.h}).toHex(),j.color().parse({s:a.s,v:a.v,h:a.h})}function c(c){var d;d=a(h,c),e.s=100*d.x,e.v=100*(1-d.y),b(e),j.fire("change")}function d(c){var d;d=a(f,c),e=k.toHsv(),e.h=360*(1-d.y),b(e,!0),j.fire("change")}var e,f,g,h,i,j=this,k=j.color();f=j.getEl("h"),g=j.getEl("hp"),h=j.getEl("sv"),i=j.getEl("svp"),j._repaint=function(){e=k.toHsv(),b(e)},j._super(),j._svdraghelper=new l(j._id+"-sv",{start:c,drag:c}),j._hdraghelper=new l(j._id+"-h",{start:d,drag:d}),j._repaint()},rgb:function(){return this.color().toRgb()},value:function(a){var b=this;return arguments.length?(b.color().parse(a),void(b._rendered&&b._repaint())):b.color().toHex()},color:function(){return this._color||(this._color=Od()),this._color},renderHtml:function(){function a(){var a,b,c,d,g="";for(c="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",d=f.split(","),a=0,b=d.length-1;a<b;a++)g+='<div class="'+e+'colorpicker-h-chunk" style="height:'+100/b+"%;"+c+d[a]+",endColorstr="+d[a+1]+");-ms-"+c+d[a]+",endColorstr="+d[a+1]+')"></div>';return g}var b,c=this,d=c._id,e=c.classPrefix,f="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000",g="background: -ms-linear-gradient(top,"+f+");background: linear-gradient(to bottom,"+f+");";return b='<div id="'+d+'-h" class="'+e+'colorpicker-h" style="'+g+'">'+a()+'<div id="'+d+'-hp" class="'+e+'colorpicker-h-marker"></div></div>','<div id="'+d+'" class="'+c.classes+'"><div id="'+d+'-sv" class="'+e+'colorpicker-sv"><div class="'+e+'colorpicker-overlay1"><div class="'+e+'colorpicker-overlay2"><div id="'+d+'-svp" class="'+e+'colorpicker-selector1"><div class="'+e+'colorpicker-selector2"></div></div></div></div></div>'+b+"</div>"}}),Qd=sd.extend({init:function(a){var b=this;a=N.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},a),b._super(a),b.classes.add("dropzone"),a.multiple&&b.classes.add("multiple")},renderHtml:function(){var a,b,c=this,d=c.settings;return a={id:c._id,hidefocus:"1"},b=sc.create("div",a,"<span>"+this.translate(d.text)+"</span>"),d.height&&sc.css(b,"height",d.height+"px"),d.width&&sc.css(b,"width",d.width+"px"),b.className=c.classes,b.outerHTML},postRender:function(){var a=this,b=function(b){b.preventDefault(),a.classes.toggle("dragenter"),a.getEl().className=a.classes},c=function(b){var c=a.settings.accept;if("string"!=typeof c)return b;var d=new RegExp("("+c.split(/\s*,\s*/).join("|")+")$","i");return N.grep(b,function(a){return d.test(a.name)})};a._super(),a.$el.on("dragover",function(a){a.preventDefault()}),a.$el.on("dragenter",b),a.$el.on("dragleave",b),a.$el.on("drop",function(b){if(b.preventDefault(),!a.state.get("disabled")){var d=c(b.dataTransfer.files);a.value=function(){return d.length?a.settings.multiple?d:d[0]:null},d.length&&a.fire("change",b)}})},remove:function(){this.$el.off(),this._super()}}),Rd=sd.extend({init:function(a){var b=this;a.delimiter||(a.delimiter="Â»"),b._super(a),b.classes.add("path"),b.canFocus=!0,b.on("click",function(a){var c,d=a.target;(c=d.getAttribute("data-index"))&&b.fire("select",{value:b.row()[c],index:c})}),b.row(b.settings.row)},focus:function(){var a=this;return a.getEl().firstChild.focus(),a},row:function(a){return arguments.length?(this.state.set("row",a),this):this.state.get("row")},renderHtml:function(){var a=this;return'<div id="'+a._id+'" class="'+a.classes+'">'+a._getDataPathHtml(a.state.get("row"))+"</div>"},bindStates:function(){var a=this;return a.state.on("change:row",function(b){a.innerHtml(a._getDataPathHtml(b.value))}),a._super()},_getDataPathHtml:function(a){var b,c,d=this,e=a||[],f="",g=d.classPrefix;for(b=0,c=e.length;b<c;b++)f+=(b>0?'<div class="'+g+'divider" aria-hidden="true"> '+d.settings.delimiter+" </div>":"")+'<div role="button" class="'+g+"path-item"+(b===c-1?" "+g+"last":"")+'" data-index="'+b+'" tabindex="-1" id="'+d._id+"-"+b+'" aria-level="'+(b+1)+'">'+e[b].name+"</div>";return f||(f='<div class="'+g+'path-item">Â </div>'),f}}),Sd=Rd.extend({postRender:function(){function a(a){if(1===a.nodeType){if("BR"===a.nodeName||a.getAttribute("data-mce-bogus"))return!0;if("bookmark"===a.getAttribute("data-mce-type"))return!0}return!1}var b=this,c=b.settings.editor;return c.settings.elementpath!==!1&&(b.on("select",function(a){c.focus(),c.selection.select(this.row()[a.index].element),c.nodeChanged()}),c.on("nodeChange",function(d){for(var e=[],f=d.parents,g=f.length;g--;)if(1===f[g].nodeType&&!a(f[g])){var h=c.fire("ResolveName",{name:f[g].nodeName.toLowerCase(),target:f[g]});if(h.isDefaultPrevented()||e.push({name:h.name,element:f[g]}),h.isPropagationStopped())break}b.row(e)})),b._super()}}),Td=dd.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var a=this,b=a._layout,c=a.classPrefix;return a.classes.add("formitem"),b.preRender(a),'<div id="'+a._id+'" class="'+a.classes+'" hidefocus="1" tabindex="-1">'+(a.settings.title?'<div id="'+a._id+'-title" class="'+c+'title">'+a.settings.title+"</div>":"")+'<div id="'+a._id+'-body" class="'+a.bodyClasses+'">'+(a.settings.html||"")+b.renderHtml(a)+"</div></div>"}}),Ud=dd.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var a=this,b=a.items();a.settings.formItemDefaults||(a.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),b.each(function(b){var c,d=b.settings.label;d&&(c=new Td(N.extend({items:{type:"label",id:b._id+"-l",text:d,flex:0,forId:b._id,disabled:b.disabled()}},a.settings.formItemDefaults)),c.type="formitem",b.aria("labelledby",b._id+"-l"),"undefined"==typeof b.settings.flex&&(b.settings.flex=1),a.replace(b,c),c.add(b))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var a=this;a._super(),a.fromJSON(a.settings.data)},bindStates:function(){function a(){var a,c,d,e=0,f=[];if(b.settings.labelGapCalc!==!1)for(d="children"===b.settings.labelGapCalc?b.find("formitem"):b.items(),d.filter("formitem").each(function(a){var b=a.items()[0],c=b.getEl().clientWidth;e=c>e?c:e,f.push(b)}),c=b.settings.labelGap||0,a=f.length;a--;)f[a].settings.minWidth=e+c}var b=this;b._super(),b.on("show",a),a()}}),Vd=Ud.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var a=this,b=a._layout,c=a.classPrefix;return a.preRender(),b.preRender(a),'<fieldset id="'+a._id+'" class="'+a.classes+'" hidefocus="1" tabindex="-1">'+(a.settings.title?'<legend id="'+a._id+'-title" class="'+c+'fieldset-title">'+a.settings.title+"</legend>":"")+'<div id="'+a._id+'-body" class="'+a.bodyClasses+'">'+(a.settings.html||"")+b.renderHtml(a)+"</div></fieldset>"}}),Wd=0,Xd=function(a){var b=new Date,c=b.getTime(),d=Math.floor(1e9*Math.random());return Wd++,a+"_"+d+Wd+String(c)},Yd={generate:Xd},Zd=function(a,b){var c=b||document,d=c.createElement("div");if(d.innerHTML=a,!d.hasChildNodes()||d.childNodes.length>1)throw console.error("HTML does not have a single root node",a),"HTML must have a single root node";return ae(d.childNodes[0])},$d=function(a,b){var c=b||document,d=c.createElement(a);return ae(d)},_d=function(a,b){var c=b||document,d=c.createTextNode(a);return ae(d)},ae=function(a){if(null===a||void 0===a)throw new Error("Node cannot be null or undefined");return{dom:Fa.constant(a)}},be=function(a,b,c){return Ma.from(a.dom().elementFromPoint(b,c)).map(ae)},ce={fromHtml:Zd,fromTag:$d,fromText:_d,fromDom:ae,fromPoint:be},de=function(a){var b,c=!1;return function(){return c||(c=!0,b=a.apply(null,arguments)),b}},ee={cached:de},fe={ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12},ge=function(a){var b=a.dom().nodeName;return b.toLowerCase()},he=function(a){return a.dom().nodeType},ie=function(a){return a.dom().nodeValue},je=function(a){return function(b){return he(b)===a}},ke=function(a){return he(a)===fe.COMMENT||"#comment"===ge(a)},le=je(fe.ELEMENT),me=je(fe.TEXT),ne=je(fe.DOCUMENT),oe={name:ge,type:he,value:ie,isElement:le,isText:me,isDocument:ne,isComment:ke},pe=function(a){var b=oe.isText(a)?a.dom().parentNode:a.dom();return void 0!==b&&null!==b&&b.ownerDocument.body.contains(b)},qe=ee.cached(function(){return re(ce.fromDom(document))}),re=function(a){var b=a.dom().body;if(null===b||void 0===b)throw"Body is not available yet";return ce.fromDom(b)},se={body:qe,getBody:re,inBody:pe},te=function(){var a=Object.keys,b=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};return void 0===a?b:a}(),ue=function(a,b){for(var c=te(a),d=0,e=c.length;d<e;d++){var f=c[d],g=a[f];b(g,f,a)}},ve=function(a,b){return we(a,function(a,c,d){return{k:c,v:b(a,c,d)}})},we=function(a,b){var c={};return ue(a,function(d,e){var f=b(d,e,a);c[f.k]=f.v}),c},xe=function(a,b){var c={},d={};return ue(a,function(a,e){var f=b(a,e)?c:d;f[e]=a}),{t:c,f:d}},ye=function(a,b){var c=[];return ue(a,function(a,d){c.push(b(a,d))}),c},ze=function(a,b){for(var c=te(a),d=0,e=c.length;d<e;d++){var f=c[d],g=a[f];if(b(g,f,a))return Ma.some(g)}return Ma.none()},Ae=function(a){return ye(a,function(a){return a})},Be=function(a){return Ae(a).length},Ce={bifilter:xe,each:ue,map:ve,mapToArray:ye,tupleMap:we,find:ze,keys:te,values:Ae,size:Be},De=function(a){return a.slice(0).sort()},Ee=function(a,b){throw new Error("All required keys ("+De(a).join(", ")+") were not specified. Specified keys were: "+De(b).join(", ")+".")},Fe=function(a){throw new Error("Unsupported keys for object: "+De(a).join(", "))},Ge=function(a,b){if(!db.isArray(b))throw new Error("The "+a+" fields must be an array. Was: "+b+".");Jb.each(b,function(b){if(!db.isString(b))throw new Error("The value "+b+" in the "+a+" fields was not a string.")})},He=function(a,b){throw new Error("All values need to be of type: "+b+". Keys ("+De(a).join(", ")+") were not.")},Ie=function(a){var b=De(a),c=Jb.find(b,function(a,c){return c<b.length-1&&a===b[c+1]});c.each(function(a){throw new Error("The field: "+a+" occurs more than once in the combined fields: ["+b.join(", ")+"].")})},Je={sort:De,reqMessage:Ee,unsuppMessage:Fe,validateStrArr:Ge,invalidTypeMessage:He,checkDupes:Ie},Ke={immutable:B,immutableBag:C},Le=function(a,b){var c=[],d=function(a){return c.push(a),b(a)},e=b(a);do e=e.bind(d);while(e.isSome());return c},Me={toArray:Le},Ne="undefined"!=typeof window?window:Function("return this;")(),Oe=function(a,b){for(var c=void 0!==b&&null!==b?b:Ne,d=0;d<a.length&&void 0!==c&&null!==c;++d)c=c[a[d]];return c},Pe=function(a,b){var c=a.split(".");return Oe(c,b)},Qe=function(a,b){return void 0!==a[b]&&null!==a[b]||(a[b]={}),a[b]},Re=function(a,b){for(var c=void 0!==b?b:Ne,d=0;d<a.length;++d)c=Qe(c,a[d]);return c},Se=function(a,b){var c=a.split(".");return Re(c,b)},Te={path:Oe,resolve:Pe,forge:Re,namespace:Se},Ue=function(a,b){return Te.resolve(a,b)},Ve=function(a,b){var c=Ue(a,b);if(void 0===c||null===c)throw a+" not available on this browser";return c},We={getOrDie:Ve},Xe=function(){var a=We.getOrDie("Node");return a},Ye=function(a,b,c){return 0!==(a.compareDocumentPosition(b)&c)},Ze=function(a,b){return Ye(a,b,Xe().DOCUMENT_POSITION_PRECEDING)},$e=function(a,b){return Ye(a,b,Xe().DOCUMENT_POSITION_CONTAINED_BY)},_e={documentPositionPreceding:Ze,documentPositionContainedBy:$e},af=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.test(b))return d}},bf=function(a,b){var c=af(a,b);if(!c)return{major:0,minor:0};var d=function(a){return Number(b.replace(c,"$"+a))};return ef(d(1),d(2))},cf=function(a,b){var c=String(b).toLowerCase();return 0===a.length?df():bf(a,c)},df=function(){return ef(0,0)},ef=function(a,b){return{major:a,minor:b}},ff={nu:ef,detect:cf,unknown:df},gf="Edge",hf="Chrome",jf="IE",kf="Opera",lf="Firefox",mf="Safari",nf=function(a,b){return function(){return b===a}},of=function(){return pf({current:void 0,version:ff.unknown()})},pf=function(a){var b=a.current,c=a.version;return{current:b,version:c,isEdge:nf(gf,b),isChrome:nf(hf,b),isIE:nf(jf,b),isOpera:nf(kf,b),isFirefox:nf(lf,b),isSafari:nf(mf,b)}},qf={unknown:of,nu:pf,edge:Fa.constant(gf),chrome:Fa.constant(hf),ie:Fa.constant(jf),opera:Fa.constant(kf),firefox:Fa.constant(lf),safari:Fa.constant(mf)},rf="Windows",sf="iOS",tf="Android",uf="Linux",vf="OSX",wf="Solaris",xf="FreeBSD",yf=function(a,b){return function(){return b===a}},zf=function(){return Af({current:void 0,version:ff.unknown()})},Af=function(a){var b=a.current,c=a.version;return{current:b,version:c,isWindows:yf(rf,b),isiOS:yf(sf,b),isAndroid:yf(tf,b),isOSX:yf(vf,b),isLinux:yf(uf,b),isSolaris:yf(wf,b),isFreeBSD:yf(xf,b)}},Bf={unknown:zf,nu:Af,windows:Fa.constant(rf),ios:Fa.constant(sf),android:Fa.constant(tf),linux:Fa.constant(uf),osx:Fa.constant(vf),solaris:Fa.constant(wf),freebsd:Fa.constant(xf)},Cf=function(a,b){var c=String(b).toLowerCase();return Jb.find(a,function(a){return a.search(c)})},Df=function(a,b){return Cf(a,b).map(function(a){var c=ff.detect(a.versionRegexes,b);return{current:a.name,version:c}})},Ef=function(a,b){return Cf(a,b).map(function(a){var c=ff.detect(a.versionRegexes,b);return{current:a.name,version:c}})},Ff={detectBrowser:Df,detectOs:Ef},Gf=function(a,b){return b+a},Hf=function(a,b){return a+b},If=function(a,b){return a.substring(b)},Jf=function(a,b){return a.substring(0,a.length-b)},Kf={addToStart:Gf,addToEnd:Hf,removeFromStart:If,removeFromEnd:Jf},Lf=function(a,b){return a.substr(0,b)},Mf=function(a,b){return a.substr(a.length-b,a.length)},Nf=function(a){return""===a?Ma.none():Ma.some(a.substr(0,1))},Of=function(a){return""===a?Ma.none():Ma.some(a.substring(1))},Pf={first:Lf,last:Mf,head:Nf,tail:Of},Qf=function(a,b,c){if(""===b)return!0;if(a.length<b.length)return!1;var d=a.substr(c,c+b.length);return d===b},Rf=function(a,b){var c=function(a){var b=typeof a;return"string"===b||"number"===b};return a.replace(/\${([^{}]*)}/g,function(a,d){var e=b[d];return c(e)?e:a})},Sf=function(a,b){return Yf(a,b)?Kf.removeFromStart(a,b.length):a},Tf=function(a,b){return Zf(a,b)?Kf.removeFromEnd(a,b.length):a},Uf=function(a,b){return Yf(a,b)?a:Kf.addToStart(a,b)},Vf=function(a,b){return Zf(a,b)?a:Kf.addToEnd(a,b)},Wf=function(a,b){return a.indexOf(b)!==-1},Xf=function(a){return Pf.head(a).bind(function(b){return Pf.tail(a).map(function(a){return b.toUpperCase()+a})}).getOr(a)},Yf=function(a,b){return Qf(a,b,0)},Zf=function(a,b){return Qf(a,b,a.length-b.length)},$f=function(a){return a.replace(/^\s+|\s+$/g,"")},_f=function(a){return a.replace(/^\s+/g,"")},ag=function(a){return a.replace(/\s+$/g,"")},bg={supplant:Rf,startsWith:Yf,removeLeading:Sf,removeTrailing:Tf,ensureLeading:Uf,ensureTrailing:Vf,endsWith:Zf,contains:Wf,trim:$f,lTrim:_f,rTrim:ag,capitalize:Xf},cg=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,dg=function(a){return function(b){return bg.contains(b,a)}},eg=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(a){var b=bg.contains(a,"edge/")&&bg.contains(a,"chrome")&&bg.contains(a,"safari")&&bg.contains(a,"applewebkit");return b}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,cg],search:function(a){return bg.contains(a,"chrome")&&!bg.contains(a,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(a){return bg.contains(a,"msie")||bg.contains(a,"trident")}},{name:"Opera",versionRegexes:[cg,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:dg("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:dg("firefox")},{name:"Safari",versionRegexes:[cg,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(a){return(bg.contains(a,"safari")||bg.contains(a,"mobile/"))&&bg.contains(a,"applewebkit")}}],fg=[{name:"Windows",search:dg("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(a){return bg.contains(a,"iphone")||bg.contains(a,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:dg("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:dg("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:dg("linux"),versionRegexes:[]},{name:"Solaris",search:dg("sunos"),versionRegexes:[]},{name:"FreeBSD",search:dg("freebsd"),versionRegexes:[]}],gg={browsers:Fa.constant(eg),oses:Fa.constant(fg)},hg=function(a){var b=gg.browsers(),c=gg.oses(),d=Ff.detectBrowser(b,a).fold(qf.unknown,qf.nu),e=Ff.detectOs(c,a).fold(Bf.unknown,Bf.nu),f=D(e,d,a);return{browser:d,os:e,deviceType:f}},ig={detect:hg},jg=ee.cached(function(){var a=navigator.userAgent;return ig.detect(a)}),kg={detect:jg},lg=fe.ELEMENT,mg=fe.DOCUMENT,ng=function(a,b){var c=a.dom();if(c.nodeType!==lg)return!1;if(void 0!==c.matches)return c.matches(b);if(void 0!==c.msMatchesSelector)return c.msMatchesSelector(b);if(void 0!==c.webkitMatchesSelector)return c.webkitMatchesSelector(b);if(void 0!==c.mozMatchesSelector)return c.mozMatchesSelector(b);throw new Error("Browser lacks native selectors")},og=function(a){return a.nodeType!==lg&&a.nodeType!==mg||0===a.childElementCount},pg=function(a,b){var c=void 0===b?document:b.dom();return og(c)?[]:Jb.map(c.querySelectorAll(a),ce.fromDom)},qg=function(a,b){var c=void 0===b?document:b.dom();return og(c)?Ma.none():Ma.from(c.querySelector(a)).map(ce.fromDom)},rg={all:pg,is:ng,one:qg},sg=function(a,b){return a.dom()===b.dom()},tg=function(a,b){return a.dom().isEqualNode(b.dom())},ug=function(a,b){return Jb.exists(b,Fa.curry(sg,a))},vg=function(a,b){var c=a.dom(),d=b.dom();return c!==d&&c.contains(d)},wg=function(a,b){return _e.documentPositionContainedBy(a.dom(),b.dom())},xg=kg.detect().browser,yg=xg.isIE()?wg:vg,zg={eq:sg,isEqualNode:tg,member:ug,contains:yg,is:rg.is},Ag=function(a){return ce.fromDom(a.dom().ownerDocument)},Bg=function(a){var b=Ag(a);return ce.fromDom(b.dom().documentElement)},Cg=function(a){var b=a.dom(),c=b.ownerDocument.defaultView;return ce.fromDom(c)},Dg=function(a){var b=a.dom();return Ma.from(b.parentNode).map(ce.fromDom)},Eg=function(a){return Dg(a).bind(function(b){var c=Mg(b);return Jb.findIndex(c,function(b){return zg.eq(a,b)})})},Fg=function(a,b){for(var c=db.isFunction(b)?b:Fa.constant(!1),d=a.dom(),e=[];null!==d.parentNode&&void 0!==d.parentNode;){var f=d.parentNode,g=ce.fromDom(f);if(e.push(g),c(g)===!0)break;d=f}return e},Gg=function(a){var b=function(b){return Jb.filter(b,function(b){return!zg.eq(a,b)})};return Dg(a).map(Mg).map(b).getOr([])},Hg=function(a){var b=a.dom();return Ma.from(b.offsetParent).map(ce.fromDom)},Ig=function(a){var b=a.dom();return Ma.from(b.previousSibling).map(ce.fromDom)},Jg=function(a){var b=a.dom();return Ma.from(b.nextSibling).map(ce.fromDom)},Kg=function(a){return Jb.reverse(Me.toArray(a,Ig))},Lg=function(a){return Me.toArray(a,Jg)},Mg=function(a){var b=a.dom();return Jb.map(b.childNodes,ce.fromDom)},Ng=function(a,b){var c=a.dom().childNodes;return Ma.from(c[b]).map(ce.fromDom)},Og=function(a){return Ng(a,0)},Pg=function(a){return Ng(a,a.dom().childNodes.length-1)},Qg=function(a){return a.dom().childNodes.length},Rg=function(a){return a.dom().hasChildNodes()},Sg=Ke.immutable("element","offset"),Tg=function(a,b){var c=Mg(a);return c.length>0&&b<c.length?Sg(c[b],0):Sg(a,b)},Ug={owner:Ag,defaultView:Cg,documentElement:Bg,parent:Dg,findIndex:Eg,parents:Fg,siblings:Gg,prevSibling:Ig,offsetParent:Hg,prevSiblings:Kg,nextSibling:Jg,nextSiblings:Lg,children:Mg,child:Ng,firstChild:Og,lastChild:Pg,childNodesCount:Qg,hasChildNodes:Rg,leaf:Tg},Vg=function(a){return Zg(se.body(),a)},Wg=function(a,b,c){return Jb.filter(Ug.parents(a,c),b)},Xg=function(a,b){return Jb.filter(Ug.siblings(a),b)},Yg=function(a,b){return Jb.filter(Ug.children(a),b)},Zg=function(a,b){var c=[];return Jb.each(Ug.children(a),function(a){b(a)&&(c=c.concat([a])),c=c.concat(Zg(a,b))}),c},$g={all:Vg,ancestors:Wg,siblings:Xg,children:Yg,descendants:Zg},_g=function(a){return rg.all(a)},ah=function(a,b,c){return $g.ancestors(a,function(a){return rg.is(a,b)},c)},bh=function(a,b){return $g.siblings(a,function(a){return rg.is(a,b)})},ch=function(a,b){return $g.children(a,function(a){return rg.is(a,b)})},dh=function(a,b){return rg.all(b,a)},eh={all:_g,ancestors:ah,siblings:bh,children:ch,descendants:dh},fh=N.trim,gh=function(a){return function(b){if(b&&1===b.nodeType){if(b.contentEditable===a)return!0;if(b.getAttribute("data-mce-contenteditable")===a)return!0}return!1}},hh=gh("true"),ih=gh("false"),jh=function(a,b,c,d,e){return{type:a,title:b,url:c,level:d,attach:e}},kh=function(a){for(;a=a.parentNode;){var b=a.contentEditable;if(b&&"inherit"!==b)return hh(a)}return!1},lh=function(a,b){return Jb.map(eh.descendants(ce.fromDom(b),a),function(a){return a.dom()})},mh=function(a){return a.innerText||a.textContent},nh=function(a){return a.id?a.id:Yd.generate("h")},oh=function(a){return a&&"A"===a.nodeName&&(a.id||a.name)},ph=function(a){return oh(a)&&rh(a)},qh=function(a){return a&&/^(H[1-6])$/.test(a.nodeName)},rh=function(a){return kh(a)&&!ih(a)},sh=function(a){return qh(a)&&rh(a)},th=function(a){return qh(a)?parseInt(a.nodeName.substr(1),10):0},uh=function(a){var b=nh(a),c=function(){a.id=b};return jh("header",mh(a),"#"+b,th(a),c)},vh=function(a){var b=a.id||a.name,c=mh(a);return jh("anchor",c?c:"#"+b,"#"+b,0,Fa.noop)},wh=function(a){return Jb.map(Jb.filter(a,sh),uh)},xh=function(a){return Jb.map(Jb.filter(a,ph),vh)},yh=function(a){var b=lh("h1,h2,h3,h4,h5,h6,a:not([href])",a);return b},zh=function(a){return fh(a.title).length>0},Ah=function(a){var b=yh(a);return Jb.filter(wh(b).concat(xh(b)),zh)},Bh={find:Ah},Ch=function(){return window.tinymce?window.tinymce.activeEditor:M.activeEditor},Dh={},Eh=5,Fh=function(){Dh={}},Gh=function(a){return{title:a.title,value:{title:{raw:a.title},url:a.url,attach:a.attach}}},Hh=function(a){return N.map(a,Gh)},Ih=function(a,b){return{title:a,value:{title:a,url:b,attach:Fa.noop}}},Jh=function(a,b){var c=Jb.exists(b,function(b){return b.url===a});return!c},Kh=function(a,b,c){var d=b in a?a[b]:c;return d===!1?null:d},Lh=function(a,b,c,d){var e={title:"-"},f=function(a){var d=a.hasOwnProperty(c)?a[c]:[],e=Jb.filter(d,function(a){return Jh(a,b)});return N.map(e,function(a){return{title:a,value:{title:a,url:a,attach:Fa.noop}}})},g=function(a){var c=Jb.filter(b,function(b){return b.type===a});return Hh(c)},h=function(){var a=g("anchor"),b=Kh(d,"anchor_top","#top"),c=Kh(d,"anchor_bottom","#bottom");return null!==b&&a.unshift(Ih("<top>",b)),null!==c&&a.push(Ih("<bottom>",c)),a},i=function(a){return Jb.foldl(a,function(a,b){var c=0===a.length||0===b.length;return c?a.concat(b):a.concat(e,b)},[])};return d.typeahead_urls===!1?[]:"file"===c?i([Nh(a,f(Dh)),Nh(a,g("header")),Nh(a,h())]):Nh(a,f(Dh))},Mh=function(a,b){var c=Dh[b];/^https?/.test(a)&&(c?Jb.indexOf(c,a).isNone()&&(Dh[b]=c.slice(0,Eh).concat(a)):Dh[b]=[a])},Nh=function(a,b){var c=a.toLowerCase(),d=N.grep(b,function(a){return a.title.toLowerCase().indexOf(c)!==-1});return 1===d.length&&d[0].title===a?[]:d},Oh=function(a){var b=a.title;return b.raw?b.raw:b},Ph=function(a,b,c,d){var e=function(e){var f=Bh.find(c),g=Lh(e,f,d,b);a.showAutoComplete(g,e)};a.on("autocomplete",function(){e(a.value())}),a.on("selectitem",function(b){var c=b.value;a.value(c.url);var e=Oh(c);"image"===d?a.fire("change",{meta:{alt:e,attach:c.attach}}):a.fire("change",{meta:{text:e,attach:c.attach}}),a.focus()}),a.on("click",function(b){0===a.value().length&&"INPUT"===b.target.nodeName&&e("")}),a.on("PostRender",function(){a.getRoot().on("submit",function(b){b.isDefaultPrevented()||Mh(a.value(),d)})})},Qh=function(a){var b=a.status,c=a.message;return"valid"===b?{status:"ok",message:c}:"unknown"===b?{status:"warn",message:c}:"invalid"===b?{status:"warn",message:c}:{status:"none",message:""}},Rh=function(a,b,c){var d=b.filepicker_validator_handler;if(d){var e=function(b){return 0===b.length?void a.statusLevel("none"):void d({url:b,type:c},function(b){var c=Qh(b);a.statusMessage(c.message),a.statusLevel(c.status)})};a.state.on("change:value",function(a){e(a.value)})}},Sh=Jd.extend({Statics:{clearHistory:Fh},init:function(a){var b,c,d,e=this,f=Ch(),g=f.settings,h=a.filetype;a.spellcheck=!1,d=g.file_picker_types||g.file_browser_callback_types,d&&(d=N.makeMap(d,/[, ]/)),d&&!d[h]||(c=g.file_picker_callback,!c||d&&!d[h]?(c=g.file_browser_callback,!c||d&&!d[h]||(b=function(){c(e.getEl("inp").id,e.value(),h,window)})):b=function(){var a=e.fire("beforecall").meta;a=N.extend({filetype:h},a),c.call(f,function(a,b){e.value(a).fire("change",{meta:b})},e.value(),a)}),b&&(a.icon="browse",a.onaction=b),e._super(a),e.classes.add("filepicker"),Ph(e,g,f.getBody(),h),Rh(e,g,h)}}),Th=Dd.extend({recalc:function(a){var b=a.layoutRect(),c=a.paddingBox;a.items().filter(":visible").each(function(a){a.layoutRect({x:c.left,y:c.top,w:b.innerW-c.right-c.left,
h:b.innerH-c.top-c.bottom}),a.recalc&&a.recalc()})}}),Uh=Dd.extend({recalc:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N=[],O=Math.max,P=Math.min;for(d=a.items().filter(":visible"),e=a.layoutRect(),f=a.paddingBox,g=a.settings,m=a.isRtl()?g.direction||"row-reversed":g.direction,h=g.align,i=a.isRtl()?g.pack||"end":g.pack,j=g.spacing||0,"row-reversed"!==m&&"column-reverse"!==m||(d=d.set(d.toArray().reverse()),m=m.split("-")[0]),"column"===m?(z="y",x="h",y="minH",A="maxH",C="innerH",B="top",D="deltaH",E="contentH",J="left",H="w",F="x",G="innerW",I="minW",K="right",L="deltaW",M="contentW"):(z="x",x="w",y="minW",A="maxW",C="innerW",B="left",D="deltaW",E="contentW",J="top",H="h",F="y",G="innerH",I="minH",K="bottom",L="deltaH",M="contentH"),l=e[C]-f[B]-f[B],w=k=0,b=0,c=d.length;b<c;b++)n=d[b],o=n.layoutRect(),p=n.settings,q=p.flex,l-=b<c-1?j:0,q>0&&(k+=q,o[A]&&N.push(n),o.flex=q),l-=o[y],r=f[J]+o[I]+f[K],r>w&&(w=r);if(u={},l<0?u[y]=e[y]-l+e[D]:u[y]=e[C]-l+e[D],u[I]=w+e[L],u[E]=e[C]-l,u[M]=w,u.minW=P(u.minW,e.maxW),u.minH=P(u.minH,e.maxH),u.minW=O(u.minW,e.startMinWidth),u.minH=O(u.minH,e.startMinHeight),!e.autoResize||u.minW===e.minW&&u.minH===e.minH){for(t=l/k,b=0,c=N.length;b<c;b++)n=N[b],o=n.layoutRect(),s=o[A],r=o[y]+o.flex*t,r>s?(l-=o[A]-o[y],k-=o.flex,o.flex=0,o.maxFlexSize=s):o.maxFlexSize=0;for(t=l/k,v=f[B],u={},0===k&&("end"===i?v=l+f[B]:"center"===i?(v=Math.round(e[C]/2-(e[C]-l)/2)+f[B],v<0&&(v=f[B])):"justify"===i&&(v=f[B],j=Math.floor(l/(d.length-1)))),u[F]=f[J],b=0,c=d.length;b<c;b++)n=d[b],o=n.layoutRect(),r=o.maxFlexSize||o[y],"center"===h?u[F]=Math.round(e[G]/2-o[H]/2):"stretch"===h?(u[H]=O(o[I]||0,e[G]-f[J]-f[K]),u[F]=f[J]):"end"===h&&(u[F]=e[G]-o[H]-f.top),o.flex>0&&(r+=o.flex*t),u[x]=r,u[z]=v,n.layoutRect(u),n.recalc&&n.recalc(),v+=r+j}else if(u.w=u.minW,u.h=u.minH,a.layoutRect(u),this.recalc(a),null===a._lastRect){var Q=a.parent();Q&&(Q._lastRect=null,Q.recalc())}}}),Vh=Cd.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(a){a.items().filter(":visible").each(function(a){a.recalc&&a.recalc()})},isNative:function(){return!0}}),Wh=function(a){return _h(se.body(),a)},Xh=function(a,b,c){for(var d=a.dom(),e=db.isFunction(c)?c:Fa.constant(!1);d.parentNode;){d=d.parentNode;var f=ce.fromDom(d);if(b(f))return Ma.some(f);if(e(f))break}return Ma.none()},Yh=function(a,b,c){var d=function(a){return b(a)};return E(d,Xh,a,b,c)},Zh=function(a,b){var c=a.dom();return c.parentNode?$h(ce.fromDom(c.parentNode),function(c){return!zg.eq(a,c)&&b(c)}):Ma.none()},$h=function(a,b){var c=Jb.find(a.dom().childNodes,Fa.compose(b,ce.fromDom));return c.map(ce.fromDom)},_h=function(a,b){var c=function(a){for(var d=0;d<a.childNodes.length;d++){if(b(ce.fromDom(a.childNodes[d])))return Ma.some(ce.fromDom(a.childNodes[d]));var e=c(a.childNodes[d]);if(e.isSome())return e}return Ma.none()};return c(a.dom())},ai={first:Wh,ancestor:Xh,closest:Yh,sibling:Zh,child:$h,descendant:_h},bi=function(a){return rg.one(a)},ci=function(a,b,c){return ai.ancestor(a,function(a){return rg.is(a,b)},c)},di=function(a,b){return ai.sibling(a,function(a){return rg.is(a,b)})},ei=function(a,b){return ai.child(a,function(a){return rg.is(a,b)})},fi=function(a,b){return rg.one(b,a)},gi=function(a,b,c){return E(rg.is,ci,a,b,c)},hi={first:bi,ancestor:ci,sibling:di,child:ei,descendant:fi,closest:gi},ii=function(a,b){return function(){a.execCommand("mceToggleFormat",!1,b)}},ji=function(a,b,c){var d=function(a){c(a,b)};a.formatter?a.formatter.formatChanged(b,d):a.on("init",function(){a.formatter.formatChanged(b,d)})},ki=function(a,b){return function(c){ji(a,b,function(a){c.control.active(a)})}},li=function(a){var b=["alignleft","aligncenter","alignright","alignjustify"],c="alignleft",d=[{text:"Left",icon:"alignleft",onclick:ii(a,"alignleft")},{text:"Center",icon:"aligncenter",onclick:ii(a,"aligncenter")},{text:"Right",icon:"alignright",onclick:ii(a,"alignright")},{text:"Justify",icon:"alignjustify",onclick:ii(a,"alignjustify")}];a.addMenuItem("align",{text:"Align",menu:d}),a.addButton("align",{type:"menubutton",icon:c,menu:d,onShowMenu:function(c){var d=c.control.menu;N.each(b,function(b,c){d.items().eq(c).each(function(c){return c.active(a.formatter.match(b))})})},onPostRender:function(d){var e=d.control;N.each(b,function(b,d){ji(a,b,function(a){e.icon(c),a&&e.icon(b)})})}}),N.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(b,c){a.addButton(c,{active:!1,tooltip:b[0],cmd:b[1],onPostRender:ki(a,c)})})},mi={register:li},ni=function(a){return a?a.split(",")[0]:""},oi=function(a,b){var c,d=b?b.toLowerCase():"";return N.each(a,function(a){a.value.toLowerCase()===d&&(c=a.value)}),N.each(a,function(a){c||ni(a.value).toLowerCase()!==ni(d).toLowerCase()||(c=a.value)}),c},pi=function(a,b){return function(){var c=this;a.on("init nodeChange",function(d){var e=a.queryCommandValue("FontName"),f=oi(b,e);c.value(f?f:null),!f&&e&&c.text(ni(e))})}},qi=function(a){a=a.replace(/;$/,"").split(";");for(var b=a.length;b--;)a[b]=a[b].split("=");return a},ri=function(a){var b="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",c=qi(a.settings.font_formats||b);return N.map(c,function(a){return{text:{raw:a[0]},value:a[1],textStyle:a[1].indexOf("dings")===-1?"font-family:"+a[1]:""}})},si=function(a){a.addButton("fontselect",function(){var b=ri(a);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:b,fixedWidth:!0,onPostRender:pi(a,b),onselect:function(b){b.control.settings.value&&a.execCommand("FontName",!1,b.control.settings.value)}}})},ti=function(a){si(a)},ui={register:ti},vi=function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c},wi=function(a,b){return/[0-9.]+px$/.test(a)?vi(72*parseInt(a,10)/96,b||0)+"pt":a},xi=function(a,b,c){var d;return N.each(a,function(a){a.value===c?d=c:a.value===b&&(d=b)}),d},yi=function(a,b){return function(){var c=this;a.on("init nodeChange",function(d){var e,f,g,h;if(e=a.queryCommandValue("FontSize"))for(g=3;!h&&g>=0;g--)f=wi(e,g),h=xi(b,f,e);c.value(h?h:null),h||c.text(f)})}},zi=function(a){var b="8pt 10pt 12pt 14pt 18pt 24pt 36pt",c=a.settings.fontsize_formats||b;return N.map(c.split(" "),function(a){var b=a,c=a,d=a.split("=");return d.length>1&&(b=d[0],c=d[1]),{text:b,value:c}})},Ai=function(a){a.addButton("fontsizeselect",function(){var b=zi(a);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:b,fixedWidth:!0,onPostRender:yi(a,b),onclick:function(b){b.control.settings.value&&a.execCommand("FontSize",!1,b.control.settings.value)}}})},Bi=function(a){Ai(a)},Ci={register:Bi},Di=function(a,b){var c=b.length;return N.each(b,function(b){b.menu&&(b.hidden=0===Di(a,b.menu));var d=b.format;d&&(b.hidden=!a.formatter.canApply(d)),b.hidden&&c--}),c},Ei=function(a,b){var c=b.items().length;return b.items().each(function(b){b.menu&&b.visible(Ei(a,b.menu)>0),!b.menu&&b.settings.menu&&b.visible(Di(a,b.settings.menu)>0);var d=b.settings.format;d&&b.visible(a.formatter.canApply(d)),b.visible()||c--}),c},Fi=function(a){var b=0,c=[],d=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],e=function(a){var d=[];if(a)return N.each(a,function(a){var f={text:a.title,icon:a.icon};if(a.items)f.menu=e(a.items);else{var g=a.format||"custom"+b++;a.format||(a.name=g,c.push(a)),f.format=g,f.cmd=a.cmd}d.push(f)}),d},f=function(){var b;return b=e(a.settings.style_formats_merge?a.settings.style_formats?d.concat(a.settings.style_formats):d:a.settings.style_formats||d)};return a.on("init",function(){N.each(c,function(b){a.formatter.register(b.name,b)})}),{type:"menu",items:f(),onPostRender:function(b){a.fire("renderFormatsMenu",{control:b.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return a.formatter.getCssText(this.settings.format)},onPostRender:function(){var b=this;b.parent().on("show",function(){var c,d;c=b.settings.format,c&&(b.disabled(!a.formatter.canApply(c)),b.active(a.formatter.match(c))),d=b.settings.cmd,d&&b.active(a.queryCommandState(d))})},onclick:function(){this.settings.format&&ii(a,this.settings.format)(),this.settings.cmd&&a.execCommand(this.settings.cmd)}}}},Gi=function(a,b){a.addMenuItem("formats",{text:"Formats",menu:b})},Hi=function(a,b){a.addButton("styleselect",{type:"menubutton",text:"Formats",menu:b,onShowMenu:function(){a.settings.style_formats_autohide&&Ei(a,this.menu)}})},Ii=function(a){var b=Fi(a);Gi(a,b),Hi(a,b)},Ji={register:Ii},Ki="Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",Li=function(a){a=a.replace(/;$/,"").split(";");for(var b=a.length;b--;)a[b]=a[b].split("=");return a},Mi=function(a,b,c){return function(){var d=this;a.on("nodeChange",function(e){var f=a.formatter,g=null;N.each(e.parents,function(a){if(N.each(b,function(b){if(c?f.matchNode(a,c,{value:b.value})&&(g=b.value):f.matchNode(a,b.value)&&(g=b.value),g)return!1}),g)return!1}),d.value(g)})}},Ni=function(a,b){return function(){var c=[];return N.each(b,function(b){c.push({text:b[0],value:b[1],textStyle:function(){return a.formatter.getCssText(b[1])}})}),{type:"listbox",text:b[0][0],values:c,fixedWidth:!0,onselect:function(b){if(b.control){var c=b.control.value();ii(a,c)()}},onPostRender:Mi(a,c)}}},Oi=function(a,b){return N.map(b,function(b){return{text:b[0],onclick:ii(a,b[1]),textStyle:function(){return a.formatter.getCssText(b[1])}}})},Pi=function(a){var b=Li(a.settings.block_formats||Ki);a.addMenuItem("blockformats",{text:"Blocks",menu:Oi(a,b)}),a.addButton("formatselect",Ni(a,b))},Qi={register:Pi},Ri=function(a,b){var c,d;if("string"==typeof b)d=b.split(" ");else if(N.isArray(b))return Jb.flatten(N.map(b,function(b){return Ri(a,b)}));return c=N.grep(d,function(b){return"|"===b||b in a.menuItems}),N.map(c,function(b){return"|"===b?{text:"-"}:a.menuItems[b]})},Si=function(a){return a&&"-"===a.text},Ti=function(a){var b=Jb.filter(a,function(a,b,c){return!Si(a)||!Si(c[b-1])});return Jb.filter(b,function(a,b,c){return!Si(a)||b>0&&b<c.length-1})},Ui=function(a,b){var c=[{text:"-"}],d=N.grep(a.menuItems,function(a){return a.context===b});return N.each(d,function(a){"before"===a.separator&&c.push({text:"|"}),a.prependToContext?c.unshift(a):c.push(a),"after"===a.separator&&c.push({text:"|"})}),c},Vi=function(a){var b=a.settings.insert_button_items;return Ti(b?Ri(a,b):Ui(a,"insert"))},Wi=function(a){a.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(Vi(a)),this.menu.renderNew()}})},Xi=function(a){Wi(a)},Yi={register:Xi},Zi=function(a){N.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(b,c){a.addButton(c,{active:!1,tooltip:b,onPostRender:ki(a,c),onclick:ii(a,c)})})},$i=function(a){N.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(b,c){a.addButton(c,{tooltip:b[0],cmd:b[1]})})},_i=function(a){N.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(b,c){a.addButton(c,{active:!1,tooltip:b[0],cmd:b[1],onPostRender:ki(a,c)})})},aj=function(a){Zi(a),$i(a),_i(a)},bj=function(a){N.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(b,c){a.addMenuItem(c,{text:b[0],icon:c,shortcut:b[2],cmd:b[1]})}),a.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:ii(a,"code")})},cj=function(a){aj(a),bj(a)},dj={register:cj},ej=function(a,b){return function(){var c=this,d=function(){var c="redo"===b?"hasRedo":"hasUndo";return!!a.undoManager&&a.undoManager[c]()};c.disabled(!d()),a.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){c.disabled(a.readonly||!d())})}},fj=function(a){a.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:ej(a,"undo"),cmd:"undo"}),a.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:ej(a,"redo"),cmd:"redo"})},gj=function(a){a.addButton("undo",{tooltip:"Undo",onPostRender:ej(a,"undo"),cmd:"undo"}),a.addButton("redo",{tooltip:"Redo",onPostRender:ej(a,"redo"),cmd:"redo"})},hj=function(a){fj(a),gj(a)},ij={register:hj},jj=function(a){return function(){var b=this;a.on("VisualAid",function(a){b.active(a.hasVisual)}),b.active(a.hasVisual)}},kj=function(a){a.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:jj(a),cmd:"mceToggleVisualAid"})},lj=function(a){kj(a)},mj={register:lj},nj=function(){sd.tooltips=!Zb.iOS,ad.translate=function(a){return M.translate(a)}},oj=function(a){a.settings.ui_container&&(Zb.container=hi.descendant(ce.fromDom(document.body),a.settings.ui_container).fold(Fa.constant(null),function(a){return a.dom()}))},pj=function(a){a.rtl&&(ad.rtl=!0)},qj=function(a){a.on("mousedown",function(){jd.hideAll()})},rj=function(a){pj(a),qj(a),oj(a),nj(),Qi.register(a),mi.register(a),dj.register(a),ij.register(a),Ci.register(a),ui.register(a),Ji.register(a),mj.register(a),Yi.register(a)},sj={setup:rj},tj=Dd.extend({recalc:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=[],F=[];b=a.settings,e=a.items().filter(":visible"),f=a.layoutRect(),d=b.columns||Math.ceil(Math.sqrt(e.length)),c=Math.ceil(e.length/d),s=b.spacingH||b.spacing||0,t=b.spacingV||b.spacing||0,u=b.alignH||b.align,v=b.alignV||b.align,q=a.paddingBox,C="reverseRows"in b?b.reverseRows:a.isRtl(),u&&"string"==typeof u&&(u=[u]),v&&"string"==typeof v&&(v=[v]);for(l=0;l<d;l++)E.push(0);for(m=0;m<c;m++)F.push(0);for(m=0;m<c;m++)for(l=0;l<d&&(k=e[m*d+l],k);l++)j=k.layoutRect(),y=j.minW,z=j.minH,E[l]=y>E[l]?y:E[l],F[m]=z>F[m]?z:F[m];for(A=f.innerW-q.left-q.right,w=0,l=0;l<d;l++)w+=E[l]+(l>0?s:0),A-=(l>0?s:0)+E[l];for(B=f.innerH-q.top-q.bottom,x=0,m=0;m<c;m++)x+=F[m]+(m>0?t:0),B-=(m>0?t:0)+F[m];if(w+=q.left+q.right,x+=q.top+q.bottom,i={},i.minW=w+(f.w-f.innerW),i.minH=x+(f.h-f.innerH),i.contentW=i.minW-f.deltaW,i.contentH=i.minH-f.deltaH,i.minW=Math.min(i.minW,f.maxW),i.minH=Math.min(i.minH,f.maxH),i.minW=Math.max(i.minW,f.startMinWidth),i.minH=Math.max(i.minH,f.startMinHeight),!f.autoResize||i.minW===f.minW&&i.minH===f.minH){f.autoResize&&(i=a.layoutRect(i),i.contentW=i.minW-f.deltaW,i.contentH=i.minH-f.deltaH);var G;G="start"===b.packV?0:B>0?Math.floor(B/c):0;var H=0,I=b.flexWidths;if(I)for(l=0;l<I.length;l++)H+=I[l];else H=d;var J=A/H;for(l=0;l<d;l++)E[l]+=I?I[l]*J:J;for(o=q.top,m=0;m<c;m++){for(n=q.left,h=F[m]+G,l=0;l<d&&(D=C?m*d+d-1-l:m*d+l,k=e[D],k);l++)p=k.settings,j=k.layoutRect(),g=Math.max(E[l],j.startMinWidth),j.x=n,j.y=o,r=p.alignH||(u?u[l]||u[0]:null),"center"===r?j.x=n+g/2-j.w/2:"right"===r?j.x=n+g-j.w:"stretch"===r&&(j.w=g),r=p.alignV||(v?v[l]||v[0]:null),"center"===r?j.y=o+h/2-j.h/2:"bottom"===r?j.y=o+h-j.h:"stretch"===r&&(j.h=h),k.layoutRect(j),n+=g+s,k.recalc&&k.recalc();o+=h+t}}else if(i.w=i.minW,i.h=i.minH,a.layoutRect(i),this.recalc(a),null===a._lastRect){var K=a.parent();K&&(K._lastRect=null,K.recalc())}}}),uj=sd.extend({renderHtml:function(){var a=this;return a.classes.add("iframe"),a.canFocus=!1,'<iframe id="'+a._id+'" class="'+a.classes+'" tabindex="-1" src="'+(a.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(a){this.getEl().src=a},html:function(a,b){var c=this,d=this.getEl().contentWindow.document.body;return d?(d.innerHTML=a,b&&b()):ra.setTimeout(function(){c.html(a)}),this}}),vj=sd.extend({init:function(a){var b=this;b._super(a),b.classes.add("widget").add("infobox"),b.canFocus=!1},severity:function(a){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(a)},help:function(a){this.state.set("help",a)},renderHtml:function(){var a=this,b=a.classPrefix;return'<div id="'+a._id+'" class="'+a.classes+'"><div id="'+a._id+'-body">'+a.encode(a.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+b+"ico "+b+'i-help"></i></button></div></div>'},bindStates:function(){var a=this;return a.state.on("change:text",function(b){a.getEl("body").firstChild.data=a.encode(b.value),a.state.get("rendered")&&a.updateLayoutRect()}),a.state.on("change:help",function(b){a.classes.toggle("has-help",b.value),a.state.get("rendered")&&a.updateLayoutRect()}),a._super()}}),wj=sd.extend({init:function(a){var b=this;b._super(a),b.classes.add("widget").add("label"),b.canFocus=!1,a.multiline&&b.classes.add("autoscroll"),a.strong&&b.classes.add("strong")},initLayoutRect:function(){var a=this,b=a._super();if(a.settings.multiline){var c=sc.getSize(a.getEl());c.width>b.maxW&&(b.minW=b.maxW,a.classes.add("multiline")),a.getEl().style.width=b.minW+"px",b.startMinH=b.h=b.minH=Math.min(b.maxH,sc.getSize(a.getEl()).height)}return b},repaint:function(){var a=this;return a.settings.multiline||(a.getEl().style.lineHeight=a.layoutRect().h+"px"),a._super()},severity:function(a){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(a)},renderHtml:function(){var a,b,c=this,d=c.settings.forId,e=c.settings.html?c.settings.html:c.encode(c.state.get("text"));return!d&&(b=c.settings.forName)&&(a=c.getRoot().find("#"+b)[0],a&&(d=a._id)),d?'<label id="'+c._id+'" class="'+c.classes+'"'+(d?' for="'+d+'"':"")+">"+e+"</label>":'<span id="'+c._id+'" class="'+c.classes+'">'+e+"</span>"},bindStates:function(){var a=this;return a.state.on("change:text",function(b){a.innerHtml(a.encode(b.value)),a.state.get("rendered")&&a.updateLayoutRect()}),a._super()}}),xj=dd.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(a){var b=this;b._super(a),b.classes.add("toolbar")},postRender:function(){var a=this;return a.items().each(function(a){a.classes.add("toolbar-item")}),a._super()}}),yj=xj.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),zj=Ed.extend({init:function(a){var b=this;b._renderOpen=!0,b._super(a),a=b.settings,b.classes.add("menubtn"),a.fixedWidth&&b.classes.add("fixed-width"),b.aria("haspopup",!0),b.state.set("menu",a.menu||b.render())},showMenu:function(a){var b,c=this;return c.menu&&c.menu.visible()&&a!==!1?c.hideMenu():(c.menu||(b=c.state.get("menu")||[],c.classes.add("opened"),b.length?b={type:"menu",animate:!0,items:b}:(b.type=b.type||"menu",b.animate=!0),b.renderTo?c.menu=b.parent(c).show().renderTo():c.menu=ha.create(b).parent(c).renderTo(),c.fire("createmenu"),c.menu.reflow(),c.menu.on("cancel",function(a){a.control.parent()===c.menu&&(a.stopPropagation(),c.focus(),c.hideMenu())}),c.menu.on("select",function(){c.focus()}),c.menu.on("show hide",function(a){a.control===c.menu&&(c.activeMenu("show"===a.type),c.classes.toggle("opened","show"===a.type)),c.aria("expanded","show"===a.type)}).fire("show")),c.menu.show(),c.menu.layoutRect({w:c.layoutRect().w}),c.menu.repaint(),c.menu.moveRel(c.getEl(),c.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),void c.fire("showmenu"))},hideMenu:function(){var a=this;a.menu&&(a.menu.items().each(function(a){a.hideMenu&&a.hideMenu()}),a.menu.hide())},activeMenu:function(a){this.classes.toggle("active",a)},renderHtml:function(){var a,b=this,c=b._id,d=b.classPrefix,e=b.settings.icon,f=b.state.get("text"),g="";return a=b.settings.image,a?(e="none","string"!=typeof a&&(a=window.getSelection?a[0]:a[1]),a=" style=\"background-image: url('"+a+"')\""):a="",f&&(b.classes.add("btn-has-text"),g='<span class="'+d+'txt">'+b.encode(f)+"</span>"),e=b.settings.icon?d+"ico "+d+"i-"+e:"",b.aria("role",b.parent()instanceof yj?"menuitem":"button"),'<div id="'+c+'" class="'+b.classes+'" tabindex="-1" aria-labelledby="'+c+'"><button id="'+c+'-open" role="presentation" type="button" tabindex="-1">'+(e?'<i class="'+e+'"'+a+"></i>":"")+g+' <i class="'+d+'caret"></i></button></div>'},postRender:function(){var a=this;return a.on("click",function(b){b.control===a&&F(b.target,a.getEl())&&(a.focus(),a.showMenu(!b.aria),b.aria&&a.menu.items().filter(":visible")[0].focus())}),a.on("mouseenter",function(b){var c,d=b.control,e=a.parent();d&&e&&d instanceof zj&&d.parent()===e&&(e.items().filter("MenuButton").each(function(a){a.hideMenu&&a!==d&&(a.menu&&a.menu.visible()&&(c=!0),a.hideMenu())}),c&&(d.focus(),d.showMenu()))}),a._super()},bindStates:function(){var a=this;return a.state.on("change:menu",function(){a.menu&&a.menu.remove(),a.menu=null}),a._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Aj=jd.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(a){var b=this;if(a.autohide=!0,a.constrainToViewport=!0,"function"==typeof a.items&&(a.itemsFactory=a.items,a.items=[]),a.itemDefaults)for(var c=a.items,d=c.length;d--;)c[d]=N.extend({},a.itemDefaults,c[d]);b._super(a),b.classes.add("menu"),a.animate&&11!==Zb.ie&&b.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var a=this;a.hideAll(),a.fire("select")},load:function(){function a(){d.throbber&&(d.throbber.hide(),d.throbber=null)}var b,c,d=this;c=d.settings.itemsFactory,c&&(d.throbber||(d.throbber=new u(d.getEl("body"),(!0)),0===d.items().length?(d.throbber.show(),d.fire("loading")):d.throbber.show(100,function(){d.items().remove(),d.fire("loading")}),d.on("hide close",a)),d.requestTime=b=(new Date).getTime(),d.settings.itemsFactory(function(c){return 0===c.length?void d.hide():void(d.requestTime===b&&(d.getEl().style.width="",d.getEl("body").style.width="",a(),d.items().remove(),d.getEl("body").innerHTML="",d.add(c),d.renderNew(),d.fire("loaded")))}))},hideAll:function(){var a=this;return this.find("menuitem").exec("hideMenu"),a._super()},preRender:function(){var a=this;return a.items().each(function(b){var c=b.settings;if(c.icon||c.image||c.selectable)return a._hasIcons=!0,!1}),a.settings.itemsFactory&&a.on("postrender",function(){a.settings.itemsFactory&&a.load()}),a.on("show hide",function(b){b.control===a&&("show"===b.type?ra.setTimeout(function(){a.classes.add("in")},0):a.classes.remove("in"))}),a._super()}}),Bj=zj.extend({init:function(a){function b(c){for(var f=0;f<c.length;f++){if(d=c[f].selected||a.value===c[f].value)return e=e||c[f].text,g.state.set("value",c[f].value),!0;if(c[f].menu&&b(c[f].menu))return!0}}var c,d,e,f,g=this;g._super(a),a=g.settings,g._values=c=a.values,c&&("undefined"!=typeof a.value&&b(c),!d&&c.length>0&&(e=c[0].text,g.state.set("value",c[0].value)),g.state.set("menu",c)),g.state.set("text",a.text||e),g.classes.add("listbox"),g.on("select",function(b){var c=b.control;f&&(b.lastControl=f),a.multiple?c.active(!c.active()):g.value(b.control.value()),f=c})},value:function(a){if(0===arguments.length)return this.state.get("value");if("undefined"==typeof a)return this;if(this.settings.values){var b=N.grep(this.settings.values,function(b){return b.value===a});b.length>0?this.state.set("value",a):null===a&&this.state.set("value",null)}else this.state.set("value",a);return this},bindStates:function(){function a(a,b){a instanceof Aj&&a.items().each(function(a){a.hasMenus()||a.active(a.value()===b)})}function b(a,c){var d;if(a)for(var e=0;e<a.length;e++){if(a[e].value===c)return a[e];if(a[e].menu&&(d=b(a[e].menu,c)))return d}}var c=this;return c.on("show",function(b){a(b.control,c.value())}),c.state.on("change:value",function(a){var d=b(c.state.get("menu"),a.value);d?c.text(d.text):c.text(c.settings.text)}),c._super()}}),Cj=function(a,b){var c=a._textStyle;if(c){var d=a.getEl("text");d.setAttribute("style",c),b&&(d.style.color="",d.style.backgroundColor="")}},Dj=sd.extend({Defaults:{border:0,role:"menuitem"},init:function(a){var b,c=this;c._super(a),a=c.settings,c.classes.add("menu-item"),a.menu&&c.classes.add("menu-item-expand"),a.preview&&c.classes.add("menu-item-preview"),b=c.state.get("text"),"-"!==b&&"|"!==b||(c.classes.add("menu-item-sep"),c.aria("role","separator"),c.state.set("text","-")),a.selectable&&(c.aria("role","menuitemcheckbox"),c.classes.add("menu-item-checkbox"),a.icon="selected"),a.preview||a.selectable||c.classes.add("menu-item-normal"),c.on("mousedown",function(a){a.preventDefault()}),a.menu&&!a.ariaHideMenu&&c.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var a,b=this,c=b.settings,d=b.parent();if(d.items().each(function(a){a!==b&&a.hideMenu()}),c.menu){a=b.menu,a?a.show():(a=c.menu,a.length?a={type:"menu",items:a}:a.type=a.type||"menu",d.settings.itemDefaults&&(a.itemDefaults=d.settings.itemDefaults),a=b.menu=ha.create(a).parent(b).renderTo(),a.reflow(),a.on("cancel",function(c){c.stopPropagation(),b.focus(),a.hide()}),a.on("show hide",function(a){a.control.items&&a.control.items().each(function(a){a.active(a.settings.selected)})}).fire("show"),a.on("hide",function(c){c.control===a&&b.classes.remove("selected")}),a.submenu=!0),a._parentMenu=d,a.classes.add("menu-sub");var e=a.testMoveRel(b.getEl(),b.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);a.moveRel(b.getEl(),e),a.rel=e,e="menu-sub-"+e,a.classes.remove(a._lastRel).add(e),a._lastRel=e,b.classes.add("selected"),b.aria("expanded",!0)}},hideMenu:function(){var a=this;return a.menu&&(a.menu.items().each(function(a){a.hideMenu&&a.hideMenu()}),a.menu.hide(),a.aria("expanded",!1)),a},renderHtml:function(){function a(a){var b,c,d={};for(d=Zb.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},a=a.split("+"),b=0;b<a.length;b++)c=d[a[b].toLowerCase()],c&&(a[b]=c);return a.join("+")}function b(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function c(a){var c=g.match||"";return c?a.replace(new RegExp(b(c),"gi"),function(a){return"!mce~match["+a+"]mce~match!"}):a}function d(a){return a.replace(new RegExp(b("!mce~match["),"g"),"<b>").replace(new RegExp(b("]mce~match!"),"g"),"</b>")}var e=this,f=e._id,g=e.settings,h=e.classPrefix,i=e.state.get("text"),j=e.settings.icon,k="",l=g.shortcut,m=e.encode(g.url),n="";return j&&e.parent().classes.add("menu-has-icons"),g.image&&(k=" style=\"background-image: url('"+g.image+"')\""),l&&(l=a(l)),j=h+"ico "+h+"i-"+(e.settings.icon||"none"),n="-"!==i?'<i class="'+j+'"'+k+"></i>Â ":"",i=d(e.encode(c(i))),m=d(e.encode(c(m))),'<div id="'+f+'" class="'+e.classes+'" tabindex="-1">'+n+("-"!==i?'<span id="'+f+'-text" class="'+h+'text">'+i+"</span>":"")+(l?'<div id="'+f+'-shortcut" class="'+h+'menu-shortcut">'+l+"</div>":"")+(g.menu?'<div class="'+h+'caret"></div>':"")+(m?'<div class="'+h+'menu-item-link">'+m+"</div>":"")+"</div>"},postRender:function(){var a=this,b=a.settings,c=b.textStyle;if("function"==typeof c&&(c=c.call(this)),c){var d=a.getEl("text");d&&(d.setAttribute("style",c),a._textStyle=c)}return a.on("mouseenter click",function(c){c.control===a&&(b.menu||"click"!==c.type?(a.showMenu(),c.aria&&a.menu.focus(!0)):(a.fire("select"),ra.requestAnimationFrame(function(){a.parent().hideAll()})))}),a._super(),a},hover:function(){var a=this;return a.parent().items().each(function(a){a.classes.remove("selected")}),a.classes.toggle("selected",!0),a},active:function(a){return Cj(this,a),"undefined"!=typeof a&&this.aria("checked",a),this._super(a)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Ej=Hd.extend({Defaults:{classes:"radio",role:"radio"}}),Fj=sd.extend({renderHtml:function(){var a=this,b=a.classPrefix;return a.classes.add("resizehandle"),"both"===a.settings.direction&&a.classes.add("resizehandle-both"),a.canFocus=!1,'<div id="'+a._id+'" class="'+a.classes+'"><i class="'+b+"ico "+b+'i-resize"></i></div>'},postRender:function(){var a=this;a._super(),a.resizeDragHelper=new l(this._id,{start:function(){a.fire("ResizeStart")},drag:function(b){"both"!==a.settings.direction&&(b.deltaX=0),a.fire("Resize",b)},stop:function(){a.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}}),Gj=sd.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(a){var b=this;b._super(a),b.settings.size&&(b.size=b.settings.size),b.settings.options&&(b._options=b.settings.options),b.on("keydown",function(a){var c;13===a.keyCode&&(a.preventDefault(),b.parents().reverse().each(function(a){if(a.toJSON)return c=a,!1}),b.fire("submit",{data:c.toJSON()}))})},options:function(a){return arguments.length?(this.state.set("options",a),this):this.state.get("options")},renderHtml:function(){var a,b=this,c="";return a=G(b._options),b.size&&(c=' size = "'+b.size+'"'),'<select id="'+b._id+'" class="'+b.classes+'"'+c+">"+a+"</select>"},bindStates:function(){var a=this;return a.state.on("change:options",function(b){a.getEl().innerHTML=G(b.value)}),a._super()}}),Hj=sd.extend({init:function(a){var b=this;a.previewFilter||(a.previewFilter=function(a){return Math.round(100*a)/100}),b._super(a),b.classes.add("slider"),"v"===a.orientation&&b.classes.add("vertical"),b._minValue=db.isNumber(a.minValue)?a.minValue:0,b._maxValue=db.isNumber(a.maxValue)?a.maxValue:100,b._initValue=b.state.get("value")},renderHtml:function(){var a=this,b=a._id,c=a.classPrefix;return'<div id="'+b+'" class="'+a.classes+'"><div id="'+b+'-handle" class="'+c+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){function a(a,b,c){return(c+a)/(b-a)}function b(a,b,c){return c*(b-a)-a}function c(c,d){function e(e){var f;f=k.value(),f=b(c,d,a(c,d,f)+.05*e),f=H(f,c,d),k.value(f),k.fire("dragstart",{value:f}),k.fire("drag",{value:f}),k.fire("dragend",{value:f})}k.on("keydown",function(a){switch(a.keyCode){case 37:case 38:e(-1);break;case 39:case 40:e(1)}})}function d(a,b,c){var d,e,f,m,n;k._dragHelper=new l(k._id,{handle:k._id+"-handle",start:function(a){d=a[g],e=parseInt(k.getEl("handle").style[h],10),
f=(k.layoutRect()[j]||100)-sc.getSize(c)[i],k.fire("dragstart",{value:n})},drag:function(i){var j=i[g]-d;m=H(e+j,0,f),c.style[h]=m+"px",n=a+m/f*(b-a),k.value(n),k.tooltip().text(""+k.settings.previewFilter(n)).show().moveRel(c,"bc tc"),k.fire("drag",{value:n})},stop:function(){k.tooltip().hide(),k.fire("dragend",{value:n})}})}var e,f,g,h,i,j,k=this;e=k._minValue,f=k._maxValue,"v"===k.settings.orientation?(g="screenY",h="top",i="height",j="h"):(g="screenX",h="left",i="width",j="w"),k._super(),c(e,f),d(e,f,k.getEl("handle"))},repaint:function(){this._super(),J(this,this.value())},bindStates:function(){var a=this;return a.state.on("change:value",function(b){J(a,b.value)}),a._super()}}),Ij=sd.extend({renderHtml:function(){var a=this;return a.classes.add("spacer"),a.canFocus=!1,'<div id="'+a._id+'" class="'+a.classes+'"></div>'}}),Jj=zj.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var a,b,c=this,d=c.getEl(),e=c.layoutRect();return c._super(),a=d.firstChild,b=d.lastChild,qc(a).css({width:e.w-sc.getSize(b).width,height:e.h-2}),qc(b).css({height:e.h-2}),c},activeMenu:function(a){var b=this;qc(b.getEl().lastChild).toggleClass(b.classPrefix+"active",a)},renderHtml:function(){var a,b,c=this,d=c._id,e=c.classPrefix,f=c.state.get("icon"),g=c.state.get("text"),h=c.settings,i="";return a=h.image,a?(f="none","string"!=typeof a&&(a=window.getSelection?a[0]:a[1]),a=" style=\"background-image: url('"+a+"')\""):a="",f=h.icon?e+"ico "+e+"i-"+f:"",g&&(c.classes.add("btn-has-text"),i='<span class="'+e+'txt">'+c.encode(g)+"</span>"),b="boolean"==typeof h.active?' aria-pressed="'+h.active+'"':"",'<div id="'+d+'" class="'+c.classes+'" role="button"'+b+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(f?'<i class="'+f+'"'+a+"></i>":"")+i+'</button><button type="button" class="'+e+'open" hidefocus="1" tabindex="-1">'+(c._menuBtnText?(f?"Â ":"")+c._menuBtnText:"")+' <i class="'+e+'caret"></i></button></div>'},postRender:function(){var a=this,b=a.settings.onclick;return a.on("click",function(a){var c=a.target;if(a.control===this)for(;c;){if(a.aria&&"down"!==a.aria.key||"BUTTON"===c.nodeName&&c.className.indexOf("open")===-1)return a.stopImmediatePropagation(),void(b&&b.call(this,a));c=c.parentNode}}),delete a.settings.onclick,a._super()}}),Kj=Vh.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),Lj=fd.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(a){var b;this.activeTabId&&(b=this.getEl(this.activeTabId),qc(b).removeClass(this.classPrefix+"active"),b.setAttribute("aria-selected","false")),this.activeTabId="t"+a,b=this.getEl("t"+a),b.setAttribute("aria-selected","true"),qc(b).addClass(this.classPrefix+"active"),this.items()[a].show().fire("showtab"),this.reflow(),this.items().each(function(b,c){a!==c&&b.hide()})},renderHtml:function(){var a=this,b=a._layout,c="",d=a.classPrefix;return a.preRender(),b.preRender(a),a.items().each(function(b,e){var f=a._id+"-t"+e;b.aria("role","tabpanel"),b.aria("labelledby",f),c+='<div id="'+f+'" class="'+d+'tab" unselectable="on" role="tab" aria-controls="'+b._id+'" aria-selected="false" tabIndex="-1">'+a.encode(b.settings.title)+"</div>"}),'<div id="'+a._id+'" class="'+a.classes+'" hidefocus="1" tabindex="-1"><div id="'+a._id+'-head" class="'+d+'tabs" role="tablist">'+c+'</div><div id="'+a._id+'-body" class="'+a.bodyClasses+'">'+b.renderHtml(a)+"</div></div>"},postRender:function(){var a=this;a._super(),a.settings.activeTab=a.settings.activeTab||0,a.activateTab(a.settings.activeTab),this.on("click",function(b){var c=b.target.parentNode;if(c&&c.id===a._id+"-head")for(var d=c.childNodes.length;d--;)c.childNodes[d]===b.target&&a.activateTab(d)})},initLayoutRect:function(){var a,b,c,d=this;b=sc.getSize(d.getEl("head")).width,b=b<0?0:b,c=0,d.items().each(function(a){b=Math.max(b,a.layoutRect().minW),c=Math.max(c,a.layoutRect().minH)}),d.items().each(function(a){a.settings.x=0,a.settings.y=0,a.settings.w=b,a.settings.h=c,a.layoutRect({x:0,y:0,w:b,h:c})});var e=sc.getSize(d.getEl("head")).height;return d.settings.minWidth=b,d.settings.minHeight=c+e,a=d._super(),a.deltaH+=e,a.innerH=a.h-a.deltaH,a}}),Mj=sd.extend({init:function(a){var b=this;b._super(a),b.classes.add("textbox"),a.multiline?b.classes.add("multiline"):(b.on("keydown",function(a){var c;13===a.keyCode&&(a.preventDefault(),b.parents().reverse().each(function(a){if(a.toJSON)return c=a,!1}),b.fire("submit",{data:c.toJSON()}))}),b.on("keyup",function(a){b.state.set("value",a.target.value)}))},repaint:function(){var a,b,c,d,e,f=this,g=0;a=f.getEl().style,b=f._layoutRect,e=f._lastRepaintRect||{};var h=document;return!f.settings.multiline&&h.all&&(!h.documentMode||h.documentMode<=8)&&(a.lineHeight=b.h-g+"px"),c=f.borderBox,d=c.left+c.right+8,g=c.top+c.bottom+(f.settings.multiline?8:0),b.x!==e.x&&(a.left=b.x+"px",e.x=b.x),b.y!==e.y&&(a.top=b.y+"px",e.y=b.y),b.w!==e.w&&(a.width=b.w-d+"px",e.w=b.w),b.h!==e.h&&(a.height=b.h-g+"px",e.h=b.h),f._lastRepaintRect=e,f.fire("repaint",{},!1),f},renderHtml:function(){var a,b,c=this,d=c.settings;return a={id:c._id,hidefocus:"1"},N.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(b){a[b]=d[b]}),c.disabled()&&(a.disabled="disabled"),d.subtype&&(a.type=d.subtype),b=sc.create(d.multiline?"textarea":"input",a),b.value=c.state.get("value"),b.className=c.classes.toString(),b.outerHTML},value:function(a){return arguments.length?(this.state.set("value",a),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var a=this;a.getEl().value=a.state.get("value"),a._super(),a.$el.on("change",function(b){a.state.set("value",b.target.value),a.fire("change",b)})},bindStates:function(){var a=this;return a.state.on("change:value",function(b){a.getEl().value!==b.value&&(a.getEl().value=b.value)}),a.state.on("change:disabled",function(b){a.getEl().disabled=b.value}),a._super()},remove:function(){this.$el.off(),this._super()}}),Nj=function(){return{Selector:Ic,Collection:Lc,ReflowQueue:Sc,Control:ad,Factory:ha,KeyboardNavigation:i,Container:dd,DragHelper:l,Scrollable:ed,Panel:fd,Movable:yc,Resizable:gd,FloatPanel:jd,Window:yd,MessageBox:zd,Tooltip:rd,Widget:sd,Progress:td,Notification:vd,Layout:Cd,AbsoluteLayout:Dd,Button:Ed,ButtonGroup:Gd,Checkbox:Hd,ComboBox:Jd,ColorBox:Kd,PanelButton:Ld,ColorButton:Nd,ColorPicker:Pd,Path:Rd,ElementPath:Sd,FormItem:Td,Form:Ud,FieldSet:Vd,FilePicker:Sh,FitLayout:Th,FlexLayout:Uh,FlowLayout:Vh,FormatControls:sj,GridLayout:tj,Iframe:uj,InfoBox:vj,Label:wj,Toolbar:xj,MenuBar:yj,MenuButton:zj,MenuItem:Dj,Throbber:u,Menu:Aj,ListBox:Bj,Radio:Ej,ResizeHandle:Fj,SelectBox:Gj,Slider:Hj,Spacer:Ij,SplitButton:Jj,StackLayout:Kj,TabPanel:Lj,TextBox:Mj,DropZone:Qd,BrowseButton:Fd}},Oj=function(a){a.ui?N.each(Nj(),function(b,c){a.ui[c]=b}):a.ui=Nj()},Pj=function(){N.each(Nj(),function(a,b){ha.add(b,a)})},Qj={appendTo:Oj,registerToFactory:Pj};return Qj.registerToFactory(),Qj.appendTo(window.tinymce?window.tinymce:{}),L.add("modern",function(a){return sj.setup(a),Bd.get(a)}),K})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-advlist",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=function(a,b,c){var d="UL"===b?"InsertUnorderedList":"InsertOrderedList";a.execCommand(d,!1,c===!1?null:{"list-style-type":c})},e={applyListFormat:d},f=function(a){a.addCommand("ApplyUnorderedListStyle",function(b,c){e.applyListFormat(a,"UL",c["list-style-type"])}),a.addCommand("ApplyOrderedListStyle",function(b,c){e.applyListFormat(a,"OL",c["list-style-type"])})},g={register:f},h=function(a){var b=a.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return b?b.split(/[ ,]/):[]},i=function(a){var b=a.getParam("advlist_bullet_styles","default,circle,disc,square");return b?b.split(/[ ,]/):[]},j={getNumberStyles:h,getBulletStyles:i},k=function(a,b){return a.$.contains(a.getBody(),b)},l=function(a){return a&&/^(TH|TD)$/.test(a.nodeName)},m=function(a){return function(b){return b&&/^(OL|UL|DL)$/.test(b.nodeName)&&k(a,b)}},n=function(a){var b=a.dom.getParent(a.selection.getNode(),"ol,ul");return a.dom.getStyle(b,"listStyleType")||""},o={isTableCellNode:l,isListNode:m,getSelectedStyleType:n},p=function(a){return a.replace(/\-/g," ").replace(/\b\w/g,function(a){return a.toUpperCase()})},q=function(a){return c.map(a,function(a){var b=p(a),c="default"===a?"":a;return{text:b,data:c}})},r={toMenuItems:q},s=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(b(d))return c}return-1},t=function(a,b){return function(d){var e=d.control;a.on("NodeChange",function(d){var f=s(d.parents,o.isTableCellNode),g=f!==-1?d.parents.slice(0,f):d.parents,h=c.grep(g,o.isListNode(a));e.active(h.length>0&&h[0].nodeName===b)})}},u=function(a){return function(b){var c=o.getSelectedStyleType(a);b.control.items().each(function(a){a.active(a.settings.data===c)})}},v=function(a,b,c,d,f,g){a.addButton(b,{active:!1,type:"splitbutton",tooltip:c,menu:r.toMenuItems(g),onPostRender:t(a,f),onshow:u(a),onselect:function(b){e.applyListFormat(a,f,b.control.settings.data)},onclick:function(){a.execCommand(d)}})},w=function(a,b,c,d,e,f){a.addButton(b,{active:!1,type:"button",tooltip:c,onPostRender:t(a,e),onclick:function(){a.execCommand(d)}})},x=function(a,b,c,d,e,f){f.length>0?v(a,b,c,d,e,f):w(a,b,c,d,e,f)},y=function(a){x(a,"numlist","Numbered list","InsertOrderedList","OL",j.getNumberStyles(a)),x(a,"bullist","Bullet list","InsertUnorderedList","UL",j.getBulletStyles(a))},z={register:y};return b.add("advlist",function(a){var b=function(a,b){var d=a.settings.plugins?a.settings.plugins:"";return c.inArray(d.split(/[ ,]/),b)!==-1};b(a,"lists")&&(z.register(a),g.register(a))}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-anchor",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=function(a){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(a)},d=function(a){var b=a.selection.getNode(),c="A"===b.tagName&&""===a.dom.getAttrib(b,"href");return c?b.id||b.name:""},e=function(a,b){var c=a.selection.getNode(),d="A"===c.tagName&&""===a.dom.getAttrib(c,"href");d?(c.removeAttribute("name"),c.id=b,a.undoManager.add()):(a.focus(),a.selection.collapse(!0),a.execCommand("mceInsertContent",!1,a.dom.createHTML("a",{id:b})))},f={isValidId:c,getId:d,insert:e},g=function(a,b){return f.isValidId(b)?(f.insert(a,b),!1):(a.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!0)},h=function(a){var b=f.getId(a);a.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:b},onsubmit:function(b){var c=b.data.id;g(a,c)&&b.preventDefault()}})},i={open:h},j=function(a){a.addCommand("mceAnchor",function(){i.open(a)})},k={register:j},l=function(a){return!a.attr("href")&&(a.attr("id")||a.attr("name"))&&!a.firstChild},m=function(a){return function(b){for(var c=0;c<b.length;c++)l(b[c])&&b[c].attr("contenteditable",a)}},n=function(a){a.on("PreInit",function(){a.parser.addNodeFilter("a",m("false")),a.serializer.addNodeFilter("a",m(null))})},o={setup:n},p=function(a){a.addButton("anchor",{icon:"anchor",tooltip:"Anchor",cmd:"mceAnchor",stateSelector:"a:not([href])"}),a.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",cmd:"mceAnchor"})},q={register:p};return b.add("anchor",function(a){o.setup(a),k.register(a),q.register(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-autolink",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.Env"),d=function(a){return a.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},e=function(a){return a.getParam("default_link_target","")},f={getAutoLinkPattern:d,getDefaultLinkTarget:e},g=function(a,b){return a===b||" "===a||160===a.charCodeAt(0)},h=function(a){n(a,-1,"(")},i=function(a){n(a,0,"")},j=function(a){n(a,-1,"")},k=function(a,b){if(b<0&&(b=0),3===a.nodeType){var c=a.data.length;b>c&&(b=c)}return b},l=function(a,b,c){1!==b.nodeType||b.hasChildNodes()?a.setStart(b,k(b,c)):a.setStartBefore(b)},m=function(a,b,c){1!==b.nodeType||b.hasChildNodes()?a.setEnd(b,k(b,c)):a.setEndAfter(b)},n=function(a,b,c){var d,e,h,i,j,k,n,o,p,q,r=f.getAutoLinkPattern(a),s=f.getDefaultLinkTarget(a);if("A"!==a.selection.getNode().tagName){if(d=a.selection.getRng(!0).cloneRange(),d.startOffset<5){if(o=d.endContainer.previousSibling,!o){if(!d.endContainer.firstChild||!d.endContainer.firstChild.nextSibling)return;o=d.endContainer.firstChild.nextSibling}if(p=o.length,l(d,o,p),m(d,o,p),d.endOffset<5)return;e=d.endOffset,i=o}else{if(i=d.endContainer,3!==i.nodeType&&i.firstChild){for(;3!==i.nodeType&&i.firstChild;)i=i.firstChild;3===i.nodeType&&(l(d,i,0),m(d,i,i.nodeValue.length))}e=1===d.endOffset?2:d.endOffset-1-b}h=e;do l(d,i,e>=2?e-2:0),m(d,i,e>=1?e-1:0),e-=1,q=d.toString();while(" "!==q&&""!==q&&160!==q.charCodeAt(0)&&e-2>=0&&q!==c);g(d.toString(),c)?(l(d,i,e),m(d,i,h),e+=1):0===d.startOffset?(l(d,i,0),m(d,i,h)):(l(d,i,e),m(d,i,h)),k=d.toString(),"."===k.charAt(k.length-1)&&m(d,i,h-1),k=d.toString().trim(),n=k.match(r),n&&("www."===n[1]?n[1]="http://www.":/@$/.test(n[1])&&!/^mailto:/.test(n[1])&&(n[1]="mailto:"+n[1]),j=a.selection.getBookmark(),a.selection.setRng(d),a.execCommand("createlink",!1,n[1]+n[2]),s&&a.dom.setAttrib(a.selection.getNode(),"target",s),a.selection.moveToBookmark(j),a.nodeChanged())}},o=function(a){var b;return a.on("keydown",function(b){if(13===b.keyCode)return j(a)}),c.ie?void a.on("focus",function(){if(!b){b=!0;try{a.execCommand("AutoUrlDetect",!1,!0)}catch(c){}}}):(a.on("keypress",function(b){if(41===b.keyCode)return h(a)}),void a.on("keyup",function(b){if(32===b.keyCode)return i(a)}))},p={setup:o};return b.add("autolink",function(a){p.setup(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-autoresize",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=function(a){var c=a,d=function(){return c},e=function(a){c=a},f=function(){return b(d())};return{get:d,set:e,clone:f}},c=tinymce.util.Tools.resolve("tinymce.PluginManager"),d=tinymce.util.Tools.resolve("tinymce.Env"),e=tinymce.util.Tools.resolve("tinymce.util.Delay"),f=function(a){return parseInt(a.getParam("autoresize_min_height",a.getElement().offsetHeight),10)},g=function(a){return parseInt(a.getParam("autoresize_max_height",0),10)},h=function(a){return a.getParam("autoresize_overflow_padding",1)},i=function(a){return a.getParam("autoresize_bottom_margin",50)},j=function(a){return a.getParam("autoresize_on_init",!0)},k={getAutoResizeMinHeight:f,getAutoResizeMaxHeight:g,getAutoResizeOverflowPadding:h,getAutoResizeBottomMargin:i,shouldAutoResizeOnInit:j},l=function(a){return a.plugins.fullscreen&&a.plugins.fullscreen.isFullscreen()},m=function(a,b,c,d,f){e.setEditorTimeout(a,function(){o(a,b),c--?m(a,b,c,d,f):f&&f()},d)},n=function(a,b){var c=a.getBody();c&&(c.style.overflowY=b?"":"hidden",b||(c.scrollTop=0))},o=function(a,b){var c,e,f,g,h,i,j,m,p,q,r,s=a.dom;if(e=a.getDoc()){if(l(a))return void n(a,!0);f=e.body,g=k.getAutoResizeMinHeight(a),i=s.getStyle(f,"margin-top",!0),j=s.getStyle(f,"margin-bottom",!0),m=s.getStyle(f,"padding-top",!0),p=s.getStyle(f,"padding-bottom",!0),q=s.getStyle(f,"border-top-width",!0),r=s.getStyle(f,"border-bottom-width",!0),h=f.offsetHeight+parseInt(i,10)+parseInt(j,10)+parseInt(m,10)+parseInt(p,10)+parseInt(q,10)+parseInt(r,10),(isNaN(h)||h<=0)&&(h=d.ie?f.scrollHeight:d.webkit&&0===f.clientHeight?0:f.offsetHeight),h>k.getAutoResizeMinHeight(a)&&(g=h);var t=k.getAutoResizeMaxHeight(a);t&&h>t?(g=t,n(a,!0)):n(a,!1),g!==b.get()&&(c=g-b.get(),s.setStyle(a.iframeElement,"height",g+"px"),b.set(g),d.webkit&&c<0&&o(a,b))}},p=function(a,b){a.on("init",function(){var b,c,d=a.dom;b=k.getAutoResizeOverflowPadding(a),c=k.getAutoResizeBottomMargin(a),b!==!1&&d.setStyles(a.getBody(),{paddingLeft:b,paddingRight:b}),c!==!1&&d.setStyles(a.getBody(),{paddingBottom:c})}),a.on("nodechange setcontent keyup FullscreenStateChanged",function(c){o(a,b)}),k.shouldAutoResizeOnInit(a)&&a.on("init",function(){m(a,b,20,100,function(){m(a,b,5,1e3)})})},q={setup:p,resize:o},r=function(a,b){a.addCommand("mceAutoResize",function(){q.resize(a,b)})},s={register:r};return c.add("autoresize",function(a){if(!a.inline){var c=b(0);s.register(a,c),q.setup(a,c)}}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-autosave",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=function(a){var c=a,d=function(){return c},e=function(a){c=a},f=function(){return b(d())};return{get:d,set:e,clone:f}},c=tinymce.util.Tools.resolve("tinymce.PluginManager"),d=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),e=tinymce.util.Tools.resolve("tinymce.util.Tools"),f=function(a){return a.fire("RestoreDraft")},g=function(a){return a.fire("StoreDraft")},h=function(a){return a.fire("RemoveDraft")},i={fireRestoreDraft:f,fireStoreDraft:g,fireRemoveDraft:h},j=function(a,b){var c={s:1e3,m:6e4};return a=/^(\d+)([ms]?)$/.exec(""+(a||b)),(a[2]?c[a[2]]:1)*parseInt(a,10)},k={parse:j},l=function(a){return a.getParam("autosave_ask_before_unload",!0)},m=function(a){var b=a.getParam("autosave_prefix","tinymce-autosave-{path}{query}{hash}-{id}-");return b=b.replace(/\{path\}/g,document.location.pathname),b=b.replace(/\{query\}/g,document.location.search),b=b.replace(/\{hash\}/g,document.location.hash),b=b.replace(/\{id\}/g,a.id)},n=function(a){return a.getParam("autosave_restore_when_empty",!1)},o=function(a){return k.parse(a.settings.autosave_interval,"30s")},p=function(a){return k.parse(a.settings.autosave_retention,"20m")},q={shouldAskBeforeUnload:l,getAutoSavePrefix:m,shouldRestoreWhenEmpty:n,getAutoSaveInterval:o,getAutoSaveRetention:p},r=function(a,b){var c=a.settings.forced_root_block;return b=e.trim("undefined"==typeof b?a.getBody().innerHTML:b),""===b||new RegExp("^<"+c+"[^>]*>((Â |&nbsp;|[ \t]|<br[^>]*>)+?|)</"+c+">|<br>$","i").test(b)},s=function(a){var b=parseInt(d.getItem(q.getAutoSavePrefix(a)+"time"),10)||0;return!((new Date).getTime()-b>q.getAutoSaveRetention(a))||(t(a,!1),!1)},t=function(a,b){var c=q.getAutoSavePrefix(a);d.removeItem(c+"draft"),d.removeItem(c+"time"),b!==!1&&i.fireRemoveDraft(a)},u=function(a){var b=q.getAutoSavePrefix(a);!r(a)&&a.isDirty()&&(d.setItem(b+"draft",a.getContent({format:"raw",no_events:!0})),d.setItem(b+"time",(new Date).getTime().toString()),i.fireStoreDraft(a))},v=function(a){var b=q.getAutoSavePrefix(a);s(a)&&(a.setContent(d.getItem(b+"draft"),{format:"raw"}),i.fireRestoreDraft(a))},w=function(a,b){var c=q.getAutoSaveInterval(a);b.get()||(setInterval(function(){a.removed||u(a)},c),b.set(!0))},x=function(a){a.undoManager.transact(function(){v(a),t(a)}),a.focus()},y={isEmpty:r,hasDraft:s,removeDraft:t,storeDraft:u,restoreDraft:v,startStoreDraft:w,restoreLastDraft:x},z=function(a,b){return function(){var c=Array.prototype.slice.call(arguments);return a.apply(null,[b].concat(c))}},A=function(a){return{hasDraft:z(y.hasDraft,a),storeDraft:z(y.storeDraft,a),restoreDraft:z(y.restoreDraft,a),removeDraft:z(y.removeDraft,a),isEmpty:z(y.isEmpty,a)}},B={get:A},C=tinymce.util.Tools.resolve("tinymce.EditorManager");C._beforeUnloadHandler=function(){var a;return e.each(C.get(),function(b){b.plugins.autosave&&b.plugins.autosave.storeDraft(),!a&&b.isDirty()&&q.shouldAskBeforeUnload(b)&&(a=b.translate("You have unsaved changes are you sure you want to navigate away?"))}),a};var D=function(a){window.onbeforeunload=C._beforeUnloadHandler},E={setup:D},F=function(a,b){return function(c){var d=c.control;d.disabled(!y.hasDraft(a)),a.on("StoreDraft RestoreDraft RemoveDraft",function(){d.disabled(!y.hasDraft(a))}),y.startStoreDraft(a,b)}},G=function(a,b){a.addButton("restoredraft",{title:"Restore last draft",onclick:function(){y.restoreLastDraft(a)},onPostRender:F(a,b)}),a.addMenuItem("restoredraft",{text:"Restore last draft",onclick:function(){y.restoreLastDraft(a)},onPostRender:F(a,b),context:"file"})},H={register:G};return c.add("autosave",function(a){var c=b(!1);return E.setup(a),H.register(a,c),B.get(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-bbcode",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=function(a){a=c.trim(a);var b=function(b,c){a=a.replace(b,c)};return b(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),b(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),b(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),b(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),b(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),b(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),b(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),b(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),b(/<font>(.*?)<\/font>/gi,"$1"),b(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),b(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),b(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),b(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),b(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),b(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),b(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),b(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),b(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),b(/<\/(strong|b)>/gi,"[/b]"),b(/<(strong|b)>/gi,"[b]"),b(/<\/(em|i)>/gi,"[/i]"),b(/<(em|i)>/gi,"[i]"),b(/<\/u>/gi,"[/u]"),b(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),b(/<u>/gi,"[u]"),b(/<blockquote[^>]*>/gi,"[quote]"),b(/<\/blockquote>/gi,"[/quote]"),b(/<br \/>/gi,"\n"),b(/<br\/>/gi,"\n"),b(/<br>/gi,"\n"),b(/<p>/gi,""),b(/<\/p>/gi,"\n"),b(/&nbsp;|\u00a0/gi," "),b(/&quot;/gi,'"'),b(/&lt;/gi,"<"),b(/&gt;/gi,">"),b(/&amp;/gi,"&"),a},e=function(a){a=c.trim(a);var b=function(b,c){a=a.replace(b,c)};return b(/\n/gi,"<br />"),b(/\[b\]/gi,"<strong>"),b(/\[\/b\]/gi,"</strong>"),b(/\[i\]/gi,"<em>"),b(/\[\/i\]/gi,"</em>"),b(/\[u\]/gi,"<u>"),b(/\[\/u\]/gi,"</u>"),b(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),b(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>'),b(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),b(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>'),b(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;'),b(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;'),a},f={html2bbcode:d,bbcode2html:e};return b.add("bbcode",function(){return{init:function(a){a.on("beforeSetContent",function(a){a.content=f.bbcode2html(a.content)}),a.on("postProcess",function(a){a.set&&(a.content=f.bbcode2html(a.content)),a.get&&(a.content=f.html2bbcode(a.content))})}}}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-charmap",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=function(a,b){return a.fire("insertCustomChar",{chr:b})},d={fireInsertCustomChar:c},e=function(a,b){var c=d.fireInsertCustomChar(a,b).chr;a.execCommand("mceInsertContent",!1,c)},f={insertChar:e},g=tinymce.util.Tools.resolve("tinymce.util.Tools"),h=function(a){return a.settings.charmap},i=function(a){return a.settings.charmap_append},j={getCharMap:h,getCharMapAppend:i},k=g.isArray,l=function(){return[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]]},m=function(a){return g.grep(a,function(a){return k(a)&&2===a.length})},n=function(a){return k(a)?[].concat(m(a)):"function"==typeof a?a():[]},o=function(a,b){var c=j.getCharMap(a);c&&(b=n(c));var d=j.getCharMapAppend(a);return d?[].concat(b).concat(n(d)):b},p=function(a){return o(a,l())},q={getCharMap:p},r=function(a){var b=function(){return q.getCharMap(a)},c=function(b){f.insertChar(a,b)};return{getCharMap:b,insertChar:c}},s={get:r},t=function(a){var b,c,d,e=Math.min(a.length,25),f=Math.ceil(a.length/e);for(b='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',d=0;d<f;d++){for(b+="<tr>",c=0;c<e;c++){var g=d*e+c;if(g<a.length){var h=a[g],i=parseInt(h[0],10),j=h?String.fromCharCode(i):"&nbsp;";b+='<td title="'+h[1]+'"><div tabindex="-1" title="'+h[1]+'" role="button" data-chr="'+i+'">'+j+"</div></td>"}else b+="<td />"}b+="</tr>"}return b+="</tbody></table>"},u={getHtml:t},v=function(a){for(;a;){if("TD"===a.nodeName)return a;a=a.parentNode}},w=function(a){var b,c={type:"container",html:u.getHtml(q.getCharMap(a)),onclick:function(c){var d=c.target;if(/^(TD|DIV)$/.test(d.nodeName)){var e=v(d).firstChild;if(e&&e.hasAttribute("data-chr")){var g=e.getAttribute("data-chr"),h=parseInt(g,10);isNaN(h)||f.insertChar(a,String.fromCharCode(h)),c.ctrlKey||b.close()}}},onmouseover:function(a){var c=v(a.target);c&&c.firstChild?(b.find("#preview").text(c.firstChild.firstChild.data),b.find("#previewTitle").text(c.title)):(b.find("#preview").text(" "),b.find("#previewTitle").text(" "))}};b=a.windowManager.open({title:"Special character",spacing:10,padding:10,items:[c,{type:"container",
layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){b.close()}}]})},x={open:w},y=function(a){a.addCommand("mceShowCharmap",function(){x.open(a)})},z={register:y},A=function(a){a.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),a.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})},B={register:A};return b.add("charmap",function(a){return z.register(a),B.register(a),s.get(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-code",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),d=function(a){return a.getParam("code_dialog_width",600)},e=function(a){return a.getParam("code_dialog_height",Math.min(c.DOM.getViewPort().h-200,500))},f={getMinWidth:d,getMinHeight:e},g=function(a,b){a.focus(),a.undoManager.transact(function(){a.setContent(b)}),a.selection.setCursorLocation(),a.nodeChanged()},h=function(a){return a.getContent({source_view:!0})},i={setContent:g,getContent:h},j=function(a){var b=f.getMinWidth(a),c=f.getMinHeight(a),d=a.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:b,minHeight:c,spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(b){i.setContent(a,b.data.code)}});d.find("#code").value(i.getContent(a))},k={open:j},l=function(a){a.addCommand("mceCodeEditor",function(){k.open(a)})},m={register:l},n=function(a){a.addButton("code",{icon:"code",tooltip:"Source code",onclick:function(){k.open(a)}}),a.addMenuItem("code",{icon:"code",text:"Source code",onclick:function(){k.open(a)}})},o={register:n};return b.add("code",function(a){return m.register(a),o.register(a),{}}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-colorpicker",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.util.Color"),d=function(a,b){a.find("#preview")[0].getEl().style.background=b},e=function(a,b){var e=c(b),f=e.toRgb();a.fromJSON({r:f.r,g:f.g,b:f.b,hex:e.toHex().substr(1)}),d(a,e.toHex())},f=function(a,b,c){var f=a.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:c,onchange:function(){var a=this.rgb();f&&(f.find("#r").value(a.r),f.find("#g").value(a.g),f.find("#b").value(a.b),f.find("#hex").value(this.value().substr(1)),d(f,this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var a,b,c=f.find("colorpicker")[0];return a=this.name(),b=this.value(),"hex"===a?(b="#"+b,e(f,b),void c.value(b)):(b={r:f.find("#r").value(),g:f.find("#g").value(),b:f.find("#b").value()},c.value(b),void e(f,b))}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){b("#"+f.toJSON().hex)}});e(f,c)},g={open:f};return b.add("colorpicker",function(a){a.settings.color_picker_callback||(a.settings.color_picker_callback=function(b,c){g.open(a,b,c)})}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-contextmenu",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=function(a){var c=a,d=function(){return c},e=function(a){c=a},f=function(){return b(d())};return{get:d,set:e,clone:f}},c=tinymce.util.Tools.resolve("tinymce.PluginManager"),d=function(a){var b=function(){return a.get()};return{isContextMenuVisible:b}},e={get:d},f=function(a){return a.settings.contextmenu_never_use_native},g=function(a){return a.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")},h={shouldNeverUseNative:f,getContextMenu:g},i=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),j=function(a){return i.DOM.select(a.settings.ui_container)[0]},k=function(a,b){return{x:a,y:b}},l=function(a,b,c){return k(a.x+b,a.y+c)},m=function(a){return k(a.pageX,a.pageY)},n=function(a){return k(a.clientX,a.clientY)},o=function(a,b){if(a&&"static"!==i.DOM.getStyle(a,"position",!0)){var c=i.DOM.getPos(a),d=c.x-a.scrollLeft,e=c.y-a.scrollTop;return l(b,-d,-e)}return l(b,0,0)},p=function(a,b){var c=i.DOM.getPos(a);return l(b,c.x,c.y)},q=function(a,b){if(a.inline)return o(j(a),m(b));var c=p(a.getContentAreaContainer(),n(b));return o(j(a),c)},r={getPos:q},s=tinymce.util.Tools.resolve("tinymce.ui.Factory"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=function(a,b){var c,d,e=[];d=h.getContextMenu(a),t.each(d.split(/[ ,]/),function(b){var c=a.menuItems[b];"|"===b&&(c={text:b}),c&&(c.shortcut="",e.push(c))});for(var f=0;f<e.length;f++)"|"===e[f].text&&(0!==f&&f!==e.length-1||e.splice(f,1));return c=s.create("menu",{items:e,context:"contextmenu",classes:"contextmenu"}),c.uiContainer=j(a),c.renderTo(j(a)),c.on("hide",function(a){a.control===this&&b.set(!1)}),a.on("remove",function(){c.remove(),c=null}),c},v=function(a,b,c,d){null===d.get()?d.set(u(a,c)):d.get().show(),d.get().moveTo(b.x,b.y),c.set(!0)},w={show:v},x=function(a,b){return b.ctrlKey&&!h.shouldNeverUseNative(a)},y=function(a,b,c){a.on("contextmenu",function(d){x(a,d)||(d.preventDefault(),w.show(a,r.getPos(a,d),b,c))})},z={setup:y};return c.add("contextmenu",function(a){var c=b(null),d=b(!1);return z.setup(a,d,c),e.get(d)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-directionality",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=function(a,b){var d,e=a.dom,f=a.selection.getSelectedBlocks();f.length&&(d=e.getAttrib(f[0],"dir"),c.each(f,function(a){e.getParent(a.parentNode,'*[dir="'+b+'"]',e.getRoot())||e.setAttrib(a,"dir",d!==b?b:null)}),a.nodeChanged())},e={setDir:d},f=function(a){a.addCommand("mceDirectionLTR",function(){e.setDir(a,"ltr")}),a.addCommand("mceDirectionRTL",function(){e.setDir(a,"rtl")})},g={register:f},h=function(a){var b=[];return c.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(c){b.push(c+"[dir="+a+"]")}),b.join(",")},i=function(a){a.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:h("ltr")}),a.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:h("rtl")})},j={register:i};return b.add("directionality",function(a){g.register(a),j.register(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-emoticons",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]],e=function(a){var b;return b='<table role="list" class="mce-grid">',c.each(d,function(d){b+="<tr>",c.each(d,function(c){var d=a+"/img/smiley-"+c+".gif";b+='<td><a href="#" data-mce-url="'+d+'" data-mce-alt="'+c+'" tabindex="-1" role="option" aria-label="'+c+'"><img src="'+d+'" style="width: 18px; height: 18px" role="presentation" /></a></td>'}),b+="</tr>"}),b+="</table>"},f={getHtml:e},g=function(a,b,c){a.insertContent(a.dom.createHTML("img",{src:b,alt:c}))},h=function(a,b){var c=f.getHtml(b);a.addButton("emoticons",{type:"panelbutton",panel:{role:"application",autohide:!0,html:c,onclick:function(b){var c=a.dom.getParent(b.target,"a");c&&(g(a,c.getAttribute("data-mce-url"),c.getAttribute("data-mce-alt")),this.hide())}},tooltip:"Emoticons"})},i={register:h};return b.add("emoticons",function(a,b){i.register(a,b)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-fullpage",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=function(a){var c=a,d=function(){return c},e=function(a){c=a},f=function(){return b(d())};return{get:d,set:e,clone:f}},c=tinymce.util.Tools.resolve("tinymce.PluginManager"),d=tinymce.util.Tools.resolve("tinymce.util.Tools"),e=tinymce.util.Tools.resolve("tinymce.html.DomParser"),f=tinymce.util.Tools.resolve("tinymce.html.Node"),g=tinymce.util.Tools.resolve("tinymce.html.Serializer"),h=function(a){return a.getParam("fullpage_hide_in_source_view")},i=function(a){return a.getParam("fullpage_default_xml_pi")},j=function(a){return a.getParam("fullpage_default_encoding")},k=function(a){return a.getParam("fullpage_default_font_family")},l=function(a){return a.getParam("fullpage_default_font_size")},m=function(a){return a.getParam("fullpage_default_text_color")},n=function(a){return a.getParam("fullpage_default_title")},o=function(a){return a.getParam("fullpage_default_doctype","<!DOCTYPE html>")},p={shouldHideInSourceView:h,getDefaultXmlPi:i,getDefaultEncoding:j,getDefaultFontFamily:k,getDefaultFontSize:l,getDefaultTextColor:m,getDefaultTitle:n,getDefaultDocType:o},q=function(a){return e({validate:!1,root_name:"#document"}).parse(a)},r=function(a,b){function c(a,b){var c=a.attr(b);return c||""}var e,f,g=q(b),h={};return h.fontface=p.getDefaultFontFamily(a),h.fontsize=p.getDefaultFontSize(a),e=g.firstChild,7===e.type&&(h.xml_pi=!0,f=/encoding="([^"]+)"/.exec(e.value),f&&(h.docencoding=f[1])),e=g.getAll("#doctype")[0],e&&(h.doctype="<!DOCTYPE"+e.value+">"),e=g.getAll("title")[0],e&&e.firstChild&&(h.title=e.firstChild.value),d.each(g.getAll("meta"),function(a){var b,c=a.attr("name"),d=a.attr("http-equiv");c?h[c.toLowerCase()]=a.attr("content"):"Content-Type"===d&&(b=/charset\s*=\s*(.*)\s*/gi.exec(a.attr("content")),b&&(h.docencoding=b[1]))}),e=g.getAll("html")[0],e&&(h.langcode=c(e,"lang")||c(e,"xml:lang")),h.stylesheets=[],d.each(g.getAll("link"),function(a){"stylesheet"===a.attr("rel")&&h.stylesheets.push(a.attr("href"))}),e=g.getAll("body")[0],e&&(h.langdir=c(e,"dir"),h.style=c(e,"style"),h.visited_color=c(e,"vlink"),h.link_color=c(e,"link"),h.active_color=c(e,"alink")),h},s=function(a,b,c){function e(a,b,c){a.attr(b,c?c:void 0)}function h(a){j.firstChild?j.insert(a,j.firstChild):j.append(a)}var i,j,k,l,m,n=a.dom;i=q(c),j=i.getAll("head")[0],j||(l=i.getAll("html")[0],j=new f("head",1),l.firstChild?l.insert(j,l.firstChild,!0):l.append(j)),l=i.firstChild,b.xml_pi?(m='version="1.0"',b.docencoding&&(m+=' encoding="'+b.docencoding+'"'),7!==l.type&&(l=new f("xml",7),i.insert(l,i.firstChild,!0)),l.value=m):l&&7===l.type&&l.remove(),l=i.getAll("#doctype")[0],b.doctype?(l||(l=new f("#doctype",10),b.xml_pi?i.insert(l,i.firstChild):h(l)),l.value=b.doctype.substring(9,b.doctype.length-1)):l&&l.remove(),l=null,d.each(i.getAll("meta"),function(a){"Content-Type"===a.attr("http-equiv")&&(l=a)}),b.docencoding?(l||(l=new f("meta",1),l.attr("http-equiv","Content-Type"),l.shortEnded=!0,h(l)),l.attr("content","text/html; charset="+b.docencoding)):l&&l.remove(),l=i.getAll("title")[0],b.title?(l?l.empty():(l=new f("title",1),h(l)),l.append(new f("#text",3)).value=b.title):l&&l.remove(),d.each("keywords,description,author,copyright,robots".split(","),function(a){var c,d,e=i.getAll("meta"),g=b[a];for(c=0;c<e.length;c++)if(d=e[c],d.attr("name")===a)return void(g?d.attr("content",g):d.remove());g&&(l=new f("meta",1),l.attr("name",a),l.attr("content",g),l.shortEnded=!0,h(l))});var o={};return d.each(i.getAll("link"),function(a){"stylesheet"===a.attr("rel")&&(o[a.attr("href")]=a)}),d.each(b.stylesheets,function(a){o[a]||(l=new f("link",1),l.attr({rel:"stylesheet",text:"text/css",href:a}),l.shortEnded=!0,h(l)),delete o[a]}),d.each(o,function(a){a.remove()}),l=i.getAll("body")[0],l&&(e(l,"dir",b.langdir),e(l,"style",b.style),e(l,"vlink",b.visited_color),e(l,"link",b.link_color),e(l,"alink",b.active_color),n.setAttribs(a.getBody(),{style:b.style,dir:b.dir,vLink:b.visited_color,link:b.link_color,aLink:b.active_color})),l=i.getAll("html")[0],l&&(e(l,"lang",b.langcode),e(l,"xml:lang",b.langcode)),j.firstChild||j.remove(),k=g({validate:!1,indent:!0,apply_source_formatting:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"}).serialize(i),k.substring(0,k.indexOf("</body>"))},t={parseHeader:q,htmlToData:r,dataToHtml:s},u=function(a,b){var c=t.htmlToData(a,b.get());a.windowManager.open({title:"Document properties",data:c,defaults:{type:"textbox",size:40},body:[{name:"title",label:"Title"},{name:"keywords",label:"Keywords"},{name:"description",label:"Description"},{name:"robots",label:"Robots"},{name:"author",label:"Author"},{name:"docencoding",label:"Encoding"}],onSubmit:function(e){var f=t.dataToHtml(a,d.extend(c,e.data),b.get());b.set(f)}})},v={open:u},w=function(a,b){a.addCommand("mceFullPageProperties",function(){v.open(a,b)})},x={register:w},y=function(a,b){return d.each(a,function(a){b=b.replace(a,function(a){return"<!--mce:protected "+escape(a)+"-->"})}),b},z=function(a){return a.replace(/<!--mce:protected ([\s\S]*?)-->/g,function(a,b){return unescape(b)})},A={protectHtml:y,unprotectHtml:z},B=d.each,C=function(a){return a.replace(/<\/?[A-Z]+/g,function(a){return a.toLowerCase()})},D=function(a,b,c,e){var f,g,h,i,j,k="",l=a.dom;if(!(e.selection||(h=A.protectHtml(a.settings.protect,e.content),"raw"===e.format&&b.get()||e.source_view&&p.shouldHideInSourceView(a)))){0!==h.length||e.source_view||(h=d.trim(b.get())+"\n"+d.trim(h)+"\n"+d.trim(c.get())),h=h.replace(/<(\/?)BODY/gi,"<$1body"),f=h.indexOf("<body"),f!==-1?(f=h.indexOf(">",f),b.set(C(h.substring(0,f+1))),g=h.indexOf("</body",f),g===-1&&(g=h.length),e.content=d.trim(h.substring(f+1,g)),c.set(C(h.substring(g)))):(b.set(E(a)),c.set("\n</body>\n</html>")),i=t.parseHeader(b.get()),B(i.getAll("style"),function(a){a.firstChild&&(k+=a.firstChild.value)}),j=i.getAll("body")[0],j&&l.setAttribs(a.getBody(),{style:j.attr("style")||"",dir:j.attr("dir")||"",vLink:j.attr("vlink")||"",link:j.attr("link")||"",aLink:j.attr("alink")||""}),l.remove("fullpage_styles");var m=a.getDoc().getElementsByTagName("head")[0];k&&(l.add(m,"style",{id:"fullpage_styles"},k),j=l.get("fullpage_styles"),j.styleSheet&&(j.styleSheet.cssText=k));var n={};d.each(m.getElementsByTagName("link"),function(a){"stylesheet"===a.rel&&a.getAttribute("data-mce-fullpage")&&(n[a.href]=a)}),d.each(i.getAll("link"),function(a){var b=a.attr("href");return!b||(n[b]||"stylesheet"!==a.attr("rel")||l.add(m,"link",{rel:"stylesheet",text:"text/css",href:b,"data-mce-fullpage":"1"}),void delete n[b])}),d.each(n,function(a){a.parentNode.removeChild(a)})}},E=function(a){var b,c="",d="";if(p.getDefaultXmlPi(a)){var e=p.getDefaultEncoding(a);c+='<?xml version="1.0" encoding="'+(e?e:"ISO-8859-1")+'" ?>\n'}return c+=p.getDefaultDocType(a),c+="\n<html>\n<head>\n",(b=p.getDefaultTitle(a))&&(c+="<title>"+b+"</title>\n"),(b=p.getDefaultEncoding(a))&&(c+='<meta http-equiv="Content-Type" content="text/html; charset='+b+'" />\n'),(b=p.getDefaultFontFamily(a))&&(d+="font-family: "+b+";"),(b=p.getDefaultFontSize(a))&&(d+="font-size: "+b+";"),(b=p.getDefaultTextColor(a))&&(d+="color: "+b+";"),c+="</head>\n<body"+(d?' style="'+d+'"':"")+">\n"},F=function(a,b,c,e){e.selection||e.source_view&&p.shouldHideInSourceView(a)||(e.content=A.unprotectHtml(d.trim(b)+"\n"+d.trim(e.content)+"\n"+d.trim(c)))},G=function(a,b,c){a.on("BeforeSetContent",function(d){D(a,b,c,d)}),a.on("GetContent",function(d){F(a,b.get(),c.get(),d)})},H={setup:G},I=function(a){a.addButton("fullpage",{title:"Document properties",cmd:"mceFullPageProperties"}),a.addMenuItem("fullpage",{text:"Document properties",cmd:"mceFullPageProperties",context:"file"})},J={register:I};return c.add("fullpage",function(a){var c=b(""),d=b("");x.register(a,c),J.register(a),H.setup(a,c,d)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-fullscreen",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=function(a){var c=a,d=function(){return c},e=function(a){c=a},f=function(){return b(d())};return{get:d,set:e,clone:f}},c=tinymce.util.Tools.resolve("tinymce.PluginManager"),d=function(a){return{isFullscreen:function(){return null!==a.get()}}},e={get:d},f=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),g=function(a,b){a.fire("FullscreenStateChanged",{state:b})},h={fireFullscreenStateChanged:g},i=f.DOM,j=function(){var a,b,c=window,d=document,e=d.body;return e.offsetWidth&&(a=e.offsetWidth,b=e.offsetHeight),c.innerWidth&&c.innerHeight&&(a=c.innerWidth,b=c.innerHeight),{w:a,h:b}},k=function(){var a=i.getViewPort();return{x:a.x,y:a.y}},l=function(a){window.scrollTo(a.x,a.y)},m=function(a,b){var c,d,e,f,g=document.body,m=document.documentElement,n=b.get(),o=function(){i.setStyle(e,"height",j().h-(d.clientHeight-e.clientHeight))},p=function(){i.unbind(window,"resize",o)};if(d=a.getContainer(),c=d.style,e=a.getContentAreaContainer().firstChild,f=e.style,n)f.width=n.iframeWidth,f.height=n.iframeHeight,n.containerWidth&&(c.width=n.containerWidth),n.containerHeight&&(c.height=n.containerHeight),i.removeClass(g,"mce-fullscreen"),i.removeClass(m,"mce-fullscreen"),i.removeClass(d,"mce-fullscreen"),l(n.scrollPos),i.unbind(window,"resize",n.resizeHandler),a.off("remove",n.removeHandler),b.set(null),h.fireFullscreenStateChanged(a,!1);else{var q={scrollPos:k(),containerWidth:c.width,containerHeight:c.height,iframeWidth:f.width,iframeHeight:f.height,resizeHandler:o,removeHandler:p};f.width=f.height="100%",c.width=c.height="",i.addClass(g,"mce-fullscreen"),i.addClass(m,"mce-fullscreen"),i.addClass(d,"mce-fullscreen"),i.bind(window,"resize",o),a.on("remove",p),o(),b.set(q),h.fireFullscreenStateChanged(a,!0)}},n={toggleFullscreen:m},o=function(a,b){a.addCommand("mceFullScreen",function(){n.toggleFullscreen(a,b)})},p={register:o},q=function(a){return function(b){var c=b.control;a.on("FullscreenStateChanged",function(a){c.active(a.state)})}},r=function(a){a.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,cmd:"mceFullScreen",onPostRender:q(a),context:"view"}),a.addButton("fullscreen",{active:!1,tooltip:"Fullscreen",cmd:"mceFullScreen",onPostRender:q(a)})},s={register:r};return c.add("fullscreen",function(a){var c=b(null);return a.settings.inline?e.get(c):(p.register(a,c),s.register(a),a.addShortcut("Ctrl+Shift+F","","mceFullScreen"),e.get(c))}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-hr",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=function(a){a.addCommand("InsertHorizontalRule",function(){a.execCommand("mceInsertContent",!1,"<hr />")})},d={register:c},e=function(a){a.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),a.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})},f={register:e};return b.add("hr",function(a){d.register(a),f.register(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-image",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){var a=E.getOrDie("FileReader");return new a}function b(){var a=E.getOrDie("XMLHttpRequest");return new a}function c(a){var c=function(c,d,e,f){var g,h;g=new b,g.open("POST",a.url),g.withCredentials=a.credentials,g.upload.onprogress=function(a){f(a.loaded/a.total*100)},g.onerror=function(){e("Image upload failed due to a XHR Transport error. Code: "+g.status)},g.onload=function(){var b;return g.status<200||g.status>=300?void e("HTTP Error: "+g.status):(b=JSON.parse(g.responseText),b&&"string"==typeof b.location?void d(eb(a.basePath,b.location)):void e("Invalid JSON: "+g.responseText))},h=new FormData,h.append("file",c.blob(),c.filename()),g.send(h)},d=function(a,b){return new F(function(c,d){try{b(a,c,d,db)}catch(e){d(e.message)}})},e=function(a){return a===c},f=function(b){return!a.url&&e(a.handler)?F.reject("Upload url missing from the settings."):d(b,a.handler)};return a=G.extend({credentials:!1,handler:c},a),{upload:f}}function d(a){function b(b){var c,d,e=Ea(a);if(b&&(d={type:"listbox",label:"Image list",name:"image-list",values:R.buildListItems(b,function(b){b.value=a.convertURL(b.value||b.url,"src")},[{text:"None",value:""}]),value:e.src&&a.convertURL(e.src,"src"),onselect:function(a){var b=c.find("#alt");(!b.value()||a.lastControl&&b.value()===a.lastControl.text())&&b.value(a.control.text()),c.find("#src").value(a.control.value()).fire("change")},onPostRender:function(){d=this}}),u.hasAdvTab(a)||u.hasUploadUrl(a)||u.hasUploadHandler(a)){var f=[Za.makeTab(a,d)];u.hasAdvTab(a)&&f.push(Na.makeTab(a)),(u.hasUploadUrl(a)||u.hasUploadHandler(a))&&f.push(ib.makeTab(a)),c=a.windowManager.open({title:"Insert/edit image",data:e,bodyType:"tabpanel",body:f,onSubmit:wb.curry(xb,a)})}else c=a.windowManager.open({title:"Insert/edit image",data:e,body:Za.getGeneralItems(a,d),onSubmit:wb.curry(xb,a)});Ua.syncSize(c)}function c(){R.createImageList(a,b)}return{open:c}}function e(){}var f=tinymce.util.Tools.resolve("tinymce.PluginManager"),g=function(a){return a.settings.image_dimensions!==!1},h=function(a){return a.settings.image_advtab===!0},i=function(a){return a.getParam("image_prepend_url","")},j=function(a){return a.getParam("image_class_list")},k=function(a){return a.settings.image_description!==!1},l=function(a){return a.settings.image_title===!0},m=function(a){return a.settings.image_caption===!0},n=function(a){return a.getParam("image_list",!1)},o=function(a){return a.getParam("images_upload_url",!1)},p=function(a){return a.getParam("images_upload_handler",!1)},q=function(a){return a.getParam("images_upload_url")},r=function(a){return a.getParam("images_upload_handler")},s=function(a){return a.getParam("images_upload_base_path")},t=function(a){return a.getParam("images_upload_credentials")},u={hasDimensions:g,hasAdvTab:h,getPrependUrl:i,getClassList:j,hasDescription:k,hasImageTitle:l,hasImageCaption:m,getImageList:n,hasUploadUrl:o,hasUploadHandler:p,getUploadUrl:q,getUploadHandler:r,getUploadBasePath:s,getUploadCredentials:t},v="undefined"!=typeof window?window:Function("return this;")(),w=function(a,b){for(var c=void 0!==b&&null!==b?b:v,d=0;d<a.length&&void 0!==c&&null!==c;++d)c=c[a[d]];return c},x=function(a,b){var c=a.split(".");return w(c,b)},y=function(a,b){return void 0!==a[b]&&null!==a[b]||(a[b]={}),a[b]},z=function(a,b){for(var c=void 0!==b?b:v,d=0;d<a.length;++d)c=y(c,a[d]);return c},A=function(a,b){var c=a.split(".");return z(c,b)},B={path:w,resolve:x,forge:z,namespace:A},C=function(a,b){return B.resolve(a,b)},D=function(a,b){var c=C(a,b);if(void 0===c||null===c)throw a+" not available on this browser";return c},E={getOrDie:D},F=tinymce.util.Tools.resolve("tinymce.util.Promise"),G=tinymce.util.Tools.resolve("tinymce.util.Tools"),H=tinymce.util.Tools.resolve("tinymce.util.XHR"),I=function(a,b){return Math.max(parseInt(a,10),parseInt(b,10))},J=function(a,b){function c(a,c){d.parentNode&&d.parentNode.removeChild(d),b({width:a,height:c})}var d=document.createElement("img");d.onload=function(){var a=I(d.width,d.clientWidth),b=I(d.height,d.clientHeight);c(a,b)},d.onerror=function(){c(0,0)};var e=d.style;e.visibility="hidden",e.position="fixed",e.bottom=e.left="0px",e.width=e.height="auto",document.body.appendChild(d),d.src=a},K=function(a,b,c){function d(a,c){return c=c||[],G.each(a,function(a){var e={text:a.text||a.title};a.menu?e.menu=d(a.menu):(e.value=a.value,b(e)),c.push(e)}),c}return d(a,c||[])},L=function(a){return a&&(a=a.replace(/px$/,"")),a},M=function(a){return a.length>0&&/^[0-9]+$/.test(a)&&(a+="px"),a},N=function(a){if(a.margin){var b=a.margin.split(" ");switch(b.length){case 1:a["margin-top"]=a["margin-top"]||b[0],a["margin-right"]=a["margin-right"]||b[0],a["margin-bottom"]=a["margin-bottom"]||b[0],a["margin-left"]=a["margin-left"]||b[0];break;case 2:a["margin-top"]=a["margin-top"]||b[0],a["margin-right"]=a["margin-right"]||b[1],a["margin-bottom"]=a["margin-bottom"]||b[0],a["margin-left"]=a["margin-left"]||b[1];break;case 3:a["margin-top"]=a["margin-top"]||b[0],a["margin-right"]=a["margin-right"]||b[1],a["margin-bottom"]=a["margin-bottom"]||b[2],a["margin-left"]=a["margin-left"]||b[1];break;case 4:a["margin-top"]=a["margin-top"]||b[0],a["margin-right"]=a["margin-right"]||b[1],a["margin-bottom"]=a["margin-bottom"]||b[2],a["margin-left"]=a["margin-left"]||b[3]}delete a.margin}return a},O=function(a,b){var c=u.getImageList(a);"string"==typeof c?H.send({url:c,success:function(a){b(JSON.parse(a))}}):"function"==typeof c?c(b):b(c)},P=function(a,b,c){function d(){c.onload=c.onerror=null,a.selection&&(a.selection.select(c),a.nodeChanged())}c.onload=function(){b.width||b.height||!u.hasDimensions(a)||a.dom.setAttribs(c,{width:c.clientWidth,height:c.clientHeight}),d()},c.onerror=d},Q=function(b){return new F(function(c,d){var e=new a;e.onload=function(){c(e.result)},e.onerror=function(){d(a.error.message)},e.readAsDataURL(b)})},R={getImageSize:J,buildListItems:K,removePixelSuffix:L,addPixelSuffix:M,mergeMargins:N,createImageList:O,waitLoadImage:P,blobToDataUri:Q},S=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),T=function(a){if(null===a)return"null";var b=typeof a;return"object"===b&&Array.prototype.isPrototypeOf(a)?"array":"object"===b&&String.prototype.isPrototypeOf(a)?"string":b},U=function(a){return function(b){return T(b)===a}},V={isString:U("string"),isObject:U("object"),isArray:U("array"),isNull:U("null"),isBoolean:U("boolean"),isUndefined:U("undefined"),isFunction:U("function"),isNumber:U("number")},W=function(a,b){return b},X=function(a,b){var c=V.isObject(a)&&V.isObject(b);return c?Z(a,b):b},Y=function(a){return function(){for(var b=new Array(arguments.length),c=0;c<b.length;c++)b[c]=arguments[c];if(0===b.length)throw new Error("Can't merge zero objects");for(var d={},e=0;e<b.length;e++){var f=b[e];for(var g in f)f.hasOwnProperty(g)&&(d[g]=a(d[g],f[g]))}return d}},Z=Y(X),$=Y(W),_={deepMerge:Z,merge:$},aa=S.DOM,ba=function(a){return a.style.marginLeft&&a.style.marginRight&&a.style.marginLeft===a.style.marginRight?R.removePixelSuffix(a.style.marginLeft):""},ca=function(a){return a.style.marginTop&&a.style.marginBottom&&a.style.marginTop===a.style.marginBottom?R.removePixelSuffix(a.style.marginTop):""},da=function(a){return a.style.borderWidth?R.removePixelSuffix(a.style.borderWidth):""},ea=function(a,b){return a.hasAttribute(b)?a.getAttribute(b):""},fa=function(a,b){return a.style[b]?a.style[b]:""},ga=function(a){return null!==a.parentNode&&"FIGURE"===a.parentNode.nodeName},ha=function(a,b,c){a.setAttribute(b,c)},ia=function(a){var b=aa.create("figure",{"class":"image"});aa.insertAfter(b,a),b.appendChild(a),b.appendChild(aa.create("figcaption",{contentEditable:!0},"Caption")),b.contentEditable="false"},ja=function(a){var b=a.parentNode;aa.insertAfter(a,b),aa.remove(b)},ka=function(a){ga(a)?ja(a):ia(a)},la=function(a,b){var c=a.getAttribute("style"),d=b(null!==c?c:"");d.length>0?(a.setAttribute("style",d),a.setAttribute("data-mce-style",d)):a.removeAttribute("style")},ma=function(a,b){return function(a,c,d){a.style[c]?(a.style[c]=R.addPixelSuffix(d),la(a,b)):ha(a,c,d)}},na=function(a,b){return a.style[b]?R.removePixelSuffix(a.style[b]):ea(a,b)},oa=function(a,b){var c=R.addPixelSuffix(b);a.style.marginLeft=c,a.style.marginRight=c},pa=function(a,b){var c=R.addPixelSuffix(b);a.style.marginTop=c,a.style.marginBottom=c},qa=function(a,b){var c=R.addPixelSuffix(b);a.style.borderWidth=c},ra=function(a,b){a.style.borderStyle=b},sa=function(a){return fa(a,"borderStyle")},ta=function(a){return"FIGURE"===a.nodeName},ua=function(){return{src:"",alt:"",title:"",width:"",height:"","class":"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""}},va=function(a,b){var c=document.createElement("img");return ha(c,"style",b.style),(ba(c)||""!==b.hspace)&&oa(c,b.hspace),(ca(c)||""!==b.vspace)&&pa(c,b.vspace),(da(c)||""!==b.border)&&qa(c,b.border),(sa(c)||""!==b.borderStyle)&&ra(c,b.borderStyle),a(c.getAttribute("style"))},wa=function(a,b){var c=document.createElement("img");if(Aa(a,_.merge(b,{caption:!1}),c),ha(c,"alt",b.alt),b.caption){var d=aa.create("figure",{"class":"image"});return d.appendChild(c),d.appendChild(aa.create("figcaption",{contentEditable:!0},"Caption")),d.contentEditable="false",d}return c},xa=function(a,b){return{src:ea(b,"src"),alt:ea(b,"alt"),title:ea(b,"title"),width:na(b,"width"),height:na(b,"height"),"class":ea(b,"class"),style:a(ea(b,"style")),caption:ga(b),hspace:ba(b),vspace:ca(b),border:da(b),borderStyle:fa(b,"borderStyle")}},ya=function(a,b,c,d,e){c[d]!==b[d]&&e(a,d,c[d])},za=function(a,b){return function(c,d,e){a(c,e),la(c,b)}},Aa=function(a,b,c){var d=xa(a,c);ya(c,d,b,"caption",function(a,b,c){return ka(a)}),ya(c,d,b,"src",ha),ya(c,d,b,"alt",ha),ya(c,d,b,"title",ha),ya(c,d,b,"width",ma("width",a)),ya(c,d,b,"height",ma("height",a)),ya(c,d,b,"class",ha),ya(c,d,b,"style",za(function(a,b){return ha(a,"style",b)},a)),ya(c,d,b,"hspace",za(oa,a)),ya(c,d,b,"vspace",za(pa,a)),ya(c,d,b,"border",za(qa,a)),ya(c,d,b,"borderStyle",za(ra,a))},Ba=function(a,b){var c=a.dom.styles.parse(b),d=R.mergeMargins(c),e=a.dom.styles.parse(a.dom.styles.serialize(d));return a.dom.styles.serialize(e)},Ca=function(a){var b=a.selection.getNode(),c=a.dom.getParent(b,"figure.image");return c?a.dom.select("img",c)[0]:b&&("IMG"!==b.nodeName||b.getAttribute("data-mce-object")||b.getAttribute("data-mce-placeholder"))?null:b},Da=function(a,b){var c=a.dom,d=c.getParent(b.parentNode,function(b){return a.schema.getTextBlockElements()[b.nodeName]});return d?c.split(d,b):b},Ea=function(a){var b=Ca(a);return b?xa(function(b){return Ba(a,b)},b):ua()},Fa=function(a,b){var c=wa(function(b){return Ba(a,b)},b);a.dom.setAttrib(c,"data-mce-id","__mcenew"),a.focus(),a.selection.setContent(c.outerHTML);var d=a.dom.select('*[data-mce-id="__mcenew"]')[0];if(a.dom.setAttrib(d,"data-mce-id",null),ta(d)){var e=Da(a,d);a.selection.select(e)}else a.selection.select(d)},Ga=function(a,b){a.dom.setAttrib(b,"src",b.getAttribute("src"))},Ha=function(a,b){if(b){var c=a.dom.is(b.parentNode,"figure.image")?b.parentNode:b;a.dom.remove(c),a.focus(),a.nodeChanged(),a.dom.isEmpty(a.getBody())&&(a.setContent(""),a.selection.setCursorLocation())}},Ia=function(a,b){var c=Ca(a);if(Aa(function(b){return Ba(a,b)},b,c),Ga(a,c),ta(c.parentNode)){var d=c.parentNode;Da(a,d),a.selection.select(c.parentNode)}else a.selection.select(c),R.waitLoadImage(a,b,c)},Ja=function(a,b){var c=Ca(a);c?b.src?Ia(a,b):Ha(a,c):b.src&&Fa(a,b)},Ka=function(a){return function(b){var c=a.dom,d=b.control.rootControl;if(u.hasAdvTab(a)){var e=d.toJSON(),f=c.parseStyle(e.style);d.find("#vspace").value(""),d.find("#hspace").value(""),f=R.mergeMargins(f),(f["margin-top"]&&f["margin-bottom"]||f["margin-right"]&&f["margin-left"])&&(f["margin-top"]===f["margin-bottom"]?d.find("#vspace").value(R.removePixelSuffix(f["margin-top"])):d.find("#vspace").value(""),f["margin-right"]===f["margin-left"]?d.find("#hspace").value(R.removePixelSuffix(f["margin-right"])):d.find("#hspace").value("")),f["border-width"]?d.find("#border").value(R.removePixelSuffix(f["border-width"])):d.find("#border").value(""),f["border-style"]?d.find("#borderStyle").value(f["border-style"]):d.find("#borderStyle").value(""),d.find("#style").value(c.serializeStyle(c.parseStyle(c.serializeStyle(f))))}}},La=function(a,b){b.find("#style").each(function(c){var d=va(function(b){return Ba(a,b)},_.merge(ua(),b.toJSON()));c.value(d)})},Ma=function(a){return{title:"Advanced",type:"form",pack:"start",items:[{
label:"Style",name:"style",type:"textbox",onchange:Ka(a)},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,defaults:{type:"textbox",maxWidth:50,onchange:function(b){La(a,b.control.rootControl)}},items:[{label:"Vertical space",name:"vspace"},{label:"Border width",name:"border"},{label:"Horizontal space",name:"hspace"},{label:"Border style",type:"listbox",name:"borderStyle",width:90,maxWidth:90,onselect:function(b){La(a,b.control.rootControl)},values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},Na={makeTab:Ma},Oa=function(a,b){a.state.set("oldVal",a.value()),b.state.set("oldVal",b.value())},Pa=function(a,b){var c=a.find("#width")[0],d=a.find("#height")[0],e=a.find("#constrain")[0];c&&d&&e&&b(c,d,e.checked())},Qa=function(a,b,c){var d=a.state.get("oldVal"),e=b.state.get("oldVal"),f=a.value(),g=b.value();c&&d&&e&&f&&g&&(f!==d?(g=Math.round(f/d*g),isNaN(g)||b.value(g)):(f=Math.round(g/e*f),isNaN(f)||a.value(f))),Oa(a,b)},Ra=function(a){Pa(a,Oa)},Sa=function(a){Pa(a,Qa)},Ta=function(){var a=function(a){Sa(a.control.rootControl)};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:a,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:a,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},Ua={createUi:Ta,syncSize:Ra,updateSize:Sa},Va=function(a,b){var c,d,e,f=a.meta||{},g=a.control,h=g.rootControl,i=h.find("#image-list")[0];i&&i.value(b.convertURL(g.value(),"src")),G.each(f,function(a,b){h.find("#"+b).value(a)}),f.width||f.height||(c=b.convertURL(g.value(),"src"),d=u.getPrependUrl(b),e=new RegExp("^(?:[a-z]+:)?//","i"),d&&!e.test(c)&&c.substring(0,d.length)!==d&&(c=d+c),g.value(c),R.getImageSize(b.documentBaseURI.toAbsolute(g.value()),function(a){a.width&&a.height&&u.hasDimensions(b)&&(h.find("#width").value(a.width),h.find("#height").value(a.height),Ua.syncSize(h))}))},Wa=function(a){a.meta=a.control.rootControl.toJSON()},Xa=function(a,b){var c=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:function(b){Va(b,a)},onbeforecall:Wa},b];return u.hasDescription(a)&&c.push({name:"alt",type:"textbox",label:"Image description"}),u.hasImageTitle(a)&&c.push({name:"title",type:"textbox",label:"Image Title"}),u.hasDimensions(a)&&c.push(Ua.createUi()),u.getClassList(a)&&c.push({name:"class",type:"listbox",label:"Class",values:R.buildListItems(u.getClassList(a),function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({inline:"img",classes:[b.value]})})})}),u.hasImageCaption(a)&&c.push({name:"caption",type:"checkbox",label:"Caption"}),c},Ya=function(a,b){return{title:"General",type:"form",items:Xa(a,b)}},Za={makeTab:Ya,getGeneralItems:Xa},$a=function(){return E.getOrDie("URL")},_a=function(a){return $a().createObjectURL(a)},ab=function(a){$a().revokeObjectURL(a)},bb={createObjectURL:_a,revokeObjectURL:ab},cb=tinymce.util.Tools.resolve("tinymce.ui.Factory"),db=function(){},eb=function(a,b){return a?a.replace(/\/$/,"")+"/"+b.replace(/^\//,""):b},fb=function(a){return function(b){var d=cb.get("Throbber"),e=b.control.rootControl,f=new d(e.getEl()),g=b.control.value(),h=bb.createObjectURL(g),i=c({url:u.getUploadUrl(a),basePath:u.getUploadBasePath(a),credentials:u.getUploadCredentials(a),handler:u.getUploadHandler(a)}),j=function(){f.hide(),bb.revokeObjectURL(h)};return f.show(),R.blobToDataUri(g).then(function(b){var c=a.editorUpload.blobCache.create({blob:g,blobUri:h,name:g.name?g.name.replace(/\.[^\.]+$/,""):null,base64:b.split(",")[1]});return i.upload(c).then(function(a){var b=e.find("#src");return b.value(a),e.find("tabpanel")[0].activateTab(0),b.fire("change"),j(),a})})["catch"](function(b){a.windowManager.alert(b),j()})}},gb=".jpg,.jpeg,.png,.gif",hb=function(a){return{title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:gb,onchange:fb(a)},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:gb,height:100,onchange:fb(a)}]}},ib={makeTab:hb},jb=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b]},kb=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return a()}},lb=function(a,b){return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a(b.apply(null,arguments))}},mb=function(a){return function(){return a}},nb=function(a){return a},ob=function(a,b){return a===b},pb=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var d=new Array(arguments.length-1),e=1;e<arguments.length;e++)d[e-1]=arguments[e];return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];for(var e=new Array(arguments.length),f=0;f<e.length;f++)e[f]=arguments[f];var g=d.concat(e);return a.apply(null,g)}},qb=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return!a.apply(null,arguments)}},rb=function(a){return function(){throw new Error(a)}},sb=function(a){return a()},tb=function(a){a()},ub=mb(!1),vb=mb(!0),wb={noop:jb,noarg:kb,compose:lb,constant:mb,identity:nb,tripleEquals:ob,curry:pb,not:qb,die:rb,apply:sb,call:tb,never:ub,always:vb},xb=function(a,b){var c=b.control.getRoot();Ua.updateSize(c),a.undoManager.transact(function(){var b=_.merge(Ea(a),c.toJSON());Ja(a,b)}),a.editorUpload.uploadImagesAuto()},yb=function(a){a.addCommand("mceImage",d(a).open)},zb={register:yb},Ab=function(a){var b=a.attr("class");return b&&/\bimage\b/.test(b)},Bb=function(a){return function(b){for(var c,d=b.length,e=function(b){b.attr("contenteditable",a?"true":null)};d--;)c=b[d],Ab(c)&&(c.attr("contenteditable",a?"false":null),G.each(c.getAll("figcaption"),e))}},Cb=function(a){a.on("preInit",function(){a.parser.addNodeFilter("figure",Bb(!0)),a.serializer.addNodeFilter("figure",Bb(!1))})},Db={setup:Cb},Eb=function(a){a.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:d(a).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"}),a.addMenuItem("image",{icon:"image",text:"Image",onclick:d(a).open,context:"insert",prependToContext:!0})},Fb={register:Eb};return f.add("image",function(a){Db.setup(a),Fb.register(a),zb.register(a)}),e})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-importcss",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),d=tinymce.util.Tools.resolve("tinymce.EditorManager"),e=tinymce.util.Tools.resolve("tinymce.Env"),f=tinymce.util.Tools.resolve("tinymce.util.Tools"),g=function(a){return a.getParam("importcss_merge_classes")},h=function(a){return a.getParam("importcss_exclusive")},i=function(a){return a.getParam("importcss_selector_converter")},j=function(a){return a.getParam("importcss_selector_filter")},k=function(a){return a.getParam("importcss_groups")},l=function(a){return a.getParam("importcss_append")},m=function(a){return a.getParam("importcss_file_filter")},n={shouldMergeClasses:g,shouldImportExclusive:h,getSelectorConverter:i,getSelectorFilter:j,getCssGroups:k,shouldAppend:l,getFileFilter:m},o=function(a){var b=e.cacheSuffix;return"string"==typeof a&&(a=a.replace("?"+b,"").replace("&"+b,"")),a},p=function(a,b){var c=a.settings,e=c.skin!==!1&&(c.skin||"lightgray");if(e){var f=c.skin_url?a.documentBaseURI.toAbsolute(c.skin_url):d.baseURL+"/skins/"+e;return b===f+"/content"+(a.inline?".inline":"")+".min.css"}return!1},q=function(a){return"string"==typeof a?function(b){return b.indexOf(a)!==-1}:a instanceof RegExp?function(b){return a.test(b)}:a},r=function(a,b,c){function d(b,g){var h,i=b.href;if(i=o(i),i&&c(i,g)&&!p(a,i)){f.each(b.imports,function(a){d(a,!0)});try{h=b.cssRules||b.rules}catch(j){}f.each(h,function(a){a.styleSheet?d(a.styleSheet,!0):a.selectorText&&f.each(a.selectorText.split(","),function(a){e.push(f.trim(a))})})}}var e=[],g={};f.each(a.contentCSS,function(a){g[a]=!0}),c||(c=function(a,b){return b||g[a]});try{f.each(b.styleSheets,function(a){d(a)})}catch(h){}return e},s=function(a,b){var c,d=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(b);if(d){var e=d[1],g=d[2].substr(1).split(".").join(" "),h=f.makeMap("a,img");return d[1]?(c={title:b},a.schema.getTextBlockElements()[e]?c.block=e:a.schema.getBlockElements()[e]||h[e.toLowerCase()]?c.selector=e:c.inline=e):d[2]&&(c={inline:"span",title:b.substr(1),classes:g}),n.shouldMergeClasses(a)!==!1?c.classes=g:c.attributes={"class":g},c}},t=function(a,b){return f.grep(a,function(a){return!a.filter||a.filter(b)})},u=function(a){return f.map(a,function(a){return f.extend({},a,{original:a,selectors:{},filter:q(a.filter),item:{text:a.title,menu:[]}})})},v=function(a,b){return null===b||n.shouldImportExclusive(a)!==!1},w=function(a,b,c,d){return!(v(a,c)?b in d:b in c.selectors)},x=function(a,b,c,d){v(a,c)?d[b]=!0:c.selectors[b]=!0},y=function(a,b,c,d){var e;return e=d&&d.selector_converter?d.selector_converter:n.getSelectorConverter(a)?n.getSelectorConverter(a):function(){return s(a,c)},e.call(b,c,d)},z=function(a){a.on("renderFormatsMenu",function(b){var d={},e=q(n.getSelectorFilter(a)),g=b.control,h=u(n.getCssGroups(a)),i=function(b,e){if(w(a,b,e,d)){x(a,b,e,d);var h=y(a,a.plugins.importcss,b,e);if(h){var i=h.name||c.DOM.uniqueId();return a.formatter.register(i,h),f.extend({},g.settings.itemDefaults,{text:h.title,format:i})}}return null};n.shouldAppend(a)||g.items().remove(),f.each(r(a,b.doc||a.getDoc(),q(n.getFileFilter(a))),function(a){if(a.indexOf(".mce-")===-1&&(!e||e(a))){var b=t(h,a);if(b.length>0)f.each(b,function(b){var c=i(a,b);c&&b.item.menu.push(c)});else{var c=i(a,null);c&&g.add(c)}}}),f.each(h,function(a){a.item.menu.length>0&&g.add(a.item)}),b.control.renderNew()})},A={defaultConvertSelectorToFormat:s,setup:z},B=function(a){var b=function(b){return A.defaultConvertSelectorToFormat(a,b)};return{convertSelectorToFormat:b}},C={get:B};return b.add("importcss",function(a){return A.setup(a),C.get(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-insertdatetime",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=function(a){var c=a,d=function(){return c},e=function(a){c=a},f=function(){return b(d())};return{get:d,set:e,clone:f}},c=tinymce.util.Tools.resolve("tinymce.PluginManager"),d=function(a){return a.getParam("insertdatetime_dateformat",a.translate("%Y-%m-%d"))},e=function(a){return a.getParam("insertdatetime_timeformat",a.translate("%H:%M:%S"))},f=function(a){return a.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])},g=function(a){var b=f(a);return b.length>0?b[0]:e(a)},h=function(a){return a.getParam("insertdatetime_element",!1)},i={getDateFormat:d,getTimeFormat:e,getFormats:f,getDefaultDateTime:g,shouldInsertTimeElement:h},j="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),k="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),l="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),m="January February March April May June July August September October November December".split(" "),n=function(a,b){if(a=""+a,a.length<b)for(var c=0;c<b-a.length;c++)a="0"+a;return a},o=function(a,b,c){return c=c||new Date,b=b.replace("%D","%m/%d/%Y"),b=b.replace("%r","%I:%M:%S %p"),b=b.replace("%Y",""+c.getFullYear()),b=b.replace("%y",""+c.getYear()),b=b.replace("%m",n(c.getMonth()+1,2)),b=b.replace("%d",n(c.getDate(),2)),b=b.replace("%H",""+n(c.getHours(),2)),b=b.replace("%M",""+n(c.getMinutes(),2)),b=b.replace("%S",""+n(c.getSeconds(),2)),b=b.replace("%I",""+((c.getHours()+11)%12+1)),b=b.replace("%p",""+(c.getHours()<12?"AM":"PM")),b=b.replace("%B",""+a.translate(m[c.getMonth()])),b=b.replace("%b",""+a.translate(l[c.getMonth()])),b=b.replace("%A",""+a.translate(k[c.getDay()])),b=b.replace("%a",""+a.translate(j[c.getDay()])),b=b.replace("%%","%")},p=function(a,b,c,d){var e=a.dom.create("time",{datetime:c},d);b.parentNode.insertBefore(e,b),a.dom.remove(b),a.selection.select(e,!0),a.selection.collapse(!1)},q=function(a,b){if(i.shouldInsertTimeElement(a)){var c=o(a,b),d=void 0;d=/%[HMSIp]/.test(b)?o(a,"%Y-%m-%dT%H:%M"):o(a,"%Y-%m-%d");var e=a.dom.getParent(a.selection.getStart(),"time");e?p(a,e,d,c):a.insertContent('<time datetime="'+d+'">'+c+"</time>")}else a.insertContent(o(a,b))},r={insertDateTime:q,getDateTime:o},s=function(a){a.addCommand("mceInsertDate",function(){r.insertDateTime(a,i.getDateFormat(a))}),a.addCommand("mceInsertTime",function(){r.insertDateTime(a,i.getTimeFormat(a))})},t={register:s},u=tinymce.util.Tools.resolve("tinymce.util.Tools"),v=function(a,b){var c=i.getFormats(a);return u.map(c,function(c){return{text:r.getDateTime(a,c),onclick:function(){b.set(c),r.insertDateTime(a,c)}}})},w=function(a,b){var c=v(a,b);a.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",menu:c,onclick:function(){var c=b.get();r.insertDateTime(a,c?c:i.getDefaultDateTime(a))}}),a.addMenuItem("insertdatetime",{icon:"date",text:"Date/time",menu:c,context:"insert"})},x={register:w};return c.add("insertdatetime",function(a){var c=b(null);t.register(a),x.register(a,c)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-legacyoutput",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=function(a){var b="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",d=c.explode(a.settings.font_size_style_values),e=a.schema;a.formatter.register({alignleft:{selector:b,attributes:{align:"left"}},aligncenter:{selector:b,attributes:{align:"center"}},alignright:{selector:b,attributes:{align:"right"}},alignjustify:{selector:b,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(a){return c.inArray(d,a.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),c.each("b,i,u,strike".split(","),function(a){e.addValidElements(a+"[*]")}),e.getElementRule("font")||e.addValidElements("font[face|size|color|style]"),c.each(b.split(","),function(a){var b=e.getElementRule(a);b&&(b.attributes.align||(b.attributes.align={},b.attributesOrder.push("align")))})},e=function(a){a.settings.inline_styles=!1,a.on("init",function(){d(a)})},f={setup:e},g=function(a){a.addButton("fontsizeselect",function(){var b=[],c="8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7",d=a.settings.fontsizeFormats||c;return a.$.each(d.split(" "),function(a,c){var d=c,e=c,f=c.split("=");f.length>1&&(d=f[0],e=f[1]),b.push({text:d,value:e})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:b,fixedWidth:!0,onPostRender:function(){var b=this;a.on("NodeChange",function(){var c;c=a.dom.getParent(a.selection.getNode(),"font"),c?b.value(c.size):b.value("")})},onclick:function(b){b.control.settings.value&&a.execCommand("FontSize",!1,b.control.settings.value)}}}),a.addButton("fontselect",function(){function b(a){a=a.replace(/;$/,"").split(";");for(var b=a.length;b--;)a[b]=a[b].split("=");return a}var c="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",d=[],e=b(a.settings.font_formats||c);return a.$.each(e,function(a,b){d.push({text:{raw:b[0]},value:b[1],textStyle:b[1].indexOf("dings")===-1?"font-family:"+b[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:d,fixedWidth:!0,onPostRender:function(){var b=this;a.on("NodeChange",function(){var c;c=a.dom.getParent(a.selection.getNode(),"font"),c?b.value(c.face):b.value("")})},onselect:function(b){b.control.settings.value&&a.execCommand("FontName",!1,b.control.settings.value)}}})},h={register:g};return b.add("legacyoutput",function(a){f.setup(a),h.register(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-link",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.util.VK"),d=function(a){return"boolean"==typeof a.link_assume_external_targets&&a.link_assume_external_targets},e=function(a){return"boolean"==typeof a.link_context_toolbar&&a.link_context_toolbar},f=function(a){return a.link_list},g=function(a){return"string"==typeof a.default_link_target},h=function(a){return a.default_link_target},i=function(a){return a.target_list},j=function(a,b){a.settings.target_list=b},k=function(a){return i(a)!==!1},l=function(a){return a.rel_list},m=function(a){return void 0!==l(a)},n=function(a){return a.link_class_list},o=function(a){return void 0!==n(a)},p=function(a){return a.link_title!==!1},q=function(a){return"boolean"==typeof a.allow_unsafe_link_target&&a.allow_unsafe_link_target},r={assumeExternalTargets:d,hasContextToolbar:e,getLinkList:f,hasDefaultLinkTarget:g,getDefaultLinkTarget:h,getTargetList:i,setTargetList:j,shouldShowTargetList:k,getRelList:l,hasRelList:m,getLinkClassList:n,hasLinkClassList:o,shouldShowLinkTitle:p,allowUnsafeLinkTarget:q},s=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),t=tinymce.util.Tools.resolve("tinymce.Env"),u=function(a,b){document.body.appendChild(a),a.dispatchEvent(b),document.body.removeChild(a)},v=function(a){if(!t.ie||t.ie>10){var b=document.createElement("a");b.target="_blank",b.href=a,b.rel="noreferrer noopener";var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),u(b,c)}else{var d=window.open("","_blank");if(d){d.opener=null;var e=d.document;e.open(),e.write('<meta http-equiv="refresh" content="0; url='+s.DOM.encode(a)+'">'),e.close()}}},w={open:v},x=tinymce.util.Tools.resolve("tinymce.util.Tools"),y=function(a,b){var c=["noopener"],d=a?a.split(/\s+/):[],e=function(a){return x.trim(a.sort().join(" "))},f=function(a){return a=g(a),a.length?a.concat(c):c},g=function(a){return a.filter(function(a){return x.inArray(c,a)===-1})};return d=b?f(d):g(d),d.length?e(d):null},z=function(a){return a.replace(/\uFEFF/g,"")},A=function(a,b){return b=b||a.selection.getNode(),F(b)?a.dom.select("a[href]",b)[0]:a.dom.getParent(b,"a[href]")},B=function(a,b){var c=b?b.innerText||b.textContent:a.getContent({format:"text"});return z(c)},C=function(a){return a&&"A"===a.nodeName&&a.href},D=function(a){return x.grep(a,C).length>0},E=function(a){return!(/</.test(a)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(a)||a.indexOf("href=")===-1))},F=function(a){return a&&"FIGURE"===a.nodeName&&/\bimage\b/i.test(a.className)},G=function(a,b){return function(c){a.undoManager.transact(function(){var d=a.selection.getNode(),e=A(a,d),f={href:c.href,target:c.target?c.target:null,rel:c.rel?c.rel:null,"class":c["class"]?c["class"]:null,title:c.title?c.title:null};r.hasRelList(a.settings)||r.allowUnsafeLinkTarget(a.settings)!==!1||(f.rel=y(f.rel,"_blank"===f.target)),c.href===b.href&&(b.attach(),b={}),e?(a.focus(),c.hasOwnProperty("text")&&("innerText"in e?e.innerText=c.text:e.textContent=c.text),a.dom.setAttribs(e,f),a.selection.select(e),a.undoManager.add()):F(d)?J(a,d,f):c.hasOwnProperty("text")?a.insertContent(a.dom.createHTML("a",f,a.dom.encode(c.text))):a.execCommand("mceInsertLink",!1,f)})}},H=function(a){return function(){a.undoManager.transact(function(){var b=a.selection.getNode();F(b)?I(a,b):a.execCommand("unlink")})}},I=function(a,b){var c,d;d=a.dom.select("img",b)[0],d&&(c=a.dom.getParents(d,"a[href]",b)[0],c&&(c.parentNode.insertBefore(d,c),a.dom.remove(c)))},J=function(a,b,c){var d,e;e=a.dom.select("img",b)[0],e&&(d=a.dom.create("a",c),e.parentNode.insertBefore(d,e),d.appendChild(e))},K={link:G,unlink:H,isLink:C,hasLinks:D,isOnlyTextSelected:E,getAnchorElement:A,getAnchorText:B,toggleTargetRules:y},L=tinymce.util.Tools.resolve("tinymce.util.Delay"),M=tinymce.util.Tools.resolve("tinymce.util.XHR"),N={},O=function(a,b){var c=r.getLinkList(a.settings);"string"==typeof c?M.send({url:c,success:function(c){b(a,JSON.parse(c))}}):"function"==typeof c?c(function(c){b(a,c)}):b(a,c)},P=function(a,b,c){var d=function(a,c){return c=c||[],x.each(a,function(a){var e={text:a.text||a.title};a.menu?e.menu=d(a.menu):(e.value=a.value,b&&b(e)),c.push(e)}),c};return d(a,c||[])},Q=function(a,b,c){var d=a.selection.getRng();L.setEditorTimeout(a,function(){a.windowManager.confirm(b,function(b){a.selection.setRng(d),c(b)})})},R=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n={},o=a.selection,p=a.dom,q=function(a){var b=e.find("#text");(!b.value()||a.lastControl&&b.value()===a.lastControl.text())&&b.value(a.control.text()),e.find("#href").value(a.control.value())},s=function(b){var c=[];if(x.each(a.dom.select("a:not([href])"),function(a){var d=a.name||a.id;d&&c.push({text:d,value:"#"+d,selected:b.indexOf("#"+d)!==-1})}),c.length)return c.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:c,onselect:q}},t=function(){d||!f||n.text||this.parent().parent().find("#text")[0].value(this.value())},u=function(b){var c=b.meta||{};h&&h.value(a.convertURL(this.value(),"href")),x.each(b.meta,function(a,b){var c=e.find("#"+b);"text"===b?0===d.length&&(c.value(a),n.text=a):c.value(a)}),c.attach&&(N={href:this.value(),attach:c.attach}),c.text||t.call(this)},v=function(a){a.meta=e.toJSON()};f=K.isOnlyTextSelected(o.getContent()),c=K.getAnchorElement(a),n.text=d=K.getAnchorText(a.selection,c),n.href=c?p.getAttrib(c,"href"):"",c?n.target=p.getAttrib(c,"target"):r.hasDefaultLinkTarget(a.settings)&&(n.target=r.getDefaultLinkTarget(a.settings)),(m=p.getAttrib(c,"rel"))&&(n.rel=m),(m=p.getAttrib(c,"class"))&&(n["class"]=m),(m=p.getAttrib(c,"title"))&&(n.title=m),f&&(g={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){n.text=this.value()}}),b&&(h={type:"listbox",label:"Link list",values:P(b,function(b){b.value=a.convertURL(b.value||b.url,"href")},[{text:"None",value:""}]),onselect:q,value:a.convertURL(n.href,"href"),onPostRender:function(){h=this}}),r.shouldShowTargetList(a.settings)&&(void 0===r.getTargetList(a.settings)&&r.setTargetList(a,[{text:"None",value:""},{text:"New window",value:"_blank"}]),j={name:"target",type:"listbox",label:"Target",values:P(r.getTargetList(a.settings))}),r.hasRelList(a.settings)&&(i={name:"rel",type:"listbox",label:"Rel",values:P(r.getRelList(a.settings),function(b){r.allowUnsafeLinkTarget(a.settings)===!1&&(b.value=K.toggleTargetRules(b.value,"_blank"===n.target))})}),r.hasLinkClassList(a.settings)&&(k={name:"class",type:"listbox",label:"Class",values:P(r.getLinkClassList(a.settings),function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({inline:"a",classes:[b.value]})})})}),r.shouldShowLinkTitle(a.settings)&&(l={name:"title",type:"textbox",label:"Title",value:n.title}),e=a.windowManager.open({title:"Insert link",data:n,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:u,onkeyup:t,onpaste:t,onbeforecall:v},g,l,s(n.href),h,i,j,k],onSubmit:function(b){var c=r.assumeExternalTargets(a.settings),e=K.link(a,N),g=K.unlink(a),h=x.extend({},n,b.data),i=h.href;return i?(f&&h.text!==d||delete h.text,i.indexOf("@")>0&&i.indexOf("//")===-1&&i.indexOf("mailto:")===-1?void Q(a,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(a){a&&(h.href="mailto:"+i),e(h)}):c===!0&&!/^\w+:/i.test(i)||c===!1&&/^\s*www[\.|\d\.]/i.test(i)?void Q(a,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(a){a&&(h.href="http://"+i),e(h)}):void e(h)):void g()}})},S=function(a){O(a,R)},T={open:S},U=function(a,b){return a.dom.getParent(b,"a[href]")},V=function(a){return U(a,a.selection.getStart())},W=function(a){var b=a.getAttribute("data-mce-href");return b?b:a.getAttribute("href")},X=function(a){var b=a.plugins.contextmenu;return!!b&&b.isContextMenuVisible()},Y=function(a){return a.altKey===!0&&a.shiftKey===!1&&a.ctrlKey===!1&&a.metaKey===!1},Z=function(a,b){if(b){var c=W(b);if(/^#/.test(c)){var d=a.$(c);d.length&&a.selection.scrollIntoView(d[0],!0)}else w.open(b.href)}},$=function(a){return function(){T.open(a)}},_=function(a){return function(){Z(a,V(a))}},aa=function(a){return function(b){var c,d,e;return!!(r.hasContextToolbar(a.settings)&&!X(a)&&K.isLink(b)&&(c=a.selection,d=c.getRng(),e=d.startContainer,3===e.nodeType&&c.isCollapsed()&&d.startOffset>0&&d.startOffset<e.data.length))}},ba=function(a){a.on("click",function(b){var d=U(a,b.target);d&&c.metaKeyPressed(b)&&(b.preventDefault(),Z(a,d))}),a.on("keydown",function(b){var c=V(a);c&&13===b.keyCode&&Y(b)&&(b.preventDefault(),Z(a,c))})},ca=function(a){return function(){var b=this;a.on("nodechange",function(c){b.active(!a.readonly&&!!K.getAnchorElement(a,c.element))})}},da=function(a){return function(){var b=this,c=function(a){K.hasLinks(a.parents)?b.show():b.hide()};K.hasLinks(a.dom.getParents(a.selection.getStart()))||b.hide(),a.on("nodechange",c),b.on("remove",function(){a.off("nodechange",c)})}},ea={openDialog:$,gotoSelectedLink:_,leftClickedOnAHref:aa,setupGotoLinks:ba,toggleActiveState:ca,toggleViewLinkState:da},fa=function(a){a.addCommand("mceLink",ea.openDialog(a))},ga={register:fa},ha=function(a){a.addShortcut("Meta+K","",ea.openDialog(a))},ia={setup:ha},ja=function(a){a.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:ea.openDialog(a),onpostrender:ea.toggleActiveState(a)}),a.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:K.unlink(a),onpostrender:ea.toggleActiveState(a)}),a.addContextToolbar&&a.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:ea.gotoSelectedLink(a)})},ka=function(a){a.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:ea.gotoSelectedLink(a),onPostRender:ea.toggleViewLinkState(a),prependToContext:!0}),a.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:ea.openDialog(a),stateSelector:"a[href]",context:"insert",prependToContext:!0}),a.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:K.unlink(a),stateSelector:"a[href]"})},la=function(a){a.addContextToolbar&&a.addContextToolbar(ea.leftClickedOnAHref(a),"openlink | link unlink")},ma={setupButtons:ja,setupMenuItems:ka,setupContextToolbars:la};return b.add("link",function(a){ma.setupButtons(a),ma.setupMenuItems(a),ma.setupContextToolbars(a),ea.setupGotoLinks(a),ga.register(a),ia.setup(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-lists",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),d=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),e=tinymce.util.Tools.resolve("tinymce.util.VK"),f=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),g=tinymce.util.Tools.resolve("tinymce.util.Tools"),h=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),i=function(a){return a&&3===a.nodeType},j=function(a){return a&&/^(OL|UL|DL)$/.test(a.nodeName)},k=function(a){return a&&/^(LI|DT|DD)$/.test(a.nodeName)},l=function(a){return a&&/^(TH|TD)$/.test(a.nodeName)},m=function(a){return a&&"BR"===a.nodeName},n=function(a){return a.parentNode.firstChild===a},o=function(a){return a.parentNode.lastChild===a},p=function(a,b){return b&&!!a.schema.getTextBlockElements()[b.nodeName]},q=function(a,b){return a&&a.nodeName in b},r=function(a,b){return!!m(b)&&!(!a.isBlock(b.nextSibling)||m(b.previousSibling))},s=function(a,b,c){var d=a.isEmpty(b);return!(c&&a.select("span[data-mce-type=bookmark]",b).length>0)&&d},t=function(a,b){return a.isChildOf(b,a.getRoot())},u={isTextNode:i,isListNode:j,isListItemNode:k,isTableCellNode:l,isBr:m,isFirstChild:n,isLastChild:o,isTextBlock:p,isBlock:q,isBogusBr:r,isEmpty:s,isChildOfBody:t},v=function(a,b){var d=c.getNode(a,b);if(u.isListItemNode(a)&&u.isTextNode(d)){var e=b>=a.childNodes.length?d.data.length:0;return{container:d,offset:e}}return{container:a,offset:b}},w=function(a){var b=a.cloneRange(),c=v(a.startContainer,a.startOffset);b.setStart(c.container,c.offset);var d=v(a.endContainer,a.endOffset);return b.setEnd(d.container,d.offset),b},x={getNormalizedEndPoint:v,normalizeRange:w},y=h.DOM,z=function(a){var b={},c=function(c){var d,e,f;e=a[c?"startContainer":"endContainer"],f=a[c?"startOffset":"endOffset"],1===e.nodeType&&(d=y.create("span",{"data-mce-type":"bookmark"}),e.hasChildNodes()?(f=Math.min(f,e.childNodes.length-1),c?e.insertBefore(d,e.childNodes[f]):y.insertAfter(d,e.childNodes[f])):e.appendChild(d),e=d,f=0),b[c?"startContainer":"endContainer"]=e,b[c?"startOffset":"endOffset"]=f};return c(!0),a.collapsed||c(),b},A=function(a){function b(b){var c,d,e,f=function(a){for(var b=a.parentNode.firstChild,c=0;b;){if(b===a)return c;1===b.nodeType&&"bookmark"===b.getAttribute("data-mce-type")||c++,b=b.nextSibling}return-1};c=e=a[b?"startContainer":"endContainer"],d=a[b?"startOffset":"endOffset"],c&&(1===c.nodeType&&(d=f(c),c=c.parentNode,y.remove(e),!c.hasChildNodes()&&y.isBlock(c)&&c.appendChild(y.create("br"))),a[b?"startContainer":"endContainer"]=c,a[b?"startOffset":"endOffset"]=d)}b(!0),b();var c=y.createRng();return c.setStart(a.startContainer,a.startOffset),a.endContainer&&c.setEnd(a.endContainer,a.endOffset),x.normalizeRange(c)},B={createBookmark:z,resolveBookmark:A},C=h.DOM,D=function(a,b){var c,d=b.parentNode;"LI"===d.nodeName&&d.firstChild===b&&(c=d.previousSibling,c&&"LI"===c.nodeName?(c.appendChild(b),u.isEmpty(a,d)&&C.remove(d)):C.setStyle(d,"listStyleType","none")),u.isListNode(d)&&(c=d.previousSibling,c&&"LI"===c.nodeName&&c.appendChild(b))},E=function(a,b){g.each(g.grep(a.select("ol,ul",b)),function(b){D(a,b)})},F={normalizeList:D,normalizeLists:E},G=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),H=function(a){var b=a.selection.getStart(!0);return a.dom.getParent(b,"OL,UL,DL",N(a,b))},I=function(a,b){return a&&1===b.length&&b[0]===a},J=function(a){return g.grep(a.querySelectorAll("ol,ul,dl"),function(a){return u.isListNode(a)})},K=function(a){var b=H(a),c=a.selection.getSelectedBlocks();return I(b,c)?J(b):g.grep(c,function(a){return u.isListNode(a)&&b!==a})},L=function(a,b){var c=g.map(b,function(b){var c=a.dom.getParent(b,"li,dd,dt",N(a,b));return c?c:b});return G.unique(c)},M=function(a){var b=a.selection.getSelectedBlocks();return g.grep(L(a,b),function(a){return u.isListItemNode(a)})},N=function(a,b){var c=a.dom.getParents(b,"TD,TH"),d=c.length>0?c[0]:a.getBody();return d},O={getParentList:H,getSelectedSubLists:K,getSelectedListItems:M,getClosestListRootElm:N},P=tinymce.util.Tools.resolve("tinymce.Env"),Q=h.DOM,R=function(a,b,c){
var d,e,f,g=Q.createFragment(),h=a.schema.getBlockElements();if(a.settings.forced_root_block&&(c=c||a.settings.forced_root_block),c&&(e=Q.create(c),e.tagName===a.settings.forced_root_block&&Q.setAttribs(e,a.settings.forced_root_block_attrs),u.isBlock(b.firstChild,h)||g.appendChild(e)),b)for(;d=b.firstChild;){var i=d.nodeName;f||"SPAN"===i&&"bookmark"===d.getAttribute("data-mce-type")||(f=!0),u.isBlock(d,h)?(g.appendChild(d),e=null):c?(e||(e=Q.create(c),g.appendChild(e)),e.appendChild(d)):g.appendChild(d)}return a.settings.forced_root_block?f||P.ie&&!(P.ie>10)||e.appendChild(Q.create("br",{"data-mce-bogus":"1"})):g.appendChild(Q.create("br")),g},S={createNewTextBlock:R},T=h.DOM,U=function(a,b,c,d){var e,f,h,i,j=function(a){g.each(h,function(b){a.parentNode.insertBefore(b,c.parentNode)}),T.remove(a)};for(h=T.select('span[data-mce-type="bookmark"]',b),d=d||S.createNewTextBlock(a,c),e=T.createRng(),e.setStartAfter(c),e.setEndAfter(b),f=e.extractContents(),i=f.firstChild;i;i=i.firstChild)if("LI"===i.nodeName&&a.dom.isEmpty(i)){T.remove(i);break}a.dom.isEmpty(f)||T.insertAfter(f,b),T.insertAfter(d,b),u.isEmpty(a.dom,c.parentNode)&&j(c.parentNode),T.remove(c),u.isEmpty(a.dom,b)&&T.remove(b)},V={splitList:U},W=h.DOM,X=function(a,b){u.isEmpty(a,b)&&W.remove(b)},Y=function(a,b){var c,d,e=b.parentNode;return e?(c=e.parentNode,e===a.getBody()||("DD"===b.nodeName?(W.rename(b,"DT"),!0):u.isFirstChild(b)&&u.isLastChild(b)?("LI"===c.nodeName?(W.insertAfter(b,c),X(a.dom,c),W.remove(e)):u.isListNode(c)?W.remove(e,!0):(c.insertBefore(S.createNewTextBlock(a,b),e),W.remove(e)),!0):u.isFirstChild(b)?("LI"===c.nodeName?(W.insertAfter(b,c),b.appendChild(e),X(a.dom,c)):u.isListNode(c)?c.insertBefore(b,e):(c.insertBefore(S.createNewTextBlock(a,b),e),W.remove(b)),!0):u.isLastChild(b)?("LI"===c.nodeName?W.insertAfter(b,c):u.isListNode(c)?W.insertAfter(b,e):(W.insertAfter(S.createNewTextBlock(a,b),e),W.remove(b)),!0):("LI"===c.nodeName?(e=c,d=S.createNewTextBlock(a,b,"LI")):d=u.isListNode(c)?S.createNewTextBlock(a,b,"LI"):S.createNewTextBlock(a,b),V.splitList(a,e,b,d),F.normalizeLists(a.dom,e.parentNode),!0))):(X(a.dom,b),!0)},Z=function(a){var b=O.getSelectedListItems(a);if(b.length){var c=B.createBookmark(a.selection.getRng()),d=void 0,e=void 0,f=O.getClosestListRootElm(a,a.selection.getStart(!0));for(d=b.length;d--;)for(var g=b[d].parentNode;g&&g!==f;){for(e=b.length;e--;)if(b[e]===g){b.splice(d,1);break}g=g.parentNode}for(d=0;d<b.length&&(Y(a,b[d])||0!==d);d++);return a.selection.setRng(B.resolveBookmark(c)),a.nodeChanged(),!0}},$={outdent:Y,outdentSelection:Z},_=function(a,b,c){var d=c["list-style-type"]?c["list-style-type"]:null;a.setStyle(b,"list-style-type",d)},aa=function(a,b){g.each(b,function(b,c){a.setAttribute(c,b)})},ba=function(a,b,c){aa(b,c["list-attributes"]),g.each(a.select("li",b),function(a){aa(a,c["list-item-attributes"])})},ca=function(a,b,c){_(a,b,c),ba(a,b,c)},da=function(a,b,c){g.each(c,function(c){return a.setStyle(b,(d={},d[c]="",d));var d})},ea=function(a,b,c,d){var e,f;for(e=b[c?"startContainer":"endContainer"],f=b[c?"startOffset":"endOffset"],1===e.nodeType&&(e=e.childNodes[Math.min(f,e.childNodes.length-1)]||e),!c&&u.isBr(e.nextSibling)&&(e=e.nextSibling);e.parentNode!==d;){if(u.isTextBlock(a,e))return e;if(/^(TD|TH)$/.test(e.parentNode.nodeName))return e;e=e.parentNode}return e},fa=function(a,b,c){for(var d,e=[],h=a.dom,i=ea(a,b,!0,c),j=ea(a,b,!1,c),k=[],l=i;l&&(k.push(l),l!==j);l=l.nextSibling);return g.each(k,function(b){if(u.isTextBlock(a,b))return e.push(b),void(d=null);if(h.isBlock(b)||u.isBr(b))return u.isBr(b)&&h.remove(b),void(d=null);var g=b.nextSibling;return f.isBookmarkNode(b)&&(u.isTextBlock(a,g)||!g&&b.parentNode===c)?void(d=null):(d||(d=h.create("p"),b.parentNode.insertBefore(d,b),e.push(d)),void d.appendChild(b))}),e},ga=function(a,b,c){var d=a.getStyle(b,"list-style-type"),e=c?c["list-style-type"]:"";return e=null===e?"":e,d===e},ha=function(a,b,c){void 0===c&&(c={});var d,e=a.selection.getRng(!0),f="LI",h=O.getClosestListRootElm(a,a.selection.getStart(!0)),i=a.dom;"false"!==i.getContentEditable(a.selection.getNode())&&(b=b.toUpperCase(),"DL"===b&&(f="DT"),d=B.createBookmark(e),g.each(fa(a,e,h),function(d){var e,g;g=d.previousSibling,g&&u.isListNode(g)&&g.nodeName===b&&ga(i,g,c)?(e=g,d=i.rename(d,f),g.appendChild(d)):(e=i.create(b),d.parentNode.insertBefore(e,d),e.appendChild(d),d=i.rename(d,f)),da(i,d,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),ca(i,e,c),na(a.dom,e)}),a.selection.setRng(B.resolveBookmark(d)))},ia=function(a){var b=B.createBookmark(a.selection.getRng(!0)),c=O.getClosestListRootElm(a,a.selection.getStart(!0)),d=O.getSelectedListItems(a),e=g.grep(d,function(b){return a.dom.isEmpty(b)});d=g.grep(d,function(b){return!a.dom.isEmpty(b)}),g.each(e,function(b){if(u.isEmpty(a.dom,b))return void $.outdent(a,b)}),g.each(d,function(b){var d,e;if(b.parentNode!==a.getBody()){for(d=b;d&&d!==c;d=d.parentNode)u.isListNode(d)&&(e=d);V.splitList(a,e,b),F.normalizeLists(a.dom,e.parentNode)}}),a.selection.setRng(B.resolveBookmark(b))},ja=function(a,b){return a&&b&&u.isListNode(a)&&a.nodeName===b.nodeName},ka=function(a,b,c){var d=a.getStyle(b,"list-style-type",!0),e=a.getStyle(c,"list-style-type",!0);return d===e},la=function(a,b){return a.className===b.className},ma=function(a,b,c){return ja(b,c)&&ka(a,b,c)&&la(b,c)},na=function(a,b){var c,d;if(c=b.nextSibling,ma(a,b,c)){for(;d=c.firstChild;)b.appendChild(d);a.remove(c)}if(c=b.previousSibling,ma(a,b,c)){for(;d=c.lastChild;)b.insertBefore(d,b.firstChild);a.remove(c)}},oa=function(a,b,c,d){if(b.nodeName!==c){var e=a.rename(b,c);ca(a,e,d)}else ca(a,b,d)},pa=function(a,b,c,d,e){if(b.nodeName!==d||qa(e)){var f=B.createBookmark(a.selection.getRng(!0));g.each([b].concat(c),function(b){oa(a.dom,b,d,e)}),a.selection.setRng(B.resolveBookmark(f))}else ia(a)},qa=function(a){return"list-style-type"in a},ra=function(a,b,c,d){if(b!==a.getBody())if(b)if(b.nodeName!==c||qa(d)){var e=B.createBookmark(a.selection.getRng(!0));ca(a.dom,b,d),na(a.dom,a.dom.rename(b,c)),a.selection.setRng(B.resolveBookmark(e))}else ia(a);else ha(a,c,d)},sa=function(a,b,c){var d=O.getParentList(a),e=O.getSelectedSubLists(a);c=c?c:{},d&&e.length>0?pa(a,d,e,b,c):ra(a,d,b,c)},ta={toggleList:sa,removeList:ia,mergeWithAdjacentLists:na},ua=function(a,b,e,f){var g,h,i=b.startContainer,j=b.startOffset;if(3===i.nodeType&&(e?j<i.data.length:j>0))return i;for(g=a.schema.getNonEmptyElements(),1===i.nodeType&&(i=c.getNode(i,j)),h=new d(i,f),e&&u.isBogusBr(a.dom,i)&&h.next();i=h[e?"next":"prev2"]();){if("LI"===i.nodeName&&!i.hasChildNodes())return i;if(g[i.nodeName])return i;if(3===i.nodeType&&i.data.length>0)return i}},va=function(a,b){var c=b.childNodes;return 1===c.length&&!u.isListNode(c[0])&&a.isBlock(c[0])},wa=function(a,b){va(a,b)&&a.remove(b.firstChild,!0)},xa=function(a,b,c){var d,e;if(e=va(a,c)?c.firstChild:c,wa(a,b),!u.isEmpty(a,b,!0))for(;d=b.firstChild;)e.appendChild(d)},ya=function(a,b,c){var d,e,f=b.parentNode;u.isChildOfBody(a,b)&&u.isChildOfBody(a,c)&&(u.isListNode(c.lastChild)&&(e=c.lastChild),f===c.lastChild&&u.isBr(f.previousSibling)&&a.remove(f.previousSibling),d=c.lastChild,d&&u.isBr(d)&&b.hasChildNodes()&&a.remove(d),u.isEmpty(a,c,!0)&&a.$(c).empty(),xa(a,b,c),e&&c.appendChild(e),a.remove(b),u.isEmpty(a,f)&&f!==a.getRoot()&&a.remove(f))},za=function(a,b,c){a.dom.$(c).empty(),ya(a.dom,b,c),a.selection.setCursorLocation(c)},Aa=function(a,b,c,d){var e=a.dom;if(e.isEmpty(d))za(a,c,d);else{var f=B.createBookmark(b);ya(e,c,d),a.selection.setRng(B.resolveBookmark(f))}},Ba=function(a,b,c,d){var e=B.createBookmark(b);ya(a.dom,c,d);var f=B.resolveBookmark(e);a.selection.setRng(f)},Ca=function(a,b){var c,d,e,f=a.dom,g=a.selection,h=g.getStart(),i=O.getClosestListRootElm(a,h),j=f.getParent(g.getStart(),"LI",i);if(j){if(c=j.parentNode,c===a.getBody()&&u.isEmpty(f,c))return!0;if(d=x.normalizeRange(g.getRng(!0)),e=f.getParent(ua(a,d,b,i),"LI",i),e&&e!==j)return b?Aa(a,d,e,j):Ba(a,d,j,e),!0;if(!e&&!b&&ta.removeList(a))return!0}return!1},Da=function(a,b,c){var d=a.getParent(b.parentNode,a.isBlock,c);a.remove(b),d&&a.isEmpty(d)&&a.remove(d)},Ea=function(a,b){var c=a.dom,d=a.selection.getStart(),e=O.getClosestListRootElm(a,d),f=c.getParent(d,c.isBlock,e);if(f&&c.isEmpty(f)){var g=x.normalizeRange(a.selection.getRng(!0)),h=c.getParent(ua(a,g,b,e),"LI",e);if(h)return a.undoManager.transact(function(){Da(c,f,e),ta.mergeWithAdjacentLists(c,h.parentNode),a.selection.select(h,!0),a.selection.collapse(b)}),!0}return!1},Fa=function(a,b){return Ca(a,b)||Ea(a,b)},Ga=function(a){var b=a.selection.getStart(),c=O.getClosestListRootElm(a,b),d=a.dom.getParent(b,"LI,DT,DD",c);return!!(d||O.getSelectedListItems(a).length>0)&&(a.undoManager.transact(function(){a.execCommand("Delete"),F.normalizeLists(a.dom,a.getBody())}),!0)},Ha=function(a,b){return a.selection.isCollapsed()?Fa(a,b):Ga(a)},Ia=function(a){a.on("keydown",function(b){b.keyCode===e.BACKSPACE?Ha(a,!1)&&b.preventDefault():b.keyCode===e.DELETE&&Ha(a,!0)&&b.preventDefault()})},Ja={setup:Ia,backspaceDelete:Ha},Ka=function(a){return{backspaceDelete:function(b){Ja.backspaceDelete(a,b)}}},La={get:Ka},Ma=h.DOM,Na=function(a,b){var c;if(u.isListNode(a)){for(;c=a.firstChild;)b.appendChild(c);Ma.remove(a)}},Oa=function(a){var b,c,d;return"DT"===a.nodeName?(Ma.rename(a,"DD"),!0):(b=a.previousSibling,b&&u.isListNode(b)?(b.appendChild(a),!0):b&&"LI"===b.nodeName&&u.isListNode(b.lastChild)?(b.lastChild.appendChild(a),Na(a.lastChild,b.lastChild),!0):(b=a.nextSibling,b&&u.isListNode(b)?(b.insertBefore(a,b.firstChild),!0):(b=a.previousSibling,!(!b||"LI"!==b.nodeName)&&(c=Ma.create(a.parentNode.nodeName),d=Ma.getStyle(a.parentNode,"listStyleType"),d&&Ma.setStyle(c,"listStyleType",d),b.appendChild(c),c.appendChild(a),Na(a.lastChild,c),!0))))},Pa=function(a){var b=O.getSelectedListItems(a);if(b.length){for(var c=B.createBookmark(a.selection.getRng(!0)),d=0;d<b.length&&(Oa(b[d])||0!==d);d++);return a.selection.setRng(B.resolveBookmark(c)),a.nodeChanged(),!0}},Qa={indentSelection:Pa},Ra=function(a,b){return function(){var c=a.dom.getParent(a.selection.getStart(),"UL,OL,DL");return c&&c.nodeName===b}},Sa=function(a){a.on("BeforeExecCommand",function(b){var c,d=b.command.toLowerCase();if("indent"===d?Qa.indentSelection(a)&&(c=!0):"outdent"===d&&$.outdentSelection(a)&&(c=!0),c)return a.fire("ExecCommand",{command:b.command}),b.preventDefault(),!0}),a.addCommand("InsertUnorderedList",function(b,c){ta.toggleList(a,"UL",c)}),a.addCommand("InsertOrderedList",function(b,c){ta.toggleList(a,"OL",c)}),a.addCommand("InsertDefinitionList",function(b,c){ta.toggleList(a,"DL",c)}),a.addQueryStateHandler("InsertUnorderedList",Ra(a,"UL")),a.addQueryStateHandler("InsertOrderedList",Ra(a,"OL")),a.addQueryStateHandler("InsertDefinitionList",Ra(a,"DL"))},Ta={register:Sa},Ua=function(a){return a.getParam("lists_indent_on_tab",!0)},Va={shouldIndentOnTab:Ua},Wa=function(a){a.on("keydown",function(b){b.keyCode!==e.TAB||e.metaKeyPressed(b)||a.dom.getParent(a.selection.getStart(),"LI,DT,DD")&&(b.preventDefault(),b.shiftKey?$.outdentSelection(a):Qa.indentSelection(a))})},Xa=function(a){Va.shouldIndentOnTab(a)&&Wa(a),Ja.setup(a)},Ya={setup:Xa},Za=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(b(d))return c}return-1},$a=function(a,b){return function(c){var d=c.control;a.on("NodeChange",function(a){var c=Za(a.parents,u.isTableCellNode),e=c!==-1?a.parents.slice(0,c):a.parents,f=g.grep(e,u.isListNode);d.active(f.length>0&&f[0].nodeName===b)})}},_a=function(a){return function(b){var c=b.control;a.on("nodechange",function(){var b=O.getSelectedListItems(a),d=b.length>0&&u.isFirstChild(b[0]);c.disabled(d)})}},ab=function(a){var b=function(a,b){var c=a.settings.plugins?a.settings.plugins:"";return g.inArray(c.split(/[ ,]/),b)!==-1};b(a,"advlist")||(a.addButton("numlist",{active:!1,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:$a(a,"OL")}),a.addButton("bullist",{active:!1,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:$a(a,"UL")})),a.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:_a(a)})},bb={register:ab};return b.add("lists",function(a){return Ya.setup(a),bb.register(a),Ta.register(a),La.get(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-media",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.Env"),d=tinymce.util.Tools.resolve("tinymce.util.Tools"),e=function(a){return a.getParam("media_scripts")},f=function(a){return a.getParam("audio_template_callback")},g=function(a){return a.getParam("video_template_callback")},h=function(a){return a.getParam("media_live_embeds",!0)},i=function(a){return a.getParam("media_filter_html",!0)},j=function(a){return a.getParam("media_url_resolver")},k=function(a){return a.getParam("media_alt_source",!0)},l=function(a){return a.getParam("media_poster",!0)},m=function(a){return a.getParam("media_dimensions",!0)},n={getScripts:e,getAudioTemplateCallback:f,getVideoTemplateCallback:g,hasLiveEmbeds:h,shouldFilterHtml:i,getUrlResolver:j,hasAltSource:k,hasPoster:l,hasDimensions:m},o=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),p=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),q=function(a,b){if(a)for(var c=0;c<a.length;c++)if(b.indexOf(a[c].filter)!==-1)return a[c]},r={getVideoScriptMatch:q},s=function(a){return a.replace(/px$/,"")},t=function(a){return/^[0-9.]+$/.test(a)?a+"px":a},u=function(a){return function(b){return b?s(b.style[a]):""}},v=function(a){return function(b,c){b&&(b.style[a]=t(c))}},w={getMaxWidth:u("maxWidth"),getMaxHeight:u("maxHeight"),setMaxWidth:v("maxWidth"),setMaxHeight:v("maxHeight")},x=p.DOM,y=function(a){return x.getAttrib(a,"data-ephox-embed-iri")},z=function(a){var b=x.createFragment(a);return""!==y(b.firstChild)},A=function(a,b){var c={};return o({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(b,e){if(c.source1||"param"!==b||(c.source1=e.map.movie),"iframe"!==b&&"object"!==b&&"embed"!==b&&"video"!==b&&"audio"!==b||(c.type||(c.type=b),c=d.extend(e.map,c)),"script"===b){var f=r.getVideoScriptMatch(a,e.map.src);if(!f)return;c={type:"script",source1:e.map.src,width:f.width,height:f.height}}"source"===b&&(c.source1?c.source2||(c.source2=e.map.src):c.source1=e.map.src),"img"!==b||c.poster||(c.poster=e.map.src)}}).parse(b),c.source1=c.source1||c.src||c.data,c.source2=c.source2||"",c.poster=c.poster||"",c},B=function(a){var b=x.createFragment(a),c=b.firstChild;return{type:"ephox-embed-iri",source1:y(c),source2:"",poster:"",width:w.getMaxWidth(c),height:w.getMaxHeight(c)}},C=function(a,b){return z(b)?B(b):A(a,b)},D={htmlToData:C},E=tinymce.util.Tools.resolve("tinymce.util.Promise"),F=function(a){var b={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},c=a.toLowerCase().split(".").pop(),d=b[c];return d?d:""},G={guess:F},H=tinymce.util.Tools.resolve("tinymce.html.Writer"),I=tinymce.util.Tools.resolve("tinymce.html.Schema"),J=p.DOM,K=function(a,b){var c,d,e,f;for(c in b)if(e=""+b[c],a.map[c])for(d=a.length;d--;)f=a[d],f.name===c&&(e?(a.map[c]=e,f.value=e):(delete a.map[c],a.splice(d,1)));else e&&(a.push({name:c,value:e}),a.map[c]=e)},L=function(a){var b=H(),c=o(b);return c.parse(a),b.getContent()},M=function(a,b,c){var d,e=H(),f=0;return o({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(a){e.comment(a)},cdata:function(a){e.cdata(a)},text:function(a,b){e.text(a,b)},start:function(a,g,h){switch(a){case"video":case"object":case"embed":case"img":case"iframe":void 0!==b.height&&void 0!==b.width&&K(g,{width:b.width,height:b.height})}if(c)switch(a){case"video":K(g,{poster:b.poster,src:""}),b.source2&&K(g,{src:""});break;case"iframe":K(g,{src:b.source1});break;case"source":if(f++,f<=2&&(K(g,{src:b["source"+f],type:b["source"+f+"mime"]}),!b["source"+f]))return;break;case"img":if(!b.poster)return;d=!0}e.start(a,g,h)},end:function(a){if("video"===a&&c)for(var g=1;g<=2;g++)if(b["source"+g]){var h=[];h.map={},f<g&&(K(h,{src:b["source"+g],type:b["source"+g+"mime"]}),e.start("source",h,!0))}if(b.poster&&"object"===a&&c&&!d){var i=[];i.map={},K(i,{src:b.poster,width:b.width,height:b.height}),e.start("img",i,!0)}e.end(a)}},I({})).parse(a),e.getContent()},N=function(a){var b=J.createFragment(a);return""!==J.getAttrib(b.firstChild,"data-ephox-embed-iri")},O=function(a,b){var c=J.createFragment(a),d=c.firstChild;return w.setMaxWidth(d,b.width),w.setMaxHeight(d,b.height),L(d.outerHTML)},P=function(a,b,c){return N(a)?O(a,b):M(a,b,c)},Q={updateHtml:P},R=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],S=function(a,b){for(var c=a.regex.exec(b),d=a.url,e=function(a){d=d.replace("$"+a,function(){return c[a]?c[a]:""})},f=0;f<c.length;f++)e(f);return d.replace(/\?$/,"")},T=function(a){var b=R.filter(function(b){return b.regex.test(a)});return b.length>0?d.extend({},b[0],{url:S(b[0],a)}):null},U=function(a){var b=a.allowFullscreen?' allowFullscreen="1"':"";return'<iframe src="'+a.source1+'" width="'+a.width+'" height="'+a.height+'"'+b+"></iframe>"},V=function(a){var b='<object data="'+a.source1+'" width="'+a.width+'" height="'+a.height+'" type="application/x-shockwave-flash">';return a.poster&&(b+='<img src="'+a.poster+'" width="'+a.width+'" height="'+a.height+'" />'),b+="</object>"},W=function(a,b){return b?b(a):'<audio controls="controls" src="'+a.source1+'">'+(a.source2?'\n<source src="'+a.source2+'"'+(a.source2mime?' type="'+a.source2mime+'"':"")+" />\n":"")+"</audio>"},X=function(a,b){return b?b(a):'<video width="'+a.width+'" height="'+a.height+'"'+(a.poster?' poster="'+a.poster+'"':"")+' controls="controls">\n<source src="'+a.source1+'"'+(a.source1mime?' type="'+a.source1mime+'"':"")+" />\n"+(a.source2?'<source src="'+a.source2+'"'+(a.source2mime?' type="'+a.source2mime+'"':"")+" />\n":"")+"</video>"},Y=function(a){return'<script src="'+a.source1+'"></script>'},Z=function(a,b){var c=d.extend({},b);if(!c.source1&&(d.extend(c,D.htmlToData(n.getScripts(a),c.embed)),!c.source1))return"";c.source2||(c.source2=""),c.poster||(c.poster=""),c.source1=a.convertURL(c.source1,"source"),c.source2=a.convertURL(c.source2,"source"),c.source1mime=G.guess(c.source1),c.source2mime=G.guess(c.source2),c.poster=a.convertURL(c.poster,"poster");var e=T(c.source1);if(e&&(c.source1=e.url,c.type=e.type,c.allowFullscreen=e.allowFullscreen,c.width=c.width||e.w,c.height=c.height||e.h),c.embed)return Q.updateHtml(c.embed,c,!0);var f=r.getVideoScriptMatch(n.getScripts(a),c.source1);f&&(c.type="script",c.width=f.width,c.height=f.height);var g=n.getAudioTemplateCallback(a),h=n.getVideoTemplateCallback(a);return c.width=c.width||300,c.height=c.height||150,d.each(c,function(b,d){c[d]=a.dom.encode(b)}),"iframe"===c.type?U(c):"application/x-shockwave-flash"===c.source1mime?V(c):c.source1mime.indexOf("audio")!==-1?W(c,g):"script"===c.type?Y(c):X(c,h)},$={dataToHtml:Z},_={},aa=function(a,b,c){return new E(function(d,e){var f=function(c){return c.html&&(_[a.source1]=c),d({url:a.source1,html:c.html?c.html:b(a)})};_[a.source1]?f(_[a.source1]):c({url:a.source1},f,e)})},ba=function(a,b){return new E(function(c){c({html:b(a),url:a.source1})})},ca=function(a){return function(b){return $.dataToHtml(a,b)}},da=function(a,b){var c=n.getUrlResolver(a);return c?aa(b,ca(a),c):ba(b,ca(a))},ea=function(a){return _.hasOwnProperty(a)},fa={getEmbedHtml:da,isCached:ea},ga=function(a,b){a.state.set("oldVal",a.value()),b.state.set("oldVal",b.value())},ha=function(a,b){var c=a.find("#width")[0],d=a.find("#height")[0],e=a.find("#constrain")[0];c&&d&&e&&b(c,d,e.checked())},ia=function(a,b,c){var d=a.state.get("oldVal"),e=b.state.get("oldVal"),f=a.value(),g=b.value();c&&d&&e&&f&&g&&(f!==d?(g=Math.round(f/d*g),isNaN(g)||b.value(g)):(f=Math.round(g/e*f),isNaN(f)||a.value(f))),ga(a,b)},ja=function(a){ha(a,ga)},ka=function(a){ha(a,ia)},la=function(a){var b=function(){a(function(a){ka(a)})};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:b,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:b,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},ma={createUi:la,syncSize:ja,updateSize:ka},na=c.ie&&c.ie<=8?"onChange":"onInput",oa=function(a){return function(b){var c=b&&b.msg?"Media embed handler error: "+b.msg:"Media embed handler threw unknown error.";a.notificationManager.open({type:"error",text:c})}},pa=function(a){var b=a.selection.getNode(),c=b.getAttribute("data-ephox-embed-iri");return c?{source1:c,"data-ephox-embed-iri":c,width:w.getMaxWidth(b),height:w.getMaxHeight(b)}:b.getAttribute("data-mce-object")?D.htmlToData(n.getScripts(a),a.serializer.serialize(b,{selection:!0})):{}},qa=function(a){var b=a.selection.getNode();if(b.getAttribute("data-mce-object")||b.getAttribute("data-ephox-embed-iri"))return a.selection.getContent()},ra=function(a,b){return function(c){var e=c.html,f=a.find("#embed")[0],g=d.extend(D.htmlToData(n.getScripts(b),e),{source1:c.url});a.fromJSON(g),f&&(f.value(e),ma.updateSize(a))}},sa=function(a,b){var c,d,e=a.dom.select("img[data-mce-object]");for(c=0;c<b.length;c++)for(d=e.length-1;d>=0;d--)b[c]===e[d]&&e.splice(d,1);a.selection.select(e[0])},ta=function(a,b){var c=a.dom.select("img[data-mce-object]");a.insertContent(b),sa(a,c),a.nodeChanged()},ua=function(a,b){var c=a.toJSON();c.embed=Q.updateHtml(c.embed,c),c.embed&&fa.isCached(c.source1)?ta(b,c.embed):fa.getEmbedHtml(b,c).then(function(a){ta(b,a.html)})["catch"](oa(b))},va=function(a,b){d.each(b,function(b,c){a.find("#"+c).value(b)})},wa=function(a){var b,c,e=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout(function(){fa.getEmbedHtml(a,b.toJSON()).then(ra(b,a))["catch"](oa(a))},1)},onchange:function(c){fa.getEmbedHtml(a,b.toJSON()).then(ra(b,a))["catch"](oa(a)),va(b,c.meta)},onbeforecall:function(a){a.meta=b.toJSON()}}],f=[],g=function(a){a(b),c=b.toJSON(),b.find("#embed").value(Q.updateHtml(c.embed,c))};if(n.hasAltSource(a)&&f.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),n.hasPoster(a)&&f.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),n.hasDimensions(a)){var h=ma.createUi(g);e.push(h)}c=pa(a);var i={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:qa(a),multiline:!0,rows:5,label:"Source"},j=function(){c=d.extend({},D.htmlToData(n.getScripts(a),this.value())),this.parent().parent().fromJSON(c)};i[na]=j;var k=[{title:"General",type:"form",items:e},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},i]}];f.length>0&&k.push({title:"Advanced",type:"form",items:f}),b=a.windowManager.open({title:"Insert/edit media",data:c,bodyType:"tabpanel",body:k,onSubmit:function(){ma.updateSize(b),ua(b,a)}}),ma.syncSize(b)},xa={showDialog:wa},ya=function(a){var b=function(){xa.showDialog(a)};return{showDialog:b}},za={get:ya},Aa=function(a){var b=function(){xa.showDialog(a)};a.addCommand("mceMedia",b)},Ba={register:Aa},Ca=tinymce.util.Tools.resolve("tinymce.html.Node"),Da=function(a,b){if(n.shouldFilterHtml(a)===!1)return b;var c,d=H();return o({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(a){d.comment(a)},cdata:function(a){d.cdata(a)},text:function(a,b){d.text(a,b)},start:function(b,e,f){if(c=!0,"script"!==b&&"noscript"!==b){for(var g=0;g<e.length;g++){if(0===e[g].name.indexOf("on"))return;"style"===e[g].name&&(e[g].value=a.dom.serializeStyle(a.dom.parseStyle(e[g].value),b))}d.start(b,e,f),c=!1}},end:function(a){c||d.end(a)}},I({})).parse(b),d.getContent()},Ea={sanitize:Da},Fa=function(a,b){var d,e=b.name;return d=new Ca("img",1),d.shortEnded=!0,Ha(a,b,d),d.attr({width:b.attr("width")||"300",height:b.attr("height")||("audio"===e?"30":"150"),style:b.attr("style"),src:c.transparentSrc,"data-mce-object":e,"class":"mce-object mce-object-"+e}),d},Ga=function(a,b){var c,d,e,f=b.name;return c=new Ca("span",1),c.attr({contentEditable:"false",style:b.attr("style"),"data-mce-object":f,"class":"mce-preview-object mce-object-"+f}),Ha(a,b,c),d=new Ca(f,1),d.attr({src:b.attr("src"),allowfullscreen:b.attr("allowfullscreen"),style:b.attr("style"),"class":b.attr("class"),width:b.attr("width"),height:b.attr("height"),frameborder:"0"}),e=new Ca("span",1),e.attr("class","mce-shim"),c.append(d),c.append(e),c},Ha=function(a,b,c){var d,e,f,g,h;for(f=b.attributes,g=f.length;g--;)d=f[g].name,e=f[g].value,"width"!==d&&"height"!==d&&"style"!==d&&("data"!==d&&"src"!==d||(e=a.convertURL(e,d)),c.attr("data-mce-p-"+d,e));h=b.firstChild&&b.firstChild.value,h&&(c.attr("data-mce-html",escape(Ea.sanitize(a,h))),c.firstChild=null)},Ia=function(a){for(;a=a.parent;)if(a.attr("data-ephox-embed-iri"))return!0;return!1},Ja=function(a){return function(b){for(var d,e,f=b.length;f--;)d=b[f],d.parent&&(d.parent.attr("data-mce-object")||("script"!==d.name||(e=r.getVideoScriptMatch(n.getScripts(a),d.attr("src"))))&&(e&&(e.width&&d.attr("width",e.width.toString()),e.height&&d.attr("height",e.height.toString())),"iframe"===d.name&&n.hasLiveEmbeds(a)&&c.ceFalse?Ia(d)||d.replace(Ga(a,d)):Ia(d)||d.replace(Fa(a,d))))}},Ka={createPreviewIframeNode:Ga,createPlaceholderNode:Fa,placeHolderConverter:Ja},La=function(a){a.on("preInit",function(){var b=a.schema.getSpecialElements();d.each("video audio iframe object".split(" "),function(a){b[a]=new RegExp("</"+a+"[^>]*>","gi")});var c=a.schema.getBoolAttrs();d.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(a){c[a]={}}),a.parser.addNodeFilter("iframe,video,audio,object,embed,script",Ka.placeHolderConverter(a)),a.serializer.addAttributeFilter("data-mce-object",function(b,c){for(var d,e,f,g,h,i,j,k,l=b.length;l--;)if(d=b[l],d.parent){for(j=d.attr(c),e=new Ca(j,1),"audio"!==j&&"script"!==j&&(k=d.attr("class"),k&&k.indexOf("mce-preview-object")!==-1?e.attr({width:d.firstChild.attr("width"),height:d.firstChild.attr("height")}):e.attr({width:d.attr("width"),height:d.attr("height")})),e.attr({style:d.attr("style")}),g=d.attributes,f=g.length;f--;){var m=g[f].name;0===m.indexOf("data-mce-p-")&&e.attr(m.substr(11),g[f].value)}"script"===j&&e.attr("type","text/javascript"),h=d.attr("data-mce-html"),h&&(i=new Ca("#text",3),i.raw=!0,i.value=Ea.sanitize(a,unescape(h)),e.append(i)),d.replace(e)}})}),a.on("setContent",function(){a.$("span.mce-preview-object").each(function(b,c){var d=a.$(c);0===d.find("span.mce-shim",c).length&&d.append('<span class="mce-shim"></span>')})})},Ma={setup:La},Na=function(a){a.on("ResolveName",function(a){var b;1===a.target.nodeType&&(b=a.target.getAttribute("data-mce-object"))&&(a.name=b)})},Oa={setup:Na},Pa=function(a){a.on("click keyup",function(){var b=a.selection.getNode();b&&a.dom.hasClass(b,"mce-preview-object")&&a.dom.getAttrib(b,"data-mce-selected")&&b.setAttribute("data-mce-selected","2")}),a.on("ObjectSelected",function(a){var b=a.target.getAttribute("data-mce-object");"audio"!==b&&"script"!==b||a.preventDefault()}),a.on("objectResized",function(a){var b,c=a.target;c.getAttribute("data-mce-object")&&(b=c.getAttribute("data-mce-html"),b&&(b=unescape(b),c.setAttribute("data-mce-html",escape(Q.updateHtml(b,{width:a.width,height:a.height})))))})},Qa={setup:Pa},Ra=function(a){a.addButton("media",{tooltip:"Insert/edit media",cmd:"mceMedia",stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),a.addMenuItem("media",{icon:"media",text:"Media",cmd:"mceMedia",context:"insert",prependToContext:!0})},Sa={register:Ra};return b.add("media",function(a){return Ba.register(a),Sa.register(a),Oa.setup(a),Ma.setup(a),Qa.setup(a),za.get(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-nonbreaking",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=function(a,b){for(var c="",d=0;d<b;d++)c+=a;return c},d=function(a){return!!a.plugins.visualchars&&a.plugins.visualchars.isEnabled()},e=function(a,b){var e=d(a)?'<span class="mce-nbsp">&nbsp;</span>':"&nbsp;";a.insertContent(c(e,b)),a.dom.setAttrib(a.dom.select("span.mce-nbsp"),"data-mce-bogus","1")},f={insertNbsp:e},g=function(a){a.addCommand("mceNonBreaking",function(){f.insertNbsp(a,1)})},h={register:g},i=tinymce.util.Tools.resolve("tinymce.util.VK"),j=function(a){var b=a.getParam("nonbreaking_force_tab",0);return"boolean"==typeof b?b===!0?3:0:b},k={getKeyboardSpaces:j},l=function(a){var b=k.getKeyboardSpaces(a);b>0&&a.on("keydown",function(c){if(c.keyCode===i.TAB&&!c.isDefaultPrevented()){if(c.shiftKey)return;c.preventDefault(),c.stopImmediatePropagation(),f.insertNbsp(a,b)}})},m={setup:l},n=function(a){a.addButton("nonbreaking",{title:"Nonbreaking space",cmd:"mceNonBreaking"}),a.addMenuItem("nonbreaking",{icon:"nonbreaking",text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"})},o={register:n};return b.add("nonbreaking",function(a){h.register(a),o.register(a),m.setup(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-noneditable",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=function(a){return a.getParam("noneditable_noneditable_class","mceNonEditable")},e=function(a){return a.getParam("noneditable_editable_class","mceEditable")},f=function(a){var b=a.getParam("noneditable_regexp",[]);return b&&b.constructor===RegExp?[b]:b},g={getNonEditableClass:d,getEditableClass:e,getNonEditableRegExps:f},h=function(a){return function(b){return(" "+b.attr("class")+" ").indexOf(a)!==-1}},i=function(a,b,c){return function(d){var e=arguments,f=e[e.length-2],g=f>0?b.charAt(f-1):"";if('"'===g)return d;if(">"===g){var h=b.lastIndexOf("<",f);if(h!==-1){var i=b.substring(h,f);if(i.indexOf('contenteditable="false"')!==-1)return d}}return'<span class="'+c+'" data-mce-content="'+a.dom.encode(e[0])+'">'+a.dom.encode("string"==typeof e[1]?e[1]:e[0])+"</span>"}},j=function(a,b,c){var d=b.length,e=c.content;if("raw"!==c.format){for(;d--;)e=e.replace(b[d],i(a,e,g.getNonEditableClass(a)));c.content=e}},k=function(a){var b,d,e="contenteditable";b=" "+c.trim(g.getEditableClass(a))+" ",d=" "+c.trim(g.getNonEditableClass(a))+" ";var f=h(b),i=h(d),k=g.getNonEditableRegExps(a);a.on("PreInit",function(){k.length>0&&a.on("BeforeSetContent",function(b){j(a,k,b)}),a.parser.addAttributeFilter("class",function(a){for(var b,c=a.length;c--;)b=a[c],f(b)?b.attr(e,"true"):i(b)&&b.attr(e,"false")}),
a.serializer.addAttributeFilter(e,function(a){for(var b,c=a.length;c--;)b=a[c],(f(b)||i(b))&&(k.length>0&&b.attr("data-mce-content")?(b.name="#text",b.type=3,b.raw=!0,b.value=b.attr("data-mce-content")):b.attr(e,null))})})},l={setup:k};return b.add("noneditable",function(a){l.setup(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-pagebreak",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.Env"),d=function(a){return a.getParam("pagebreak_separator","<!-- pagebreak -->")},e=function(a){return a.getParam("pagebreak_split_block",!1)},f={getSeparatorHtml:d,shouldSplitBlock:e},g=function(){return"mce-pagebreak"},h=function(){return'<img src="'+c.transparentSrc+'" class="'+g()+'" data-mce-resize="false" data-mce-placeholder />'},i=function(a){var b=f.getSeparatorHtml(a),c=new RegExp(b.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(a){return"\\"+a}),"gi");a.on("BeforeSetContent",function(a){a.content=a.content.replace(c,h())}),a.on("PreInit",function(){a.serializer.addNodeFilter("img",function(c){for(var d,e,g=c.length;g--;)if(d=c[g],e=d.attr("class"),e&&e.indexOf("mce-pagebreak")!==-1){var h=d.parent;if(a.schema.getBlockElements()[h.name]&&f.shouldSplitBlock(a)){h.type=3,h.value=b,h.raw=!0,d.remove();continue}d.type=3,d.value=b,d.raw=!0}})})},j={setup:i,getPlaceholderHtml:h,getPageBreakClass:g},k=function(a){a.addCommand("mcePageBreak",function(){a.settings.pagebreak_split_block?a.insertContent("<p>"+j.getPlaceholderHtml()+"</p>"):a.insertContent(j.getPlaceholderHtml())})},l={register:k},m=function(a){a.on("ResolveName",function(b){"IMG"===b.target.nodeName&&a.dom.hasClass(b.target,j.getPageBreakClass())&&(b.name="pagebreak")})},n={setup:m},o=function(a){a.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),a.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"})},p={register:o};return b.add("pagebreak",function(a){l.register(a),p.register(a),j.setup(a),n.setup(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-paste",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(a,b){return Y.each(b,function(b){a=b.constructor===RegExp?a.replace(b,""):a.replace(b[0],b[1])}),a}function b(b){function c(a){var b=a.name,d=a;if("br"===b)return void(f+="\n");if(g[b]&&(f+=" "),h[b])return void(f+=" ");if(3===a.type&&(f+=a.value),!a.shortEnded&&(a=a.firstChild))do c(a);while(a=a.next);i[b]&&d.next&&(f+="\n","p"===b&&(f+="\n"))}var d=na(),e=la({},d),f="",g=d.getShortEndedElements(),h=Y.makeMap("script noscript style textarea video audio iframe object"," "),i=d.getBlockElements();return b=a(b,[/<!\[[^\]]+\]>/g]),c(e.parse(b)),f}function c(b){function c(a,b,c){return b||c?"Â ":" "}return b=a(b,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,c],/<br class="Apple-interchange-newline">/g,/<br>$/i])}function d(a){var b=0;return function(){return a+b++}}function e(a){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(a)||/class="OutlineElement/.test(a)||/id="?docs\-internal\-guid\-/.test(a)}function f(a){var b,c;return c=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],a=a.replace(/^[\u00a0 ]+/,""),Y.each(c,function(c){if(c.test(a))return b=!0,!1}),b}function g(a){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(a)}function h(a){function b(a){var c="";if(3===a.type)return a.value;if(a=a.firstChild)do c+=b(a);while(a=a.next);return c}function c(a,b){if(3===a.type&&b.test(a.value))return a.value=a.value.replace(b,""),!1;if(a=a.firstChild)do if(!c(a,b))return!1;while(a=a.next);return!0}function d(a){if(a._listIgnore)return void a.remove();if(a=a.firstChild)do d(a);while(a=a.next)}function e(a,b,e){var f=a._listLevel||j;f!==j&&(f<j?h&&(h=h.parent.parent):(i=h,h=null)),h&&h.name===b?h.append(a):(i=i||h,h=new ma(b,1),e>1&&h.attr("start",""+e),a.wrap(h)),a.name="li",f>j&&i&&i.lastChild.append(h),j=f,d(a),c(a,/^\u00a0+/),c(a,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),c(a,/^\u00a0+/)}for(var h,i,j=1,k=[],l=a.firstChild;"undefined"!=typeof l&&null!==l;)if(k.push(l),l=l.walk(),null!==l)for(;"undefined"!=typeof l&&l.parent!==a;)l=l.walk();for(var m=0;m<k.length;m++)if(a=k[m],"p"===a.name&&a.firstChild){var n=b(a);if(g(n)){e(a,"ul");continue}if(f(n)){var o=/([0-9]+)\./.exec(n),p=1;o&&(p=parseInt(o[1],10)),e(a,"ol",p);continue}if(a._listLevel){e(a,"ul",1);continue}h=null}else i=h,h=null}function i(a,b,c,d){var e,f={},g=a.dom.parseStyle(d);return Y.each(g,function(g,h){switch(h){case"mso-list":e=/\w+ \w+([0-9]+)/i.exec(d),e&&(c._listLevel=parseInt(e[1],10)),/Ignore/i.test(g)&&c.firstChild&&(c._listIgnore=!0,c.firstChild._listIgnore=!0);break;case"horiz-align":h="text-align";break;case"vert-align":h="vertical-align";break;case"font-color":case"mso-foreground":h="color";break;case"mso-background":case"mso-highlight":h="background";break;case"font-weight":case"font-style":return void("normal"!==g&&(f[h]=g));case"mso-element":if(/^(comment|comment-list)$/i.test(g))return void c.remove()}return 0===h.indexOf("mso-comment")?void c.remove():void(0!==h.indexOf("mso-")&&("all"===P.getRetainStyleProps(a)||b&&b[h])&&(f[h]=g))}),/(bold)/i.test(f["font-weight"])&&(delete f["font-weight"],c.wrap(new ma("b",1))),/(italic)/i.test(f["font-style"])&&(delete f["font-style"],c.wrap(new ma("i",1))),f=a.dom.serializeStyle(f,c.name),f?f:null}function j(a,b){a.on("PastePreProcess",function(c){c.content=b(a,c.content,c.internal,c.wordContent)})}function k(a,b){a.on("PastePostProcess",function(c){b(a,c.node)})}function l(a,b){if(!ta.isWordContent(b))return b;var c=[];Y.each(a.schema.getBlockElements(),function(a,b){c.push(b)});var d=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+c.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return b=qa.filter(b,[[d,"$1"]]),b=qa.filter(b,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function m(a,b,c,d){if(d||c)return b;var e,f=P.getWebkitStyles(a);if(P.shouldRemoveWebKitStyles(a)===!1||"all"===f)return b;if(f&&(e=f.split(/[, ]/)),e){var g=a.dom,h=a.selection.getNode();b=b.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(a,b,c,d){var f=g.parseStyle(g.decode(c)),i={};if("none"===e)return b+d;for(var j=0;j<e.length;j++){var k=f[e[j]],l=g.getStyle(h,e[j],!0);/color/.test(e[j])&&(k=g.toHex(k),l=g.toHex(l)),l!==k&&(i[e[j]]=k)}return i=g.serializeStyle(i,"span"),i?b+' style="'+i+'"'+d:b+d})}else b=b.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return b=b.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(a,b,c,d){return b+' style="'+c+'"'+d})}function n(a,b){a.$("a",b).find("font,u").each(function(b,c){a.dom.remove(c,!0)})}function o(){}var p=function(a){var b=a,c=function(){return b},d=function(a){b=a},e=function(){return p(c())};return{get:c,set:d,clone:e}},q=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(a){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(a.settings.plugins)||!q.get("powerpaste"))&&("undefined"!=typeof window.console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),!0)},s={hasProPlugin:r},t=function(a,b){return{clipboard:a,quirks:b}},u={get:t},v=function(a,b,c,d){return a.fire("PastePreProcess",{content:b,internal:c,wordContent:d})},w=function(a,b,c,d){return a.fire("PastePostProcess",{node:b,internal:c,wordContent:d})},x=function(a,b){return a.fire("PastePlainTextToggle",{state:b})},y=function(a,b){return a.fire("paste",{ieFake:b})},z={firePastePreProcess:v,firePastePostProcess:w,firePastePlainTextToggle:x,firePaste:y},A=function(a){return a.getParam("paste_plaintext_inform",!0)},B=function(a){return a.getParam("paste_block_drop",!1)},C=function(a){return a.getParam("paste_data_images",!1)},D=function(a){return a.getParam("paste_filter_drop",!0)},E=function(a){return a.getParam("paste_preprocess")},F=function(a){return a.getParam("paste_postprocess")},G=function(a){return a.getParam("paste_webkit_styles")},H=function(a){return a.getParam("paste_remove_styles_if_webkit",!0)},I=function(a){return a.getParam("paste_merge_formats",!0)},J=function(a){return a.getParam("smart_paste",!0)},K=function(a){return a.getParam("paste_as_text",!1)},L=function(a){return a.getParam("paste_retain_style_properties")},M=function(a){var b="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody";return a.getParam("paste_word_valid_elements",b)},N=function(a){return a.getParam("paste_convert_word_fake_lists",!0)},O=function(a){return a.getParam("paste_enable_default_filters",!0)},P={shouldPlainTextInform:A,shouldBlockDrop:B,shouldPasteDataImages:C,shouldFilterDrop:D,getPreProcess:E,getPostProcess:F,getWebkitStyles:G,shouldRemoveWebKitStyles:H,shouldMergeFormats:I,isSmartPasteEnabled:J,isPasteAsTextEnabled:K,getRetainStyleProps:L,getWordValidElements:M,shouldConvertWordFakeLists:N,shouldUseDefaultFilters:O},Q=function(a,b){return b.get()===!1&&P.shouldPlainTextInform(a)},R=function(a,b){a.notificationManager.open({text:a.translate(b),type:"info"})},S=function(a,b,c){"text"===b.pasteFormat.get()?(b.pasteFormat.set("html"),z.firePastePlainTextToggle(a,!1)):(b.pasteFormat.set("text"),z.firePastePlainTextToggle(a,!0),Q(a,c)&&(R(a,"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),c.set(!0))),a.focus()},T={togglePlainTextPaste:S},U=function(a,b,c){a.addCommand("mceTogglePlainTextPaste",function(){T.togglePlainTextPaste(a,b,c)}),a.addCommand("mceInsertClipboardContent",function(a,c){c.content&&b.pasteHtml(c.content,c.internal),c.text&&b.pasteText(c.text)})},V={register:U},W=tinymce.util.Tools.resolve("tinymce.Env"),X=tinymce.util.Tools.resolve("tinymce.util.Delay"),Y=tinymce.util.Tools.resolve("tinymce.util.Tools"),Z=tinymce.util.Tools.resolve("tinymce.util.VK"),$="x-tinymce/html",_="<!-- "+$+" -->",aa=function(a){return _+a},ba=function(a){return a.replace(_,"")},ca=function(a){return a.indexOf(_)!==-1},da={mark:aa,unmark:ba,isMarked:ca,internalHtmlMime:function(){return $}},ea=tinymce.util.Tools.resolve("tinymce.html.Entities"),fa=function(a){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(a)},ga=function(a){return a.replace(/\r?\n/g,"<br>")},ha=function(a,b){var c,d=[],e="<"+a;if("object"==typeof b){for(c in b)b.hasOwnProperty(c)&&d.push(c+'="'+ea.encodeAllRaw(b[c])+'"');d.length&&(e+=" "+d.join(" "))}return e+">"},ia=function(a,b,c){var d=a.split(/\n\n/),e=ha(b,c),f="</"+b+">",g=Y.map(d,function(a){return a.split(/\n/).join("<br />")}),h=function(a){return e+a+f};return 1===g.length?g[0]:Y.map(g,h).join("")},ja=function(a,b,c){return b?ia(a,b,c):ga(a)},ka={isPlainText:fa,convert:ja,toBRs:ga,toBlockElements:ia},la=tinymce.util.Tools.resolve("tinymce.html.DomParser"),ma=tinymce.util.Tools.resolve("tinymce.html.Node"),na=tinymce.util.Tools.resolve("tinymce.html.Schema"),oa=tinymce.util.Tools.resolve("tinymce.html.Serializer"),pa=function(){return navigator.userAgent.indexOf(" Edge/")!==-1},qa={filter:a,innerText:b,trimHtml:c,createIdGenerator:d,isMsEdge:pa},ra=function(a,b){var c,d;c=P.getRetainStyleProps(a),c&&(d=Y.makeMap(c.split(/[, ]/))),b=qa.filter(b,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"Â "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(a,b){return b.length>0?b.replace(/./," ").slice(Math.floor(b.length/2)).split("").join("Â "):""}]]);var e=P.getWordValidElements(a),f=na({valid_elements:e,valid_children:"-li[p]"});Y.each(f.elements,function(a){a.attributes["class"]||(a.attributes["class"]={},a.attributesOrder.push("class")),a.attributes.style||(a.attributes.style={},a.attributesOrder.push("style"))});var g=la({},f);g.addAttributeFilter("style",function(b){for(var c,e=b.length;e--;)c=b[e],c.attr("style",i(a,d,c,c.attr("style"))),"span"===c.name&&c.parent&&!c.attributes.length&&c.unwrap()}),g.addAttributeFilter("class",function(a){for(var b,c,d=a.length;d--;)b=a[d],c=b.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(c)&&b.remove(),b.attr("class",null)}),g.addNodeFilter("del",function(a){for(var b=a.length;b--;)a[b].remove()}),g.addNodeFilter("a",function(a){for(var b,c,d,e=a.length;e--;)if(b=a[e],c=b.attr("href"),d=b.attr("name"),c&&c.indexOf("#_msocom_")!==-1)b.remove();else if(c&&0===c.indexOf("file://")&&(c=c.split("#")[1],c&&(c="#"+c)),c||d){if(d&&!/^_?(?:toc|edn|ftn)/i.test(d)){b.unwrap();continue}b.attr({href:c,name:d})}else b.unwrap()});var j=g.parse(b);return P.shouldConvertWordFakeLists(a)&&h(j),b=oa({validate:a.settings.validate},f).serialize(j)},sa=function(a,b){return P.shouldUseDefaultFilters(a)?ra(a,b):b},ta={preProcess:sa,isWordContent:e},ua=function(a,b){return{content:a,cancelled:b}},va=function(a,b,c,d){var e=a.dom.create("div",{style:"display:none"},b),f=z.firePastePostProcess(a,e,c,d);return ua(f.node.innerHTML,f.isDefaultPrevented())},wa=function(a,b,c,d){var e=z.firePastePreProcess(a,b,c,d);return a.hasEventListeners("PastePostProcess")&&!e.isDefaultPrevented()?va(a,e.content,c,d):ua(e.content,e.isDefaultPrevented())},xa=function(a,b,c){var d=ta.isWordContent(b),e=d?ta.preProcess(a,b):b;return wa(a,e,c,d)},ya={process:xa},za=function(a,b){return a.insertContent(b,{merge:P.shouldMergeFormats(a),paste:!0}),!0},Aa=function(a){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(a)},Ba=function(a){return Aa(a)&&/.(gif|jpe?g|png)$/.test(a)},Ca=function(a,b,c){return a.undoManager.extra(function(){c(a,b)},function(){a.insertContent('<img src="'+b+'">')}),!0},Da=function(a,b,c){return a.undoManager.extra(function(){c(a,b)},function(){a.execCommand("mceInsertLink",!1,b)}),!0},Ea=function(a,b,c){return!(a.selection.isCollapsed()!==!1||!Aa(b))&&Da(a,b,c)},Fa=function(a,b,c){return!!Ba(b)&&Ca(a,b,c)},Ga=function(a,b){Y.each([Ea,Fa,za],function(c){return c(a,b,za)!==!0})},Ha=function(a,b){P.isSmartPasteEnabled(a)===!1?za(a,b):Ga(a,b)},Ia={isImageUrl:Ba,isAbsoluteUrl:Aa,insertContent:Ha},Ja=function(a,b,c){var d=c?c:da.isMarked(b),e=ya.process(a,da.unmark(b),d);e.cancelled===!1&&Ia.insertContent(a,e.content)},Ka=function(a,b){b=a.dom.encode(b).replace(/\r\n/g,"\n"),b=ka.convert(b,a.settings.forced_root_block,a.settings.forced_root_block_attrs),Ja(a,b,!1)},La=function(a){var b={},c="data:text/mce-internal,";if(a){if(a.getData){var d=a.getData("Text");d&&d.length>0&&d.indexOf(c)===-1&&(b["text/plain"]=d)}if(a.types)for(var e=0;e<a.types.length;e++){var f=a.types[e];try{b[f]=a.getData(f)}catch(g){b[f]=""}}}return b},Ma=function(a,b){var c=La(b.clipboardData||a.getDoc().dataTransfer);return qa.isMsEdge()?Y.extend(c,{"text/html":""}):c},Na=function(a,b){return b in a&&a[b].length>0},Oa=function(a){return Na(a,"text/html")||Na(a,"text/plain")},Pa=function(a){var b;return b=a.indexOf(","),b!==-1?a.substr(b+1):null},Qa=function(a,b){return!a.images_dataimg_filter||a.images_dataimg_filter(b)},Ra=function(a,b){var c=b.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i);return c?a.dom.encode(c[1]):null},Sa=qa.createIdGenerator("mceclip"),Ta=function(a,b,c,d){b&&(a.selection.setRng(b),b=null);var e=c.result,f=Pa(e),g=Sa(),h=a.settings.images_reuse_filename&&d.name?Ra(a,d.name):g,i=new Image;if(i.src=e,Qa(a.settings,i)){var j=a.editorUpload.blobCache,k=void 0,l=void 0;l=j.findFirst(function(a){return a.base64()===f}),l?k=l:(k=j.create(g,d,f,h),j.add(k)),Ja(a,'<img src="'+k.blobUri()+'">',!1)}else Ja(a,'<img src="'+e+'">',!1)},Ua=function(a){return"paste"===a.type},Va=function(a,b,c){function d(d){var e,f,g,h=!1;if(d)for(e=0;e<d.length;e++)if(f=d[e],/^image\/(jpeg|png|gif|bmp)$/.test(f.type)){var i=f.getAsFile?f.getAsFile():f;g=new window.FileReader,g.onload=Ta.bind(null,a,c,g,i),g.readAsDataURL(i),b.preventDefault(),h=!0}return h}var e=Ua(b)?b.clipboardData:b.dataTransfer;if(a.settings.paste_data_images&&e)return d(e.items)||d(e.files)},Wa=function(a){var b=a.clipboardData;return navigator.userAgent.indexOf("Android")!==-1&&b&&b.items&&0===b.items.length},Xa=function(a){return Z.metaKeyPressed(a)&&86===a.keyCode||a.shiftKey&&45===a.keyCode},Ya=function(a,b,c){function d(c,d,e,f){var g,h;return Na(c,"text/html")?g=c["text/html"]:(g=b.getHtml(),f=f?f:da.isMarked(g),b.isDefaultContent(g)&&(e=!0)),g=qa.trimHtml(g),b.remove(),h=f===!1&&ka.isPlainText(g),g.length&&!h||(e=!0),e&&(g=Na(c,"text/plain")&&h?c["text/plain"]:qa.innerText(g)),b.isDefaultContent(g)?void(d||a.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")):void(e?Ka(a,g):Ja(a,g,f))}var e,f=0;a.on("keydown",function(c){function d(a){Xa(a)&&!a.isDefaultPrevented()&&b.remove()}if(Xa(c)&&!c.isDefaultPrevented()){if(e=c.shiftKey&&86===c.keyCode,e&&W.webkit&&navigator.userAgent.indexOf("Version/")!==-1)return;if(c.stopImmediatePropagation(),f=(new Date).getTime(),W.ie&&e)return c.preventDefault(),void z.firePaste(a,!0);b.remove(),b.create(),a.once("keyup",d),a.once("paste",function(){a.off("keyup",d)})}});var g=function(){return b.getLastRng()||a.selection.getRng()};a.on("paste",function(h){var i=(new Date).getTime(),j=Ma(a,h),k=(new Date).getTime()-i,l=(new Date).getTime()-f-k<1e3,m="text"===c.get()||e,n=Na(j,da.internalHtmlMime());return e=!1,h.isDefaultPrevented()||Wa(h)?void b.remove():!Oa(j)&&Va(a,h,g())?void b.remove():(l||h.preventDefault(),!W.ie||l&&!h.ieFake||Na(j,"text/html")||(b.create(),a.dom.bind(b.getEl(),"paste",function(a){a.stopPropagation()}),a.getDoc().execCommand("Paste",!1,null),j["text/html"]=b.getHtml()),void(Na(j,"text/html")?(h.preventDefault(),n||(n=da.isMarked(j["text/html"])),d(j,l,m,n)):X.setEditorTimeout(a,function(){d(j,l,m,n)},0)))})},Za=function(a,b,c){Ya(a,b,c);var d;a.parser.addNodeFilter("img",function(b,c,e){var f=function(a){return a.data&&a.data.paste===!0},g=function(a){a.attr("data-mce-object")||d===W.transparentSrc||a.remove()},h=function(a){return 0===a.indexOf("webkit-fake-url")},i=function(a){return 0===a.indexOf("data:")};if(!a.settings.paste_data_images&&f(e))for(var j=b.length;j--;)d=b[j].attributes.map.src,d&&(h(d)?g(b[j]):!a.settings.allow_html_data_urls&&i(d)&&g(b[j]))})},$a=function(a){return W.ie&&a.inline?document.body:a.getBody()},_a=function(a){return $a(a)!==a.getBody()},ab=function(a,b){_a(a)&&a.dom.bind(b,"paste keyup",function(b){setTimeout(function(){a.fire("paste")},0)})},bb=function(a,b,c){var d,e=a.dom,f=a.getBody();b.set(a.selection.getRng()),d=a.dom.add($a(a),"div",{id:"mcepastebin","class":"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},c),(W.ie||W.gecko)&&e.setStyle(d,"left","rtl"===e.getStyle(f,"direction",!0)?65535:-65535),e.bind(d,"beforedeactivate focusin focusout",function(a){a.stopPropagation()}),ab(a,d),d.focus(),a.selection.select(d,!0)},cb=function(a,b){if(db(a)){for(var c=void 0,d=b.get();c=a.dom.get("mcepastebin");)a.dom.remove(c),a.dom.unbind(c);d&&a.selection.setRng(d)}b.set(null)},db=function(a){return a.dom.get("mcepastebin")},eb=function(a){var b,c,d,e,f,g=function(b,c){b.appendChild(c),a.dom.remove(c,!0)};for(c=Y.grep($a(a).childNodes,function(a){return"mcepastebin"===a.id}),b=c.shift(),Y.each(c,function(a){g(b,a)}),e=a.dom.select("div[id=mcepastebin]",b),d=e.length-1;d>=0;d--)f=a.dom.create("div"),b.insertBefore(f,e[d]),g(f,e[d]);return b?b.innerHTML:""},fb=function(a){return a.get()},gb=function(a,b){return b===a},hb=function(a){return a&&"mcepastebin"===a.id},ib=function(a,b){var c=db(a);return hb(c)&&gb(b,c.innerHTML)},jb=function(a){var b=p(null),c="%MCEPASTEBIN%";return{create:function(){return bb(a,b,c)},remove:function(){return cb(a,b)},getEl:function(){return db(a)},getHtml:function(){return eb(a)},getLastRng:function(){return fb(b)},isDefault:function(){return ib(a,c)},isDefaultContent:function(a){return gb(c,a)}}},kb=function(a,b){var c=jb(a);return a.on("preInit",function(){return Za(a,c,b)}),{pasteFormat:b,pasteHtml:function(b,c){return Ja(a,b,c)},pasteText:function(b){return Ka(a,b)},pasteImageData:function(b,c){return Va(a,b,c)},getDataTransferItems:La,hasHtmlOrText:Oa,hasContentType:Na}},lb=function(){},mb=function(a){return W.iOS===!1&&void 0!==a&&"function"==typeof a.setData&&qa.isMsEdge()!==!0},nb=function(a,b,c){if(!mb(a))return!1;try{return a.clearData(),a.setData("text/html",b),a.setData("text/plain",c),a.setData(da.internalHtmlMime(),b),!0}catch(d){return!1}},ob=function(a,b,c,d){nb(a.clipboardData,b.html,b.text)?(a.preventDefault(),d()):c(b.html,d)},pb=function(a){return function(b,c){var d=da.mark(b),e=a.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=a.dom.create("div",{contenteditable:"true"},d);a.dom.setStyles(e,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),e.appendChild(f),a.dom.add(a.getBody(),e);var g=a.selection.getRng();f.focus();var h=a.dom.createRng();h.selectNodeContents(f),a.selection.setRng(h),setTimeout(function(){a.selection.setRng(g),e.parentNode.removeChild(e),c()},0)}},qb=function(a){return{html:a.selection.getContent({contextual:!0}),text:a.selection.getContent({format:"text"})}},rb=function(a){return function(b){a.selection.isCollapsed()===!1&&ob(b,qb(a),pb(a),function(){setTimeout(function(){a.execCommand("Delete")},0)})}},sb=function(a){return function(b){a.selection.isCollapsed()===!1&&ob(b,qb(a),pb(a),lb)}},tb=function(a){a.on("cut",rb(a)),a.on("copy",sb(a))},ub={register:tb},vb=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),wb=function(a,b){return vb.getCaretRangeFromPoint(b.clientX,b.clientY,a.getDoc())},xb=function(a){var b=a["text/plain"];return!!b&&0===b.indexOf("file://")},yb=function(a,b){a.focus(),a.selection.setRng(b)},zb=function(a,b,c){P.shouldBlockDrop(a)&&a.on("dragend dragover draggesture dragdrop drop drag",function(a){a.preventDefault(),a.stopPropagation()}),P.shouldPasteDataImages(a)||a.on("drop",function(a){var b=a.dataTransfer;b&&b.files&&b.files.length>0&&a.preventDefault()}),a.on("drop",function(d){var e,f;if(f=wb(a,d),!d.isDefaultPrevented()&&!c.get()){e=b.getDataTransferItems(d.dataTransfer);var g=b.hasContentType(e,da.internalHtmlMime());if((b.hasHtmlOrText(e)&&!xb(e)||!b.pasteImageData(d,f))&&f&&P.shouldFilterDrop(a)){var h=e["mce-internal"]||e["text/html"]||e["text/plain"];h&&(d.preventDefault(),X.setEditorTimeout(a,function(){a.undoManager.transact(function(){e["mce-internal"]&&a.execCommand("Delete"),yb(a,f),h=qa.trimHtml(h),e["text/html"]?b.pasteHtml(h,g):b.pasteText(h)})}))}}}),a.on("dragstart",function(a){c.set(!0)}),a.on("dragover dragend",function(b){P.shouldPasteDataImages(a)&&c.get()===!1&&(b.preventDefault(),yb(a,wb(a,b))),"dragend"===b.type&&c.set(!1)})},Ab={setup:zb},Bb=function(a){var b=a.plugins.paste,c=P.getPreProcess(a);c&&a.on("PastePreProcess",function(a){c.call(b,b,a)});var d=P.getPostProcess(a);d&&a.on("PastePostProcess",function(a){d.call(b,b,a)})},Cb={setup:Bb},Db=function(a){W.webkit&&j(a,m),W.ie&&(j(a,l),k(a,n))},Eb={setup:Db},Fb=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b]},Gb=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return a()}},Hb=function(a,b){return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a(b.apply(null,arguments))}},Ib=function(a){return function(){return a}},Jb=function(a){return a},Kb=function(a,b){return a===b},Lb=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var d=new Array(arguments.length-1),e=1;e<arguments.length;e++)d[e-1]=arguments[e];return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];for(var e=new Array(arguments.length),f=0;f<e.length;f++)e[f]=arguments[f];var g=d.concat(e);return a.apply(null,g)}},Mb=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return!a.apply(null,arguments)}},Nb=function(a){return function(){throw new Error(a)}},Ob=function(a){return a()},Pb=function(a){a()},Qb=Ib(!1),Rb=Ib(!0),Sb={noop:Fb,noarg:Gb,compose:Hb,constant:Ib,identity:Jb,tripleEquals:Kb,curry:Lb,not:Mb,die:Nb,apply:Ob,call:Pb,never:Qb,always:Rb},Tb=function(a,b,c){var d=c.control;d.active("text"===b.pasteFormat.get()),a.on("PastePlainTextToggle",function(a){d.active(a.state)})},Ub=function(a,b){var c=Sb.curry(Tb,a,b);a.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:c}),a.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:b.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:c})},Vb={register:Ub};return q.add("paste",function(a){if(s.hasProPlugin(a)===!1){var b=p(!1),c=p(!1),d=p(P.isPasteAsTextEnabled(a)?"text":"html"),e=kb(a,d),f=Eb.setup(a);return Vb.register(a,e),V.register(a,e,b),Cb.setup(a),ub.register(a),Ab.setup(a,e,c),u.get(e,f)}}),o})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-preview",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.Env"),d=function(a){return parseInt(a.getParam("plugin_preview_width","650"),10)},e=function(a){return parseInt(a.getParam("plugin_preview_height","500"),10)},f=function(a){return a.getParam("content_style","")},g={getPreviewDialogWidth:d,getPreviewDialogHeight:e,getContentStyle:f},h=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=function(a){var b,c="",d=a.dom.encode,e=g.getContentStyle(a);c+='<base href="'+d(a.documentBaseURI.getURI())+'">',e&&(c+='<style type="text/css">'+e+"</style>"),h.each(a.contentCSS,function(b){c+='<link type="text/css" rel="stylesheet" href="'+d(a.documentBaseURI.toAbsolute(b))+'">'});var f=a.settings.body_id||"tinymce";f.indexOf("=")!==-1&&(f=a.getParam("body_id","","hash"),f=f[a.id]||f);var i=a.settings.body_class||"";i.indexOf("=")!==-1&&(i=a.getParam("body_class","","hash"),i=i[a.id]||"");var j='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);</script> ',k=a.settings.directionality?' dir="'+a.settings.directionality+'"':"";return b="<!DOCTYPE html><html><head>"+c+'</head><body id="'+d(f)+'" class="mce-content-body '+d(i)+'"'+d(k)+">"+a.getContent()+j+"</body></html>"},j=function(a,b,c){var d=i(a);if(c)b.src="data:text/html;charset=utf-8,"+encodeURIComponent(d);else{var e=b.contentWindow.document;e.open(),e.write(d),e.close()}},k={getPreviewHtml:i,injectIframeContent:j},l=function(a){var b=!c.ie,d='<iframe src="" frameborder="0"'+(b?' sandbox="allow-scripts"':"")+"></iframe>",e=g.getPreviewDialogWidth(a),f=g.getPreviewDialogHeight(a);a.windowManager.open({title:"Preview",width:e,height:f,html:d,buttons:{text:"Close",onclick:function(a){a.control.parent().parent().close()}},onPostRender:function(c){var d=c.control.getEl("body").firstChild;k.injectIframeContent(a,d,b)}})},m={open:l},n=function(a){a.addCommand("mcePreview",function(){m.open(a)})},o={register:n},p=function(a){a.addButton("preview",{title:"Preview",cmd:"mcePreview"}),a.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})},q={register:p};return b.add("preview",function(a){o.register(a),q.register(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-print",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=function(a){a.addCommand("mcePrint",function(){a.getWin().print()})},d={register:c},e=function(a){a.addButton("print",{title:"Print",cmd:"mcePrint"}),a.addMenuItem("print",{text:"Print",cmd:"mcePrint",icon:"print"})},f={register:e};return b.add("print",function(a){d.register(a),f.register(a),a.addShortcut("Meta+P","","mcePrint")}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-save",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),d=tinymce.util.Tools.resolve("tinymce.util.Tools"),e=function(a){return a.getParam("save_enablewhendirty",!0)},f=function(a){return!!a.getParam("save_onsavecallback")},g=function(a){return!!a.getParam("save_oncancelcallback")},h={enableWhenDirty:e,hasOnSaveCallback:f,hasOnCancelCallback:g},i=function(a,b){a.notificationManager.open({text:a.translate(b),type:"error"})},j=function(a){var b;if(b=c.DOM.getParent(a.id,"form"),!h.enableWhenDirty(a)||a.isDirty())return a.save(),h.hasOnSaveCallback(a)?(a.execCallback("save_onsavecallback",a),void a.nodeChanged()):void(b?(a.setDirty(!1),b.onsubmit&&!b.onsubmit()||("function"==typeof b.submit?b.submit():i(a,"Error: Form submit field collision.")),a.nodeChanged()):i(a,"Error: No form element found."))},k=function(a){var b=d.trim(a.startContent);return h.hasOnCancelCallback(a)?void a.execCallback("save_oncancelcallback",a):(a.setContent(b),a.undoManager.clear(),void a.nodeChanged())},l={save:j,cancel:k},m=function(a){a.addCommand("mceSave",function(){l.save(a)}),a.addCommand("mceCancel",function(){l.cancel(a)})},n={register:m},o=function(a){return function(b){var c=b.control;a.on("nodeChange dirty",function(){c.disabled(h.enableWhenDirty(a)&&!a.isDirty())})}},p=function(a){a.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:o(a)}),a.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:o(a)}),a.addShortcut("Meta+S","","mceSave")},q={register:p};return b.add("save",function(a){q.register(a),n.register(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-searchreplace",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(a){return a&&1===a.nodeType&&"false"===a.contentEditable}function b(b,c,d,e,f){function g(a,b){if(b=b||0,!a[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");var c=a.index;if(b>0){var d=a[b];if(!d)throw new Error("Invalid capture group");c+=a[0].indexOf(d),a[0]=d}return[c,c+a[0].length,[a[0]]]}function h(b){var c;if(3===b.nodeType)return b.data;if(o[b.nodeName]&&!n[b.nodeName])return"";if(c="",a(b))return"\n";if((n[b.nodeName]||p[b.nodeName])&&(c+="\n"),b=b.firstChild)do c+=h(b);while(b=b.nextSibling);return c}function i(b,c,d){var e,f,g,h,i=[],j=0,k=b,l=c.shift(),m=0;a:for(;;){if((n[k.nodeName]||p[k.nodeName]||a(k))&&j++,3===k.nodeType&&(!f&&k.length+j>=l[1]?(f=k,h=l[1]-j):e&&i.push(k),!e&&k.length+j>l[0]&&(e=k,g=l[0]-j),j+=k.length),e&&f){if(k=d({startNode:e,startNodeIndex:g,endNode:f,endNodeIndex:h,innerNodes:i,match:l[2],matchIndex:m}),j-=f.length-h,e=null,f=null,i=[],l=c.shift(),m++,!l)break}else if(o[k.nodeName]&&!n[k.nodeName]||!k.firstChild){if(k.nextSibling){k=k.nextSibling;continue}}else if(!a(k)){k=k.firstChild;continue}for(;;){if(k.nextSibling){k=k.nextSibling;break}if(k.parentNode===b)break a;k=k.parentNode}}}function j(a){var b;if("function"!=typeof a){var c=a.nodeType?a:m.createElement(a);b=function(a,b){var d=c.cloneNode(!1);return d.setAttribute("data-mce-index",b),a&&d.appendChild(m.createTextNode(a)),d}}else b=a;return function(a){var c,d,e,f=a.startNode,g=a.endNode,h=a.matchIndex;if(f===g){var i=f;e=i.parentNode,
a.startNodeIndex>0&&(c=m.createTextNode(i.data.substring(0,a.startNodeIndex)),e.insertBefore(c,i));var j=b(a.match[0],h);return e.insertBefore(j,i),a.endNodeIndex<i.length&&(d=m.createTextNode(i.data.substring(a.endNodeIndex)),e.insertBefore(d,i)),i.parentNode.removeChild(i),j}c=m.createTextNode(f.data.substring(0,a.startNodeIndex)),d=m.createTextNode(g.data.substring(a.endNodeIndex));for(var k=b(f.data.substring(a.startNodeIndex),h),l=[],n=0,o=a.innerNodes.length;n<o;++n){var p=a.innerNodes[n],q=b(p.data,h);p.parentNode.replaceChild(q,p),l.push(q)}var r=b(g.data.substring(0,a.endNodeIndex),h);return e=f.parentNode,e.insertBefore(c,f),e.insertBefore(k,f),e.removeChild(f),e=g.parentNode,e.insertBefore(r,g),e.insertBefore(d,g),e.removeChild(g),r}}var k,l,m,n,o,p,q=[],r=0;if(m=c.ownerDocument,n=f.getBlockElements(),o=f.getWhiteSpaceElements(),p=f.getShortEndedElements(),l=h(c)){if(b.global)for(;k=b.exec(l);)q.push(g(k,e));else k=l.match(b),q.push(g(k,e));return q.length&&(r=q.length,i(c,q,j(d))),r}}function c(){}var d=function(a){var b=a,c=function(){return b},e=function(a){b=a},f=function(){return d(c())};return{get:c,set:e,clone:f}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=tinymce.util.Tools.resolve("tinymce.util.Tools"),g={findAndReplaceDOMText:b},h=function(a){var b=a.getAttribute("data-mce-index");return"number"==typeof b?""+b:b},i=function(a,b,c){var d,e;return e=a.dom.create("span",{"data-mce-bogus":1}),e.className="mce-match-marker",d=a.getBody(),s(a,b,!1),g.findAndReplaceDOMText(c,d,e,!1,a.schema)},j=function(a){var b=a.parentNode;a.firstChild&&b.insertBefore(a.firstChild,a),a.parentNode.removeChild(a)},k=function(a,b){var c,d=[];if(c=f.toArray(a.getBody().getElementsByTagName("span")),c.length)for(var e=0;e<c.length;e++){var g=h(c[e]);null!==g&&g.length&&g===b.toString()&&d.push(c[e])}return d},l=function(a,b,c){var d=b.get(),e=a.dom;c=c!==!1,c?d++:d--,e.removeClass(k(a,b.get()),"mce-match-marker-selected");var f=k(a,d);return f.length?(e.addClass(k(a,d),"mce-match-marker-selected"),a.selection.scrollIntoView(f[0]),d):-1},m=function(a,b){var c=b.parentNode;a.remove(b),a.isEmpty(c)&&a.remove(c)},n=function(a,b,c,d,e){c=c.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),c=c.replace(/\s/g,"\\s"),c=e?"\\b"+c+"\\b":c;var f=i(a,b,new RegExp(c,d?"g":"gi"));return f&&(b.set(-1),b.set(l(a,b,!0))),f},o=function(a,b){var c=l(a,b,!0);c!==-1&&b.set(c)},p=function(a,b){var c=l(a,b,!1);c!==-1&&b.set(c)},q=function(a){var b=h(a);return null!==b&&b.length>0},r=function(a,b,c,d,e){var g,i,k,l,n,r,s=b.get();for(d=d!==!1,k=a.getBody(),i=f.grep(f.toArray(k.getElementsByTagName("span")),q),g=0;g<i.length;g++){var v=h(i[g]);if(l=n=parseInt(v,10),e||l===b.get()){for(c.length?(i[g].firstChild.nodeValue=c,j(i[g])):m(a.dom,i[g]);i[++g];){if(l=parseInt(h(i[g]),10),l!==n){g--;break}m(a.dom,i[g])}d&&s--}else n>b.get()&&i[g].setAttribute("data-mce-index",n-1)}return b.set(s),d?(r=t(a,b),o(a,b)):(r=u(a,b),p(a,b)),!e&&r},s=function(a,b,c){var d,e,g,i;for(e=f.toArray(a.getBody().getElementsByTagName("span")),d=0;d<e.length;d++){var k=h(e[d]);null!==k&&k.length&&(k===b.get().toString()&&(g||(g=e[d].firstChild),i=e[d].firstChild),j(e[d]))}if(g&&i){var l=a.dom.createRng();return l.setStart(g,0),l.setEnd(i,i.data.length),c!==!1&&a.selection.setRng(l),l}},t=function(a,b){return k(a,b.get()+1).length>0},u=function(a,b){return k(a,b.get()-1).length>0},v={done:s,find:n,next:o,prev:p,replace:r,hasNext:t,hasPrev:u},w=function(a,b){var c=function(c){return v.done(a,b,c)},d=function(c,d,e){return v.find(a,b,c,d,e)},e=function(){return v.next(a,b)},f=function(){return v.prev(a,b)},g=function(c,d,e){return v.replace(a,b,c,d,e)};return{done:c,find:d,next:e,prev:f,replace:g}},x={get:w},y=function(a,b){function c(){h.statusbar.find("#next").disabled(v.hasNext(a,b)===!1),h.statusbar.find("#prev").disabled(v.hasPrev(a,b)===!1)}function d(){a.windowManager.alert("Could not find the specified string.",function(){h.find("#find")[0].focus()})}var e,g={};a.undoManager.add(),e=f.trim(a.selection.getContent({format:"text"}));var h=a.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){a.focus(),v.done(a,b),a.undoManager.add()},onSubmit:function(e){var f,i,j,k;return e.preventDefault(),i=h.find("#case").checked(),k=h.find("#words").checked(),j=h.find("#find").value(),j.length?g.text===j&&g.caseState===i&&g.wholeWord===k?v.hasNext(a,b)?(v.next(a,b),void c()):void d():(f=v.find(a,b,j,i,k),f||d(),h.statusbar.items().slice(1).disabled(0===f),c(),void(g={text:j,caseState:i,wholeWord:k})):(v.done(a,b,!1),void h.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){h.submit()}},{text:"Replace",disabled:!0,onclick:function(){v.replace(a,b,h.find("#replace").value())||(h.statusbar.items().slice(1).disabled(!0),b.set(-1),g={})}},{text:"Replace all",disabled:!0,onclick:function(){v.replace(a,b,h.find("#replace").value(),!0,!0),h.statusbar.items().slice(1).disabled(!0),g={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){v.prev(a,b),c()}},{text:"Next",name:"next",disabled:!0,onclick:function(){v.next(a,b),c()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:e},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})},z={open:y},A=function(a,b){a.addCommand("SearchReplace",function(){z.open(a,b)})},B={register:A},C=function(a,b){return function(){z.open(a,b)}},D=function(a,b){a.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:C(a,b),separator:"before",context:"edit"}),a.addButton("searchreplace",{tooltip:"Find and replace",onclick:C(a,b)}),a.shortcuts.add("Meta+F","",C(a,b))},E={register:D};return e.add("searchreplace",function(a){var b=d(-1);return B.register(a,b),E.register(a,b),x.get(a,b)}),c})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-spellchecker",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(a){return a&&1===a.nodeType&&"false"===a.contentEditable}function b(){}var c,d=function(a){var b=a,c=function(){return b},e=function(a){b=a},f=function(){return d(c())};return{get:c,set:e,clone:f}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=function(a){return!(!/(^|[ ,])tinymcespellchecker([, ]|$)/.test(a.settings.plugins)||!e.get("tinymcespellchecker"))&&("undefined"!=typeof window.console&&window.console.log&&window.console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option."),!0)},g={hasProPlugin:f},h=function(a){var b="English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv";return a.getParam("spellchecker_languages",b)},i=function(a){var b=a.getParam("language","en");return a.getParam("spellchecker_language",b)},j=function(a){return a.getParam("spellchecker_rpc_url")},k=function(a){return a.getParam("spellchecker_callback")},l=function(a){var b=new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`Â§Â©Â«Â®Â±Â¶Â·Â¸Â»Â¼Â½Â¾Â¿Ã—Ã·Â¤â€â€œâ€žÂ â€‚â€ƒâ€‰]+',"g");return a.getParam("spellchecker_wordchar_pattern",b)},m={getLanguages:h,getLanguage:i,getRpcUrl:j,getSpellcheckerCallback:k,getSpellcheckerWordcharPattern:l},n=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=tinymce.util.Tools.resolve("tinymce.util.URI"),p=tinymce.util.Tools.resolve("tinymce.util.XHR"),q=function(a){return a.fire("SpellcheckStart")},r=function(a){return a.fire("SpellcheckEnd")},s={fireSpellcheckStart:q,fireSpellcheckEnd:r},t=function(b,c){function d(a,b){if(!a[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return{start:a.index,end:a.index+a[0].length,text:a[0],data:b}}function e(b){var c;if(3===b.nodeType)return b.data;if(z[b.nodeName]&&!y[b.nodeName])return"";if(a(b))return"\n";if(c="",(y[b.nodeName]||A[b.nodeName])&&(c+="\n"),b=b.firstChild)do c+=e(b);while(b=b.nextSibling);return c}function f(b,c,d){var e,f,g,h,i,j=[],k=0,l=b,m=0;c=c.slice(0),c.sort(function(a,b){return a.start-b.start}),i=c.shift();a:for(;;){if((y[l.nodeName]||A[l.nodeName]||a(l))&&k++,3===l.nodeType&&(!f&&l.length+k>=i.end?(f=l,h=i.end-k):e&&j.push(l),!e&&l.length+k>i.start&&(e=l,g=i.start-k),k+=l.length),e&&f){if(l=d({startNode:e,startNodeIndex:g,endNode:f,endNodeIndex:h,innerNodes:j,match:i.text,matchIndex:m}),k-=f.length-h,e=null,f=null,j=[],i=c.shift(),m++,!i)break}else if(z[l.nodeName]&&!y[l.nodeName]||!l.firstChild){if(l.nextSibling){l=l.nextSibling;continue}}else if(!a(l)){l=l.firstChild;continue}for(;;){if(l.nextSibling){l=l.nextSibling;break}if(l.parentNode===b)break a;l=l.parentNode}}}function g(a){function b(b,c){var d=B[c];d.stencil||(d.stencil=a(d));var e=d.stencil.cloneNode(!1);return e.setAttribute("data-mce-index",c),b&&e.appendChild(C.doc.createTextNode(b)),e}return function(a){var c,d,e,f=a.startNode,g=a.endNode,h=a.matchIndex,i=C.doc;if(f===g){var j=f;e=j.parentNode,a.startNodeIndex>0&&(c=i.createTextNode(j.data.substring(0,a.startNodeIndex)),e.insertBefore(c,j));var k=b(a.match,h);return e.insertBefore(k,j),a.endNodeIndex<j.length&&(d=i.createTextNode(j.data.substring(a.endNodeIndex)),e.insertBefore(d,j)),j.parentNode.removeChild(j),k}c=i.createTextNode(f.data.substring(0,a.startNodeIndex)),d=i.createTextNode(g.data.substring(a.endNodeIndex));for(var l=b(f.data.substring(a.startNodeIndex),h),m=[],n=0,o=a.innerNodes.length;n<o;++n){var p=a.innerNodes[n],q=b(p.data,h);p.parentNode.replaceChild(q,p),m.push(q)}var r=b(g.data.substring(0,a.endNodeIndex),h);return e=f.parentNode,e.insertBefore(c,f),e.insertBefore(l,f),e.removeChild(f),e=g.parentNode,e.insertBefore(r,g),e.insertBefore(d,g),e.removeChild(g),r}}function h(a){var b=a.parentNode;b.insertBefore(a.firstChild,a),a.parentNode.removeChild(a)}function i(a){return a.className.indexOf("mce-spellchecker-word")!==-1}function j(a){var c=b.getElementsByTagName("*"),d=[];a="number"==typeof a?""+a:null;for(var e=0;e<c.length;e++){var f=c[e],g=f.getAttribute("data-mce-index");null!==g&&g.length&&i(f)&&(g!==a&&null!==a||d.push(f))}return d}function k(a){for(var b=B.length;b--;)if(B[b]===a)return b;return-1}function l(a){var b=[];return m(function(c,d){a(c,d)&&b.push(c)}),B=b,this}function m(a){for(var b=0,c=B.length;b<c&&a(B[b],b)!==!1;b++);return this}function n(a){return B.length&&f(b,B,g(a)),this}function o(a,b){if(x&&a.global)for(;w=a.exec(x);)B.push(d(w,b));return this}function p(a){var b,c=j(a?k(a):null);for(b=c.length;b--;)h(c[b]);return this}function q(a){return B[a.getAttribute("data-mce-index")]}function r(a){return j(k(a))[0]}function s(a,b,c){return B.push({start:a,end:a+b,text:x.substr(a,b),data:c}),this}function t(a){var b=j(k(a)),d=c.dom.createRng();return d.setStartBefore(b[0]),d.setEndAfter(b[b.length-1]),d}function u(a,b){var d=t(a);return d.deleteContents(),b.length>0&&d.insertNode(c.dom.doc.createTextNode(b)),d}function v(){return B.splice(0,B.length),p(),this}var w,x,y,z,A,B=[],C=c.dom;return y=c.schema.getBlockElements(),z=c.schema.getWhiteSpaceElements(),A=c.schema.getShortEndedElements(),x=e(b),{text:x,matches:B,each:m,filter:l,reset:v,matchFromElement:q,elementFromMatch:r,find:o,add:s,wrap:n,unwrap:p,replace:u,rangeFromMatch:t,indexOf:k}},u=function(a,b){if(!b.get()){var c=t(a.getBody(),a);b.set(c)}return b.get()},v=function(a){for(var b in a)return!1;return!0},w=function(a,b,c){return function(d,e,f,g){var h={method:d,lang:c.get()},i="";h["addToDictionary"===d?"word":"text"]=e,n.each(h,function(a,b){i&&(i+="&"),i+=b+"="+encodeURIComponent(a)}),p.send({url:new o(b).toAbsolute(m.getRpcUrl(a)),type:"post",content_type:"application/x-www-form-urlencoded",data:i,success:function(b){if(b=JSON.parse(b))b.error?g(b.error):f(b);else{var c=a.translate("Server response wasn't proper JSON.");g(c)}},error:function(){var b=a.translate("The spelling service was not found: (")+m.getRpcUrl(a)+a.translate(")");g(b)}})}},x=function(a,b,c,d,e,f,g){var h=m.getSpellcheckerCallback(a),i=h?h:w(a,b,c);i.call(a.plugins.spellchecker,d,e,f,g)},y=function(a,b,c,d,e,f){if(!C(a,c,d)){var g=function(b){a.notificationManager.open({text:b,type:"error"}),a.setProgressState(!1),C(a,c,d)},h=function(b){F(a,c,d,e,b)};a.setProgressState(!0),x(a,b,f,"spellcheck",u(a,d).text,h,g),a.focus()}},z=function(a,b,c){a.dom.select("span.mce-spellchecker-word").length||C(a,b,c)},A=function(a,b,c,d,e,f,g){a.setProgressState(!0),x(a,b,e,"addToDictionary",f,function(){a.setProgressState(!1),a.dom.remove(g,!0),z(a,c,d)},function(b){a.notificationManager.open({text:b,type:"error"}),a.setProgressState(!1)})},B=function(a,b,c,d,e,f){a.selection.collapse(),f?n.each(a.dom.select("span.mce-spellchecker-word"),function(b){b.getAttribute("data-mce-word")===d&&a.dom.remove(b,!0)}):a.dom.remove(e,!0),z(a,b,c)},C=function(a,b,c){if(u(a,c).reset(),c.set(null),b.get())return b.set(!1),s.fireSpellcheckEnd(a),!0},D=function(a){var b=a.getAttribute("data-mce-index");return"number"==typeof b?""+b:b},E=function(a,b){var c,d=[];if(c=n.toArray(a.getBody().getElementsByTagName("span")),c.length)for(var e=0;e<c.length;e++){var f=D(c[e]);null!==f&&f.length&&f===b.toString()&&d.push(c[e])}return d},F=function(a,b,c,d,e){var f,g;if("string"!=typeof e&&e.words?(g=!!e.dictionary,f=e.words):f=e,a.setProgressState(!1),v(f)){var h=a.translate("No misspellings found.");return a.notificationManager.open({text:h,type:"info"}),void b.set(!1)}d.set({suggestions:f,hasDictionarySupport:g}),u(a,c).find(m.getSpellcheckerWordcharPattern(a)).filter(function(a){return!!f[a.text]}).wrap(function(b){return a.dom.create("span",{"class":"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":b.text})}),b.set(!0),s.fireSpellcheckStart(a)},G={spellcheck:y,checkIfFinished:z,addToDictionary:A,ignoreWord:B,findSpansByIndex:E,getElmIndex:D,markErrors:F},H=function(a,b,c,d,e,f){var g=function(){return e.get()},h=function(){return m.getSpellcheckerWordcharPattern(a)},i=function(e){G.markErrors(a,b,d,c,e)},j=function(){return d.get()};return{getTextMatcher:j,getWordCharPattern:h,markErrors:i,getLanguage:g}},I={get:H},J=function(a,b,c,d,e,f){a.addCommand("mceSpellCheck",function(){G.spellcheck(a,b,c,d,e,f)})},K={register:J},L=function(a,b){var c=[];return n.each(b,function(a){c.push({selectable:!0,text:a.name,data:a.value})}),c},M=function(a,b){return function(a){var c=b.get();a.control.items().each(function(a){a.active(a.settings.data===c)})}},N=function(a){return n.map(m.getLanguages(a).split(","),function(a){return a=a.split("="),{name:a[0],value:a[1]}})},O=function(a,b,c,d,e,f){var g=L("Language",N(a)),h=function(){G.spellcheck(a,b,c,d,f,e)},i={tooltip:"Spellcheck",onclick:h,onPostRender:function(b){var d=b.control;a.on("SpellcheckStart SpellcheckEnd",function(){d.active(c.get())})}};g.length>1&&(i.type="splitbutton",i.menu=g,i.onshow=M(a,e),i.onselect=function(a){e.set(a.control.settings.data)}),a.addButton("spellchecker",i),a.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:h,selectable:!0,onPostRender:function(){var b=this;b.active(c.get()),a.on("SpellcheckStart SpellcheckEnd",function(){b.active(c.get())})}})},P={register:O},Q=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),R=tinymce.util.Tools.resolve("tinymce.ui.Factory"),S=function(a,b,d,e,f,g,h,i){var j=[],k=d.get().suggestions[h];n.each(k,function(b){j.push({text:b,onclick:function(){a.insertContent(a.dom.encode(b)),a.dom.remove(i),G.checkIfFinished(a,e,f)}})}),j.push({text:"-"});var l=d.get().hasDictionarySupport;l&&j.push({text:"Add to Dictionary",onclick:function(){G.addToDictionary(a,b,e,f,g,h,i)}}),j.push.apply(j,[{text:"Ignore",onclick:function(){G.ignoreWord(a,e,f,h,i)}},{text:"Ignore all",onclick:function(){G.ignoreWord(a,e,f,h,i,!0)}}]),c=R.create("menu",{items:j,context:"contextmenu",onautohide:function(a){a.target.className.indexOf("spellchecker")!==-1&&a.preventDefault()},onhide:function(){c.remove(),c=null}}),c.renderTo(document.body);var m=Q.DOM.getPos(a.getContentAreaContainer()),o=a.dom.getPos(i[0]),p=a.dom.getRoot();"BODY"===p.nodeName?(o.x-=p.ownerDocument.documentElement.scrollLeft||p.scrollLeft,o.y-=p.ownerDocument.documentElement.scrollTop||p.scrollTop):(o.x-=p.scrollLeft,o.y-=p.scrollTop),m.x+=o.x,m.y+=o.y,c.moveTo(m.x,m.y+i[0].offsetHeight)},T=function(a,b,c,d,e,f){a.on("click",function(g){var h=g.target;if("mce-spellchecker-word"===h.className){g.preventDefault();var i=G.findSpansByIndex(a,G.getElmIndex(h));if(i.length>0){var j=a.dom.createRng();j.setStartBefore(i[0]),j.setEndAfter(i[i.length-1]),a.selection.setRng(j),S(a,b,c,d,e,f,h.getAttribute("data-mce-word"),i)}}})},U={setup:T};return e.add("spellchecker",function(a,b){if(g.hasProPlugin(a)===!1){var c=d(!1),e=d(m.getLanguage(a)),f=d(null),h=d(null);return P.register(a,b,c,f,e,h),U.setup(a,b,h,c,f,e),K.register(a,b,c,f,h,e),I.get(a,c,h,f,e,b)}}),b})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-tabfocus",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),d=tinymce.util.Tools.resolve("tinymce.EditorManager"),e=tinymce.util.Tools.resolve("tinymce.Env"),f=tinymce.util.Tools.resolve("tinymce.util.Delay"),g=tinymce.util.Tools.resolve("tinymce.util.Tools"),h=tinymce.util.Tools.resolve("tinymce.util.VK"),i=function(a){return a.getParam("tabfocus_elements",":prev,:next")},j=function(a){return a.getParam("tab_focus",i(a))},k={getTabFocus:j},l=c.DOM,m=function(a){a.keyCode!==h.TAB||a.ctrlKey||a.altKey||a.metaKey||a.preventDefault()},n=function(a){function b(b){function c(c){function e(a){return"BODY"===a.nodeName||"hidden"!==a.type&&"none"!==a.style.display&&"hidden"!==a.style.visibility&&e(a.parentNode)}function f(a){return/INPUT|TEXTAREA|BUTTON/.test(a.tagName)&&d.get(b.id)&&a.tabIndex!==-1&&e(a)}if(j=l.select(":input:enabled,*[tabindex]:not(iframe)"),g.each(j,function(b,c){if(b.id===a.id)return i=c,!1}),c>0){for(n=i+1;n<j.length;n++)if(f(j[n]))return j[n]}else for(n=i-1;n>=0;n--)if(f(j[n]))return j[n];return null}var i,j,m,n;if(!(b.keyCode!==h.TAB||b.ctrlKey||b.altKey||b.metaKey||b.isDefaultPrevented())&&(m=g.explode(k.getTabFocus(a)),1===m.length&&(m[1]=m[0],m[0]=":prev"),j=b.shiftKey?":prev"===m[0]?c(-1):l.get(m[0]):":next"===m[1]?c(1):l.get(m[1]))){var o=d.get(j.id||j.name);j.id&&o?o.focus():f.setTimeout(function(){e.webkit||window.focus(),j.focus()},10),b.preventDefault()}}a.on("init",function(){a.inline&&l.setAttrib(a.getBody(),"tabIndex",null),a.on("keyup",m),e.gecko?a.on("keypress keydown",b):a.on("keydown",b)})},o={setup:n};return b.add("tabfocus",function(a){o.setup(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-table",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];if(a.length!==b.length)throw new Error('Wrong number of arguments to struct. Expected "['+a.length+']", got '+b.length+" arguments");var d={};return Ba.each(a,function(a,c){d[a]=N.constant(b[c])}),d}}function b(a,b){var c=a.concat(b);if(0===c.length)throw new Error("You must specify at least one required or optional field.");return Sa.validateStrArr("required",a),Sa.validateStrArr("optional",b),Sa.checkDupes(c),function(d){var e=La.keys(d),f=Ba.forall(a,function(a){return Ba.contains(e,a)});f||Sa.reqMessage(a,e);var g=Ba.filter(e,function(a){return!Ba.contains(c,a)});g.length>0&&Sa.unsuppMessage(g);var h={};return Ba.each(a,function(a){h[a]=N.constant(d[a])}),Ba.each(b,function(a){h[a]=N.constant(Object.prototype.hasOwnProperty.call(d,a)?U.some(d[a]):U.none())}),h}}function c(a,b,c){var d=a.isiOS()&&/ipad/i.test(c)===!0,e=a.isiOS()&&!d,f=a.isAndroid()&&3===a.version.major,g=a.isAndroid()&&4===a.version.major,h=d||f||g&&/mobile/i.test(c)===!0,i=a.isiOS()||a.isAndroid(),j=i&&!h,k=b.isSafari()&&a.isiOS()&&/safari/i.test(c)===!1;return{isiPad:N.constant(d),isiPhone:N.constant(e),isTablet:N.constant(h),isPhone:N.constant(j),isTouch:N.constant(i),isAndroid:a.isAndroid,isiOS:a.isiOS,isWebView:N.constant(k)}}function d(a,b,c,d,e){return a(c,d)?U.some(c):X.isFunction(e)&&e(c)?U.none():b(c,d,e)}function e(a,b){var c=function(c){if(!a(c))throw new Error("Can only get "+b+" value of a "+b+" node");return g(c).getOr("")},d=function(a){try{return e(a)}catch(b){return U.none()}},e=function(b){return a(b)?U.from(b.dom().nodeValue):U.none()},f=Wc.detect().browser,g=f.isIE()&&10===f.version.major?d:e,h=function(c,d){if(!a(c))throw new Error("Can only set raw "+b+" value of a "+b+" node");c.dom().nodeValue=d};return{get:c,getOption:g,set:h}}function f(){var a=function(a){return lb.fromDom(a.dom().cloneNode(!1))},b=function(a){return!!Jd.isElement(a)&&("body"===Jd.name(a)||Ba.contains(tg,Jd.name(a)))},c=function(a){return!!Jd.isElement(a)&&Ba.contains(["br","img","hr","input"],Jd.name(a))},d=function(a,b){return a.dom().compareDocumentPosition(b.dom())},e=function(a,b){var c=Ud.clone(a);Ud.setAll(b,c)};return{up:N.constant({selector:we.ancestor,closest:we.closest,predicate:pe.ancestor,all:xd.parents}),down:N.constant({selector:ie.descendants,predicate:ce.descendants}),styles:N.constant({get:mf.get,getRaw:mf.getRaw,set:mf.set,remove:mf.remove}),attrs:N.constant({get:Ud.get,set:Ud.set,remove:Ud.remove,copyTo:e}),insert:N.constant({before:tf.before,after:tf.after,afterAll:yf.after,append:tf.append,appendAll:yf.append,prepend:tf.prepend,wrap:tf.wrap}),remove:N.constant({unwrap:Cf.unwrap,remove:Cf.remove}),create:N.constant({nu:lb.fromTag,clone:a,text:lb.fromText}),query:N.constant({comparePosition:d,prevSibling:xd.prevSibling,nextSibling:xd.nextSibling}),property:N.constant({children:xd.children,name:Jd.name,parent:xd.parent,isText:Jd.isText,isComment:Jd.isComment,isElement:Jd.isElement,getText:Vf.get,setText:Vf.set,isBoundary:b,isEmptyTag:c}),eq:cd.eq,is:cd.is}}function g(a,b){var c=function(b,c){if(!X.isNumber(c)&&!c.match(/^[0-9]+$/))throw a+".set accepts only positive integer values. Value was "+c;var d=b.dom();We.isSupported(d)&&(d.style[a]=c+"px")},d=function(c){var d=b(c);if(d<=0||null===d){var e=mf.get(c,a);return parseFloat(e)||0}return d},e=d,f=function(a,b){return Ba.foldl(b,function(b,c){var d=mf.get(a,c),e=void 0===d?0:parseInt(d,10);return isNaN(e)?b:b+e},0)},g=function(a,b,c){var d=f(a,c),e=b>d?b-d:0;return e};return{set:c,get:d,getOuter:e,aggregate:f,max:g}}function h(a){var b=function(b){return a(b).isRtl()?qj.rtl:qj.ltr},c=function(a,c){return b(c).delta(a,c)},d=function(a,c){return b(c).positions(a,c)},e=function(a){return b(a).edge(a)};return{delta:c,edge:e,positions:d}}function i(a,b,c){var d=c||!1,e=function(){b(),d=!0},f=function(){a(),d=!1},g=function(){var a=d?f:e;a()},h=function(){return d};return{on:e,off:f,toggle:g,isOn:h}}function j(a,b,c,d){function e(a,b,c){c&&g.setAttrib(a,b,c)}function f(a,b,c){c&&g.setStyle(a,b,c)}var g=a.dom;Lo.updateStyleField(a,d);var h=d.control.rootControl.toJSON();a.undoManager.transact(function(){Ao.each(b,function(b){e(b,"scope",h.scope),e(b,"style",h.style),e(b,"class",h["class"]),f(b,"height",Qn(h.height)),h.type!==b.parentNode.nodeName.toLowerCase()&&So(a.dom,b,h.type),h.align!==c.align&&(Go.unApplyAlign(a,b),Go.applyAlign(a,b,h.align))}),a.focus()})}function k(a,b,c,d){if("TD"===b.tagName||"TH"===b.tagName)a.setStyle(b,c,d);else if(b.children)for(var e=0;e<b.children.length;e++)k(a,b.children[e],c,d)}function l(a){var b=Ta.immutable.apply(null,a),c=[],d=function(a){if(void 0===a)throw"Event bind error: undefined handler";c.push(a)},e=function(a){c=Ba.filter(c,function(b){return b!==a})},f=function(){var a=b.apply(null,arguments);Ba.each(c,function(b){b(a)})};return{bind:d,unbind:e,trigger:f}}function m(a){var b=ek.merge({layerClass:Ep.resolve("blocker")},a),c=lb.fromTag("div");Ud.set(c,"role","presentation"),mf.setAll(c,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),hl.add(c,Ep.resolve("blocker")),hl.add(c,b.layerClass);var d=function(){return c},e=function(){Cf.remove(c)};return{element:d,destroy:e}}function n(){var a=U.none(),b=function(){a=U.none()},c=function(b,c){var d=a.map(function(a){return b.compare(a,c)});return a=U.some(c),d},d=function(a,b){var d=b.extract(a);d.each(function(a){var d=c(b,a);d.each(function(a){e.trigger.move(a)})})},e=yp.create({move:l(["info"])});return{onEvent:d,reset:b,events:e.registry}}function o(a){var b=function(a,b){};return{onEvent:b,reset:N.noop}}function p(){var a=o(),b=n(),c=a,d=function(){c.reset(),c=b},e=function(){c.reset(),c=a},f=function(a,b){c.onEvent(a,b)},g=function(){return c===b};return{on:d,off:e,isOn:g,onEvent:f,events:b.events}}function q(){var a=yp.create({drag:l(["xDelta","yDelta"])}),b=function(b,c){a.trigger.drag(b,c)};return{mutate:b,events:a.registry}}function r(){var a=yp.create({drag:l(["xDelta","yDelta","target"])}),b=U.none(),c=q();c.events.drag.bind(function(c){b.each(function(b){a.trigger.drag(c.xDelta(),c.yDelta(),b)})});var d=function(a){b=U.some(a)},e=function(){return b};return{assign:d,get:e,mutate:c.mutate,events:a.registry}}function s(a,b,c){var d=r(),e=aq.transform(d,{}),f=U.none(),g=function(a,b){return U.from(Ud.get(a,b))};d.events.drag.bind(function(a){g(a.target(),"data-row").each(function(b){var c=Dm.getInt(a.target(),"top");mf.set(a.target(),"top",c+a.yDelta()+"px")}),g(a.target(),"data-column").each(function(b){var c=Dm.getInt(a.target(),"left");mf.set(a.target(),"left",c+a.xDelta()+"px")})});var h=function(a,b){var c=Dm.getInt(a,b),d=parseInt(Ud.get(a,"data-initial-"+b),10);return c-d};e.events.stop.bind(function(){d.get().each(function(d){f.each(function(e){g(d,"data-row").each(function(a){var b=h(d,"top");Ud.remove(d,"data-initial-top"),p.trigger.adjustHeight(e,b,parseInt(a,10))}),g(d,"data-column").each(function(a){var b=h(d,"left");Ud.remove(d,"data-initial-left"),p.trigger.adjustWidth(e,b,parseInt(a,10))}),xl.refresh(a,e,c,b)})})});var i=function(b,c){p.trigger.startAdjust(),d.assign(b),Ud.set(b,"data-initial-"+c,parseInt(mf.get(b,c),10)),hl.add(b,iq),mf.set(b,"opacity","0.2"),e.go(a.parent())},j=Pp.bind(a.parent(),"mousedown",function(a){xl.isRowBar(a.target())&&i(a.target(),"top"),xl.isColBar(a.target())&&i(a.target(),"left")}),k=function(b){return cd.eq(b,a.view())},m=Pp.bind(a.view(),"mouseover",function(d){"table"===Jd.name(d.target())||hq.closest(d.target(),"table",k)?(f="table"===Jd.name(d.target())?U.some(d.target()):we.ancestor(d.target(),"table",k),f.each(function(d){xl.refresh(a,d,c,b)})):Yd.inBody(d.target())&&xl.destroy(a)}),n=function(){j.unbind(),m.unbind(),e.destroy(),xl.destroy(a)},o=function(d){xl.refresh(a,d,c,b)},p=yp.create({adjustHeight:l(["table","delta","row"]),adjustWidth:l(["table","delta","column"]),startAdjust:l([])});return{destroy:n,refresh:o,on:e.on,off:e.off,hideBars:N.curry(xl.hide,a),showBars:N.curry(xl.show,a),events:p.registry}}function t(a,b){var c=pj.height,d=s(a,b,c),e=yp.create({beforeResize:l(["table"]),afterResize:l(["table"]),startDrag:l([])});return d.events.adjustHeight.bind(function(a){e.trigger.beforeResize(a.table());var b=c.delta(a.delta(),a.table());en.adjustHeight(a.table(),b,a.row(),c),e.trigger.afterResize(a.table())}),d.events.startAdjust.bind(function(a){e.trigger.startDrag()}),d.events.adjustWidth.bind(function(a){e.trigger.beforeResize(a.table());var c=b.delta(a.delta(),a.table());en.adjustWidth(a.table(),c,a.column(),b),e.trigger.afterResize(a.table())}),{on:d.on,off:d.off,hideBars:d.hideBars,showBars:d.showBars,destroy:d.destroy,events:e.registry}}function u(a){var b=function(b,c){return lb.fromPoint(lb.fromDom(a.document),b,c)},c=function(a){return a.dom().getBoundingClientRect()},d=function(b,c,d,e){var f=Hq.exact(b,c,d,e);return ks.getFirstRect(a,f).map(function(a){return La.map(a,N.apply)})},e=function(){return ks.get(a).map(function(b){return Ds.convertToRange(a,b)})},f=function(b){var c=Hq.relative(b.start(),b.finish());return Ds.convertToRange(a,c)},g=function(b,c){return ks.getAtPoint(a,b,c).map(function(a){return{start:N.constant(Bq.on(a.start(),a.soffset())),finish:N.constant(Bq.on(a.finish(),a.foffset()))}})},h=function(){ks.clear(a)},i=function(b){ks.setToElement(a,b)},j=function(b){ks.setExact(a,b.start(),b.soffset(),b.finish(),b.foffset())},k=function(b,c){ks.setRelative(a,b,c)},l=function(){return a.innerHeight},m=function(){var b=Os.get(lb.fromDom(a.document));return b.top()},n=function(b,c){Os.by(b,c,lb.fromDom(a.document))};return{elementFromPoint:b,getRect:c,getRangedRect:d,getSelection:e,fromSitus:f,situsFromPoint:g,clearSelection:h,setSelection:j,setRelativeSelection:k,selectContents:i,getInnerHeight:l,getScrollY:m,scrollBy:n}}function v(a,b,c,d){var e=U.none(),f=function(){e=U.none()},g=function(a){d.clear(b),e=_u(a.target(),c)},h=function(f){e.each(function(e){d.clear(b),_u(f.target(),c).each(function(f){xh.identify(e,f,c).each(function(c){var g=c.boxes().getOr([]);(g.length>1||1===g.length&&!cd.eq(e,f))&&(d.selectRange(b,g,c.start(),c.finish()),a.selectContents(f))})})})},i=function(){e.each(f)};return{mousedown:g,mouseover:h,mouseup:i}}function w(a,b){var c=Ta.immutableBag(["mousedown","mouseover","mouseup","keyup","keydown"],[]),d=U.none(),e=uv.byAttr(Ih);a.on("init",function(f){var g=a.getWin(),h=Ln(a),i=On(a),j=function(){var b=a.selection,c=lb.fromDom(b.getStart()),d=lb.fromDom(b.getEnd()),f=Yg.sharedOne(Ke.table,[c,d]);f.fold(function(){e.clear(h)},N.noop)},k=ev.mouse(g,h,i,e),l=ev.keyboard(g,h,i,e),m=function(a){return a.raw().shiftKey===!0},n=function(b,c){m(b)&&(c.kill()&&b.kill(),c.selection().each(function(b){var c=Hq.relative(b.start(),b.finish()),d=ir.asLtrRange(g,c);a.selection.setRng(d)}))},o=function(b){var c=r(b);if(c.raw().shiftKey&&As.isNavigation(c.raw().which)){var d=a.selection.getRng(),e=lb.fromDom(d.startContainer),f=lb.fromDom(d.endContainer);l.keyup(c,e,d.startOffset,f,d.endOffset).each(function(a){n(c,a)})}},p=function(c){var d=r(c);b().each(function(a){a.hideBars()});var e=a.selection.getRng(),f=lb.fromDom(a.selection.getStart()),g=lb.fromDom(e.startContainer),h=lb.fromDom(e.endContainer),i=Yn.directionAt(f).isRtl()?As.rtl:As.ltr;l.keydown(d,g,e.startOffset,h,e.endOffset,i).each(function(a){n(d,a)}),b().each(function(a){a.showBars()})},q=function(a){return a.hasOwnProperty("x")&&a.hasOwnProperty("y")},r=function(a){var b=lb.fromDom(a.target),c=function(){a.stopPropagation()},d=function(){a.preventDefault()},e=N.compose(d,c);return{target:N.constant(b),x:N.constant(q(a)?a.x:null),y:N.constant(q(a)?a.y:null),stop:c,prevent:d,kill:e,raw:N.constant(a)}},s=function(a){return 0===a.button},t=function(a){return void 0===a.buttons||0!==(1&a.buttons)},u=function(a){s(a)&&vv(a)&&k.mousedown(r(a))},v=function(a){t(a)&&vv(a)&&k.mouseover(r(a))},w=function(a){s(a)&&vv(a)&&k.mouseup(r(a))};a.on("mousedown",u),a.on("mouseover",v),a.on("mouseup",w),a.on("keyup",o),a.on("keydown",p),a.on("nodechange",j),d=U.some(c({mousedown:u,mouseover:v,mouseup:w,keyup:o,keydown:p}))});var f=function(){d.each(function(a){})};return{clear:e.clear,destroy:f}}function x(a){var b=nq(a),c=w(a,b.lazyResize),d=xo(a,b.lazyWire),e=wv(a),f=tj(U.none());return sp.registerCommands(a,d,c,e,f),_h.registerEvents(a,e,d,c),Cv.addMenuItems(a,e),Av.addButtons(a),Av.addToolbars(a),a.on("PreInit",function(){a.serializer.addTempAttr(Ih.firstSelected()),a.serializer.addTempAttr(Ih.lastSelected())}),eo(a)&&a.on("keydown",function(c){ts.handle(c,a,d,b.lazyWire)}),a.on("remove",function(){b.destroy(),c.destroy()}),Fv(a,f)}function y(){}var z=tinymce.util.Tools.resolve("tinymce.PluginManager"),A=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b]},B=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return a()}},C=function(a,b){return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a(b.apply(null,arguments));
}},D=function(a){return function(){return a}},E=function(a){return a},F=function(a,b){return a===b},G=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var d=new Array(arguments.length-1),e=1;e<arguments.length;e++)d[e-1]=arguments[e];return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];for(var e=new Array(arguments.length),f=0;f<e.length;f++)e[f]=arguments[f];var g=d.concat(e);return a.apply(null,g)}},H=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return!a.apply(null,arguments)}},I=function(a){return function(){throw new Error(a)}},J=function(a){return a()},K=function(a){a()},L=D(!1),M=D(!0),N={noop:A,noarg:B,compose:C,constant:D,identity:E,tripleEquals:F,curry:G,not:H,die:I,apply:J,call:K,never:L,always:M},O=N.never,P=N.always,Q=function(){return R},R=function(){var a=function(a){return a.isNone()},b=function(a){return a()},c=function(a){return a},d=function(){},e={fold:function(a,b){return a()},is:O,isSome:O,isNone:P,getOr:c,getOrThunk:b,getOrDie:function(a){throw new Error(a||"error: getOrDie called on none.")},or:c,orThunk:b,map:Q,ap:Q,each:d,bind:Q,flatten:Q,exists:O,forall:P,filter:Q,equals:a,equals_:a,toArray:function(){return[]},toString:N.constant("none()")};return Object.freeze&&Object.freeze(e),e}(),S=function(a){var b=function(){return a},c=function(){return f},d=function(b){return S(b(a))},e=function(b){return b(a)},f={fold:function(b,c){return c(a)},is:function(b){return a===b},isSome:P,isNone:O,getOr:b,getOrThunk:b,getOrDie:b,or:c,orThunk:c,map:d,ap:function(b){return b.fold(Q,function(b){return S(b(a))})},each:function(b){b(a)},bind:e,flatten:b,exists:e,forall:e,filter:function(b){return b(a)?f:R},equals:function(b){return b.is(a)},equals_:function(b,c){return b.fold(O,function(b){return c(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return f},T=function(a){return null===a||void 0===a?R:S(a)},U={some:S,none:Q,from:T},V=function(a){if(null===a)return"null";var b=typeof a;return"object"===b&&Array.prototype.isPrototypeOf(a)?"array":"object"===b&&String.prototype.isPrototypeOf(a)?"string":b},W=function(a){return function(b){return V(b)===a}},X={isString:W("string"),isObject:W("object"),isArray:W("array"),isNull:W("null"),isBoolean:W("boolean"),isUndefined:W("undefined"),isFunction:W("function"),isNumber:W("number")},Y=function(){var a=Array.prototype.indexOf,b=function(b,c){return a.call(b,c)},c=function(a,b){return ma(a,b)};return void 0===a?c:b}(),Z=function(a,b){var c=Y(a,b);return c===-1?U.none():U.some(c)},$=function(a,b){return Y(a,b)>-1},_=function(a,b){return la(a,b).isSome()},aa=function(a,b){for(var c=[],d=0;d<a;d++)c.push(b(d));return c},ba=function(a,b){for(var c=[],d=0;d<a.length;d+=b){var e=a.slice(d,d+b);c.push(e)}return c},ca=function(a,b){for(var c=a.length,d=new Array(c),e=0;e<c;e++){var f=a[e];d[e]=b(f,e,a)}return d},da=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];b(e,c,a)}},ea=function(a,b){for(var c=a.length-1;c>=0;c--){var d=a[c];b(d,c,a)}},fa=function(a,b){for(var c=[],d=[],e=0,f=a.length;e<f;e++){var g=a[e],h=b(g,e,a)?c:d;h.push(g)}return{pass:c,fail:d}},ga=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var f=a[d];b(f,d,a)&&c.push(f)}return c},ha=function(a,b){if(0===a.length)return[];for(var c=b(a[0]),d=[],e=[],f=0,g=a.length;f<g;f++){var h=a[f],i=b(h);i!==c&&(d.push(e),e=[]),c=i,e.push(h)}return 0!==e.length&&d.push(e),d},ia=function(a,b,c){return ea(a,function(a){c=b(c,a)}),c},ja=function(a,b,c){return da(a,function(a){c=b(c,a)}),c},ka=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(b(e,c,a))return U.some(e)}return U.none()},la=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(b(e,c,a))return U.some(c)}return U.none()},ma=function(a,b){for(var c=0,d=a.length;c<d;++c)if(a[c]===b)return c;return-1},na=Array.prototype.push,oa=function(a){for(var b=[],c=0,d=a.length;c<d;++c){if(!Array.prototype.isPrototypeOf(a[c]))throw new Error("Arr.flatten item "+c+" was not an array, input: "+a);na.apply(b,a[c])}return b},pa=function(a,b){var c=ca(a,b);return oa(c)},qa=function(a,b){for(var c=0,d=a.length;c<d;++c){var e=a[c];if(b(e,c,a)!==!0)return!1}return!0},ra=function(a,b){return a.length===b.length&&qa(a,function(a,c){return a===b[c]})},sa=Array.prototype.slice,ta=function(a){var b=sa.call(a,0);return b.reverse(),b},ua=function(a,b){return ga(a,function(a){return!$(b,a)})},va=function(a,b){for(var c={},d=0,e=a.length;d<e;d++){var f=a[d];c[String(f)]=b(f,d)}return c},wa=function(a){return[a]},xa=function(a,b){var c=sa.call(a,0);return c.sort(b),c},ya=function(a){return 0===a.length?U.none():U.some(a[0])},za=function(a){return 0===a.length?U.none():U.some(a[a.length-1])},Aa=X.isFunction(Array.from)?Array.from:function(a){return sa.call(a)},Ba={map:ca,each:da,eachr:ea,partition:fa,filter:ga,groupBy:ha,indexOf:Z,foldr:ia,foldl:ja,find:ka,findIndex:la,flatten:oa,bind:pa,forall:qa,exists:_,contains:$,equal:ra,reverse:ta,chunk:ba,difference:ua,mapToObject:va,pure:wa,sort:xa,range:aa,head:ya,last:za,from:Aa},Ca=function(){var a=Object.keys,b=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};return void 0===a?b:a}(),Da=function(a,b){for(var c=Ca(a),d=0,e=c.length;d<e;d++){var f=c[d],g=a[f];b(g,f,a)}},Ea=function(a,b){return Fa(a,function(a,c,d){return{k:c,v:b(a,c,d)}})},Fa=function(a,b){var c={};return Da(a,function(d,e){var f=b(d,e,a);c[f.k]=f.v}),c},Ga=function(a,b){var c={},d={};return Da(a,function(a,e){var f=b(a,e)?c:d;f[e]=a}),{t:c,f:d}},Ha=function(a,b){var c=[];return Da(a,function(a,d){c.push(b(a,d))}),c},Ia=function(a,b){for(var c=Ca(a),d=0,e=c.length;d<e;d++){var f=c[d],g=a[f];if(b(g,f,a))return U.some(g)}return U.none()},Ja=function(a){return Ha(a,function(a){return a})},Ka=function(a){return Ja(a).length},La={bifilter:Ga,each:Da,map:Ea,mapToArray:Ha,tupleMap:Fa,find:Ia,keys:Ca,values:Ja,size:Ka},Ma=function(a){return a.slice(0).sort()},Na=function(a,b){throw new Error("All required keys ("+Ma(a).join(", ")+") were not specified. Specified keys were: "+Ma(b).join(", ")+".")},Oa=function(a){throw new Error("Unsupported keys for object: "+Ma(a).join(", "))},Pa=function(a,b){if(!X.isArray(b))throw new Error("The "+a+" fields must be an array. Was: "+b+".");Ba.each(b,function(b){if(!X.isString(b))throw new Error("The value "+b+" in the "+a+" fields was not a string.")})},Qa=function(a,b){throw new Error("All values need to be of type: "+b+". Keys ("+Ma(a).join(", ")+") were not.")},Ra=function(a){var b=Ma(a),c=Ba.find(b,function(a,c){return c<b.length-1&&a===b[c+1]});c.each(function(a){throw new Error("The field: "+a+" occurs more than once in the combined fields: ["+b.join(", ")+"].")})},Sa={sort:Ma,reqMessage:Na,unsuppMessage:Oa,validateStrArr:Pa,invalidTypeMessage:Qa,checkDupes:Ra},Ta={immutable:a,immutableBag:b},Ua=Ta.immutable("width","height"),Va=Ta.immutable("rows","columns"),Wa=Ta.immutable("row","column"),Xa=Ta.immutable("x","y"),Ya=Ta.immutable("element","rowspan","colspan"),Za=Ta.immutable("element","rowspan","colspan","isNew"),$a=Ta.immutable("element","rowspan","colspan","row","column"),_a=Ta.immutable("element","cells","section"),ab=Ta.immutable("element","isNew"),bb=Ta.immutable("element","cells","section","isNew"),cb=Ta.immutable("cells","section"),db=Ta.immutable("details","section"),eb=Ta.immutable("startRow","startCol","finishRow","finishCol"),fb={dimensions:Ua,grid:Va,address:Wa,coords:Xa,extended:$a,detail:Ya,detailnew:Za,rowdata:_a,elementnew:ab,rowdatanew:bb,rowcells:cb,rowdetails:db,bounds:eb},gb=function(a,b){var c=b||document,d=c.createElement("div");if(d.innerHTML=a,!d.hasChildNodes()||d.childNodes.length>1)throw console.error("HTML does not have a single root node",a),"HTML must have a single root node";return jb(d.childNodes[0])},hb=function(a,b){var c=b||document,d=c.createElement(a);return jb(d)},ib=function(a,b){var c=b||document,d=c.createTextNode(a);return jb(d)},jb=function(a){if(null===a||void 0===a)throw new Error("Node cannot be null or undefined");return{dom:N.constant(a)}},kb=function(a,b,c){return U.from(a.dom().elementFromPoint(b,c)).map(jb)},lb={fromHtml:gb,fromTag:hb,fromText:ib,fromDom:jb,fromPoint:kb},mb={ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12},nb=mb.ELEMENT,ob=mb.DOCUMENT,pb=function(a,b){var c=a.dom();if(c.nodeType!==nb)return!1;if(void 0!==c.matches)return c.matches(b);if(void 0!==c.msMatchesSelector)return c.msMatchesSelector(b);if(void 0!==c.webkitMatchesSelector)return c.webkitMatchesSelector(b);if(void 0!==c.mozMatchesSelector)return c.mozMatchesSelector(b);throw new Error("Browser lacks native selectors")},qb=function(a){return a.nodeType!==nb&&a.nodeType!==ob||0===a.childElementCount},rb=function(a,b){var c=void 0===b?document:b.dom();return qb(c)?[]:Ba.map(c.querySelectorAll(a),lb.fromDom)},sb=function(a,b){var c=void 0===b?document:b.dom();return qb(c)?U.none():U.from(c.querySelector(a)).map(lb.fromDom)},tb={all:rb,is:pb,one:sb},ub=function(a,b){var c=[],d=function(a){return c.push(a),b(a)},e=b(a);do e=e.bind(d);while(e.isSome());return c},vb={toArray:ub},wb="undefined"!=typeof window?window:Function("return this;")(),xb=function(a,b){for(var c=void 0!==b&&null!==b?b:wb,d=0;d<a.length&&void 0!==c&&null!==c;++d)c=c[a[d]];return c},yb=function(a,b){var c=a.split(".");return xb(c,b)},zb=function(a,b){return void 0!==a[b]&&null!==a[b]||(a[b]={}),a[b]},Ab=function(a,b){for(var c=void 0!==b?b:wb,d=0;d<a.length;++d)c=zb(c,a[d]);return c},Bb=function(a,b){var c=a.split(".");return Ab(c,b)},Cb={path:xb,resolve:yb,forge:Ab,namespace:Bb},Db=function(a,b){return Cb.resolve(a,b)},Eb=function(a,b){var c=Db(a,b);if(void 0===c||null===c)throw a+" not available on this browser";return c},Fb={getOrDie:Eb},Gb=function(){var a=Fb.getOrDie("Node");return a},Hb=function(a,b,c){return 0!==(a.compareDocumentPosition(b)&c)},Ib=function(a,b){return Hb(a,b,Gb().DOCUMENT_POSITION_PRECEDING)},Jb=function(a,b){return Hb(a,b,Gb().DOCUMENT_POSITION_CONTAINED_BY)},Kb={documentPositionPreceding:Ib,documentPositionContainedBy:Jb},Lb=function(a){var b,c=!1;return function(){return c||(c=!0,b=a.apply(null,arguments)),b}},Mb={cached:Lb},Nb=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.test(b))return d}},Ob=function(a,b){var c=Nb(a,b);if(!c)return{major:0,minor:0};var d=function(a){return Number(b.replace(c,"$"+a))};return Rb(d(1),d(2))},Pb=function(a,b){var c=String(b).toLowerCase();return 0===a.length?Qb():Ob(a,c)},Qb=function(){return Rb(0,0)},Rb=function(a,b){return{major:a,minor:b}},Sb={nu:Rb,detect:Pb,unknown:Qb},Tb="Edge",Ub="Chrome",Vb="IE",Wb="Opera",Xb="Firefox",Yb="Safari",Zb=function(a,b){return function(){return b===a}},$b=function(){return _b({current:void 0,version:Sb.unknown()})},_b=function(a){var b=a.current,c=a.version;return{current:b,version:c,isEdge:Zb(Tb,b),isChrome:Zb(Ub,b),isIE:Zb(Vb,b),isOpera:Zb(Wb,b),isFirefox:Zb(Xb,b),isSafari:Zb(Yb,b)}},ac={unknown:$b,nu:_b,edge:N.constant(Tb),chrome:N.constant(Ub),ie:N.constant(Vb),opera:N.constant(Wb),firefox:N.constant(Xb),safari:N.constant(Yb)},bc="Windows",cc="iOS",dc="Android",ec="Linux",fc="OSX",gc="Solaris",hc="FreeBSD",ic=function(a,b){return function(){return b===a}},jc=function(){return kc({current:void 0,version:Sb.unknown()})},kc=function(a){var b=a.current,c=a.version;return{current:b,version:c,isWindows:ic(bc,b),isiOS:ic(cc,b),isAndroid:ic(dc,b),isOSX:ic(fc,b),isLinux:ic(ec,b),isSolaris:ic(gc,b),isFreeBSD:ic(hc,b)}},lc={unknown:jc,nu:kc,windows:N.constant(bc),ios:N.constant(cc),android:N.constant(dc),linux:N.constant(ec),osx:N.constant(fc),solaris:N.constant(gc),freebsd:N.constant(hc)},mc=function(a,b){var c=String(b).toLowerCase();return Ba.find(a,function(a){return a.search(c)})},nc=function(a,b){return mc(a,b).map(function(a){var c=Sb.detect(a.versionRegexes,b);return{current:a.name,version:c}})},oc=function(a,b){return mc(a,b).map(function(a){var c=Sb.detect(a.versionRegexes,b);return{current:a.name,version:c}})},pc={detectBrowser:nc,detectOs:oc},qc=function(a,b){return b+a},rc=function(a,b){return a+b},sc=function(a,b){return a.substring(b)},tc=function(a,b){return a.substring(0,a.length-b)},uc={addToStart:qc,addToEnd:rc,removeFromStart:sc,removeFromEnd:tc},vc=function(a,b){return a.substr(0,b)},wc=function(a,b){return a.substr(a.length-b,a.length)},xc=function(a){return""===a?U.none():U.some(a.substr(0,1))},yc=function(a){return""===a?U.none():U.some(a.substring(1))},zc={first:vc,last:wc,head:xc,tail:yc},Ac=function(a,b,c){if(""===b)return!0;if(a.length<b.length)return!1;var d=a.substr(c,c+b.length);return d===b},Bc=function(a,b){var c=function(a){var b=typeof a;return"string"===b||"number"===b};return a.replace(/\${([^{}]*)}/g,function(a,d){var e=b[d];return c(e)?e:a})},Cc=function(a,b){return Ic(a,b)?uc.removeFromStart(a,b.length):a},Dc=function(a,b){return Jc(a,b)?uc.removeFromEnd(a,b.length):a},Ec=function(a,b){return Ic(a,b)?a:uc.addToStart(a,b)},Fc=function(a,b){return Jc(a,b)?a:uc.addToEnd(a,b)},Gc=function(a,b){return a.indexOf(b)!==-1},Hc=function(a){return zc.head(a).bind(function(b){return zc.tail(a).map(function(a){return b.toUpperCase()+a})}).getOr(a)},Ic=function(a,b){return Ac(a,b,0)},Jc=function(a,b){return Ac(a,b,a.length-b.length)},Kc=function(a){return a.replace(/^\s+|\s+$/g,"")},Lc=function(a){return a.replace(/^\s+/g,"")},Mc=function(a){return a.replace(/\s+$/g,"")},Nc={supplant:Bc,startsWith:Ic,removeLeading:Cc,removeTrailing:Dc,ensureLeading:Ec,ensureTrailing:Fc,endsWith:Jc,contains:Gc,trim:Kc,lTrim:Lc,rTrim:Mc,capitalize:Hc},Oc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Pc=function(a){return function(b){return Nc.contains(b,a)}},Qc=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(a){var b=Nc.contains(a,"edge/")&&Nc.contains(a,"chrome")&&Nc.contains(a,"safari")&&Nc.contains(a,"applewebkit");return b}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Oc],search:function(a){return Nc.contains(a,"chrome")&&!Nc.contains(a,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(a){return Nc.contains(a,"msie")||Nc.contains(a,"trident")}},{name:"Opera",versionRegexes:[Oc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Pc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Pc("firefox")},{name:"Safari",versionRegexes:[Oc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(a){return(Nc.contains(a,"safari")||Nc.contains(a,"mobile/"))&&Nc.contains(a,"applewebkit")}}],Rc=[{name:"Windows",search:Pc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(a){return Nc.contains(a,"iphone")||Nc.contains(a,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Pc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Pc("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Pc("linux"),versionRegexes:[]},{name:"Solaris",search:Pc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Pc("freebsd"),versionRegexes:[]}],Sc={browsers:N.constant(Qc),oses:N.constant(Rc)},Tc=function(a){var b=Sc.browsers(),d=Sc.oses(),e=pc.detectBrowser(b,a).fold(ac.unknown,ac.nu),f=pc.detectOs(d,a).fold(lc.unknown,lc.nu),g=c(f,e,a);return{browser:e,os:f,deviceType:g}},Uc={detect:Tc},Vc=Mb.cached(function(){var a=navigator.userAgent;return Uc.detect(a)}),Wc={detect:Vc},Xc=function(a,b){return a.dom()===b.dom()},Yc=function(a,b){return a.dom().isEqualNode(b.dom())},Zc=function(a,b){return Ba.exists(b,N.curry(Xc,a))},$c=function(a,b){var c=a.dom(),d=b.dom();return c!==d&&c.contains(d)},_c=function(a,b){return Kb.documentPositionContainedBy(a.dom(),b.dom())},ad=Wc.detect().browser,bd=ad.isIE()?_c:$c,cd={eq:Xc,isEqualNode:Yc,member:Zc,contains:bd,is:tb.is},dd=function(a){return lb.fromDom(a.dom().ownerDocument)},ed=function(a){var b=dd(a);return lb.fromDom(b.dom().documentElement)},fd=function(a){var b=a.dom(),c=b.ownerDocument.defaultView;return lb.fromDom(c)},gd=function(a){var b=a.dom();return U.from(b.parentNode).map(lb.fromDom)},hd=function(a){return gd(a).bind(function(b){var c=pd(b);return Ba.findIndex(c,function(b){return cd.eq(a,b)})})},id=function(a,b){for(var c=X.isFunction(b)?b:N.constant(!1),d=a.dom(),e=[];null!==d.parentNode&&void 0!==d.parentNode;){var f=d.parentNode,g=lb.fromDom(f);if(e.push(g),c(g)===!0)break;d=f}return e},jd=function(a){var b=function(b){return Ba.filter(b,function(b){return!cd.eq(a,b)})};return gd(a).map(pd).map(b).getOr([])},kd=function(a){var b=a.dom();return U.from(b.offsetParent).map(lb.fromDom)},ld=function(a){var b=a.dom();return U.from(b.previousSibling).map(lb.fromDom)},md=function(a){var b=a.dom();return U.from(b.nextSibling).map(lb.fromDom)},nd=function(a){return Ba.reverse(vb.toArray(a,ld))},od=function(a){return vb.toArray(a,md)},pd=function(a){var b=a.dom();return Ba.map(b.childNodes,lb.fromDom)},qd=function(a,b){var c=a.dom().childNodes;return U.from(c[b]).map(lb.fromDom)},rd=function(a){return qd(a,0)},sd=function(a){return qd(a,a.dom().childNodes.length-1)},td=function(a){return a.dom().childNodes.length},ud=function(a){return a.dom().hasChildNodes()},vd=Ta.immutable("element","offset"),wd=function(a,b){var c=pd(a);return c.length>0&&b<c.length?vd(c[b],0):vd(a,b)},xd={owner:dd,defaultView:fd,documentElement:ed,parent:gd,findIndex:hd,parents:id,siblings:jd,prevSibling:ld,offsetParent:kd,prevSiblings:nd,nextSibling:md,nextSiblings:od,children:pd,child:qd,firstChild:rd,lastChild:sd,childNodesCount:td,hasChildNodes:ud,leaf:wd},yd=function(a,b){return zd(a,b,N.constant(!0))},zd=function(a,b,c){return Ba.bind(xd.children(a),function(a){return tb.is(a,b)?c(a)?[a]:[]:zd(a,b,c)})},Ad={firstLayer:yd,filterFirstLayer:zd},Bd=function(a){var b=a.dom().nodeName;return b.toLowerCase()},Cd=function(a){return a.dom().nodeType},Dd=function(a){return a.dom().nodeValue},Ed=function(a){return function(b){return Cd(b)===a}},Fd=function(a){return Cd(a)===mb.COMMENT||"#comment"===Bd(a)},Gd=Ed(mb.ELEMENT),Hd=Ed(mb.TEXT),Id=Ed(mb.DOCUMENT),Jd={name:Bd,type:Cd,value:Dd,isElement:Gd,isText:Hd,isDocument:Id,isComment:Fd},Kd=function(a,b,c){if(!(X.isString(c)||X.isBoolean(c)||X.isNumber(c)))throw console.error("Invalid call to Attr.set. Key ",b,":: Value ",c,":: Element ",a),new Error("Attribute value was not simple");a.setAttribute(b,c+"")},Ld=function(a,b,c){Kd(a.dom(),b,c)},Md=function(a,b){var c=a.dom();La.each(b,function(a,b){Kd(c,b,a)})},Nd=function(a,b){var c=a.dom().getAttribute(b);return null===c?void 0:c},Od=function(a,b){var c=a.dom();return!(!c||!c.hasAttribute)&&c.hasAttribute(b)},Pd=function(a,b){a.dom().removeAttribute(b)},Qd=function(a){var b=a.dom().attributes;return void 0===b||null===b||0===b.length},Rd=function(a){return Ba.foldl(a.dom().attributes,function(a,b){return a[b.name]=b.value,a},{})},Sd=function(a,b,c){Od(a,c)&&!Od(b,c)&&Ld(b,c,Nd(a,c))},Td=function(a,b,c){Jd.isElement(a)&&Jd.isElement(b)&&Ba.each(c,function(c){Sd(a,b,c)})},Ud={clone:Rd,set:Ld,setAll:Md,get:Nd,has:Od,remove:Pd,hasNone:Qd,transfer:Td},Vd=function(a){var b=Jd.isText(a)?a.dom().parentNode:a.dom();return void 0!==b&&null!==b&&b.ownerDocument.body.contains(b)},Wd=Mb.cached(function(){return Xd(lb.fromDom(document))}),Xd=function(a){var b=a.dom().body;if(null===b||void 0===b)throw"Body is not available yet";return lb.fromDom(b)},Yd={body:Wd,getBody:Xd,inBody:Vd},Zd=function(a){return be(Yd.body(),a)},$d=function(a,b,c){return Ba.filter(xd.parents(a,c),b)},_d=function(a,b){return Ba.filter(xd.siblings(a),b)},ae=function(a,b){return Ba.filter(xd.children(a),b)},be=function(a,b){var c=[];return Ba.each(xd.children(a),function(a){b(a)&&(c=c.concat([a])),c=c.concat(be(a,b))}),c},ce={all:Zd,ancestors:$d,siblings:_d,children:ae,descendants:be},de=function(a){return tb.all(a)},ee=function(a,b,c){return ce.ancestors(a,function(a){return tb.is(a,b)},c)},fe=function(a,b){return ce.siblings(a,function(a){return tb.is(a,b)})},ge=function(a,b){return ce.children(a,function(a){return tb.is(a,b)})},he=function(a,b){return tb.all(b,a)},ie={all:de,ancestors:ee,siblings:fe,children:ge,descendants:he},je=function(a){return oe(Yd.body(),a)},ke=function(a,b,c){for(var d=a.dom(),e=X.isFunction(c)?c:N.constant(!1);d.parentNode;){d=d.parentNode;var f=lb.fromDom(d);if(b(f))return U.some(f);if(e(f))break}return U.none()},le=function(a,b,c){var e=function(a){return b(a)};return d(e,ke,a,b,c)},me=function(a,b){var c=a.dom();return c.parentNode?ne(lb.fromDom(c.parentNode),function(c){return!cd.eq(a,c)&&b(c)}):U.none()},ne=function(a,b){var c=Ba.find(a.dom().childNodes,N.compose(b,lb.fromDom));return c.map(lb.fromDom)},oe=function(a,b){var c=function(a){for(var d=0;d<a.childNodes.length;d++){if(b(lb.fromDom(a.childNodes[d])))return U.some(lb.fromDom(a.childNodes[d]));var e=c(a.childNodes[d]);if(e.isSome())return e}return U.none()};return c(a.dom())},pe={first:je,ancestor:ke,closest:le,sibling:me,child:ne,descendant:oe},qe=function(a){return tb.one(a)},re=function(a,b,c){return pe.ancestor(a,function(a){return tb.is(a,b)},c)},se=function(a,b){return pe.sibling(a,function(a){return tb.is(a,b)})},te=function(a,b){return pe.child(a,function(a){return tb.is(a,b)})},ue=function(a,b){return tb.one(b,a)},ve=function(a,b,c){return d(tb.is,re,a,b,c)},we={first:qe,ancestor:re,sibling:se,child:te,descendant:ue,closest:ve},xe=function(a,b,c){var d=void 0!==c?c:N.constant(!1);if(d(b))return U.none();if(Ba.contains(a,Jd.name(b)))return U.some(b);var e=function(a){return tb.is(a,"table")||d(a)};return we.ancestor(b,a.join(","),e)},ye=function(a,b){return xe(["td","th"],a,b)},ze=function(a){return Ad.firstLayer(a,"th,td")},Ae=function(a,b){return xe(["caption","tr","tbody","tfoot","thead"],a,b)},Be=function(a,b){return xd.parent(b).map(function(b){return ie.children(b,a)})},Ce=N.curry(Be,"th,td"),De=N.curry(Be,"tr"),Ee=function(a){return we.descendant(a,"th,td")},Fe=function(a,b){return we.closest(a,"table",b)},Ge=function(a,b){return xe(["tr"],a,b)},He=function(a){return Ad.firstLayer(a,"tr")},Ie=function(a,b){return parseInt(Ud.get(a,b),10)},Je=function(a,b,c){var d=Ie(a,b),e=Ie(a,c);return fb.grid(d,e)},Ke={cell:ye,firstCell:Ee,cells:ze,neighbourCells:Ce,table:Fe,row:Ge,rows:He,notCell:Ae,neighbourRows:De,attr:Ie,grid:Je},Le=function(a){var b=Ke.rows(a);return Ba.map(b,function(a){var b=a,c=xd.parent(b),d=c.bind(function(a){var b=Jd.name(a);return"tfoot"===b||"thead"===b||"tbody"===b?b:"tbody"}),e=Ba.map(Ke.cells(a),function(a){var b=Ud.has(a,"rowspan")?parseInt(Ud.get(a,"rowspan"),10):1,c=Ud.has(a,"colspan")?parseInt(Ud.get(a,"colspan"),10):1;return fb.detail(a,b,c)});return fb.rowdata(b,e,d)})},Me=function(a,b){return Ba.map(a,function(a){var c=Ba.map(Ke.cells(a),function(a){var b=Ud.has(a,"rowspan")?parseInt(Ud.get(a,"rowspan"),10):1,c=Ud.has(a,"colspan")?parseInt(Ud.get(a,"colspan"),10):1;return fb.detail(a,b,c)});return fb.rowdata(a,c,b.section())})},Ne={fromTable:Le,fromPastedRows:Me},Oe=function(a,b){return a+","+b},Pe=function(a,b,c){var d=a.access()[Oe(b,c)];return void 0!==d?U.some(d):U.none()},Qe=function(a,b,c){var d=Re(a,function(a){return c(b,a.element())});return d.length>0?U.some(d[0]):U.none()},Re=function(a,b){var c=Ba.bind(a.all(),function(a){return a.cells()});return Ba.filter(c,b)},Se=function(a){var b={},c=[],d=a.length,e=0;Ba.each(a,function(a,d){var f=[];Ba.each(a.cells(),function(a,c){for(var g=0;void 0!==b[Oe(d,g)];)g++;for(var h=fb.extended(a.element(),a.rowspan(),a.colspan(),d,g),i=0;i<a.colspan();i++)for(var j=0;j<a.rowspan();j++){var k=d+j,l=g+i,m=Oe(k,l);b[m]=h,e=Math.max(e,l+1)}f.push(h)}),c.push(fb.rowdata(a.element(),f,a.section()))});var f=fb.grid(d,e);return{grid:N.constant(f),access:N.constant(b),all:N.constant(c)}},Te=function(a){var b=Ba.map(a.all(),function(a){return a.cells()});return Ba.flatten(b)},Ue={generate:Se,getAt:Pe,findItem:Qe,filterItems:Re,justCells:Te},Ve=function(a){return void 0!==a.style},We={isSupported:Ve},Xe=function(a,b,c){if(!X.isString(c))throw console.error("Invalid call to CSS.set. Property ",b,":: Value ",c,":: Element ",a),new Error("CSS value must be a string: "+c);We.isSupported(a)&&a.style.setProperty(b,c)},Ye=function(a,b){We.isSupported(a)&&a.style.removeProperty(b)},Ze=function(a,b,c){var d=a.dom();Xe(d,b,c)},$e=function(a,b){var c=a.dom();La.each(b,function(a,b){Xe(c,b,a)})},_e=function(a,b){var c=a.dom();La.each(b,function(a,b){a.fold(function(){Ye(c,b)},function(a){Xe(c,b,a)})})},af=function(a,b){var c=a.dom(),d=window.getComputedStyle(c),e=d.getPropertyValue(b),f=""!==e||Yd.inBody(a)?e:bf(c,b);return null===f?void 0:f},bf=function(a,b){return We.isSupported(a)?a.style.getPropertyValue(b):""},cf=function(a,b){var c=a.dom(),d=bf(c,b);return U.from(d).filter(function(a){return a.length>0})},df=function(a){var b={},c=a.dom();if(We.isSupported(c))for(var d=0;d<c.style.length;d++){var e=c.style.item(d);b[e]=c.style[e]}return b},ef=function(a,b,c){var d=lb.fromTag(a);Ze(d,b,c);var e=cf(d,b);return e.isSome()},ff=function(a,b){var c=a.dom();Ye(c,b),Ud.has(a,"style")&&""===Nc.trim(Ud.get(a,"style"))&&Ud.remove(a,"style")},gf=function(a,b){var c=Ud.get(a,"style"),d=b(a),e=void 0===c?Ud.remove:Ud.set;return e(a,"style",c),d},hf=function(a,b){var c=a.dom(),d=b.dom();We.isSupported(c)&&We.isSupported(d)&&(d.style.cssText=c.style.cssText)},jf=function(a){return a.dom().offsetWidth},kf=function(a,b,c){cf(a,c).each(function(a){cf(b,c).isNone()&&Ze(b,c,a)})},lf=function(a,b,c){Jd.isElement(a)&&Jd.isElement(b)&&Ba.each(c,function(c){kf(a,b,c)})},mf={copy:hf,set:Ze,preserve:gf,setAll:$e,setOptions:_e,remove:ff,get:af,getRaw:cf,getAllRaw:df,isValidValue:ef,reflow:jf,transfer:lf},nf=function(a,b){var c=xd.parent(a);c.each(function(c){c.dom().insertBefore(b.dom(),a.dom())})},of=function(a,b){var c=xd.nextSibling(a);c.fold(function(){var c=xd.parent(a);c.each(function(a){qf(a,b)})},function(a){nf(a,b)})},pf=function(a,b){var c=xd.firstChild(a);c.fold(function(){qf(a,b)},function(c){a.dom().insertBefore(b.dom(),c.dom())})},qf=function(a,b){a.dom().appendChild(b.dom())},rf=function(a,b,c){xd.child(a,c).fold(function(){qf(a,b)},function(a){nf(a,b)})},sf=function(a,b){nf(a,b),qf(b,a)},tf={before:nf,after:of,prepend:pf,append:qf,appendAt:rf,wrap:sf},uf=function(a,b){Ba.each(b,function(b){tf.before(a,b)})},vf=function(a,b){Ba.each(b,function(c,d){var e=0===d?a:b[d-1];tf.after(e,c)})},wf=function(a,b){Ba.each(b.slice().reverse(),function(b){tf.prepend(a,b)})},xf=function(a,b){Ba.each(b,function(b){tf.append(a,b)})},yf={before:uf,after:vf,prepend:wf,append:xf},zf=function(a){a.dom().textContent="",Ba.each(xd.children(a),function(a){Af(a)})},Af=function(a){var b=a.dom();null!==b.parentNode&&b.parentNode.removeChild(b)},Bf=function(a){var b=xd.children(a);b.length>0&&yf.before(a,b),Af(a)},Cf={empty:zf,remove:Af,unwrap:Bf},Df=Ta.immutable("minRow","minCol","maxRow","maxCol"),Ef=function(a,b){var c=a.grid().columns(),d=a.grid().rows(),e=d,f=c,g=0,h=0;return La.each(a.access(),function(a){if(b(a)){var c=a.row(),d=c+a.rowspan()-1,i=a.column(),j=i+a.colspan()-1;c<e?e=c:d>g&&(g=d),i<f?f=i:j>h&&(h=j)}}),Df(e,f,g,h)},Ff=function(a,b,c){var d=a[c].element(),e=lb.fromTag("td");tf.append(e,lb.fromTag("br"));var f=b?tf.append:tf.prepend;f(d,e)},Gf=function(a,b,c,d){for(var e=b.grid().columns(),f=b.grid().rows(),g=0;g<f;g++)for(var h=!1,i=0;i<e;i++)if(!(g<c.minRow()||g>c.maxRow()||i<c.minCol()||i>c.maxCol())){var j=Ue.getAt(b,g,i).filter(d).isNone();j?Ff(a,h,g):h=!0}},Hf=function(a,b){var c=Ba.filter(Ad.firstLayer(a,"tr"),function(a){return 0===a.dom().childElementCount});Ba.each(c,Cf.remove),b.minCol()!==b.maxCol()&&b.minRow()!==b.maxRow()||Ba.each(Ad.firstLayer(a,"th,td"),function(a){Ud.remove(a,"rowspan"),Ud.remove(a,"colspan")}),Ud.remove(a,"width"),Ud.remove(a,"height"),mf.remove(a,"width"),mf.remove(a,"height")},If=function(a,b){var c=function(a){return tb.is(a.element(),b)},d=Ne.fromTable(a),e=Ue.generate(d),f=Ef(e,c),g="th:not("+b+"),td:not("+b+")",h=Ad.filterFirstLayer(a,"th,td",function(a){return tb.is(a,g)});return Ba.each(h,Cf.remove),Gf(d,e,f,c),Hf(a,f),a},Jf={extract:If},Kf=function(a,b){return lb.fromDom(a.dom().cloneNode(b))},Lf=function(a){return Kf(a,!1)},Mf=function(a){return Kf(a,!0)},Nf=function(a,b){var c=lb.fromTag(b),d=Ud.clone(a);return Ud.setAll(c,d),c},Of=function(a,b){var c=Nf(a,b),d=xd.children(Mf(a));return yf.append(c,d),c},Pf=function(a,b){var c=Nf(a,b);tf.before(a,c);var d=xd.children(a);return yf.append(c,d),Cf.remove(a),c},Qf={shallow:Lf,shallowAs:Nf,deep:Mf,copy:Of,mutate:Pf},Rf=e(Jd.isText,"text"),Sf=function(a){return Rf.get(a)},Tf=function(a){return Rf.getOption(a)},Uf=function(a,b){Rf.set(a,b)},Vf={get:Sf,getOption:Tf,set:Uf},Wf=function(a){return"img"===Jd.name(a)?1:Vf.getOption(a).fold(function(){return xd.children(a).length},function(a){return a.length})},Xf=function(a,b){return Wf(a)===b},Yf=function(a,b){return 0===b},Zf="Â ",$f=function(a){return Vf.getOption(a).filter(function(a){return 0!==a.trim().length||a.indexOf(Zf)>-1}).isSome()},_f=["img","br"],ag=function(a){var b=$f(a);return b||Ba.contains(_f,Jd.name(a))},bg={getEnd:Wf,isEnd:Xf,isStart:Yf,isCursorPosition:ag},cg=function(a){return pe.descendant(a,bg.isCursorPosition)},dg=function(a){return eg(a,bg.isCursorPosition)},eg=function(a,b){var c=function(a){for(var d=xd.children(a),e=d.length-1;e>=0;e--){var f=d[e];if(b(f))return U.some(f);var g=c(f);if(g.isSome())return g}return U.none()};return c(a)},fg={first:cg,last:dg},gg=function(){var a=lb.fromTag("td");return tf.append(a,lb.fromTag("br")),a},hg=function(a,b,c){var d=Qf.copy(a,b);return La.each(c,function(a,b){null===a?Ud.remove(d,b):Ud.set(d,b,a)}),d},ig=function(a){return a},jg=function(a){return function(){return lb.fromTag("tr",a.dom())}},kg=function(a,b,c){var d=fg.first(a);return d.map(function(d){var e=c.join(","),f=ie.ancestors(d,e,function(b){return cd.eq(b,a)});return Ba.foldr(f,function(a,b){var c=Qf.shallow(b);return tf.append(a,c),c},b)}).getOr(b)},lg=function(a,b,c){var d=function(b){var d=xd.owner(b.element()),e=lb.fromTag(Jd.name(b.element()),d.dom()),f=c.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),g=f.length>0?kg(b.element(),e,f):e;return tf.append(g,lb.fromTag("br")),mf.copy(b.element(),e),mf.remove(e,"height"),1!==b.colspan()&&mf.remove(b.element(),"width"),a(b.element(),e),e};return{row:jg(b),cell:d,replace:hg,gap:gg}},mg=function(a){return{row:jg(a),cell:gg,replace:ig,gap:gg}},ng={cellOperations:lg,paste:mg},og=function(a,b){var c=b||document,d=c.createElement("div");return d.innerHTML=a,xd.children(lb.fromDom(d))},pg=function(a,b){return Ba.map(a,function(a){return lb.fromTag(a,b)})},qg=function(a,b){return Ba.map(a,function(a){return lb.fromText(a,b)})},rg=function(a){return Ba.map(a,lb.fromDom)},sg={fromHtml:og,fromTags:pg,fromText:qg,fromDom:rg},tg=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ug=Ta.immutable("left","right"),vg=function(a,b,c){var d=a.property().children(b),e=Ba.findIndex(d,N.curry(a.eq,c));return e.map(function(a){return{before:N.constant(d.slice(0,a)),after:N.constant(d.slice(a+1))}})},wg=function(a,b,c){return vg(a,b,c).map(function(c){var d=a.create().clone(b);return a.insert().appendAll(d,c.after()),a.insert().after(b,d),ug(b,d)})},xg=function(a,b,c){return vg(a,b,c).map(function(d){var e=a.create().clone(b);return a.insert().appendAll(e,d.before().concat([c])),a.insert().appendAll(b,d.after()),a.insert().before(b,e),ug(e,b)})},yg=function(a,b,c,d){var e=Ta.immutable("first","second","splits"),f=function(b,g,h){var i=e(b,U.none(),h);return c(b)?e(b,g,h):a.property().parent(b).bind(function(e){return d(a,e,b).map(function(a){
var b=[{first:a.left,second:a.right}],d=c(e)?e:a.left();return f(d,U.some(a.right()),h.concat(b))}).getOr(i)})};return f(b,U.none(),[])},zg={breakToLeft:xg,breakToRight:wg,breakPath:yg},Ag=function(a,b,c,d){var e=c[0],f=c.slice(1);return d(a,b,e,f)},Bg=function(a,b,c){return c.length>0?Ag(a,b,c,Cg):U.none()},Cg=function(a,b,c,d){var e=b(a,c);return Ba.foldr(d,function(c,d){var e=b(a,d);return Dg(a,c,e)},e)},Dg=function(a,b,c){return b.bind(function(b){return c.filter(N.curry(a.eq,b))})},Eg={oneAll:Bg},Fg=function(a,b){return N.curry(a.eq,b)},Gg=function(a,b,c,d){var e=a.property().children(b);if(a.eq(b,c[0]))return U.some([c[0]]);if(a.eq(b,d[0]))return U.some([d[0]]);var f=function(c){var d=Ba.reverse(c),f=Ba.findIndex(d,Fg(a,b)).getOr(-1),g=f<d.length-1?d[f+1]:d[f];return Ba.findIndex(e,Fg(a,g))},g=f(c),h=f(d);return g.bind(function(a){return h.map(function(b){var c=Math.min(a,b),d=Math.max(a,b);return e.slice(c,d+1)})})},Hg=function(a,b,c,d){var e=void 0!==d?d:N.constant(!1),f=[b].concat(a.up().all(b)),g=[c].concat(a.up().all(c)),h=function(a){var b=Ba.findIndex(a,e);return b.fold(function(){return a},function(b){return a.slice(0,b+1)})},i=h(f),j=h(g),k=Ba.find(i,function(b){return Ba.exists(j,Fg(a,b))});return{firstpath:N.constant(i),secondpath:N.constant(j),shared:N.constant(k)}},Ig=function(a,b,c){var d=Hg(a,b,c);return d.shared().bind(function(b){return Gg(a,b,d.firstpath(),d.secondpath())})},Jg={subset:Ig,ancestors:Hg},Kg=function(a,b,c){return Eg.oneAll(a,b,c)},Lg=function(a,b,c){return Jg.subset(a,b,c)},Mg=function(a,b,c,d){return Jg.ancestors(a,b,c,d)},Ng=function(a,b,c){return zg.breakToLeft(a,b,c)},Og=function(a,b,c){return zg.breakToRight(a,b,c)},Pg=function(a,b,c,d){return zg.breakPath(a,b,c,d)},Qg={sharedOne:Kg,subset:Lg,ancestors:Mg,breakToLeft:Ng,breakToRight:Og,breakPath:Pg},Rg=f(),Sg=function(a,b){return Qg.sharedOne(Rg,function(b,c){return a(c)},b)},Tg=function(a,b){return Qg.subset(Rg,a,b)},Ug=function(a,b,c){return Qg.ancestors(Rg,a,b,c)},Vg=function(a,b){return Qg.breakToLeft(Rg,a,b)},Wg=function(a,b){return Qg.breakToRight(Rg,a,b)},Xg=function(a,b,c){return Qg.breakPath(Rg,a,b,function(a,b,d){return c(b,d)})},Yg={sharedOne:Sg,subset:Tg,ancestors:Ug,breakToLeft:Vg,breakToRight:Wg,breakPath:Xg},Zg=function(a,b){var c=b.column(),d=b.column()+b.colspan()-1,e=b.row(),f=b.row()+b.rowspan()-1;return c<=a.finishCol()&&d>=a.startCol()&&e<=a.finishRow()&&f>=a.startRow()},$g=function(a,b){return b.column()>=a.startCol()&&b.column()+b.colspan()-1<=a.finishCol()&&b.row()>=a.startRow()&&b.row()+b.rowspan()-1<=a.finishRow()},_g=function(a,b){for(var c=!0,d=N.curry($g,b),e=b.startRow();e<=b.finishRow();e++)for(var f=b.startCol();f<=b.finishCol();f++)c=c&&Ue.getAt(a,e,f).exists(d);return c?U.some(b):U.none()},ah={inSelection:Zg,isWithin:$g,isRectangular:_g},bh=function(a,b){return fb.bounds(Math.min(a.row(),b.row()),Math.min(a.column(),b.column()),Math.max(a.row()+a.rowspan()-1,b.row()+b.rowspan()-1),Math.max(a.column()+a.colspan()-1,b.column()+b.colspan()-1))},ch=function(a,b,c){var d=Ue.findItem(a,b,cd.eq),e=Ue.findItem(a,c,cd.eq);return d.bind(function(a){return e.map(function(b){return bh(a,b)})})},dh=function(a,b,c){return ch(a,b,c).bind(function(b){return ah.isRectangular(a,b)})},eh={getAnyBox:ch,getBox:dh},fh=function(a,b,c,d){return Ue.findItem(a,b,cd.eq).bind(function(b){var e=c>0?b.row()+b.rowspan()-1:b.row(),f=d>0?b.column()+b.colspan()-1:b.column(),g=Ue.getAt(a,e+c,f+d);return g.map(function(a){return a.element()})})},gh=function(a,b,c){return eh.getAnyBox(a,b,c).map(function(b){var c=Ue.filterItems(a,N.curry(ah.inSelection,b));return Ba.map(c,function(a){return a.element()})})},hh=function(a,b){var c=function(a,b){return cd.contains(b,a)};return Ue.findItem(a,b,c).bind(function(a){return a.element()})},ih={moveBy:fh,intercepts:gh,parentCell:hh},jh=function(a,b,c){return Ke.table(a).bind(function(d){var e=nh(d);return ih.moveBy(e,a,b,c)})},kh=function(a,b,c){var d=nh(a);return ih.intercepts(d,b,c)},lh=function(a,b,c,d,e){var f=nh(a),g=cd.eq(a,c)?b:ih.parentCell(f,b),h=cd.eq(a,e)?d:ih.parentCell(f,d);return ih.intercepts(f,g,h)},mh=function(a,b,c){var d=nh(a);return eh.getBox(d,b,c)},nh=function(a){var b=Ne.fromTable(a);return Ue.generate(b)},oh={moveBy:jh,intercepts:kh,nestedIntercepts:lh,getBox:mh},ph=function(a,b){return we.ancestor(a,"table")},qh=Ta.immutableBag(["boxes","start","finish"],[]),rh=function(a,b,c){var d=function(a){return function(b){return c(b)||cd.eq(b,a)}};return cd.eq(a,b)?U.some(qh({boxes:U.some([a]),start:a,finish:b})):ph(a,c).bind(function(e){return ph(b,c).bind(function(f){if(cd.eq(e,f))return U.some(qh({boxes:oh.intercepts(e,a,b),start:a,finish:b}));if(cd.contains(e,f)){var g=ie.ancestors(b,"td,th",d(e)),h=g.length>0?g[g.length-1]:b;return U.some(qh({boxes:oh.nestedIntercepts(e,a,e,b,f),start:a,finish:h}))}if(cd.contains(f,e)){var g=ie.ancestors(a,"td,th",d(f)),i=g.length>0?g[g.length-1]:a;return U.some(qh({boxes:oh.nestedIntercepts(f,a,e,b,f),start:a,finish:i}))}return Yg.ancestors(a,b).shared().bind(function(g){return we.closest(g,"table",c).bind(function(c){var g=ie.ancestors(b,"td,th",d(c)),h=g.length>0?g[g.length-1]:b,i=ie.ancestors(a,"td,th",d(c)),j=i.length>0?i[i.length-1]:a;return U.some(qh({boxes:oh.nestedIntercepts(c,a,e,b,f),start:j,finish:h}))})})})})},sh=function(a,b){var c=ie.descendants(a,b);return c.length>0?U.some(c):U.none()},th=function(a,b){return Ba.find(a,function(a){return tb.is(a,b)})},uh=function(a,b,c){return we.descendant(a,b).bind(function(b){return we.descendant(a,c).bind(function(a){return Yg.sharedOne(ph,[b,a]).map(function(c){return{first:N.constant(b),last:N.constant(a),table:N.constant(c)}})})})},vh=function(a,b){return we.ancestor(a,"table").bind(function(c){return we.descendant(c,b).bind(function(b){return rh(b,a).bind(function(a){return a.boxes().map(function(b){return{boxes:N.constant(b),start:N.constant(a.start()),finish:N.constant(a.finish())}})})})})},wh=function(a,b,c,d,e){return th(a,e).bind(function(a){return oh.moveBy(a,b,c).bind(function(a){return vh(a,d)})})},xh={identify:rh,retrieve:sh,shiftSelection:wh,getEdges:uh},yh=function(a,b){return xh.retrieve(a,b)},zh=function(a,b,c){return xh.getEdges(a,b,c).bind(function(b){var c=function(b){return cd.eq(a,b)},d=we.ancestor(b.first(),"thead,tfoot,tbody,table",c),e=we.ancestor(b.last(),"thead,tfoot,tbody,table",c);return d.bind(function(a){return e.bind(function(c){return cd.eq(a,c)?oh.getBox(b.table(),b.first(),b.last()):U.none()})})})},Ah={retrieve:yh,retrieveBox:zh},Bh="data-mce-selected",Ch="td["+Bh+"],th["+Bh+"]",Dh="["+Bh+"]",Eh="data-mce-first-selected",Fh="td["+Eh+"],th["+Eh+"]",Gh="data-mce-last-selected",Hh="td["+Gh+"],th["+Gh+"]",Ih={selected:N.constant(Bh),selectedSelector:N.constant(Ch),attributeSelector:N.constant(Dh),firstSelected:N.constant(Eh),firstSelectedSelector:N.constant(Fh),lastSelected:N.constant(Gh),lastSelectedSelector:N.constant(Hh)},Jh=function(a){if(!X.isArray(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");var b=[],c={};return Ba.each(a,function(d,e){var f=La.keys(d);if(1!==f.length)throw new Error("one and only one name per case");var g=f[0],h=d[g];if(void 0!==c[g])throw new Error("duplicate key detected:"+g);if("cata"===g)throw new Error("cannot have a case named cata (sorry)");if(!X.isArray(h))throw new Error("case arguments must be an array");b.push(g),c[g]=function(){var c=arguments.length;if(c!==h.length)throw new Error("Wrong number of arguments to case "+g+". Expected "+h.length+" ("+h+"), got "+c);for(var d=new Array(c),f=0;f<d.length;f++)d[f]=arguments[f];var i=function(a){var c=La.keys(a);if(b.length!==c.length)throw new Error("Wrong number of arguments to match. Expected: "+b.join(",")+"\nActual: "+c.join(","));var e=Ba.forall(b,function(a){return Ba.contains(c,a)});if(!e)throw new Error("Not all branches were specified when using match. Specified: "+c.join(", ")+"\nRequired: "+b.join(", "));return a[g].apply(null,d)};return{fold:function(){if(arguments.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);var b=arguments[e];return b.apply(null,d)},match:i,log:function(a){console.log(a,{constructors:b,constructor:g,params:d})}}}}),c},Kh={generate:Jh},Lh=Kh.generate([{none:[]},{multiple:["elements"]},{single:["selection"]}]),Mh=function(a,b,c,d){return a.fold(b,c,d)},Nh={cata:Mh,none:Lh.none,multiple:Lh.multiple,single:Lh.single},Oh=function(a,b){return Nh.cata(b.get(),N.constant([]),N.identity,N.constant([a]))},Ph=function(a,b){var c=function(a){return Ud.has(a,"rowspan")&&parseInt(Ud.get(a,"rowspan"),10)>1||Ud.has(a,"colspan")&&parseInt(Ud.get(a,"colspan"),10)>1},d=Oh(a,b);return d.length>0&&Ba.forall(d,c)?U.some(d):U.none()},Qh=function(a,b){return Nh.cata(b.get(),U.none,function(b,c){return 0===b.length?U.none():Ah.retrieveBox(a,Ih.firstSelectedSelector(),Ih.lastSelectedSelector()).bind(function(a){return b.length>1?U.some({bounds:N.constant(a),cells:N.constant(b)}):U.none()})},U.none)},Rh={mergable:Qh,unmergable:Ph,selection:Oh},Sh=function(a){return{element:N.constant(a),mergable:U.none,unmergable:U.none,selection:N.constant([a])}},Th=function(a,b,c){return{element:N.constant(c),mergable:N.constant(Rh.mergable(b,a)),unmergable:N.constant(Rh.unmergable(c,a)),selection:N.constant(Rh.selection(c,a))}},Uh=function(a){return Sh(a)},Vh=Ta.immutable("element","clipboard","generators"),Wh=function(a,b,c,d,e){return{element:N.constant(c),mergable:U.none,unmergable:U.none,selection:N.constant(Rh.selection(c,a)),clipboard:N.constant(d),generators:N.constant(e)}},Xh={noMenu:Sh,forMenu:Th,notCell:Uh,paste:Vh,pasteRows:Wh},Yh=function(a){return Ke.table(a[0]).map(Qf.deep).map(function(a){return[Jf.extract(a,Ih.attributeSelector())]})},Zh=function(a,b){return a.selection.serializer.serialize(b.dom(),{})},$h=function(a,b,c,d){a.on("BeforeGetContent",function(c){var d=function(b){c.preventDefault(),Yh(b).each(function(b){c.content=Ba.map(b,function(b){return Zh(a,b)}).join("")})};c.selection===!0&&Nh.cata(b.get(),N.noop,d,N.noop)}),a.on("BeforeSetContent",function(b){if(b.selection===!0&&b.paste===!0){var e=U.from(a.dom.getParent(a.selection.getStart(),"th,td"));e.each(function(e){var f=lb.fromDom(e),g=Ke.table(f);g.bind(function(e){var g=Ba.filter(sg.fromHtml(b.content),function(a){return"meta"!==Jd.name(a)});if(1===g.length&&"table"===Jd.name(g[0])){b.preventDefault();var h=lb.fromDom(a.getDoc()),i=ng.paste(h),j=Xh.paste(f,g[0],i);c.pasteCells(e,j).each(function(b){a.selection.setRng(b),a.focus(),d.clear(e)})}})})}})},_h={registerEvents:$h},ai=g("height",function(a){return Yd.inBody(a)?a.dom().getBoundingClientRect().height:a.dom().offsetHeight}),bi=function(a,b){ai.set(a,b)},ci=function(a){return ai.get(a)},di=function(a){return ai.getOuter(a)},ei=function(a,b){var c=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],d=ai.max(a,b,c);mf.set(a,"max-height",d+"px")},fi={set:bi,get:ci,getOuter:di,setMax:ei},gi=g("width",function(a){return a.dom().offsetWidth}),hi=function(a,b){gi.set(a,b)},ii=function(a){return gi.get(a)},ji=function(a){return gi.getOuter(a)},ki=function(a,b){var c=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],d=gi.max(a,b,c);mf.set(a,"max-width",d+"px")},li={set:hi,get:ii,getOuter:ji,setMax:ki},mi=Wc.detect(),ni=function(){return mi.browser.isIE()||mi.browser.isEdge()},oi=function(a,b){var c=parseFloat(a);return isNaN(c)?b:c},pi=function(a,b,c){return oi(mf.get(a,b),c)},qi=function(a){var b=pi(a,"padding-top",0),c=pi(a,"padding-bottom",0),d=pi(a,"border-top-width",0),e=pi(a,"border-bottom-width",0),f=a.dom().getBoundingClientRect().height,g=mf.get(a,"box-sizing"),h=d+e;return"border-box"===g?f:f-b-c-h},ri=function(a){return pi(a,"width",li.get(a))},si=function(a){return ni()?qi(a):pi(a,"height",fi.get(a))},ti={getWidth:ri,getHeight:si},ui=/(\d+(\.\d+)?)(\w|%)*/,vi=/(\d+(\.\d+)?)%/,wi=/(\d+(\.\d+)?)px|em/,xi=function(a,b){mf.set(a,"width",b+"px")},yi=function(a,b){mf.set(a,"width",b+"%")},zi=function(a,b){mf.set(a,"height",b+"px")},Ai=function(a){return mf.getRaw(a,"height").getOrThunk(function(){return ti.getHeight(a)+"px"})},Bi=function(a,b,c,d){var e=Ke.table(a).map(function(a){var d=c(a);return Math.floor(b/100*d)}).getOr(b);return d(a,e),e},Ci=function(a,b,c,d){var e=parseInt(a,10);return Nc.endsWith(a,"%")&&"table"!==Jd.name(b)?Bi(b,e,c,d):e},Di=function(a){var b=Ai(a);return b?Ci(b,a,fi.get,zi):fi.get(a)},Ei=function(a,b,c){var d=c(a),e=Fi(a,b);return d/e},Fi=function(a,b){return Ud.has(a,b)?parseInt(Ud.get(a,b),10):1},Gi=function(a){var b=mf.getRaw(a,"width");return b.fold(function(){return U.from(Ud.get(a,"width"))},function(a){return U.some(a)})},Hi=function(a,b){return a/b.pixelWidth()*100},Ii=function(a,b,c){if(vi.test(b)){var d=vi.exec(b);return parseFloat(d[1])}var e=li.get(a),f=parseInt(e,10);return Hi(f,c)},Ji=function(a,b){var c=Gi(a);return c.fold(function(){var c=li.get(a),d=parseInt(c,10);return Hi(d,b)},function(c){return Ii(a,c,b)})},Ki=function(a,b){return a/100*b.pixelWidth()},Li=function(a,b,c){if(wi.test(b)){var d=wi.exec(b);return parseInt(d[1],10)}if(vi.test(b)){var e=vi.exec(b),f=parseFloat(e[1]);return Ki(f,c)}var g=li.get(a);return parseInt(g,10)},Mi=function(a,b){var c=Gi(a);return c.fold(function(){var b=li.get(a),c=parseInt(b,10);return c},function(c){return Li(a,c,b)})},Ni=function(a){return Ei(a,"rowspan",Di)},Oi=function(a){var b=Gi(a);return b.bind(function(a){if(ui.test(a)){var b=ui.exec(a);return U.some({width:N.constant(b[1]),unit:N.constant(b[3])})}return U.none()})},Pi=function(a,b,c){mf.set(a,"width",b+c)},Qi={percentageBasedSizeRegex:N.constant(vi),pixelBasedSizeRegex:N.constant(wi),setPixelWidth:xi,setPercentageWidth:yi,setHeight:zi,getPixelWidth:Mi,getPercentageWidth:Ji,getGenericWidth:Oi,setGenericWidth:Pi,getHeight:Ni,getRawWidth:Gi},Ri=function(a,b){var c=Qi.getGenericWidth(a);c.each(function(c){var d=c.width()/2;Qi.setGenericWidth(a,d,c.unit()),Qi.setGenericWidth(b,d,c.unit())})},Si={halve:Ri},Ti=function(a,b){var c=b||lb.fromDom(document.documentElement);return pe.ancestor(a,N.curry(cd.eq,c)).isSome()},Ui=function(a){var b=a.dom();return b===b.window?a:Jd.isDocument(a)?b.defaultView||b.parentWindow:null},Vi={attached:Ti,windowOf:Ui},Wi=function(a,b){var c=function(c,d){return Wi(a+c,b+d)};return{left:N.constant(a),top:N.constant(b),translate:c}},Xi=function(a){var b=a.getBoundingClientRect();return Wi(b.left,b.top)},Yi=function(a,b){return void 0!==a?a:void 0!==b?b:0},Zi=function(a){var b=a.dom().ownerDocument,c=b.body,d=Vi.windowOf(lb.fromDom(b)),e=b.documentElement,f=Yi(d.pageYOffset,e.scrollTop),g=Yi(d.pageXOffset,e.scrollLeft),h=Yi(e.clientTop,c.clientTop),i=Yi(e.clientLeft,c.clientLeft);return _i(a).translate(g-i,f-h)},$i=function(a){var b=a.dom();return Wi(b.offsetLeft,b.offsetTop)},_i=function(a){var b=a.dom(),c=b.ownerDocument,d=c.body,e=lb.fromDom(c.documentElement);return d===b?Wi(d.offsetLeft,d.offsetTop):Vi.attached(a,e)?Xi(b):Wi(0,0)},aj={absolute:Zi,relative:$i,viewport:_i},bj=Ta.immutable("row","y"),cj=Ta.immutable("col","x"),dj=function(a){var b=aj.absolute(a);return b.left()+li.getOuter(a)},ej=function(a){return aj.absolute(a).left()},fj=function(a,b){return cj(a,ej(b))},gj=function(a,b){return cj(a,dj(b))},hj=function(a){return aj.absolute(a).top()},ij=function(a,b){return bj(a,hj(b))},jj=function(a,b){return bj(a,hj(b)+fi.getOuter(b))},kj=function(a,b,c){if(0===c.length)return[];var d=Ba.map(c.slice(1),function(b,c){return b.map(function(b){return a(c,b)})}),e=c[c.length-1].map(function(a){return b(c.length-1,a)});return d.concat([e])},lj=function(a,b){return-a},mj={delta:N.identity,positions:N.curry(kj,ij,jj),edge:hj},nj={delta:N.identity,edge:ej,positions:N.curry(kj,fj,gj)},oj={delta:lj,edge:dj,positions:N.curry(kj,gj,fj)},pj={height:mj,rtl:oj,ltr:nj},qj={ltr:pj.ltr,rtl:pj.rtl},rj=function(a){var b=Ne.fromTable(a),c=Ue.generate(b);return c.grid()},sj={getGridSize:rj},tj=function(a){var b=a,c=function(){return b},d=function(a){b=a},e=function(){return tj(c())};return{get:c,set:d,clone:e}},uj=function(a,b){return vj(a,b,{validate:X.isFunction,label:"function"})},vj=function(a,b,c){if(0===b.length)throw new Error("You must specify at least one required field.");return Sa.validateStrArr("required",b),Sa.checkDupes(b),function(d){var e=La.keys(d),f=Ba.forall(b,function(a){return Ba.contains(e,a)});f||Sa.reqMessage(b,e),a(b,e);var g=Ba.filter(b,function(a){return!c.validate(d[a],a)});return g.length>0&&Sa.invalidTypeMessage(g,c.label),d}},wj=function(a,b){var c=Ba.filter(b,function(b){return!Ba.contains(a,b)});c.length>0&&Sa.unsuppMessage(c)},xj=N.noop,yj={exactly:N.curry(uj,wj),ensure:N.curry(uj,xj),ensureWith:N.curry(vj,xj)},zj=function(a){var b=Ud.has(a,"colspan")?parseInt(Ud.get(a,"colspan"),10):1,c=Ud.has(a,"rowspan")?parseInt(Ud.get(a,"rowspan"),10):1;return{element:N.constant(a),colspan:N.constant(b),rowspan:N.constant(c)}},Aj=function(a,b){Dj(a);var c=tj(U.none()),d=void 0!==b?b:zj,e=function(b){return a.cell(b)},f=function(a){var b=d(a);return e(b)},g=function(a){var b=f(a);return c.get().isNone()&&c.set(U.some(b)),h=U.some({item:a,replacement:b}),b},h=U.none(),i=function(a,b){return h.fold(function(){return g(a)},function(c){return b(a,c.item)?c.replacement:g(a)})};return{getOrInit:i,cursor:c.get}},Bj=function(a,b){return function(c){var d=tj(U.none());Dj(c);var e=[],f=function(a,b){return Ba.find(e,function(c){return b(c.item,a)})},g=function(f){var g=c.replace(f,b,{scope:a});return e.push({item:f,sub:g}),d.get().isNone()&&d.set(U.some(g)),g},h=function(a,b){return f(a,b).fold(function(){return g(a)},function(c){return b(a,c.item)?c.sub:g(a)})};return{replaceOrInit:h,cursor:d.get}}},Cj=function(a){Dj(a);var b=tj(U.none()),c=function(c){return b.get().isNone()&&b.set(U.some(c)),function(){var b=a.cell({element:N.constant(c),colspan:N.constant(1),rowspan:N.constant(1)});return mf.remove(b,"width"),mf.remove(c,"width"),b}};return{combine:c,cursor:b.get}},Dj=yj.exactly(["cell","row","replace","gap"]),Ej={modification:Aj,transform:Bj,merging:Cj},Fj=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Gj=function(a,b){var c=a.property().name(b);return Ba.contains(["ol","ul"],c)},Hj=function(a,b){var c=a.property().name(b);return Ba.contains(Fj,c)},Ij=function(a,b){var c=a.property().name(b);return Ba.contains(["address","pre","p","h1","h2","h3","h4","h5","h6"],c)},Jj=function(a,b){var c=a.property().name(b);return Ba.contains(["h1","h2","h3","h4","h5","h6"],c)},Kj=function(a,b){return Ba.contains(["div","li","td","th","blockquote","body","caption"],a.property().name(b))},Lj=function(a,b){return Ba.contains(["br","img","hr","input"],a.property().name(b))},Mj=function(a,b){return"iframe"===a.property().name(b)},Nj=function(a,b){return!(Hj(a,b)||Lj(a,b))&&"li"!==a.property().name(b)},Oj={isBlock:Hj,isList:Gj,isFormatting:Ij,isHeading:Jj,isContainer:Kj,isEmptyTag:Lj,isFrame:Mj,isInline:Nj},Pj=f(),Qj=function(a){return Oj.isBlock(Pj,a)},Rj=function(a){return Oj.isList(Pj,a)},Sj=function(a){return Oj.isFormatting(Pj,a)},Tj=function(a){return Oj.isHeading(Pj,a)},Uj=function(a){return Oj.isContainer(Pj,a)},Vj=function(a){return Oj.isEmptyTag(Pj,a)},Wj=function(a){return Oj.isFrame(Pj,a)},Xj=function(a){return Oj.isInline(Pj,a)},Yj={isBlock:Qj,isList:Rj,isFormatting:Sj,isHeading:Tj,isContainer:Uj,isEmptyTag:Vj,isFrame:Wj,isInline:Xj},Zj=function(a){var b=function(a){return"br"===Jd.name(a)},c=function(a){return Ba.forall(a,function(a){return b(a)||Jd.isText(a)&&0===Vf.get(a).trim().length})},d=function(a){return"li"===Jd.name(a)||pe.ancestor(a,Yj.isList).isSome()},e=function(a){return xd.nextSibling(a).map(function(a){return!!Yj.isBlock(a)||(Yj.isEmptyTag(a)?"img"!==Jd.name(a):void 0)}).getOr(!1)},f=function(a){return fg.last(a).bind(function(c){var f=e(c);return xd.parent(c).map(function(e){return f===!0||d(e)||b(c)||Yj.isBlock(e)&&!cd.eq(a,e)?[]:[lb.fromTag("br")]})}).getOr([])},g=function(){var b=Ba.bind(a,function(a){var b=xd.children(a);return c(b)?[]:b.concat(f(a))});return 0===b.length?[lb.fromTag("br")]:b},h=g();Cf.empty(a[0]),yf.append(a[0],h)},$j={merge:Zj},_j=function(a,b){return b},ak=function(a,b){var c=X.isObject(a)&&X.isObject(b);return c?ck(a,b):b},bk=function(a){return function(){for(var b=new Array(arguments.length),c=0;c<b.length;c++)b[c]=arguments[c];if(0===b.length)throw new Error("Can't merge zero objects");for(var d={},e=0;e<b.length;e++){var f=b[e];for(var g in f)f.hasOwnProperty(g)&&(d[g]=a(d[g],f[g]))}return d}},ck=bk(ak),dk=bk(_j),ek={deepMerge:ck,merge:dk},fk=function(a){for(var b=[],c=function(a){b.push(a)},d=0;d<a.length;d++)a[d].each(c);return b},gk=function(a,b){for(var c=0;c<a.length;c++){var d=b(a[c],c);if(d.isSome())return d}return U.none()},hk=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];if(!e.isSome())return U.none();c.push(e.getOrDie())}return U.some(b.apply(null,c))},ik={cat:fk,findMap:gk,liftN:hk},jk=function(a,b,c){var d=a.cells(),e=d.slice(0,b),f=d.slice(b),g=e.concat([c]).concat(f);return lk(a,g)},kk=function(a,b,c){var d=a.cells();d[b]=c},lk=function(a,b){return fb.rowcells(b,a.section())},mk=function(a,b){var c=a.cells(),d=Ba.map(c,b);return fb.rowcells(d,a.section())},nk=function(a,b){return a.cells()[b]},ok=function(a,b){return nk(a,b).element()},pk=function(a){return a.cells().length},qk={addCell:jk,setCells:lk,mutateCell:kk,getCell:nk,getCellElement:ok,mapCells:mk,cellLength:pk},rk=function(a,b){return Ba.map(a,function(a){return qk.getCell(a,b)})},sk=function(a,b){return a[b]},tk=function(a,b){if(0===a.length)return 0;var c=a[0],d=Ba.findIndex(a,function(a){return!b(c.element(),a.element())});return d.fold(function(){return a.length},function(a){return a})},uk=function(a,b,c,d){var e=sk(a,b).cells().slice(c),f=tk(e,d),g=rk(a,c).slice(b),h=tk(g,d);return{colspan:N.constant(f),rowspan:N.constant(h)}},vk={subgrid:uk},wk=function(a,b){var c=Ba.map(a,function(a,b){return Ba.map(a.cells(),function(a,b){return!1})}),d=function(a,b,d,e){for(var f=a;f<a+d;f++)for(var g=b;g<b+e;g++)c[f][g]=!0};return Ba.map(a,function(e,f){var g=Ba.bind(e.cells(),function(e,g){if(c[f][g]===!1){var h=vk.subgrid(a,f,g,b);return d(f,g,h.rowspan(),h.colspan()),[fb.detailnew(e.element(),h.rowspan(),h.colspan(),e.isNew())]}return[]});return fb.rowdetails(g,e.section())})},xk=function(a,b,c){for(var d=[],e=0;e<a.grid().rows();e++){for(var f=[],g=0;g<a.grid().columns();g++){var h=Ue.getAt(a,e,g).map(function(a){return fb.elementnew(a.element(),c)}).getOrThunk(function(){return fb.elementnew(b.gap(),!0)});f.push(h)}var i=fb.rowcells(f,a.all()[e].section());d.push(i)}return d},yk={toDetails:wk,toGrid:xk},zk=function(a,b,c,d){c===d?Ud.remove(a,b):Ud.set(a,b,c)},Ak=function(a,b){var c=[],d=[],e=function(b,e){var f=we.child(a,e).getOrThunk(function(){var b=lb.fromTag(e,xd.owner(a).dom());return tf.append(a,b),b});Cf.empty(f);var g=Ba.map(b,function(a){a.isNew()&&c.push(a.element());var b=a.element();return Cf.empty(b),Ba.each(a.cells(),function(a){a.isNew()&&d.push(a.element()),zk(a.element(),"colspan",a.colspan(),1),zk(a.element(),"rowspan",a.rowspan(),1),tf.append(b,a.element())}),b});yf.append(f,g)},f=function(b){we.child(a,b).bind(Cf.remove)},g=function(a,b){a.length>0?e(a,b):f(b)},h=[],i=[],j=[];return Ba.each(b,function(a){switch(a.section()){case"thead":h.push(a);break;case"tbody":i.push(a);break;case"tfoot":j.push(a)}}),g(h,"thead"),g(i,"tbody"),g(j,"tfoot"),{newRows:N.constant(c),newCells:N.constant(d)}},Bk=function(a){var b=Ba.map(a,function(a){var b=Qf.shallow(a.element());return Ba.each(a.cells(),function(a){var c=Qf.deep(a.element());zk(c,"colspan",a.colspan(),1),zk(c,"rowspan",a.rowspan(),1),tf.append(b,c)}),b});return b},Ck={render:Ak,copy:Bk},Dk=function(a,b){for(var c=[],d=0;d<a;d++)c.push(b(d));return c},Ek=function(a,b){for(var c=[],d=a;d<b;d++)c.push(d);return c},Fk=function(a,b){var c=[];return Ba.each(a,function(d,e){e<a.length-1&&!b(d,a[e+1])?c.push(d):e===a.length-1&&c.push(d)}),c},Gk=function(a,b){if(b<0||b>=a.length-1)return U.none();var c=a[b].fold(function(){var c=Ba.reverse(a.slice(0,b));return ik.findMap(c,function(a,b){return a.map(function(a){return{value:a,delta:b+1}})})},function(a){return U.some({value:a,delta:0})}),d=a[b+1].fold(function(){var c=a.slice(b+1);return ik.findMap(c,function(a,b){return a.map(function(a){return{value:a,delta:b+1}})})},function(a){return U.some({value:a,delta:1})});return c.bind(function(a){return d.map(function(b){var c=b.delta+a.delta;return Math.abs(b.value-a.value)/c})})},Hk={repeat:Dk,range:Ek,unique:Fk,deduce:Gk},Ik=function(a){var b=a.grid(),c=Hk.range(0,b.columns()),d=Hk.range(0,b.rows());return Ba.map(c,function(b){var c=function(){return Ba.bind(d,function(c){return Ue.getAt(a,c,b).filter(function(a){return a.column()===b}).fold(N.constant([]),function(a){return[a]})})},e=function(a){return 1===a.colspan()},f=function(){return Ue.getAt(a,0,b)};return Jk(c,e,f)})},Jk=function(a,b,c){var d=a(),e=Ba.find(d,b),f=e.orThunk(function(){return U.from(d[0]).orThunk(c)});return f.map(function(a){return a.element()})},Kk=function(a){var b=a.grid(),c=Hk.range(0,b.rows()),d=Hk.range(0,b.columns());return Ba.map(c,function(b){var c=function(){return Ba.bind(d,function(c){return Ue.getAt(a,b,c).filter(function(a){return a.row()===b}).fold(N.constant([]),function(a){return[a]})})},e=function(a){return 1===a.rowspan()},f=function(){return Ue.getAt(a,b,0)};return Jk(c,e,f)})},Lk={columns:Ik,rows:Kk},Mk=function(a,b,c,d,e){var f=lb.fromTag("div");return mf.setAll(f,{position:"absolute",left:b-d/2+"px",top:c+"px",height:e+"px",width:d+"px"}),Ud.setAll(f,{"data-column":a,role:"presentation"}),f},Nk=function(a,b,c,d,e){var f=lb.fromTag("div");return mf.setAll(f,{position:"absolute",left:b+"px",top:c-e/2+"px",height:e+"px",width:d+"px"}),Ud.setAll(f,{"data-row":a,role:"presentation"}),f},Ok={col:Mk,row:Nk},Pk=function(a){var b=a.replace(/\./g,"-"),c=function(a){return b+"-"+a};return{resolve:c}},Qk={css:Pk},Rk=Qk.css("ephox-snooker"),Sk={resolve:Rk.resolve},Tk=function(a,b){var c=Ud.get(a,b);return void 0===c||""===c?[]:c.split(" ")},Uk=function(a,b,c){var d=Tk(a,b),e=d.concat([c]);Ud.set(a,b,e.join(" "))},Vk=function(a,b,c){var d=Ba.filter(Tk(a,b),function(a){return a!==c});d.length>0?Ud.set(a,b,d.join(" ")):Ud.remove(a,b)},Wk={read:Tk,add:Uk,remove:Vk},Xk=function(a){return void 0!==a.dom().classList},Yk=function(a){return Wk.read(a,"class")},Zk=function(a,b){return Wk.add(a,"class",b)},$k=function(a,b){return Wk.remove(a,"class",b)},_k=function(a,b){Ba.contains(Yk(a),b)?$k(a,b):Zk(a,b)},al={get:Yk,add:Zk,remove:$k,toggle:_k,supports:Xk},bl=function(a,b){al.supports(a)?a.dom().classList.add(b):al.add(a,b)},cl=function(a){var b=al.supports(a)?a.dom().classList:al.get(a);0===b.length&&Ud.remove(a,"class")},dl=function(a,b){if(al.supports(a)){var c=a.dom().classList;c.remove(b)}else al.remove(a,b);cl(a)},el=function(a,b){return al.supports(a)?a.dom().classList.toggle(b):al.toggle(a,b)},fl=function(a,b){var c=al.supports(a),d=a.dom().classList,e=function(){c?d.remove(b):al.remove(a,b)},f=function(){c?d.add(b):al.add(a,b)};return i(e,f,gl(a,b))},gl=function(a,b){return al.supports(a)&&a.dom().classList.contains(b)},hl={add:bl,remove:dl,toggle:el,toggler:fl,has:gl},il=Sk.resolve("resizer-bar"),jl=Sk.resolve("resizer-rows"),kl=Sk.resolve("resizer-cols"),ll=7,ml=function(a){var b=ie.descendants(a.parent(),"."+il);Ba.each(b,Cf.remove)},nl=function(a,b,c){var d=a.origin();Ba.each(b,function(b,e){b.each(function(b){var e=c(d,b);hl.add(e,il),tf.append(a.parent(),e)})})},ol=function(a,b,c,d){nl(a,b,function(a,b){var e=Ok.col(b.col(),b.x()-a.left(),c.top()-a.top(),ll,d);return hl.add(e,kl),e})},pl=function(a,b,c,d){nl(a,b,function(a,b){var e=Ok.row(b.row(),c.left()-a.left(),b.y()-a.top(),d,ll);return hl.add(e,jl),e})},ql=function(a,b,c,d,e,f){var g=aj.absolute(b),h=c.length>0?e.positions(c,b):[];pl(a,h,g,li.getOuter(b));var i=d.length>0?f.positions(d,b):[];ol(a,i,g,fi.getOuter(b))},rl=function(a,b,c,d){ml(a);var e=Ne.fromTable(b),f=Ue.generate(e),g=Lk.rows(f),h=Lk.columns(f);ql(a,b,g,h,c,d)},sl=function(a,b){var c=ie.descendants(a.parent(),"."+il);Ba.each(c,b)},tl=function(a){sl(a,function(a){mf.set(a,"display","none")})},ul=function(a){sl(a,function(a){mf.set(a,"display","block")})},vl=function(a){return hl.has(a,jl)},wl=function(a){return hl.has(a,kl)},xl={refresh:rl,hide:tl,show:ul,destroy:ml,isRowBar:vl,isColBar:wl},yl=function(a,b){return yk.toGrid(a,b,!1)},zl=function(a,b){var c=function(a){var c=ik.findMap(a,function(a){return xd.parent(a.element()).map(function(a){var b=xd.parent(a).isNone();return fb.elementnew(a,b)})});return c.getOrThunk(function(){return fb.elementnew(b.row(),!0)})};return Ba.map(a,function(a){var b=c(a.details());return fb.rowdatanew(b.element(),a.details(),a.section(),b.isNew())})},Al=function(a,b){var c=yk.toDetails(a,cd.eq);return zl(c,b)},Bl=function(a,b){var c=Ba.flatten(Ba.map(a.all(),function(a){return a.cells()}));return Ba.find(c,function(a){return cd.eq(b,a.element())})},Cl=function(a,b,c,d,e){return function(f,g,h,i,j){var k=Ne.fromTable(g),l=Ue.generate(k),m=b(l,h).map(function(b){var c=yl(l,i),d=a(c,b,cd.eq,e(i)),f=Al(d.grid(),i);return{grid:N.constant(f),cursor:d.cursor}});return m.fold(function(){return U.none()},function(a){var b=Ck.render(g,a.grid());return c(g,a.grid(),j),d(g),xl.refresh(f,g,pj.height,j),U.some({cursor:a.cursor,newRows:b.newRows,newCells:b.newCells})})}},Dl=function(a,b){return Ke.cell(b.element()).bind(function(b){return Bl(a,b)})},El=function(a,b){return Ke.cell(b.element()).bind(function(c){return Bl(a,c).map(function(a){return ek.merge(a,{generators:b.generators,clipboard:b.clipboard})})})},Fl=function(a,b){var c=Ba.map(b.selection(),function(b){return Ke.cell(b).bind(function(b){return Bl(a,b)})}),d=ik.cat(c);return d.length>0?U.some(ek.merge({cells:d},{generators:b.generators,clipboard:b.clipboard})):U.none()},Gl=function(a,b){return b.mergable()},Hl=function(a,b){return b.unmergable()},Il=function(a,b){var c=Ba.map(b.selection(),function(b){return Ke.cell(b).bind(function(b){return Bl(a,b)})}),d=ik.cat(c);return d.length>0?U.some(d):U.none()},Jl={run:Cl,toDetailList:Al,onCell:Dl,onCells:Il,onPaste:El,onPasteRows:Fl,onMergable:Gl,onUnmergable:Hl},Kl=function(a){var b=function(b){return a===b},c=function(b){return Kl(a)},d=function(b){return Kl(a)},e=function(b){return Kl(b(a))},f=function(b){b(a)},g=function(b){return b(a)},h=function(b,c){return c(a)},i=function(b){return b(a)},j=function(b){return b(a)},k=function(){return U.some(a)};return{is:b,isValue:N.always,isError:N.never,getOr:N.constant(a),getOrThunk:N.constant(a),getOrDie:N.constant(a),or:c,orThunk:d,fold:h,map:e,each:f,bind:g,exists:i,forall:j,toOption:k}},Ll=function(a){var b=function(a){return a()},c=function(){return N.die(String(a))()},d=function(a){return a},e=function(a){return a()},f=function(b){return Ll(a)},g=function(b){return Ll(a)},h=function(b,c){return b(a)};return{is:N.never,isValue:N.never,isError:N.always,getOr:N.identity,getOrThunk:b,getOrDie:c,or:d,orThunk:e,fold:h,map:f,each:N.noop,bind:g,exists:N.never,forall:N.always,toOption:U.none}},Ml={value:Kl,error:Ll},Nl=function(a,b,c){if(a.row()>=b.length||a.column()>qk.cellLength(b[0]))return Ml.error("invalid start address out of table bounds, row: "+a.row()+", column: "+a.column());var d=b.slice(a.row()),e=d[0].cells().slice(a.column()),f=qk.cellLength(c[0]),g=c.length;return Ml.value({rowDelta:N.constant(d.length-g),colDelta:N.constant(e.length-f)})},Ol=function(a,b){var c=qk.cellLength(a[0]),d=qk.cellLength(b[0]);return{rowDelta:N.constant(0),colDelta:N.constant(c-d)}},Pl=function(a,b){return Ba.map(a,function(){return fb.elementnew(b.cell(),!0)})},Ql=function(a,b,c){return a.concat(Hk.repeat(b,function(b){
return qk.setCells(a[a.length-1],Pl(a[a.length-1].cells(),c))}))},Rl=function(a,b,c){return Ba.map(a,function(a){return qk.setCells(a,a.cells().concat(Pl(Hk.range(0,b),c)))})},Sl=function(a,b,c){var d=b.colDelta()<0?Rl:N.identity,e=b.rowDelta()<0?Ql:N.identity,f=d(a,Math.abs(b.colDelta()),c),g=e(f,Math.abs(b.rowDelta()),c);return g},Tl={measure:Nl,measureWidth:Ol,tailor:Sl},Ul=function(a,b,c,d){if(0===a.length)return a;for(var e=b.startRow();e<=b.finishRow();e++)for(var f=b.startCol();f<=b.finishCol();f++)qk.mutateCell(a[e],f,fb.elementnew(d(),!1));return a},Vl=function(a,b,c,d){for(var e=!0,f=0;f<a.length;f++)for(var g=0;g<qk.cellLength(a[0]);g++){var h=qk.getCellElement(a[f],g),i=c(h,b);i===!0&&e===!1?qk.mutateCell(a[f],g,fb.elementnew(d(),!0)):i===!0&&(e=!1)}return a},Wl=function(a,b){return Ba.foldl(a,function(a,c){return Ba.exists(a,function(a){return b(a.element(),c.element())})?a:a.concat([c])},[])},Xl=function(a,b,c,d){if(b>0&&b<a.length){var e=a[b-1].cells(),f=Wl(e,c);Ba.each(f,function(e){for(var f=U.none(),g=b;g<a.length;g++)for(var h=0;h<qk.cellLength(a[0]);h++){var i=a[g].cells()[h],j=c(i.element(),e.element());j&&(f.isNone()&&(f=U.some(d())),f.each(function(b){qk.mutateCell(a[g],h,fb.elementnew(b,!0))}))}})}return a},Yl={merge:Ul,unmerge:Vl,splitRows:Xl},Zl=function(a,b,c,d){var e=qk.getCell(a[b],c),f=N.curry(d,e.element()),g=a[b];return a.length>1&&qk.cellLength(g)>1&&(c>0&&f(qk.getCellElement(g,c-1))||c<g.length-1&&f(qk.getCellElement(g,c+1))||b>0&&f(qk.getCellElement(a[b-1],c))||b<a.length-1&&f(qk.getCellElement(a[b+1],c)))},$l=function(a,b,c,d,e){for(var f=a.row(),g=a.column(),h=c.length,i=qk.cellLength(c[0]),j=f+h,k=g+i,l=f;l<j;l++)for(var m=g;m<k;m++){Zl(b,l,m,e)&&Yl.unmerge(b,qk.getCellElement(b[l],m),e,d.cell);var n=qk.getCellElement(c[l-f],m-g),o=d.replace(n);qk.mutateCell(b[l],m,fb.elementnew(o,!0))}return b},_l=function(a,b,c,d,e){var f=Tl.measure(a,b,c);return f.map(function(f){var g=Tl.tailor(b,f,d);return $l(a,g,c,d,e)})},am=function(a,b,c,d,e){Yl.splitRows(b,a,e,d.cell);var f=Tl.measureWidth(c,b),g=Tl.tailor(c,f,d),h=Tl.measureWidth(b,g),i=Tl.tailor(b,h,d);return i.slice(0,a).concat(g).concat(i.slice(a,i.length))},bm={merge:_l,insert:am},cm=function(a,b,c,d,e){var f=a.slice(0,b),g=a.slice(b),h=qk.mapCells(a[c],function(c,f){var g=b>0&&b<a.length&&d(qk.getCellElement(a[b-1],f),qk.getCellElement(a[b],f)),h=g?qk.getCell(a[b],f):fb.elementnew(e(c.element(),d),!0);return h});return f.concat([h]).concat(g)},dm=function(a,b,c,d,e){return Ba.map(a,function(a){var f=b>0&&b<qk.cellLength(a)&&d(qk.getCellElement(a,b-1),qk.getCellElement(a,b)),g=f?qk.getCell(a,b):fb.elementnew(e(qk.getCellElement(a,c),d),!0);return qk.addCell(a,b,g)})},em=function(a,b,c,d,e){var f=c+1;return Ba.map(a,function(a,g){var h=g===b,i=h?fb.elementnew(e(qk.getCellElement(a,c),d),!0):qk.getCell(a,c);return qk.addCell(a,f,i)})},fm=function(a,b,c,d,e){var f=b+1,g=a.slice(0,f),h=a.slice(f),i=qk.mapCells(a[b],function(a,b){var f=b===c;return f?fb.elementnew(e(a.element(),d),!0):a});return g.concat([i]).concat(h)},gm=function(a,b,c){var d=Ba.map(a,function(a){var d=a.cells().slice(0,b).concat(a.cells().slice(c+1));return fb.rowcells(d,a.section())});return Ba.filter(d,function(a){return a.cells().length>0})},hm=function(a,b,c){return a.slice(0,b).concat(a.slice(c+1))},im={insertRowAt:cm,insertColumnAt:dm,splitCellIntoColumns:em,splitCellIntoRows:fm,deleteRowsAt:hm,deleteColumnsAt:gm},jm=function(a,b,c,d){var e=function(a){return Ba.exists(b,function(b){return c(a.element(),b.element())})};return Ba.map(a,function(a){return qk.mapCells(a,function(a){return e(a)?fb.elementnew(d(a.element(),c),!0):a})})},km=function(a,b,c,d){return void 0!==qk.getCellElement(a[b],c)&&b>0&&d(qk.getCellElement(a[b-1],c),qk.getCellElement(a[b],c))},lm=function(a,b,c){return b>0&&c(qk.getCellElement(a,b-1),qk.getCellElement(a,b))},mm=function(a,b,c,d){var e=Ba.bind(a,function(d,e){var f=km(a,e,b,c)||lm(d,b,c);return f?[]:[qk.getCell(d,b)]});return jm(a,e,c,d)},nm=function(a,b,c,d){var e=a[b],f=Ba.bind(e.cells(),function(d,f){var g=km(a,b,f,c)||lm(e,f,c);return g?[]:[d]});return jm(a,f,c,d)},om={replaceColumn:mm,replaceRow:nm},pm=function(){return um(function(a,b,c,d,e){return a()})},qm=function(a){return um(function(b,c,d,e,f){return c(a)})},rm=function(a,b){return um(function(c,d,e,f,g){return e(a,b)})},sm=function(a,b,c){return um(function(d,e,f,g,h){return g(a,b,c)})},tm=function(a,b){return um(function(c,d,e,f,g){return g(a,b)})},um=function(a){return{fold:a}},vm={none:pm,only:qm,left:rm,middle:sm,right:tm},wm=function(a,b){return 0===a.length?vm.none():1===a.length?vm.only(0):0===b?vm.left(0,1):b===a.length-1?vm.right(b-1,b):b>0&&b<a.length-1?vm.middle(b-1,b,b+1):vm.none()},xm=function(a,b,c,d){var e=a.slice(0),f=wm(a,b),g=function(a){return Ba.map(a,N.constant(0))},h=N.constant(g(e)),i=function(a){return d.singleColumnWidth(e[a],c)},j=function(a,b){if(c>=0){var f=Math.max(d.minCellWidth(),e[b]-c);return g(e.slice(0,a)).concat([c,f-e[b]]).concat(g(e.slice(b+1)))}var h=Math.max(d.minCellWidth(),e[a]+c),i=e[a]-h;return g(e.slice(0,a)).concat([h-e[a],i]).concat(g(e.slice(b+1)))},k=j,l=function(a,b,c){return j(b,c)},m=function(a,b){if(c>=0)return g(e.slice(0,b)).concat([c]);var f=Math.max(d.minCellWidth(),e[b]+c);return g(e.slice(0,b)).concat([f-e[b]])};return f.fold(h,i,k,l,m)},ym={determine:xm},zm=function(a,b){return Ud.has(a,b)&&parseInt(Ud.get(a,b),10)>1},Am=function(a){return zm(a,"colspan")},Bm=function(a){return zm(a,"rowspan")},Cm=function(a,b){return parseInt(mf.get(a,b),10)},Dm={hasColspan:Am,hasRowspan:Bm,minWidth:N.constant(10),minHeight:N.constant(10),getInt:Cm},Em=function(a,b,c){return mf.getRaw(a,b).fold(function(){return c(a)+"px"},function(a){return a})},Fm=function(a){return Em(a,"width",Qi.getPixelWidth)},Gm=function(a){return Em(a,"height",Qi.getHeight)},Hm=function(a,b,c,d,e){var f=Lk.columns(a),g=Ba.map(f,function(a){return a.map(b.edge)});return Ba.map(f,function(a,b){var f=a.filter(N.not(Dm.hasColspan));return f.fold(function(){var a=Hk.deduce(g,b);return d(a)},function(a){return c(a,e)})})},Im=function(a){return a.map(function(a){return a+"px"}).getOr("")},Jm=function(a,b){return Hm(a,b,Fm,Im)},Km=function(a,b,c){return Hm(a,b,Qi.getPercentageWidth,function(a){return a.fold(function(){return c.minCellWidth()},function(a){return a/c.pixelWidth()*100})},c)},Lm=function(a,b,c){return Hm(a,b,Qi.getPixelWidth,function(a){return a.getOrThunk(c.minCellWidth)},c)},Mm=function(a,b,c,d){var e=Lk.rows(a),f=Ba.map(e,function(a){return a.map(b.edge)});return Ba.map(e,function(a,b){var e=a.filter(N.not(Dm.hasRowspan));return e.fold(function(){var a=Hk.deduce(f,b);return d(a)},function(a){return c(a)})})},Nm=function(a,b){return Mm(a,b,Qi.getHeight,function(a){return a.getOrThunk(Dm.minHeight)})},Om=function(a,b){return Mm(a,b,Gm,Im)},Pm={getRawWidths:Jm,getPixelWidths:Lm,getPercentageWidths:Km,getPixelHeights:Nm,getRawHeights:Om},Qm=function(a,b,c){for(var d=0,e=a;e<b;e++)d+=void 0!==c[e]?c[e]:0;return d},Rm=function(a,b){var c=Ue.justCells(a);return Ba.map(c,function(a){var c=Qm(a.column(),a.column()+a.colspan(),b);return{element:a.element,width:N.constant(c),colspan:a.colspan}})},Sm=function(a,b){var c=Ue.justCells(a);return Ba.map(c,function(a){var c=Qm(a.row(),a.row()+a.rowspan(),b);return{element:a.element,height:N.constant(c),rowspan:a.rowspan}})},Tm=function(a,b){return Ba.map(a.all(),function(a,c){return{element:a.element,height:N.constant(b[c])}})},Um={recalculateWidth:Rm,recalculateHeight:Sm,matchRowHeight:Tm},Vm=function(a,b){var c=parseFloat(a),d=li.get(b),e=function(a){return a/d*100},f=function(a,b){return[100-a]},g=function(){return Dm.minWidth()/d*100},h=function(a,b,d){var e=c+d;Qi.setPercentageWidth(a,e)};return{width:N.constant(c),pixelWidth:N.constant(d),getWidths:Pm.getPercentageWidths,getCellDelta:e,singleColumnWidth:f,minCellWidth:g,setElementWidth:Qi.setPercentageWidth,setTableWidth:h}},Wm=function(a){var b=parseInt(a,10),c=N.identity,d=function(a,b){var c=Math.max(Dm.minWidth(),a+b);return[c-a]},e=function(a,b,c){var d=Ba.foldr(b,function(a,b){return a+b},0);Qi.setPixelWidth(a,d)};return{width:N.constant(b),pixelWidth:N.constant(b),getWidths:Pm.getPixelWidths,getCellDelta:c,singleColumnWidth:d,minCellWidth:Dm.minWidth,setElementWidth:Qi.setPixelWidth,setTableWidth:e}},Xm=function(a,b){if(Qi.percentageBasedSizeRegex().test(b)){var c=Qi.percentageBasedSizeRegex().exec(b);return Vm(c[1],a)}if(Qi.pixelBasedSizeRegex().test(b)){var d=Qi.pixelBasedSizeRegex().exec(b);return Wm(d[1])}var e=li.get(a);return Wm(e)},Ym=function(a){var b=Qi.getRawWidth(a);return b.fold(function(){var b=li.get(a);return Wm(b)},function(b){return Xm(a,b)})},Zm={getTableSize:Ym},$m=function(a){return Ue.generate(a)},_m=function(a){return Ba.foldr(a,function(a,b){return a+b},0)},an=function(a){var b=Ne.fromTable(a);return $m(b)},bn=function(a,b,c,d){var e=Zm.getTableSize(a),f=e.getCellDelta(b),g=an(a),h=e.getWidths(g,d,e),i=ym.determine(h,c,f,e),j=Ba.map(i,function(a,b){return a+h[b]}),k=Um.recalculateWidth(g,j);Ba.each(k,function(a){e.setElementWidth(a.element(),a.width())}),c===g.grid().columns()-1&&e.setTableWidth(a,j,f)},cn=function(a,b,c,d){var e=an(a),f=Pm.getPixelHeights(e,d),g=Ba.map(f,function(a,d){return c===d?Math.max(b+a,Dm.minHeight()):a}),h=Um.recalculateHeight(e,g),i=Um.matchRowHeight(e,g);Ba.each(i,function(a){Qi.setHeight(a.element(),a.height())}),Ba.each(h,function(a){Qi.setHeight(a.element(),a.height())});var j=_m(g);Qi.setHeight(a,j)},dn=function(a,b,c){var d=Zm.getTableSize(a),e=$m(b),f=d.getWidths(e,c,d),g=Um.recalculateWidth(e,f);Ba.each(g,function(a){d.setElementWidth(a.element(),a.width())});var h=Ba.foldr(f,function(a,b){return b+a},0);g.length>0&&d.setElementWidth(a,h)},en={adjustWidth:bn,adjustHeight:cn,adjustWidthTo:dn},fn=function(a){var b=Ke.cells(a);0===b.length&&Cf.remove(a)},gn=Ta.immutable("grid","cursor"),hn=function(a,b,c){return jn(a,b,c).orThunk(function(){return jn(a,0,0)})},jn=function(a,b,c){return U.from(a[b]).bind(function(a){return U.from(a.cells()[c]).bind(function(a){return U.from(a.element())})})},kn=function(a,b,c){return gn(a,jn(a,b,c))},ln=function(a){return Ba.foldl(a,function(a,b){return Ba.exists(a,function(a){return a.row()===b.row()})?a:a.concat([b])},[]).sort(function(a,b){return a.row()-b.row()})},mn=function(a){return Ba.foldl(a,function(a,b){return Ba.exists(a,function(a){return a.column()===b.column()})?a:a.concat([b])},[]).sort(function(a,b){return a.column()-b.column()})},nn=function(a,b,c,d){var e=b.row(),f=b.row(),g=im.insertRowAt(a,f,e,c,d.getOrInit);return kn(g,f,b.column())},on=function(a,b,c,d){var e=b[0].row(),f=b[0].row(),g=ln(b),h=Ba.foldl(g,function(a,b){return im.insertRowAt(a,f,e,c,d.getOrInit)},a);return kn(h,f,b[0].column())},pn=function(a,b,c,d){var e=b.row(),f=b.row()+b.rowspan(),g=im.insertRowAt(a,f,e,c,d.getOrInit);return kn(g,f,b.column())},qn=function(a,b,c,d){var e=ln(b),f=e[e.length-1].row(),g=e[e.length-1].row()+e[e.length-1].rowspan(),h=Ba.foldl(e,function(a,b){return im.insertRowAt(a,g,f,c,d.getOrInit)},a);return kn(h,g,b[0].column())},rn=function(a,b,c,d){var e=b.column(),f=b.column(),g=im.insertColumnAt(a,f,e,c,d.getOrInit);return kn(g,b.row(),f)},sn=function(a,b,c,d){var e=mn(b),f=e[0].column(),g=e[0].column(),h=Ba.foldl(e,function(a,b){return im.insertColumnAt(a,g,f,c,d.getOrInit)},a);return kn(h,b[0].row(),g)},tn=function(a,b,c,d){var e=b.column(),f=b.column()+b.colspan(),g=im.insertColumnAt(a,f,e,c,d.getOrInit);return kn(g,b.row(),f)},un=function(a,b,c,d){var e=b[b.length-1].column(),f=b[b.length-1].column()+b[b.length-1].colspan(),g=mn(b),h=Ba.foldl(g,function(a,b){return im.insertColumnAt(a,f,e,c,d.getOrInit)},a);return kn(h,b[0].row(),f)},vn=function(a,b,c,d){var e=om.replaceRow(a,b.row(),c,d.replaceOrInit);return kn(e,b.row(),b.column())},wn=function(a,b,c,d){var e=om.replaceColumn(a,b.column(),c,d.replaceOrInit);return kn(e,b.row(),b.column())},xn=function(a,b,c,d){var e=om.replaceRow(a,b.row(),c,d.replaceOrInit);return kn(e,b.row(),b.column())},yn=function(a,b,c,d){var e=om.replaceColumn(a,b.column(),c,d.replaceOrInit);return kn(e,b.row(),b.column())},zn=function(a,b,c,d){var e=im.splitCellIntoColumns(a,b.row(),b.column(),c,d.getOrInit);return kn(e,b.row(),b.column())},An=function(a,b,c,d){var e=im.splitCellIntoRows(a,b.row(),b.column(),c,d.getOrInit);return kn(e,b.row(),b.column())},Bn=function(a,b,c,d){var e=mn(b),f=im.deleteColumnsAt(a,e[0].column(),e[e.length-1].column()),g=hn(f,b[0].row(),b[0].column());return gn(f,g)},Cn=function(a,b,c,d){var e=ln(b),f=im.deleteRowsAt(a,e[0].row(),e[e.length-1].row()),g=hn(f,b[0].row(),b[0].column());return gn(f,g)},Dn=function(a,b,c,d){var e=b.cells();$j.merge(e);var f=Yl.merge(a,b.bounds(),c,N.constant(e[0]));return gn(f,U.from(e[0]))},En=function(a,b,c,d){var e=Ba.foldr(b,function(a,b){return Yl.unmerge(a,b,c,d.combine(b))},a);return gn(e,U.from(b[0]))},Fn=function(a,b,c,d){var e=function(a,b){var c=Ne.fromTable(a),d=Ue.generate(c);return yk.toGrid(d,b,!0)},f=e(b.clipboard(),b.generators()),g=fb.address(b.row(),b.column()),h=bm.merge(g,a,f,b.generators(),c);return h.fold(function(){return gn(a,U.some(b.element()))},function(a){var c=hn(a,b.row(),b.column());return gn(a,c)})},Gn=function(a,b,c){var d=Ne.fromPastedRows(a,c),e=Ue.generate(d);return yk.toGrid(e,b,!0)},Hn=function(a,b,c,d){var e=a[b.cells[0].row()],f=b.cells[0].row(),g=Gn(b.clipboard(),b.generators(),e),h=bm.insert(f,a,g,b.generators(),c),i=hn(h,b.cells[0].row(),b.cells[0].column());return gn(h,i)},In=function(a,b,c,d){var e=a[b.cells[0].row()],f=b.cells[b.cells.length-1].row()+b.cells[b.cells.length-1].rowspan(),g=Gn(b.clipboard(),b.generators(),e),h=bm.insert(f,a,g,b.generators(),c),i=hn(h,b.cells[0].row(),b.cells[0].column());return gn(h,i)},Jn=en.adjustWidthTo,Kn={insertRowBefore:Jl.run(nn,Jl.onCell,N.noop,N.noop,Ej.modification),insertRowsBefore:Jl.run(on,Jl.onCells,N.noop,N.noop,Ej.modification),insertRowAfter:Jl.run(pn,Jl.onCell,N.noop,N.noop,Ej.modification),insertRowsAfter:Jl.run(qn,Jl.onCells,N.noop,N.noop,Ej.modification),insertColumnBefore:Jl.run(rn,Jl.onCell,Jn,N.noop,Ej.modification),insertColumnsBefore:Jl.run(sn,Jl.onCells,Jn,N.noop,Ej.modification),insertColumnAfter:Jl.run(tn,Jl.onCell,Jn,N.noop,Ej.modification),insertColumnsAfter:Jl.run(un,Jl.onCells,Jn,N.noop,Ej.modification),splitCellIntoColumns:Jl.run(zn,Jl.onCell,Jn,N.noop,Ej.modification),splitCellIntoRows:Jl.run(An,Jl.onCell,N.noop,N.noop,Ej.modification),eraseColumns:Jl.run(Bn,Jl.onCells,Jn,fn,Ej.modification),eraseRows:Jl.run(Cn,Jl.onCells,N.noop,fn,Ej.modification),makeColumnHeader:Jl.run(wn,Jl.onCell,N.noop,N.noop,Ej.transform("row","th")),unmakeColumnHeader:Jl.run(yn,Jl.onCell,N.noop,N.noop,Ej.transform(null,"td")),makeRowHeader:Jl.run(vn,Jl.onCell,N.noop,N.noop,Ej.transform("col","th")),unmakeRowHeader:Jl.run(xn,Jl.onCell,N.noop,N.noop,Ej.transform(null,"td")),mergeCells:Jl.run(Dn,Jl.onMergable,N.noop,N.noop,Ej.merging),unmergeCells:Jl.run(En,Jl.onUnmergable,Jn,N.noop,Ej.merging),pasteCells:Jl.run(Fn,Jl.onPaste,Jn,N.noop,Ej.modification),pasteRowsBefore:Jl.run(Hn,Jl.onPasteRows,N.noop,N.noop,Ej.modification),pasteRowsAfter:Jl.run(In,Jl.onPasteRows,N.noop,N.noop,Ej.modification)},Ln=function(a){return lb.fromDom(a.getBody())},Mn=function(a){return a.getBoundingClientRect().width},Nn=function(a){return a.getBoundingClientRect().height},On=function(a){return function(b){return cd.eq(b,Ln(a))}},Pn=function(a){return a?a.replace(/px$/,""):""},Qn=function(a){return/^[0-9]+$/.test(a)&&(a+="px"),a},Rn=function(a){var b=ie.descendants(a,"td[data-mce-style],th[data-mce-style]");Ud.remove(a,"data-mce-style"),Ba.each(b,function(a){Ud.remove(a,"data-mce-style")})},Sn=function(a,b){return function(c){return"rtl"===Tn(c)?b:a}},Tn=function(a){return"rtl"===mf.get(a,"direction")?"rtl":"ltr"},Un={onDirection:Sn,getDirection:Tn},Vn={isRtl:N.constant(!1)},Wn={isRtl:N.constant(!0)},Xn=function(a){var b=Un.getDirection(a);return"rtl"===b?Wn:Vn},Yn={directionAt:Xn},Zn=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],$n={"border-collapse":"collapse",width:"100%"},_n={border:"1"},ao=function(a){return a.getParam("table_default_attributes",_n,"object")},bo=function(a){return a.getParam("table_default_styles",$n,"object")},co=function(a){return a.getParam("table_resize_bars",!0,"boolean")},eo=function(a){return a.getParam("table_tab_navigation",!0,"boolean")},fo=function(a){return a.getParam("table_cell_advtab",!0,"boolean")},go=function(a){return a.getParam("table_row_advtab",!0,"boolean")},ho=function(a){return a.getParam("table_advtab",!0,"boolean")},io=function(a){return a.getParam("table_appearance_options",!0,"boolean")},jo=function(a){return a.getParam("table_grid",!0,"boolean")},ko=function(a){return a.getParam("table_style_by_css",!1,"boolean")},lo=function(a){return a.getParam("table_cell_class_list",[],"array")},mo=function(a){return a.getParam("table_row_class_list",[],"array")},no=function(a){return a.getParam("table_class_list",[],"array")},oo=function(a){return a.getParam("color_picker_callback")},po=function(a){return a.getParam("table_responsive_width")===!1},qo=function(a){var b=a.getParam("table_clone_elements");return X.isString(b)?U.some(b.split(/[ ,]/)):Array.isArray(b)?U.some(b):U.none()},ro=function(a){var b=a.getParam("object_resizing",!0);return"table"===b||b},so=function(a){var b=a.getParam("table_toolbar",Zn);return""===b||b===!1?[]:X.isString(b)?b.split(/[ ,]/):X.isArray(b)?b:[]},to=function(a,b){return a.fire("newrow",{node:b})},uo=function(a,b){return a.fire("newcell",{node:b})},vo=function(a,b,c,d){a.fire("ObjectResizeStart",{target:b,width:c,height:d})},wo=function(a,b,c,d){a.fire("ObjectResized",{target:b,width:c,height:d})},xo=function(a,b){var c=function(a){return"table"===Jd.name(Ln(a))},d=function(b){var d=sj.getGridSize(b);return c(a)===!1||d.rows()>1},e=function(b){var d=sj.getGridSize(b);return c(a)===!1||d.columns()>1},f=qo(a),g=function(b,c,d,e){return function(g,i){Rn(g);var j=e(),k=lb.fromDom(a.getDoc()),l=h(Yn.directionAt),m=ng.cellOperations(d,k,f);return c(g)?b(j,g,i,m,l).bind(function(b){return Ba.each(b.newRows(),function(b){to(a,b.dom())}),Ba.each(b.newCells(),function(b){uo(a,b.dom())}),b.cursor().map(function(b){var c=a.dom.createRng();return c.setStart(b.dom(),0),c.setEnd(b.dom(),0),c})}):U.none()}},i=g(Kn.eraseRows,d,N.noop,b),j=g(Kn.eraseColumns,e,N.noop,b),k=g(Kn.insertRowsBefore,N.always,N.noop,b),l=g(Kn.insertRowsAfter,N.always,N.noop,b),m=g(Kn.insertColumnsBefore,N.always,Si.halve,b),n=g(Kn.insertColumnsAfter,N.always,Si.halve,b),o=g(Kn.mergeCells,N.always,N.noop,b),p=g(Kn.unmergeCells,N.always,N.noop,b),q=g(Kn.pasteRowsBefore,N.always,N.noop,b),r=g(Kn.pasteRowsAfter,N.always,N.noop,b),s=g(Kn.pasteCells,N.always,N.noop,b);return{deleteRow:i,deleteColumn:j,insertRowsBefore:k,insertRowsAfter:l,insertColumnsBefore:m,insertColumnsAfter:n,mergeCells:o,unmergeCells:p,pasteRowsBefore:q,pasteRowsAfter:r,pasteCells:s}},yo=function(a,b,c){var d=Ne.fromTable(a),e=Ue.generate(d),f=Jl.onCells(e,b);return f.map(function(a){var b=yk.toGrid(e,c,!1),d=b.slice(a[0].row(),a[a.length-1].row()+a[a.length-1].rowspan()),f=Jl.toDetailList(d,c);return Ck.copy(f)})},zo={copyRows:yo},Ao=tinymce.util.Tools.resolve("tinymce.util.Tools"),Bo=function(a,b,c){var d,e=a.select("td,th",b),f=function(b,d){for(var e=0;e<d.length;e++){var f=a.getStyle(d[e],c);if("undefined"==typeof b&&(b=f),b!==f)return""}return b};return d=f(d,e)},Co=function(a,b,c){c&&a.formatter.apply("align"+c,{},b)},Do=function(a,b,c){c&&a.formatter.apply("valign"+c,{},b)},Eo=function(a,b){Ao.each("left center right".split(" "),function(c){a.formatter.remove("align"+c,{},b)})},Fo=function(a,b){Ao.each("top middle bottom".split(" "),function(c){a.formatter.remove("valign"+c,{},b)})},Go={applyAlign:Co,applyVAlign:Do,unApplyAlign:Eo,unApplyVAlign:Fo,getTDTHOverallStyle:Bo},Ho=function(a,b,c){var d=function(a,c){return c=c||[],Ao.each(a,function(a){var e={text:a.text||a.title};a.menu?e.menu=d(a.menu):(e.value=a.value,b&&b(e)),c.push(e)}),c};return d(a,c||[])},Io=function(a,b){var c=a.dom,d=b.control.rootControl,e=d.toJSON(),f=c.parseStyle(e.style);"style"===b.control.name()?(d.find("#borderStyle").value(f["border-style"]||"")[0].fire("select"),d.find("#borderColor").value(f["border-color"]||"")[0].fire("change"),d.find("#backgroundColor").value(f["background-color"]||"")[0].fire("change"),d.find("#width").value(f.width||"").fire("change"),d.find("#height").value(f.height||"").fire("change")):(f["border-style"]=e.borderStyle,f["border-color"]=e.borderColor,f["background-color"]=e.backgroundColor,f.width=e.width?Qn(e.width):"",f.height=e.height?Qn(e.height):""),d.find("#style").value(c.serializeStyle(c.parseStyle(c.serializeStyle(f))))},Jo=function(a,b){var c=a.parseStyle(a.getAttrib(b,"style")),d={};return c["border-style"]&&(d.borderStyle=c["border-style"]),c["border-color"]&&(d.borderColor=c["border-color"]),c["background-color"]&&(d.backgroundColor=c["background-color"]),d.style=a.serializeStyle(c),d},Ko=function(a){var b=function(){var b=oo(a);if(b)return function(c){return b.call(a,function(a){c.control.value(a).fire("change")},c.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:N.curry(Io,a)},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:N.curry(Io,a),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:b()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:b()}]}]}},Lo={createStyleForm:Ko,buildListItems:Ho,updateStyleField:Io,extractAdvancedStyles:Jo},Mo=function(a,b){delete a.dataset.mceStyle,a.style.cssText+=";"+b},No=function(a,b){var c=a.dom,d={width:c.getStyle(b,"width")||c.getAttrib(b,"width"),height:c.getStyle(b,"height")||c.getAttrib(b,"height"),scope:c.getAttrib(b,"scope"),"class":c.getAttrib(b,"class"),type:b.nodeName.toLowerCase(),style:"",align:"",valign:""};return Ao.each("left center right".split(" "),function(c){a.formatter.matchNode(b,"align"+c)&&(d.align=c)}),Ao.each("top middle bottom".split(" "),function(c){a.formatter.matchNode(b,"valign"+c)&&(d.valign=c)}),fo(a)&&Ao.extend(d,Lo.extractAdvancedStyles(c,b)),d},Oo=function(a,b,c){function d(a,b,c){c&&g.setAttrib(a,b,c)}function e(a,b,c){c&&g.setStyle(a,b,c)}var f,g=a.dom;Lo.updateStyleField(a,c),f=c.control.rootControl.toJSON(),a.undoManager.transact(function(){Ao.each(b,function(c){d(c,"scope",f.scope),1===b.length?d(c,"style",f.style):Mo(c,f.style),d(c,"class",f["class"]),e(c,"width",Qn(f.width)),e(c,"height",Qn(f.height)),f.type&&c.nodeName.toLowerCase()!==f.type&&(c=g.rename(c,f.type)),1===b.length&&(Go.unApplyAlign(a,c),Go.unApplyVAlign(a,c)),f.align&&Go.applyAlign(a,c,f.align),f.valign&&Go.applyVAlign(a,c,f.valign)}),a.focus()})},Po=function(a){var b,c,d,e=[];if(e=a.dom.select("td[data-mce-selected],th[data-mce-selected]"),b=a.dom.getParent(a.selection.getStart(),"td,th"),!e.length&&b&&e.push(b),b=b||e[0]){c=e.length>1?{width:"",height:"",scope:"","class":"",align:"",valign:"",style:"",type:b.nodeName.toLowerCase()}:No(a,b),lo(a).length>0&&(d={name:"class",type:"listbox",label:"Class",values:Lo.buildListItems(lo(a),function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({block:"td",classes:[b.value]})})})});var f={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:N.curry(Lo.updateStyleField,a)},{label:"Height",name:"height",onchange:N.curry(Lo.updateStyleField,a)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},d]};fo(a)?a.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:c,body:[{title:"General",type:"form",items:f},Lo.createStyleForm(a)],onsubmit:N.curry(Oo,a,e)}):a.windowManager.open({title:"Cell properties",data:c,body:f,onsubmit:N.curry(Oo,a,e)})}},Qo={open:Po},Ro=function(a,b){var c=a.dom,d={height:c.getStyle(b,"height")||c.getAttrib(b,"height"),scope:c.getAttrib(b,"scope"),"class":c.getAttrib(b,"class"),align:"",style:"",type:b.parentNode.nodeName.toLowerCase()};return Ao.each("left center right".split(" "),function(c){a.formatter.matchNode(b,"align"+c)&&(d.align=c)}),go(a)&&Ao.extend(d,Lo.extractAdvancedStyles(c,b)),d},So=function(a,b,c){var d=a.getParent(b,"table"),e=b.parentNode,f=a.select(c,d)[0];f||(f=a.create(c),d.firstChild?"CAPTION"===d.firstChild.nodeName?a.insertAfter(f,d.firstChild):d.insertBefore(f,d.firstChild):d.appendChild(f)),f.appendChild(b),e.hasChildNodes()||a.remove(e)},To=function(a){var b,c,d,e,f,g,h=a.dom,i=[];b=h.getParent(a.selection.getStart(),"table"),c=h.getParent(a.selection.getStart(),"td,th"),Ao.each(b.rows,function(a){Ao.each(a.cells,function(b){if(h.getAttrib(b,"data-mce-selected")||b===c)return i.push(a),!1})}),d=i[0],d&&(f=i.length>1?{height:"",scope:"",style:"","class":"",align:"",type:d.parentNode.nodeName.toLowerCase()}:Ro(a,d),mo(a).length>0&&(e={name:"class",type:"listbox",label:"Class",values:Lo.buildListItems(mo(a),function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({block:"tr",classes:[b.value]})})})}),g={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},e]},go(a)?a.windowManager.open({title:"Row properties",data:f,bodyType:"tabpanel",body:[{title:"General",type:"form",items:g},Lo.createStyleForm(a)],onsubmit:N.curry(j,a,i,f)}):a.windowManager.open({title:"Row properties",data:f,body:g,onsubmit:N.curry(j,a,i,f)}))},Uo={open:To},Vo=tinymce.util.Tools.resolve("tinymce.Env"),Wo={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},Xo=function(){return lb.fromTag("table")},Yo=function(){return lb.fromTag("tbody")},Zo=function(){return lb.fromTag("tr")},$o=function(){return lb.fromTag("th")},_o=function(){return lb.fromTag("td")},ap=function(a,b,c,d,e){void 0===e&&(e=Wo);var f=Xo();mf.setAll(f,e.styles),Ud.setAll(f,e.attributes);var g=Yo();tf.append(f,g);for(var h=[],i=0;i<a;i++){for(var j=Zo(),k=0;k<b;k++){var l=i<c||k<d?$o():_o();k<d&&Ud.set(l,"scope","row"),i<c&&Ud.set(l,"scope","col"),tf.append(l,lb.fromTag("br")),e.percentages&&mf.set(l,"width",100/b+"%"),tf.append(j,l)}h.push(j)}return yf.append(g,h),f},bp=function(a){return a.dom().innerHTML},cp=function(a,b){var c=xd.owner(a),d=c.dom(),e=lb.fromDom(d.createDocumentFragment()),f=sg.fromHtml(b,d);yf.append(e,f),Cf.empty(a),tf.append(a,e)},dp=function(a){var b=lb.fromTag("div"),c=lb.fromDom(a.dom().cloneNode(!0));return tf.append(b,c),bp(b)},ep={get:bp,set:cp,getOuter:dp},fp=function(a,b){a.selection.select(b.dom(),!0),a.selection.collapse(!0)},gp=function(a,b){we.descendant(b,"td,th").each(N.curry(fp,a))},hp=function(a,b){Ba.each(ie.descendants(b,"tr"),function(b){to(a,b.dom()),Ba.each(ie.descendants(b,"th,td"),function(b){uo(a,b.dom())})})},ip=function(a){return X.isString(a)&&a.indexOf("%")!==-1},jp=function(a,b,c){var d=bo(a),e={styles:d,attributes:ao(a),percentages:ip(d.width)&&!po(a)},f=ap(c,b,0,0,e);Ud.set(f,"data-mce-id","__mce");var g=ep.getOuter(f);return a.insertContent(g),we.descendant(Ln(a),'table[data-mce-id="__mce"]').map(function(b){return po(a)&&mf.set(b,"width",mf.get(b,"width")),Ud.remove(b,"data-mce-id"),hp(a,b),gp(a,b),b.dom()}).getOr(null)},kp={insert:jp},lp=function(a,b){var c=a.dom,d={width:c.getStyle(b,"width")||c.getAttrib(b,"width"),height:c.getStyle(b,"height")||c.getAttrib(b,"height"),cellspacing:c.getStyle(b,"border-spacing")||c.getAttrib(b,"cellspacing"),cellpadding:c.getAttrib(b,"data-mce-cell-padding")||c.getAttrib(b,"cellpadding")||Go.getTDTHOverallStyle(a.dom,b,"padding"),border:c.getAttrib(b,"data-mce-border")||c.getAttrib(b,"border")||Go.getTDTHOverallStyle(a.dom,b,"border"),borderColor:c.getAttrib(b,"data-mce-border-color"),caption:!!c.select("caption",b)[0],"class":c.getAttrib(b,"class")};return Ao.each("left center right".split(" "),function(c){a.formatter.matchNode(b,"align"+c)&&(d.align=c)}),ho(a)&&Ao.extend(d,Lo.extractAdvancedStyles(c,b)),d},mp=function(a,b,c){var d=a.dom,e={},f={};if(e["class"]=c["class"],f.height=Qn(c.height),d.getAttrib(b,"width")&&!ko(a)?e.width=Pn(c.width):f.width=Qn(c.width),ko(a)?(f["border-width"]=Qn(c.border),f["border-spacing"]=Qn(c.cellspacing),Ao.extend(e,{"data-mce-border-color":c.borderColor,"data-mce-cell-padding":c.cellpadding,"data-mce-border":c.border})):Ao.extend(e,{border:c.border,cellpadding:c.cellpadding,cellspacing:c.cellspacing}),ko(a)&&b.children)for(var g=0;g<b.children.length;g++)k(d,b.children[g],{"border-width":Qn(c.border),"border-color":c.borderColor,padding:Qn(c.cellpadding)});c.style?Ao.extend(f,d.parseStyle(c.style)):f=Ao.extend({},d.parseStyle(d.getAttrib(b,"style")),f),e.style=d.serializeStyle(f),d.setAttribs(b,e)},np=function(a,b,c){var d,e,f=a.dom;Lo.updateStyleField(a,c),e=c.control.rootControl.toJSON(),e["class"]===!1&&delete e["class"],a.undoManager.transact(function(){b||(b=kp.insert(a,e.cols||1,e.rows||1)),mp(a,b,e),d=f.select("caption",b)[0],d&&!e.caption&&f.remove(d),!d&&e.caption&&(d=f.create("caption"),d.innerHTML=Vo.ie?"Â ":'<br data-mce-bogus="1"/>',b.insertBefore(d,b.firstChild)),Go.unApplyAlign(a,b),e.align&&Go.applyAlign(a,b,e.align),a.focus(),a.addVisual()})},op=function(a,b){var c,d,e,f,g,h=a.dom,i={};b===!0?(c=h.getParent(a.selection.getStart(),"table"),c&&(i=lp(a,c))):(d={label:"Cols",name:"cols"},e={label:"Rows",name:"rows"}),no(a).length>0&&(i["class"]&&(i["class"]=i["class"].replace(/\s*mce\-item\-table\s*/g,"")),f={name:"class",type:"listbox",label:"Class",values:Lo.buildListItems(no(a),function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({block:"table",classes:[b.value]})})})}),g={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:io(a)?[d,e,{label:"Width",name:"width",onchange:N.curry(Lo.updateStyleField,a)},{label:"Height",name:"height",onchange:N.curry(Lo.updateStyleField,a)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[d,e,{label:"Width",name:"width",onchange:N.curry(Lo.updateStyleField,a)
},{label:"Height",name:"height",onchange:N.curry(Lo.updateStyleField,a)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},f]},ho(a)?a.windowManager.open({title:"Table properties",data:i,bodyType:"tabpanel",body:[{title:"General",type:"form",items:g},Lo.createStyleForm(a)],onsubmit:N.curry(np,a,c)}):a.windowManager.open({title:"Table properties",data:i,body:g,onsubmit:N.curry(np,a,c)})},pp={open:op},qp=Ao.each,rp=function(a,b,c,d,e){var f=On(a),g=function(){var b=lb.fromDom(a.dom.getParent(a.selection.getStart(),"th,td")),c=Ke.table(b,f);c.filter(N.not(f)).each(function(b){var c=lb.fromText("");tf.after(b,c),Cf.remove(b);var d=a.dom.createRng();d.setStart(c.dom(),0),d.setEnd(c.dom(),0),a.selection.setRng(d)})},h=function(){return lb.fromDom(a.dom.getParent(a.selection.getStart(),"th,td"))},i=function(a){return Ke.table(a,f)},j=function(a){return{width:Mn(a.dom()),height:Mn(a.dom())}},k=function(a,b,c){var d=j(c);b.width===d.width&&b.height===d.height||(vo(a,c.dom(),b.width,b.height),wo(a,c.dom(),d.width,d.height))},l=function(b){var e=h(),f=i(e);f.each(function(f){var g=Xh.forMenu(d,f,e),h=j(f);b(f,g).each(function(b){k(a,h,f),a.selection.setRng(b),a.focus(),c.clear(f),Rn(f)})})},m=function(b){var c=h(),e=i(c);return e.bind(function(b){var e=lb.fromDom(a.getDoc()),f=Xh.forMenu(d,b,c),g=ng.cellOperations(N.noop,e,U.none());return zo.copyRows(b,f,g)})},n=function(b){e.get().each(function(e){var f=Ba.map(e,function(a){return Qf.deep(a)}),g=h(),j=i(g);j.bind(function(e){var h=lb.fromDom(a.getDoc()),i=ng.paste(h),j=Xh.pasteRows(d,e,g,f,i);b(e,j).each(function(b){a.selection.setRng(b),a.focus(),c.clear(e)})})})};qp({mceTableSplitCells:function(){l(b.unmergeCells)},mceTableMergeCells:function(){l(b.mergeCells)},mceTableInsertRowBefore:function(){l(b.insertRowsBefore)},mceTableInsertRowAfter:function(){l(b.insertRowsAfter)},mceTableInsertColBefore:function(){l(b.insertColumnsBefore)},mceTableInsertColAfter:function(){l(b.insertColumnsAfter)},mceTableDeleteCol:function(){l(b.deleteColumn)},mceTableDeleteRow:function(){l(b.deleteRow)},mceTableCutRow:function(a){e.set(m()),l(b.deleteRow)},mceTableCopyRow:function(a){e.set(m())},mceTablePasteRowBefore:function(a){n(b.pasteRowsBefore)},mceTablePasteRowAfter:function(a){n(b.pasteRowsAfter)},mceTableDelete:g},function(b,c){a.addCommand(c,b)}),qp({mceInsertTable:N.curry(pp.open,a),mceTableProps:N.curry(pp.open,a,!0),mceTableRowProps:N.curry(Uo.open,a),mceTableCellProps:N.curry(Qo.open,a)},function(b,c){a.addCommand(c,function(a,c){b(c)})})},sp={registerCommands:rp},tp=function(a){var b=U.from(a.dom().documentElement).map(lb.fromDom).getOr(a);return{parent:N.constant(b),view:N.constant(a),origin:N.constant(Wi(0,0))}},up=function(a,b){var c=N.curry(aj.absolute,b);return{parent:N.constant(b),view:N.constant(a),origin:c}},vp=function(a,b){return{parent:N.constant(b),view:N.constant(a),origin:N.constant(Wi(0,0))}},wp={only:tp,detached:up,body:vp},xp=function(a){var b=La.map(a,function(a){return{bind:a.bind,unbind:a.unbind}}),c=La.map(a,function(a){return a.trigger});return{registry:b,trigger:c}},yp={create:xp},zp=yj.exactly(["compare","extract","mutate","sink"]),Ap=yj.exactly(["element","start","stop","destroy"]),Bp=yj.exactly(["forceDrop","drop","move","delayDrop"]),Cp={mode:zp,sink:Ap,api:Bp},Dp=Qk.css("ephox-dragster"),Ep={resolve:Dp.resolve},Fp=function(a,b,c,d,e,f,g){return{target:N.constant(a),x:N.constant(b),y:N.constant(c),stop:d,prevent:e,kill:f,raw:N.constant(g)}},Gp=function(a,b){return function(c){if(a(c)){var d=lb.fromDom(c.target),e=function(){c.stopPropagation()},f=function(){c.preventDefault()},g=N.compose(f,e),h=Fp(d,c.clientX,c.clientY,e,f,g,c);b(h)}}},Hp=function(a,b,c,d,e){var f=Gp(c,d);return a.dom().addEventListener(b,f,e),{unbind:N.curry(Kp,a,b,f,e)}},Ip=function(a,b,c,d){return Hp(a,b,c,d,!1)},Jp=function(a,b,c,d){return Hp(a,b,c,d,!0)},Kp=function(a,b,c,d){a.dom().removeEventListener(b,c,d)},Lp={bind:Ip,capture:Jp},Mp=N.constant(!0),Np=function(a,b,c){return Lp.bind(a,b,Mp,c)},Op=function(a,b,c){return Lp.capture(a,b,Mp,c)},Pp={bind:Np,capture:Op},Qp=function(a,b){return Wi(b.left()-a.left(),b.top()-a.top())},Rp=function(a){return U.some(Wi(a.x(),a.y()))},Sp=function(a,b){a.mutate(b.left(),b.top())},Tp=function(a,b){var c=m(b),d=Pp.bind(c.element(),"mousedown",a.forceDrop),e=Pp.bind(c.element(),"mouseup",a.drop),f=Pp.bind(c.element(),"mousemove",a.move),g=Pp.bind(c.element(),"mouseout",a.delayDrop),h=function(){c.destroy(),e.unbind(),f.unbind(),g.unbind(),d.unbind()},i=function(a){tf.append(a,c.element())},j=function(){Cf.remove(c.element())};return Cp.sink({element:c.element,start:i,stop:j,destroy:h})},Up=Cp.mode({compare:Qp,extract:Rp,sink:Tp,mutate:Sp}),Vp=function(a,b){var c=null,d=null,e=function(){null!==c&&(clearTimeout(c),c=null,d=null)},f=function(){d=arguments,null===c&&(c=setTimeout(function(){a.apply(null,d),c=null,d=null},b))};return{cancel:e,throttle:f}},Wp=function(a,b){var c=null,d=function(){null!==c&&(clearTimeout(c),c=null)},e=function(){var d=arguments;null===c&&(c=setTimeout(function(){a.apply(null,d),c=null,d=null},b))};return{cancel:d,throttle:e}},Xp=function(a,b){var c=null,d=function(){null!==c&&(clearTimeout(c),c=null)},e=function(){var d=arguments;null!==c&&clearTimeout(c),c=setTimeout(function(){a.apply(null,d),c=null,d=null},b)};return{cancel:d,throttle:e}},Yp={adaptable:Vp,first:Wp,last:Xp},Zp=function(a,b,c){var d=!1,e=yp.create({start:l([]),stop:l([])}),f=p(),g=function(){o.stop(),f.isOn()&&(f.off(),e.trigger.stop())},h=Yp.last(g,200),i=function(a){o.start(a),f.on(),e.trigger.start()},j=function(a,c){h.cancel(),f.onEvent(a,b)};f.events.move.bind(function(c){b.mutate(a,c.info())});var k=function(){d=!0},m=function(){d=!1},n=function(a){return function(){var b=Array.prototype.slice.call(arguments,0);if(d)return a.apply(null,b)}},o=b.sink(Cp.api({forceDrop:g,drop:n(g),move:n(j),delayDrop:n(h.throttle)}),c),q=function(){o.destroy()};return{element:o.element,go:i,on:k,off:m,destroy:q,events:e.registry}},$p={setup:Zp},_p=function(a,b){var c=void 0!==b?b:{},d=void 0!==c.mode?c.mode:Up;return $p.setup(a,d,b)},aq={transform:_p},bq=function(a){return we.first(a).isSome()},cq=function(a,b,c){return we.ancestor(a,b,c).isSome()},dq=function(a,b){return we.sibling(a,b).isSome()},eq=function(a,b){return we.child(a,b).isSome()},fq=function(a,b){return we.descendant(a,b).isSome()},gq=function(a,b,c){return we.closest(a,b,c).isSome()},hq={any:bq,ancestor:cq,sibling:dq,child:eq,descendant:fq,closest:gq},iq=Sk.resolve("resizer-bar-dragging"),jq=function(){var a=lb.fromTag("div");return mf.setAll(a,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),tf.append(Yd.body(),a),a},kq=function(a,b){return a.inline?wp.body(Ln(a),jq()):wp.only(lb.fromDom(a.getDoc()))},lq=function(a,b){a.inline&&Cf.remove(b.parent())},mq={get:kq,remove:lq},nq=function(a){var b,c,d=U.none(),e=U.none(),f=U.none(),g=/(\d+(\.\d+)?)%/,i=function(a){return"TABLE"===a.nodeName},j=function(b){return a.dom.getStyle(b,"width")||a.dom.getAttrib(b,"width")},k=function(){return e},l=function(){return f.getOr(wp.only(lb.fromDom(a.getBody())))},m=function(){e.each(function(a){a.destroy()}),f.each(function(b){mq.remove(a,b)})};return a.on("init",function(){var b=h(Yn.directionAt),c=mq.get(a);if(f=U.some(c),ro(a)&&co(a)){var g=t(c,b);g.on(),g.events.startDrag.bind(function(b){d=U.some(a.selection.getRng())}),g.events.beforeResize.bind(function(b){var c=b.table().dom();vo(a,c,Mn(c),Nn(c))}),g.events.afterResize.bind(function(b){var c=b.table(),e=c.dom();Rn(c),d.each(function(b){a.selection.setRng(b),a.focus()}),wo(a,e,Mn(e),Nn(e)),a.undoManager.add()}),e=U.some(g)}}),a.on("ObjectResizeStart",function(a){var d=a.target;i(d)&&(b=a.width,c=j(d))}),a.on("ObjectResized",function(d){var e=d.target;if(i(e)){var f=e;if(g.test(c)){var h=parseFloat(g.exec(c)[1]),j=d.width*h/b;a.dom.setStyle(f,"width",j+"%")}else{var k=[];Ao.each(f.rows,function(b){Ao.each(b.cells,function(b){var c=a.dom.getStyle(b,"width",!0);k.push({cell:b,width:c})})}),Ao.each(k,function(b){a.dom.setStyle(b.cell,"width",b.width),a.dom.setAttrib(b.cell,"width",null)})}}}),{lazyResize:k,lazyWire:l,destroy:m}},oq=function(a){return sq(function(b,c,d,e){return b(a)})},pq=function(a){return sq(function(b,c,d,e){return c(a)})},qq=function(a,b){return sq(function(c,d,e,f){return e(a,b)})},rq=function(a){return sq(function(b,c,d,e){return e(a)})},sq=function(a){return{fold:a}},tq={none:oq,first:pq,middle:qq,last:rq},uq=function(a,b){return Ke.table(a,b).bind(function(b){var c=Ke.cells(b),d=Ba.findIndex(c,function(b){return cd.eq(a,b)});return d.map(function(a){return{index:N.constant(a),all:N.constant(c)}})})},vq=function(a,b){var c=uq(a,b);return c.fold(function(){return tq.none(a)},function(b){return b.index()+1<b.all().length?tq.middle(a,b.all()[b.index()+1]):tq.last(a)})},wq=function(a,b){var c=uq(a,b);return c.fold(function(){return tq.none()},function(b){return b.index()-1>=0?tq.middle(a,b.all()[b.index()-1]):tq.first(a)})},xq={next:vq,prev:wq},yq=Kh.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),zq=function(a,b,c,d){return a.fold(b,c,d)},Aq=function(a){return a.fold(N.identity,N.identity,N.identity)},Bq={before:yq.before,on:yq.on,after:yq.after,cata:zq,getStart:Aq},Cq=Kh.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Dq=Ta.immutable("start","soffset","finish","foffset"),Eq=function(a){return Cq.exact(a.start(),a.soffset(),a.finish(),a.foffset())},Fq=function(a){return a.match({domRange:function(a){return lb.fromDom(a.startContainer)},relative:function(a,b){return Bq.getStart(a)},exact:function(a,b,c,d){return a}})},Gq=function(a){var b=Fq(a);return xd.defaultView(b)},Hq={domRange:Cq.domRange,relative:Cq.relative,exact:Cq.exact,exactFromRange:Eq,range:Dq,getWin:Gq},Iq=function(a,b,c,d){var e=xd.owner(a),f=e.dom().createRange();return f.setStart(a.dom(),b),f.setEnd(c.dom(),d),f},Jq=function(a,b,c,d){var e=Iq(a,b,c,d);return lb.fromDom(e.commonAncestorContainer)},Kq=function(a,b,c,d){var e=Iq(a,b,c,d),f=cd.eq(a,c)&&b===d;return e.collapsed&&!f},Lq={after:Kq,commonAncestorContainer:Jq},Mq=function(a,b){var c=b||document,d=c.createDocumentFragment();return Ba.each(a,function(a){d.appendChild(a.dom())}),lb.fromDom(d)},Nq={fromElements:Mq},Oq=function(a,b){var c=a.document.createRange();return Pq(c,b),c},Pq=function(a,b){a.selectNodeContents(b.dom())},Qq=function(a,b){return b.compareBoundaryPoints(a.END_TO_START,a)<1&&b.compareBoundaryPoints(a.START_TO_END,a)>-1},Rq=function(a){return a.document.createRange()},Sq=function(a,b){b.fold(function(b){a.setStartBefore(b.dom())},function(b,c){a.setStart(b.dom(),c)},function(b){a.setStartAfter(b.dom())})},Tq=function(a,b){b.fold(function(b){a.setEndBefore(b.dom())},function(b,c){a.setEnd(b.dom(),c)},function(b){a.setEndAfter(b.dom())})},Uq=function(a,b){Xq(a),a.insertNode(b.dom())},Vq=function(a,b,c){var d=a.document.createRange();return Sq(d,b),Tq(d,c),d},Wq=function(a,b,c,d,e){var f=a.document.createRange();return f.setStart(b.dom(),c),f.setEnd(d.dom(),e),f},Xq=function(a){a.deleteContents()},Yq=function(a){var b=a.cloneContents();return lb.fromDom(b)},Zq=function(a){return{left:N.constant(a.left),top:N.constant(a.top),right:N.constant(a.right),bottom:N.constant(a.bottom),width:N.constant(a.width),height:N.constant(a.height)}},$q=function(a){var b=a.getClientRects(),c=b.length>0?b[0]:a.getBoundingClientRect();return c.width>0||c.height>0?U.some(c).map(Zq):U.none()},_q=function(a){var b=a.getBoundingClientRect();return b.width>0||b.height>0?U.some(b).map(Zq):U.none()},ar=function(a){return a.toString()},br={create:Rq,replaceWith:Uq,selectNodeContents:Oq,selectNodeContentsUsing:Pq,relativeToNative:Vq,exactToNative:Wq,deleteContents:Xq,cloneFragment:Yq,getFirstRect:$q,getBounds:_q,isWithin:Qq,toString:ar},cr=Kh.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),dr=function(a,b,c){return b(lb.fromDom(c.startContainer),c.startOffset,lb.fromDom(c.endContainer),c.endOffset)},er=function(a,b){return b.match({domRange:function(a){return{ltr:N.constant(a),rtl:U.none}},relative:function(b,c){return{ltr:Mb.cached(function(){return br.relativeToNative(a,b,c)}),rtl:Mb.cached(function(){return U.some(br.relativeToNative(a,c,b))})}},exact:function(b,c,d,e){return{ltr:Mb.cached(function(){return br.exactToNative(a,b,c,d,e)}),rtl:Mb.cached(function(){return U.some(br.exactToNative(a,d,e,b,c))})}}})},fr=function(a,b){var c=b.ltr();if(c.collapsed){var d=b.rtl().filter(function(a){return a.collapsed===!1});return d.map(function(a){return cr.rtl(lb.fromDom(a.endContainer),a.endOffset,lb.fromDom(a.startContainer),a.startOffset)}).getOrThunk(function(){return dr(a,cr.ltr,c)})}return dr(a,cr.ltr,c)},gr=function(a,b){var c=er(a,b);return fr(a,c)},hr=function(a,b){var c=gr(a,b);return c.match({ltr:function(b,c,d,e){var f=a.document.createRange();return f.setStart(b.dom(),c),f.setEnd(d.dom(),e),f},rtl:function(b,c,d,e){var f=a.document.createRange();return f.setStart(d.dom(),e),f.setEnd(b.dom(),c),f}})},ir={ltr:cr.ltr,rtl:cr.rtl,diagnose:gr,asLtrRange:hr},jr=function(a,b,c,d,e){if(0===e)return 0;if(b===d)return e-1;for(var f=d,g=1;g<e;g++){var h=a(g),i=Math.abs(b-h.left);if(c>h.bottom);else{if(c<h.top||i>f)return g-1;f=i}}return 0},kr=function(a,b,c){return b>=a.left&&b<=a.right&&c>=a.top&&c<=a.bottom},lr={inRect:kr,searchForPoint:jr},mr=function(a,b,c,d,e){var f=function(c){var d=a.dom().createRange();return d.setStart(b.dom(),c),d.collapse(!0),d},g=function(a){var b=f(a);return b.getBoundingClientRect()},h=Vf.get(b).length,i=lr.searchForPoint(g,c,d,e.right,h);return f(i)},nr=function(a,b,c,d){var e=a.dom().createRange();e.selectNode(b.dom());var f=e.getClientRects(),g=ik.findMap(f,function(a){return lr.inRect(a,c,d)?U.some(a):U.none()});return g.map(function(e){return mr(a,b,c,d,e)})},or={locate:nr},pr=function(a,b,c,d){var e=a.dom().createRange(),f=xd.children(b);return ik.findMap(f,function(b){return e.selectNode(b.dom()),lr.inRect(e.getBoundingClientRect(),c,d)?qr(a,b,c,d):U.none()})},qr=function(a,b,c,d){var e=Jd.isText(b)?or.locate:pr;return e(a,b,c,d)},rr=function(a,b,c,d){var e=a.dom().createRange();e.selectNode(b.dom());var f=e.getBoundingClientRect(),g=Math.max(f.left,Math.min(f.right,c)),h=Math.max(f.top,Math.min(f.bottom,d));return qr(a,b,g,h)},sr={locate:rr},tr=!0,ur=!1,vr=function(a,b){return b-a.left<a.right-b?tr:ur},wr=function(a,b,c){var d=a.dom().createRange();return d.selectNode(b.dom()),d.collapse(c),d},xr=function(a,b,c){var d=a.dom().createRange();d.selectNode(b.dom());var e=d.getBoundingClientRect(),f=vr(e,c),g=f===tr?fg.first:fg.last;return g(b).map(function(b){return wr(a,b,f)})},yr=function(a,b,c){var d=b.dom().getBoundingClientRect(),e=vr(d,c);return U.some(wr(a,b,e))},zr=function(a,b,c){var d=0===xd.children(b).length?yr:xr;return d(a,b,c)},Ar={search:zr},Br=function(a,b,c){return U.from(a.dom().caretPositionFromPoint(b,c)).bind(function(b){if(null===b.offsetNode)return U.none();var c=a.dom().createRange();return c.setStart(b.offsetNode,b.offset),c.collapse(),U.some(c)})},Cr=function(a,b,c){return U.from(a.dom().caretRangeFromPoint(b,c))},Dr=function(a,b,c,d){var e=a.dom().createRange();e.selectNode(b.dom());var f=e.getBoundingClientRect(),g=Math.max(f.left,Math.min(f.right,c)),h=Math.max(f.top,Math.min(f.bottom,d));return sr.locate(a,b,g,h)},Er=function(a,b,c){return lb.fromPoint(a,b,c).bind(function(d){var e=function(){return Ar.search(a,d,b)};return 0===xd.children(d).length?e():Dr(a,d,b,c).orThunk(e)})},Fr=document.caretPositionFromPoint?Br:document.caretRangeFromPoint?Cr:Er,Gr=function(a,b,c){var d=lb.fromDom(a.document);return Fr(d,b,c).map(function(a){return Hq.range(lb.fromDom(a.startContainer),a.startOffset,lb.fromDom(a.endContainer),a.endOffset)})},Hr={fromPoint:Gr},Ir=function(a,b,c,d){var e=br.create(a),f=tb.is(b,d)?[b]:[],g=f.concat(ie.descendants(b,d));return Ba.filter(g,function(a){return br.selectNodeContentsUsing(e,a),br.isWithin(c,e)})},Jr=function(a,b,c){var d=ir.asLtrRange(a,b),e=lb.fromDom(d.commonAncestorContainer);return Jd.isElement(e)?Ir(a,e,d,c):[]},Kr={find:Jr},Lr=function(a,b){var c=Jd.name(a);return"input"===c?Bq.after(a):Ba.contains(["br","img"],c)?0===b?Bq.before(a):Bq.after(a):Bq.on(a,b)},Mr=function(a,b){var c=a.fold(Bq.before,Lr,Bq.after),d=b.fold(Bq.before,Lr,Bq.after);return Hq.relative(c,d)},Nr=function(a,b,c,d){var e=Lr(a,b),f=Lr(c,d);return Hq.relative(e,f)},Or=function(a){return a.match({domRange:function(a){var b=lb.fromDom(a.startContainer),c=lb.fromDom(a.endContainer);return Nr(b,a.startOffset,c,a.endOffset)},relative:Mr,exact:Nr})},Pr={beforeSpecial:Lr,preprocess:Or,preprocessRelative:Mr,preprocessExact:Nr},Qr=function(a,b){U.from(a.getSelection()).each(function(a){a.removeAllRanges(),a.addRange(b)})},Rr=function(a,b,c,d,e){var f=br.exactToNative(a,b,c,d,e);Qr(a,f)},Sr=function(a,b,c){return Kr.find(a,b,c)},Tr=function(a,b){return ir.diagnose(a,b).match({ltr:function(b,c,d,e){Rr(a,b,c,d,e)},rtl:function(b,c,d,e){var f=a.getSelection();f.setBaseAndExtent?f.setBaseAndExtent(b.dom(),c,d.dom(),e):f.extend?(f.collapse(b.dom(),c),f.extend(d.dom(),e)):Rr(a,d,e,b,c)}})},Ur=function(a,b,c,d,e){var f=Pr.preprocessExact(b,c,d,e);Tr(a,f)},Vr=function(a,b,c){var d=Pr.preprocessRelative(b,c);Tr(a,d)},Wr=function(a){var b=Hq.getWin(a).dom(),c=function(a,c,d,e){return br.exactToNative(b,a,c,d,e)},d=Pr.preprocess(a);return ir.diagnose(b,d).match({ltr:c,rtl:c})},Xr=function(a){if(a.rangeCount>0){var b=a.getRangeAt(0),c=a.getRangeAt(a.rangeCount-1);return U.some(Hq.range(lb.fromDom(b.startContainer),b.startOffset,lb.fromDom(c.endContainer),c.endOffset))}return U.none()},Yr=function(a){var b=lb.fromDom(a.anchorNode),c=lb.fromDom(a.focusNode);return Lq.after(b,a.anchorOffset,c,a.focusOffset)?U.some(Hq.range(lb.fromDom(a.anchorNode),a.anchorOffset,lb.fromDom(a.focusNode),a.focusOffset)):Xr(a)},Zr=function(a,b){var c=br.selectNodeContents(a,b);Qr(a,c)},$r=function(a,b){var c=br.selectNodeContents(a,b);return Hq.range(lb.fromDom(c.startContainer),c.startOffset,lb.fromDom(c.endContainer),c.endOffset)},_r=function(a){return U.from(a.getSelection()).filter(function(a){return a.rangeCount>0}).bind(Yr)},as=function(a){return _r(a).map(function(a){return Hq.exact(a.start(),a.soffset(),a.finish(),a.foffset())})},bs=function(a,b){var c=ir.asLtrRange(a,b);return br.getFirstRect(c)},cs=function(a,b){var c=ir.asLtrRange(a,b);return br.getBounds(c)},ds=function(a,b,c){return Hr.fromPoint(a,b,c)},es=function(a,b){var c=ir.asLtrRange(a,b);return br.toString(c)},fs=function(a){var b=a.getSelection();b.removeAllRanges()},gs=function(a,b){var c=ir.asLtrRange(a,b);return br.cloneFragment(c)},hs=function(a,b,c){var d=ir.asLtrRange(a,b),e=Nq.fromElements(c,a.document);br.replaceWith(d,e)},is=function(a,b){var c=ir.asLtrRange(a,b);br.deleteContents(c)},js=function(a,b,c,d){return cd.eq(a,c)&&b===d},ks={setExact:Ur,getExact:_r,get:as,setRelative:Vr,toNative:Wr,setToElement:Zr,clear:fs,clone:gs,replace:hs,deleteAt:is,forElement:$r,getFirstRect:bs,getBounds:cs,getAtPoint:ds,findWithin:Sr,getAsString:es,isCollapsed:js},ls=tinymce.util.Tools.resolve("tinymce.util.VK"),ms=function(a,b,c,d){return qs(a,b,xq.next(c),d)},ns=function(a,b,c,d){return qs(a,b,xq.prev(c),d)},os=function(a,b){var c=Hq.exact(b,0,b,0);return ks.toNative(c)},ps=function(a,b){var c=ie.descendants(b,"tr");return Ba.last(c).bind(function(b){return we.descendant(b,"td,th").map(function(b){return os(a,b)})})},qs=function(a,b,c,d,e){return c.fold(U.none,U.none,function(b,c){return fg.first(c).map(function(b){return os(a,b)})},function(c){return Ke.table(c,b).bind(function(b){var e=Xh.noMenu(c);return a.undoManager.transact(function(){d.insertRowsAfter(b,e)}),ps(a,b)})})},rs=["table","li","dl"],ss=function(a,b,c,d){if(a.keyCode===ls.TAB){var e=Ln(b),f=function(a){var b=Jd.name(a);return cd.eq(a,e)||Ba.contains(rs,b)},g=b.selection.getRng();if(g.collapsed){var h=lb.fromDom(g.startContainer);Ke.cell(h,f).each(function(e){a.preventDefault();var g=a.shiftKey?ns:ms,h=g(b,f,e,c,d);h.each(function(a){b.selection.setRng(a)})})}}},ts={handle:ss},us=Ta.immutable("selection","kill"),vs={response:us},ws=function(a){return function(b){return b===a}},xs=ws(38),ys=ws(40),zs=function(a){return a>=37&&a<=40},As={ltr:{isBackward:ws(37),isForward:ws(39)},rtl:{isBackward:ws(39),isForward:ws(37)},isUp:xs,isDown:ys,isNavigation:zs},Bs=function(a,b){var c=ir.asLtrRange(a,b);return{start:N.constant(lb.fromDom(c.startContainer)),soffset:N.constant(c.startOffset),finish:N.constant(lb.fromDom(c.endContainer)),foffset:N.constant(c.endOffset)}},Cs=function(a,b,c,d){return{start:N.constant(Bq.on(a,b)),finish:N.constant(Bq.on(c,d))}},Ds={convertToRange:Bs,makeSitus:Cs},Es=Wc.detect().browser.isSafari(),Fs=function(a){var b=void 0!==a?a.dom():document,c=b.body.scrollLeft||b.documentElement.scrollLeft,d=b.body.scrollTop||b.documentElement.scrollTop;return Wi(c,d)},Gs=function(a,b,c){var d=void 0!==c?c.dom():document,e=d.defaultView;e.scrollTo(a,b)},Hs=function(a,b,c){var d=void 0!==c?c.dom():document,e=d.defaultView;e.scrollBy(a,b)},Is=function(a,b){var c=aj.absolute(b),d=lb.fromDom(a.document);Gs(c.left(),c.top(),d)},Js=function(a,b){var c=Fs(a);b();var d=Fs(a);c.top()===d.top()&&c.left()===d.left()||Gs(c.left(),c.top(),a)},Ks=function(a){var b=U.none(),c=function(){b=U.some(Fs(a))},d=function(){b.each(function(b){Gs(b.left(),b.top(),a)})};return c(),{save:c,restore:d}},Ls=function(a,b){Es&&X.isFunction(a.dom().scrollIntoViewIfNeeded)?a.dom().scrollIntoViewIfNeeded(!1):a.dom().scrollIntoView(b)},Ms=function(a,b){var c=b.dom().getBoundingClientRect(),d=a.dom().getBoundingClientRect();d.top<c.top?Ls(a,!0):d.bottom>c.bottom&&Ls(a,!1)},Ns=function(){var a=lb.fromHtml('<div style="width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px;"></div>');tf.after(Yd.body(),a);var b=a.dom().offsetWidth-a.dom().clientWidth;return Cf.remove(a),b},Os={get:Fs,to:Gs,by:Hs,preserve:Js,capture:Ks,intoView:Ls,intoViewIfNeeded:Ms,setToElement:Is,scrollBarWidth:Ns},Ps=function(a,b,c,d,e,f,g){return cd.eq(c,e)&&d===f?U.none():we.closest(c,"td,th",b).bind(function(c){return we.closest(e,"td,th",b).bind(function(d){return Qs(a,b,c,d,g)})})},Qs=function(a,b,c,d,e){return cd.eq(c,d)?U.none():xh.identify(c,d,b).bind(function(b){var d=b.boxes().getOr([]);return d.length>0?(e(a,d,b.start(),b.finish()),U.some(vs.response(U.some(Ds.makeSitus(c,0,c,bg.getEnd(c))),!0))):U.none()})},Rs=function(a,b,c,d,e){var f=function(a){return e.clear(c),e.selectRange(c,a.boxes(),a.start(),a.finish()),a.boxes()};return xh.shiftSelection(d,a,b,e.firstSelectedSelector(),e.lastSelectedSelector()).map(f)},Ss={sync:Ps,detect:Qs,update:Rs},Ts=Ta.immutableBag(["left","top","right","bottom"],[]),Us=function(a,b){return Ts({left:a.left(),top:a.top()+b,right:a.right(),bottom:a.bottom()+b})},Vs=function(a,b){return Ts({left:a.left(),top:a.top()-b,right:a.right(),bottom:a.bottom()-b})},Ws=function(a,b){var c=a.bottom()-a.top();return Ts({left:a.left(),top:b-c,right:a.right(),bottom:b})},Xs=function(a,b){var c=a.bottom()-a.top();return Ts({left:a.left(),top:b,right:a.right(),bottom:b+c})},Ys=function(a,b,c){return Ts({left:a.left()+b,top:a.top()+c,right:a.right()+b,bottom:a.bottom()+c})},Zs=function(a){return a.top()},$s=function(a){return a.bottom()},_s=function(a){return"("+a.left()+", "+a.top()+") -> ("+a.right()+", "+a.bottom()+")"},at={nu:Ts,moveUp:Vs,moveDown:Us,moveBottomTo:Ws,moveTopTo:Xs,getTop:Zs,getBottom:$s,translate:Ys,toString:_s},bt=function(a,b,c){return c>=0&&c<bg.getEnd(b)?a.getRangedRect(b,c,b,c+1):c>0?a.getRangedRect(b,c-1,b,c):U.none()},ct=function(a){return at.nu({left:a.left,top:a.top,right:a.right,bottom:a.bottom})},dt=function(a,b){return U.some(a.getRect(b))},et=function(a,b,c){return Jd.isElement(b)?dt(a,b).map(ct):Jd.isText(b)?bt(a,b,c).map(ct):U.none()},ft=function(a,b){return Jd.isElement(b)?dt(a,b).map(ct):Jd.isText(b)?a.getRangedRect(b,0,b,bg.getEnd(b)).map(ct):U.none()},gt={getBoxAt:et,getEntireBox:ft},ht=Ta.immutable("item","mode"),it=function(a,b,c,d){var e=void 0!==d?d:jt;return a.property().parent(b).map(function(a){return ht(a,e)})},jt=function(a,b,c,d){var e=void 0!==d?d:kt;return c.sibling(a,b).map(function(a){return ht(a,e)})},kt=function(a,b,c,d){var e=void 0!==d?d:kt,f=a.property().children(b),g=c.first(f);return g.map(function(a){return ht(a,e)})},lt=[{current:it,next:jt,fallback:U.none()},{current:jt,next:kt,fallback:U.some(it)},{current:kt,next:kt,fallback:U.some(jt)}],mt=function(a,b,c,d,e){var e=void 0!==e?e:lt,f=Ba.find(e,function(a){return a.current===c});return f.bind(function(c){return c.current(a,b,d,c.next).orThunk(function(){return c.fallback.bind(function(c){return mt(a,b,c,d)})})})},nt={backtrack:it,sidestep:jt,advance:kt,go:mt},ot=function(){var a=function(a,b){return a.query().prevSibling(b)},b=function(a){return a.length>0?U.some(a[a.length-1]):U.none()};return{sibling:a,first:b}},pt=function(){var a=function(a,b){return a.query().nextSibling(b)},b=function(a){return a.length>0?U.some(a[0]):U.none()};return{sibling:a,first:b}},qt={left:ot,right:pt},rt=function(a,b,c,d,e,f){var g=nt.go(a,b,d,e);return g.bind(function(b){return f(b.item())?U.none():c(b.item())?U.some(b.item()):rt(a,b.item(),c,b.mode(),e,f)})},st=function(a,b,c,d){return rt(a,b,c,nt.sidestep,qt.left(),d)},tt=function(a,b,c,d){return rt(a,b,c,nt.sidestep,qt.right(),d)},ut={left:st,right:tt},vt=function(a,b){return 0===a.property().children(b).length},wt=function(a,b,c){return yt(a,b,N.curry(vt,a),c)},xt=function(a,b,c){return zt(a,b,N.curry(vt,a),c)},yt=function(a,b,c,d){return ut.left(a,b,c,d)},zt=function(a,b,c,d){return ut.right(a,b,c,d)},At=function(){return{left:qt.left,right:qt.right}},Bt=function(a,b,c,d,e){return nt.go(a,b,c,d,e)},Ct={before:wt,after:xt,seekLeft:yt,seekRight:zt,walkers:At,walk:Bt,backtrack:nt.backtrack,sidestep:nt.sidestep,advance:nt.advance},Dt=f(),Et=function(a,b,c){return Ct.gather(Dt,a,b,c)},Ft=function(a,b){return Ct.before(Dt,a,b)},Gt=function(a,b){return Ct.after(Dt,a,b)},Ht=function(a,b,c){return Ct.seekLeft(Dt,a,b,c)},It=function(a,b,c){return Ct.seekRight(Dt,a,b,c)},Jt=function(){return Ct.walkers()},Kt=function(a,b,c,d){return Ct.walk(Dt,a,b,c,d)},Lt={gather:Et,before:Ft,after:Gt,seekLeft:Ht,seekRight:It,walkers:Jt,walk:Kt},Mt=5,Nt=100,Ot=Kh.generate([{none:[]},{retry:["caret"]}]),Pt=function(a,b){return a.left()<b.left()||Math.abs(b.right()-a.left())<1||a.left()>b.right()},Qt=function(a,b,c){return pe.closest(b,Yj.isBlock).fold(N.constant(!1),function(b){return gt.getEntireBox(a,b).exists(function(a){return Pt(c,a)})})},Rt=function(a,b,c,d,e){var f=at.moveDown(e,Mt);return Math.abs(c.bottom()-d.bottom())<1?Ot.retry(f):c.top()>e.bottom()?Ot.retry(f):c.top()===e.bottom()?Ot.retry(at.moveDown(e,1)):Qt(a,b,e)?Ot.retry(at.translate(f,Mt,0)):Ot.none()},St=function(a,b,c,d,e){var f=at.moveUp(e,Mt);return Math.abs(c.top()-d.top())<1?Ot.retry(f):c.bottom()<e.top()?Ot.retry(f):c.bottom()===e.top()?Ot.retry(at.moveUp(e,1)):Qt(a,b,e)?Ot.retry(at.translate(f,Mt,0)):Ot.none()},Tt={point:at.getTop,adjuster:St,move:at.moveUp,gather:Lt.before},Ut={point:at.getBottom,adjuster:Rt,move:at.moveDown,gather:Lt.after},Vt=function(a,b,c){return a.elementFromPoint(b,c).filter(function(a){return"table"===Jd.name(a)}).isSome()},Wt=function(a,b,c,d,e){return Xt(a,b,c,b.move(d,Mt),e)},Xt=function(a,b,c,d,e){return 0===e?U.some(d):Vt(a,d.left(),b.point(d))?Wt(a,b,c,d,e-1):a.situsFromPoint(d.left(),b.point(d)).bind(function(f){return f.start().fold(U.none,function(f,g){return gt.getEntireBox(a,f,g).bind(function(g){return b.adjuster(a,f,g,c,d).fold(U.none,function(d){return Xt(a,b,c,d,e-1)})}).orThunk(function(){return U.some(d)})},U.none)})},Yt=function(a,b){return a.situsFromPoint(b.left(),b.bottom()+Mt)},Zt=function(a,b){return a.situsFromPoint(b.left(),b.top()-Mt)},$t=function(a,b,c){return a.point(b)>c.getInnerHeight()?U.some(a.point(b)-c.getInnerHeight()):a.point(b)<0?U.some(-a.point(b)):U.none()},_t=function(a,b,c){var d=a.move(c,Mt),e=Xt(b,a,c,d,Nt).getOr(d);return $t(a,e,b).fold(function(){return b.situsFromPoint(e.left(),a.point(e))},function(c){return b.scrollBy(0,c),b.situsFromPoint(e.left(),a.point(e)-c)})},au={tryUp:N.curry(_t,Tt),tryDown:N.curry(_t,Ut),ieTryUp:Zt,ieTryDown:Yt,getJumpSize:N.constant(Mt)},bu=Kh.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),cu=function(a,b,c){var d=a.getRect(b),e=a.getRect(c);return e.right>d.left&&e.left<d.right},du=function(a,b,c,d,e,f,g){return we.closest(d,"td,th",g).bind(function(c){return we.closest(b,"td,th",g).map(function(b){return cd.eq(c,b)?cd.eq(d,c)&&bg.getEnd(c)===e?f(b):bu.none("in same cell"):Yg.sharedOne(eu,[c,b]).fold(function(){return cu(a,b,c)?bu.success():f(b)},function(a){return f(b)})})}).getOr(bu.none("default"))},eu=function(a){return we.closest(a,"tr")},fu=function(a,b,c,d,e){return a.fold(b,c,d,e)},gu={verify:du,cata:fu,adt:bu},hu=Ta.immutable("element","offset"),iu=Ta.immutable("element","deltaOffset"),ju=Ta.immutable("element","start","finish"),ku=Ta.immutable("begin","end"),lu=Ta.immutable("element","text"),mu={point:hu,delta:iu,range:ju,points:ku,text:lu},nu=Ta.immutable("ancestor","descendants","element","index"),ou=Ta.immutable("parent","children","element","index"),pu=function(a,b){return pe.closest(a,function(a){return xd.parent(a).exists(function(a){return cd.eq(a,b)})})},qu=function(a){return xd.parent(a).bind(function(b){var c=xd.children(b);return ru(c,a).map(function(d){return ou(b,c,a,d)})})},ru=function(a,b){return Ba.findIndex(a,N.curry(cd.eq,b))},su=function(a,b){return xd.parent(a).bind(function(c){var d=ie.children(c,b);return ru(d,a).map(function(b){return ou(c,d,a,b)})})},tu=function(a,b,c){return we.closest(a,b).bind(function(b){var d=ie.descendants(b,c);return ru(d,a).map(function(c){return nu(b,d,a,c)})})},uu={childOf:pu,indexOf:ru,indexInParent:qu,selectorsInParent:su,descendantsInAncestor:tu},vu=function(a){return"br"===Jd.name(a)},wu=function(a,b,c){return b(a,c).bind(function(a){return Jd.isText(a)&&0===Vf.get(a).trim().length?wu(a,b,c):U.some(a)})},xu=function(a,b,c){return c.traverse(b).orThunk(function(){return wu(b,c.gather,a)}).map(c.relative)},yu=function(a,b){return xd.child(a,b).filter(vu).orThunk(function(){return xd.child(a,b-1).filter(vu)})},zu=function(a,b,c,d){return yu(b,c).bind(function(b){return d.traverse(b).fold(function(){return wu(b,d.gather,a).map(d.relative)},function(a){return uu.indexInParent(a).map(function(a){return Bq.on(a.parent(),a.index())})})})},Au=function(a,b,c,d){var e=vu(b)?xu(a,b,d):zu(a,b,c,d);return e.map(function(a){return{start:N.constant(a),finish:N.constant(a)}})},Bu=function(a){return gu.cata(a,function(a){return U.none()},function(){return U.none()},function(a){return U.some(mu.point(a,0))},function(a){return U.some(mu.point(a,bg.getEnd(a)))})},Cu={tryBr:Au,process:Bu},Du=20,Eu=Wc.detect(),Fu=function(a,b,c){return a.getSelection().bind(function(d){return Cu.tryBr(b,d.finish(),d.foffset(),c).fold(function(){return U.some(mu.point(d.finish(),d.foffset()))},function(e){var f=a.fromSitus(e),g=gu.verify(a,d.finish(),d.foffset(),f.finish(),f.foffset(),c.failure,b);return Cu.process(g)})})},Gu=function(a,b,c,d,e,f){return 0===f?U.none():Ju(a,b,c,d,e).bind(function(g){var h=a.fromSitus(g),i=gu.verify(a,c,d,h.finish(),h.foffset(),e.failure,b);return gu.cata(i,function(){return U.none()},function(){return U.some(g)},function(g){return cd.eq(c,g)&&0===d?Hu(a,c,d,at.moveUp,e):Gu(a,b,g,0,e,f-1)},function(g){return cd.eq(c,g)&&d===bg.getEnd(g)?Hu(a,c,d,at.moveDown,e):Gu(a,b,g,bg.getEnd(g),e,f-1)})})},Hu=function(a,b,c,d,e){return gt.getBoxAt(a,b,c).bind(function(b){return Iu(a,e,d(b,au.getJumpSize()))})},Iu=function(a,b,c){return Eu.browser.isChrome()||Eu.browser.isSafari()||Eu.browser.isFirefox()||Eu.browser.isEdge()?b.otherRetry(a,c):Eu.browser.isIE()?b.ieRetry(a,c):U.none();
},Ju=function(a,b,c,d,e){return gt.getBoxAt(a,c,d).bind(function(b){return Iu(a,e,b)})},Ku=function(a,b,c){return Fu(a,b,c).bind(function(d){return Gu(a,b,d.element(),d.offset(),c,Du).map(a.fromSitus)})},Lu={handle:Ku},Mu=function(a){return pe.first(a).isSome()},Nu=function(a,b,c){return pe.ancestor(a,b,c).isSome()},Ou=function(a,b,c){return pe.closest(a,b,c).isSome()},Pu=function(a,b){return pe.sibling(a,b).isSome()},Qu=function(a,b){return pe.child(a,b).isSome()},Ru=function(a,b){return pe.descendant(a,b).isSome()},Su={any:Mu,ancestor:Nu,closest:Ou,sibling:Pu,child:Qu,descendant:Ru},Tu=Wc.detect(),Uu=function(a,b){return Su.ancestor(a,function(a){return xd.parent(a).exists(function(a){return cd.eq(a,b)})})},Vu=function(a,b,c,d,e){return we.closest(d,"td,th",b).bind(function(d){return we.closest(d,"table",b).bind(function(f){return Uu(e,f)?Lu.handle(a,b,c).bind(function(a){return we.closest(a.finish(),"td,th",b).map(function(b){return{start:N.constant(d),finish:N.constant(b),range:N.constant(a)}})}):U.none()})})},Wu=function(a,b,c,d,e,f){return Tu.browser.isIE()?U.none():f(d,b).orThunk(function(){return Vu(a,b,c,d,e).map(function(a){var b=a.range();return vs.response(U.some(Ds.makeSitus(b.start(),b.soffset(),b.finish(),b.foffset())),!0)})})},Xu=function(a,b){return we.closest(a,"tr",b).bind(function(a){return we.closest(a,"table",b).bind(function(c){var d=ie.descendants(c,"tr");return cd.eq(a,d[0])?Lt.seekLeft(c,function(a){return fg.last(a).isSome()},b).map(function(a){var b=bg.getEnd(a);return vs.response(U.some(Ds.makeSitus(a,b,a,b)),!0)}):U.none()})})},Yu=function(a,b){return we.closest(a,"tr",b).bind(function(a){return we.closest(a,"table",b).bind(function(c){var d=ie.descendants(c,"tr");return cd.eq(a,d[d.length-1])?Lt.seekRight(c,function(a){return fg.first(a).isSome()},b).map(function(a){return vs.response(U.some(Ds.makeSitus(a,0,a,0)),!0)}):U.none()})})},Zu=function(a,b,c,d,e,f,g){return Vu(a,c,d,e,f).bind(function(a){return Ss.detect(b,c,a.start(),a.finish(),g)})},$u={navigate:Wu,select:Zu,firstUpCheck:Xu,lastDownCheck:Yu},_u=function(a,b){return we.closest(a,"td,th",b)},av={down:{traverse:xd.nextSibling,gather:Lt.after,relative:Bq.before,otherRetry:au.tryDown,ieRetry:au.ieTryDown,failure:gu.adt.failedDown},up:{traverse:xd.prevSibling,gather:Lt.before,relative:Bq.before,otherRetry:au.tryUp,ieRetry:au.ieTryUp,failure:gu.adt.failedUp}},bv=Ta.immutable("rows","cols"),cv=function(a,b,c,d){var e=u(a),f=v(e,b,c,d);return{mousedown:f.mousedown,mouseover:f.mouseover,mouseup:f.mouseup}},dv=function(a,b,c,d){var e=u(a),f=function(){return d.clear(b),U.none()},g=function(a,g,h,i,j,k){var l=a.raw().which,m=a.raw().shiftKey===!0,n=xh.retrieve(b,d.selectedSelector()).fold(function(){return As.isDown(l)&&m?N.curry($u.select,e,b,c,av.down,i,g,d.selectRange):As.isUp(l)&&m?N.curry($u.select,e,b,c,av.up,i,g,d.selectRange):As.isDown(l)?N.curry($u.navigate,e,c,av.down,i,g,$u.lastDownCheck):As.isUp(l)?N.curry($u.navigate,e,c,av.up,i,g,$u.firstUpCheck):U.none},function(a){var c=function(c){return function(){var f=ik.findMap(c,function(c){return Ss.update(c.rows(),c.cols(),b,a,d)});return f.fold(function(){return xh.getEdges(b,d.firstSelectedSelector(),d.lastSelectedSelector()).map(function(a){var c=As.isDown(l)||k.isForward(l)?Bq.after:Bq.before;return e.setRelativeSelection(Bq.on(a.first(),0),c(a.table())),d.clear(b),vs.response(U.none(),!0)})},function(a){return U.some(vs.response(U.none(),!0))})}};return As.isDown(l)&&m?c([bv(1,0)]):As.isUp(l)&&m?c([bv(-1,0)]):k.isBackward(l)&&m?c([bv(0,-1),bv(-1,0)]):k.isForward(l)&&m?c([bv(0,1),bv(1,0)]):As.isNavigation(l)&&m===!1?f:U.none});return n()},h=function(a,e,f,g,h){return xh.retrieve(b,d.selectedSelector()).fold(function(){var i=a.raw().which,j=a.raw().shiftKey===!0;return j===!1?U.none():As.isNavigation(i)?Ss.sync(b,c,e,f,g,h,d.selectRange):U.none()},U.none)};return{keydown:g,keyup:h}},ev={mouse:cv,keyboard:dv},fv=function(a,b){Ba.each(b,function(b){hl.add(a,b)})},gv=function(a,b){Ba.each(b,function(b){hl.remove(a,b)})},hv=function(a,b){Ba.each(b,function(b){hl.toggle(a,b)})},iv=function(a,b){return Ba.forall(b,function(b){return hl.has(a,b)})},jv=function(a,b){return Ba.exists(b,function(b){return hl.has(a,b)})},kv=function(a){for(var b=a.dom().classList,c=new Array(b.length),d=0;d<b.length;d++)c[d]=b.item(d);return c},lv=function(a){return al.supports(a)?kv(a):al.get(a)},mv={add:fv,remove:gv,toggle:hv,hasAll:iv,hasAny:jv,get:lv},nv=function(a){return function(b){hl.add(b,a)}},ov=function(a){return function(b){hl.remove(b,a)}},pv=function(a){return function(b){mv.remove(b,a)}},qv=function(a){return function(b){return hl.has(b,a)}},rv={addClass:nv,removeClass:ov,removeClasses:pv,hasClass:qv},sv=function(a){var b=rv.addClass(a.selected()),c=rv.removeClasses([a.selected(),a.lastSelected(),a.firstSelected()]),d=function(b){var d=ie.descendants(b,a.selectedSelector());Ba.each(d,c)},e=function(c,e,f,g){d(c),Ba.each(e,b),hl.add(f,a.firstSelected()),hl.add(g,a.lastSelected())};return{clear:d,selectRange:e,selectedSelector:a.selectedSelector,firstSelectedSelector:a.firstSelectedSelector,lastSelectedSelector:a.lastSelectedSelector}},tv=function(a){var b=function(b){Ud.remove(b,a.selected()),Ud.remove(b,a.firstSelected()),Ud.remove(b,a.lastSelected())},c=function(b){Ud.set(b,a.selected(),"1")},d=function(c){var d=ie.descendants(c,a.selectedSelector());Ba.each(d,b)},e=function(b,e,f,g){d(b),Ba.each(e,c),Ud.set(f,a.firstSelected(),"1"),Ud.set(g,a.lastSelected(),"1")};return{clear:d,selectRange:e,selectedSelector:a.selectedSelector,firstSelectedSelector:a.firstSelectedSelector,lastSelectedSelector:a.lastSelectedSelector}},uv={byClass:sv,byAttr:tv},vv=function(a){return hl.has(lb.fromDom(a.target),"ephox-snooker-resizer-bar")===!1},wv=function(a){var b=function(){var b=Ln(a);return Ah.retrieve(b,Ih.selectedSelector()).fold(function(){return void 0===a.selection.getStart()?Nh.none():Nh.single(a.selection)},function(a){return Nh.multiple(a)})};return{get:b}},xv=Ao.each,yv=function(a){function b(b){return function(){a.execCommand(b)}}var c=[];xv("inserttable tableprops deletetable | cell row column".split(" "),function(b){"|"===b?c.push({text:"-"}):c.push(a.menuItems[b])}),a.addButton("table",{type:"menubutton",title:"Table",menu:c}),a.addButton("tableprops",{title:"Table properties",onclick:b("mceTableProps"),icon:"table"}),a.addButton("tabledelete",{title:"Delete table",onclick:b("mceTableDelete")}),a.addButton("tablecellprops",{title:"Cell properties",onclick:b("mceTableCellProps")}),a.addButton("tablemergecells",{title:"Merge cells",onclick:b("mceTableMergeCells")}),a.addButton("tablesplitcells",{title:"Split cell",onclick:b("mceTableSplitCells")}),a.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:b("mceTableInsertRowBefore")}),a.addButton("tableinsertrowafter",{title:"Insert row after",onclick:b("mceTableInsertRowAfter")}),a.addButton("tabledeleterow",{title:"Delete row",onclick:b("mceTableDeleteRow")}),a.addButton("tablerowprops",{title:"Row properties",onclick:b("mceTableRowProps")}),a.addButton("tablecutrow",{title:"Cut row",onclick:b("mceTableCutRow")}),a.addButton("tablecopyrow",{title:"Copy row",onclick:b("mceTableCopyRow")}),a.addButton("tablepasterowbefore",{title:"Paste row before",onclick:b("mceTablePasteRowBefore")}),a.addButton("tablepasterowafter",{title:"Paste row after",onclick:b("mceTablePasteRowAfter")}),a.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:b("mceTableInsertColBefore")}),a.addButton("tableinsertcolafter",{title:"Insert column after",onclick:b("mceTableInsertColAfter")}),a.addButton("tabledeletecol",{title:"Delete column",onclick:b("mceTableDeleteCol")})},zv=function(a){var b=function(b){var c=a.dom.is(b,"table")&&a.getBody().contains(b);return c},c=so(a);c.length>0&&a.addContextToolbar(b,c.join(" "))},Av={addButtons:yv,addToolbars:zv},Bv=function(a,b){function c(b){return function(){a.execCommand(b)}}var d=U.none(),e=[],f=[],g=[],h=[],i=function(a){a.disabled(!0)},j=function(a){a.disabled(!1)},k=function(){var a=this;e.push(a),d.fold(function(){i(a)},function(b){j(a)})},l=function(){var a=this;f.push(a),d.fold(function(){i(a)},function(b){j(a)})},m=function(){var a=this;g.push(a),d.fold(function(){i(a)},function(b){a.disabled(b.mergable().isNone())})},n=function(){var a=this;h.push(a),d.fold(function(){i(a)},function(b){a.disabled(b.unmergable().isNone())})},o=function(){d.fold(function(){Ba.each(e,i),Ba.each(f,i),Ba.each(g,i),Ba.each(h,i)},function(a){Ba.each(e,j),Ba.each(f,j),Ba.each(g,function(b){b.disabled(a.mergable().isNone())}),Ba.each(h,function(b){b.disabled(a.unmergable().isNone())})})};a.on("init",function(){a.on("nodechange",function(c){var e=U.from(a.dom.getParent(a.selection.getStart(),"th,td"));d=e.bind(function(a){var c=lb.fromDom(a),d=Ke.table(c);return d.map(function(a){return Xh.forMenu(b,a,c)})}),o()})});var p=function(){var a="";a='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var b=0;b<10;b++){a+="<tr>";for(var c=0;c<10;c++)a+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*b+c)+'" href="#" data-mce-x="'+c+'" data-mce-y="'+b+'"></a></td>';a+="</tr>"}return a+="</table>",a+='<div class="mce-text-center" role="presentation">1 x 1</div>'},q=function(a,b,c,d){var e,f,g,h,i,j=d.getEl().getElementsByTagName("table")[0],k=d.isRtl()||"tl-tr"===d.parent().rel;for(j.nextSibling.innerHTML=b+1+" x "+(c+1),k&&(b=9-b),f=0;f<10;f++)for(e=0;e<10;e++)h=j.rows[f].childNodes[e].firstChild,i=(k?e>=b:e<=b)&&f<=c,a.dom.toggleClass(h,"mce-active",i),i&&(g=h);return g.parentNode},r=jo(a)===!1?{text:"Table",icon:"table",context:"table",onclick:c("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(b){b.aria&&(this.parent().hideAll(),b.stopImmediatePropagation(),a.execCommand("mceInsertTable"))},onshow:function(){q(a,0,0,this.menu.items()[0])},onhide:function(){var b=this.menu.items()[0].getEl().getElementsByTagName("a");a.dom.removeClass(b,"mce-active"),a.dom.addClass(b[0],"mce-active")},menu:[{type:"container",html:p(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(b){var c,d,e=b.target;"A"===e.tagName.toUpperCase()&&(c=parseInt(e.getAttribute("data-mce-x"),10),d=parseInt(e.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(c=9-c),c===this.lastX&&d===this.lastY||(q(a,c,d,b.control),this.lastX=c,this.lastY=d))},onclick:function(b){var c=this;"A"===b.target.tagName.toUpperCase()&&(b.preventDefault(),b.stopPropagation(),c.parent().cancel(),a.undoManager.transact(function(){kp.insert(a,c.lastX+1,c.lastY+1)}),a.addVisual())}}]},s={text:"Table properties",context:"table",onPostRender:k,onclick:c("mceTableProps")},t={text:"Delete table",context:"table",onPostRender:k,cmd:"mceTableDelete"},u={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:c("mceTableInsertRowBefore"),onPostRender:l},{text:"Insert row after",onclick:c("mceTableInsertRowAfter"),onPostRender:l},{text:"Delete row",onclick:c("mceTableDeleteRow"),onPostRender:l},{text:"Row properties",onclick:c("mceTableRowProps"),onPostRender:l},{text:"-"},{text:"Cut row",onclick:c("mceTableCutRow"),onPostRender:l},{text:"Copy row",onclick:c("mceTableCopyRow"),onPostRender:l},{text:"Paste row before",onclick:c("mceTablePasteRowBefore"),onPostRender:l},{text:"Paste row after",onclick:c("mceTablePasteRowAfter"),onPostRender:l}]},v={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:c("mceTableInsertColBefore"),onPostRender:l},{text:"Insert column after",onclick:c("mceTableInsertColAfter"),onPostRender:l},{text:"Delete column",onclick:c("mceTableDeleteCol"),onPostRender:l}]},w={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:c("mceTableCellProps"),onPostRender:l},{text:"Merge cells",onclick:c("mceTableMergeCells"),onPostRender:m},{text:"Split cell",onclick:c("mceTableSplitCells"),onPostRender:n}]};a.addMenuItem("inserttable",r),a.addMenuItem("tableprops",s),a.addMenuItem("deletetable",t),a.addMenuItem("row",u),a.addMenuItem("column",v),a.addMenuItem("cell",w)},Cv={addMenuItems:Bv},Dv=function(a){return a.get().fold(function(){},function(a){return Ba.map(a,function(a){return a.dom()})})},Ev=function(a,b){var c=Ba.map(a,lb.fromDom);b.set(U.from(c))},Fv=function(a,b){return{insertTable:function(b,c){return kp.insert(a,b,c)},setClipboardRows:function(a){return Ev(a,b)},getClipboardRows:function(){return Dv(b)}}};return z.add("table",x),y})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-template",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b]},d=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return a()}},e=function(a,b){return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a(b.apply(null,arguments))}},f=function(a){return function(){return a}},g=function(a){return a},h=function(a,b){return a===b},i=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var d=new Array(arguments.length-1),e=1;e<arguments.length;e++)d[e-1]=arguments[e];return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];for(var e=new Array(arguments.length),f=0;f<e.length;f++)e[f]=arguments[f];var g=d.concat(e);return a.apply(null,g)}},j=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return!a.apply(null,arguments)}},k=function(a){return function(){throw new Error(a)}},l=function(a){return a()},m=function(a){a()},n=f(!1),o=f(!0),p={noop:c,noarg:d,compose:e,constant:f,identity:g,tripleEquals:h,curry:i,not:j,die:k,apply:l,call:m,never:n,always:o},q=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=tinymce.util.Tools.resolve("tinymce.util.XHR"),s=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),t=function(a){return a.getParam("template_cdate_classes","cdate")},u=function(a){return a.getParam("template_mdate_classes","mdate")},v=function(a){return a.getParam("template_selected_content_classes","selcontent")},w=function(a){return a.getParam("template_preview_replace_values")},x=function(a){return a.getParam("template_replace_values")},y=function(a){return a.templates},z=function(a){return a.getParam("template_cdate_format",a.getLang("template.cdate_format"))},A=function(a){return a.getParam("template_mdate_format",a.getLang("template.mdate_format"))},B=function(a){return a.getParam("template_popup_width",600)},C=function(a){return Math.min(s.DOM.getViewPort().h,a.getParam("template_popup_height",500))},D={getCreationDateClasses:t,getModificationDateClasses:u,getSelectedContentClasses:v,getPreviewReplaceValues:w,getTemplateReplaceValues:x,getTemplates:y,getCdateFormat:z,getMdateFormat:A,getDialogWidth:B,getDialogHeight:C},E=function(a,b){if(a=""+a,a.length<b)for(var c=0;c<b-a.length;c++)a="0"+a;return a},F=function(a,b,c){var d="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),e="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),f="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),g="January February March April May June July August September October November December".split(" ");return c=c||new Date,b=b.replace("%D","%m/%d/%Y"),b=b.replace("%r","%I:%M:%S %p"),b=b.replace("%Y",""+c.getFullYear()),b=b.replace("%y",""+c.getYear()),b=b.replace("%m",E(c.getMonth()+1,2)),b=b.replace("%d",E(c.getDate(),2)),b=b.replace("%H",""+E(c.getHours(),2)),b=b.replace("%M",""+E(c.getMinutes(),2)),b=b.replace("%S",""+E(c.getSeconds(),2)),b=b.replace("%I",""+((c.getHours()+11)%12+1)),b=b.replace("%p",""+(c.getHours()<12?"AM":"PM")),b=b.replace("%B",""+a.translate(g[c.getMonth()])),b=b.replace("%b",""+a.translate(f[c.getMonth()])),b=b.replace("%A",""+a.translate(e[c.getDay()])),b=b.replace("%a",""+a.translate(d[c.getDay()])),b=b.replace("%%","%")},G={getDateTime:F},H=function(a,b){return function(){var c=D.getTemplates(a);return"function"==typeof c?void c(b):void("string"==typeof c?r.send({url:c,success:function(a){b(JSON.parse(a))}}):b(c))}},I=function(a,b,c){return q.each(c,function(a,c){"function"==typeof a&&(a=a(c)),b=b.replace(new RegExp("\\{\\$"+c+"\\}","g"),a)}),b},J=function(a,b){var c=a.dom,d=D.getTemplateReplaceValues(a);q.each(c.select("*",b),function(a){q.each(d,function(b,e){c.hasClass(a,e)&&"function"==typeof d[e]&&d[e](a)})})},K=function(a,b){return new RegExp("\\b"+b+"\\b","g").test(a.className)},L=function(a,b,c){var d,e,f=a.dom,g=a.selection.getContent();c=I(a,c,D.getTemplateReplaceValues(a)),d=f.create("div",null,c),e=f.select(".mceTmpl",d),e&&e.length>0&&(d=f.create("div",null),d.appendChild(e[0].cloneNode(!0))),q.each(f.select("*",d),function(b){K(b,D.getCreationDateClasses(a).replace(/\s+/g,"|"))&&(b.innerHTML=G.getDateTime(a,D.getCdateFormat(a))),K(b,D.getModificationDateClasses(a).replace(/\s+/g,"|"))&&(b.innerHTML=G.getDateTime(a,D.getMdateFormat(a))),K(b,D.getSelectedContentClasses(a).replace(/\s+/g,"|"))&&(b.innerHTML=g)}),J(a,d),a.execCommand("mceInsertContent",!1,d.innerHTML),a.addVisual()},M={createTemplateList:H,replaceTemplateValues:I,replaceVals:J,insertTemplate:L},N=function(a){a.addCommand("mceInsertTemplate",p.curry(M.insertTemplate,a))},O={register:N},P=function(a){a.on("PreProcess",function(b){var c=a.dom,d=D.getMdateFormat(a);q.each(c.select("div",b.node),function(b){c.hasClass(b,"mceTmpl")&&(q.each(c.select("*",b),function(b){c.hasClass(b,a.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(b.innerHTML=G.getDateTime(a,d))}),M.replaceVals(a,b))})})},Q={setup:P},R=function(a,b,c){if(c.indexOf("<html>")===-1){var d="";q.each(a.contentCSS,function(b){d+='<link type="text/css" rel="stylesheet" href="'+a.documentBaseURI.toAbsolute(b)+'">'});var e=a.settings.body_class||"";e.indexOf("=")!==-1&&(e=a.getParam("body_class","","hash"),e=e[a.id]||""),c="<!DOCTYPE html><html><head>"+d+'</head><body class="'+e+'">'+c+"</body></html>"}c=M.replaceTemplateValues(a,c,D.getPreviewReplaceValues(a));var f=b.find("iframe")[0].getEl().contentWindow.document;f.open(),f.write(c),f.close()},S=function(a,b){var c,d,e=[];if(!b||0===b.length){var f=a.translate("No templates defined.");return void a.notificationManager.open({text:f,type:"info"})}q.each(b,function(a){e.push({selected:!e.length,text:a.title,value:{url:a.url,content:a.content,description:a.description}})});var g=function(b){var e=b.control.value();e.url?r.send({url:e.url,success:function(b){d=b,R(a,c,d)}}):(d=e.content,R(a,c,d)),c.find("#description")[0].text(b.control.value().description)};c=a.windowManager.open({title:"Insert template",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:e,onselect:g}}]},{type:"label",name:"description",label:"Description",text:"Â "},{type:"iframe",flex:1,border:1}],onsubmit:function(){M.insertTemplate(a,!1,d)},minWidth:D.getDialogWidth(a),minHeight:D.getDialogHeight(a)}),c.find("listbox")[0].fire("select")},T={open:S},U=function(a){return function(b){T.open(a,b)}},V=function(a){a.addButton("template",{title:"Insert template",onclick:M.createTemplateList(a.settings,U(a))}),a.addMenuItem("template",{text:"Template",onclick:M.createTemplateList(a.settings,U(a)),icon:"template",context:"insert"})},W={register:V};return b.add("template",function(a){W.register(a),O.register(a),Q.setup(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-textcolor",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=function(a,b){var c;return a.dom.getParents(a.selection.getStart(),function(a){var d;(d=a.style["forecolor"===b?"color":"background-color"])&&(c=d)}),c},d=function(a){var b,c=[];for(b=0;b<a.length;b+=2)c.push({text:a[b+1],color:"#"+a[b]});return c},e=function(a,b,c){a.undoManager.transact(function(){a.focus(),a.formatter.apply(b,{value:c}),a.nodeChanged()})},f=function(a,b){a.undoManager.transact(function(){a.focus(),a.formatter.remove(b,{value:null},null,!0),a.nodeChanged()})},g={getCurrentColor:c,mapColors:d,applyFormat:e,removeFormat:f},h=function(a){a.addCommand("mceApplyTextcolor",function(b,c){g.applyFormat(a,b,c)}),a.addCommand("mceRemoveTextcolor",function(b){g.removeFormat(a,b)})},i={register:h},j=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),k=tinymce.util.Tools.resolve("tinymce.util.Tools"),l=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],m=function(a){return a.getParam("textcolor_map",l)},n=function(a){return a.getParam("forecolor_map",m(a))},o=function(a){return a.getParam("backcolor_map",m(a))},p=function(a){return a.getParam("textcolor_rows",5)},q=function(a){return a.getParam("textcolor_cols",8)},r=function(a){return a.getParam("forecolor_rows",p(a))},s=function(a){return a.getParam("backcolor_rows",p(a))},t=function(a){return a.getParam("forecolor_cols",q(a))},u=function(a){return a.getParam("backcolor_cols",q(a))},v=function(a){return a.getParam("color_picker_callback",null)},w=function(a){return"function"==typeof v(a)},x={getForeColorMap:n,getBackColorMap:o,getForeColorRows:r,getBackColorRows:s,getForeColorCols:t,getBackColorCols:u,getColorPickerCallback:v,hasColorPicker:w},y=tinymce.util.Tools.resolve("tinymce.util.I18n"),z=function(a,b,c,d){var e,f,h,i,k,l,m,n=0,o=j.DOM.uniqueId("mcearia"),p=function(a,b){var c="transparent"===a;return'<td class="mce-grid-cell'+(c?" mce-colorbtn-trans":"")+'"><div id="'+o+"-"+n++ +'" data-mce-color="'+(a?a:"")+'" role="option" tabIndex="-1" style="'+(a?"background-color: "+a:"")+'" title="'+y.translate(b)+'">'+(c?"&#215;":"")+"</div></td>"};for(e=g.mapColors(c),e.push({text:y.translate("No color"),color:"transparent"}),h='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',i=e.length-1,l=0;l<b;l++){for(h+="<tr>",k=0;k<a;k++)m=l*a+k,m>i?h+="<td></td>":(f=e[m],h+=p(f.color,f.text));h+="</tr>"}if(d){for(h+='<tr><td colspan="'+a+'" class="mce-custom-color-btn"><div id="'+o+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+o+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+y.translate("Custom...")+"</button></div></td></tr>",h+="<tr>",k=0;k<a;k++)h+=p("","Custom color");h+="</tr>"}return h+="</tbody></table>"},A={getHtml:z},B=function(a,b){a.style.background=b,a.setAttribute("data-mce-color",b)},C=function(a){return function(b){var c=b.control;c._color?a.execCommand("mceApplyTextcolor",c.settings.format,c._color):a.execCommand("mceRemoveTextcolor",c.settings.format)}},D=function(a,b){return function(c){var d,e=this.parent(),f=g.getCurrentColor(a,e.settings.format),h=function(b){a.execCommand("mceApplyTextcolor",e.settings.format,b),e.hidePanel(),e.color(b)},i=function(){a.execCommand("mceRemoveTextcolor",e.settings.format),e.hidePanel(),e.resetColor()};if(j.DOM.getParent(c.target,".mce-custom-color-btn")){e.hidePanel();var l=x.getColorPickerCallback(a);l.call(a,function(a){var c,d,f,g=e.panel.getEl().getElementsByTagName("table")[0];for(c=k.map(g.rows[g.rows.length-1].childNodes,function(a){return a.firstChild}),f=0;f<c.length&&(d=c[f],d.getAttribute("data-mce-color"));f++);if(f===b)for(f=0;f<b-1;f++)B(c[f],c[f+1].getAttribute("data-mce-color"));B(d,a),h(a)},f)}d=c.target.getAttribute("data-mce-color"),d?(this.lastId&&j.DOM.get(this.lastId).setAttribute("aria-selected","false"),c.target.setAttribute("aria-selected",!0),this.lastId=c.target.id,"transparent"===d?i():h(d)):null!==d&&e.hidePanel()}},E=function(a,b){return function(){var c=b?x.getForeColorCols(a):x.getBackColorCols(a),d=b?x.getForeColorRows(a):x.getBackColorRows(a),e=b?x.getForeColorMap(a):x.getBackColorMap(a),f=x.hasColorPicker(a);return A.getHtml(c,d,e,f)}},F=function(a){a.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:E(a,!0),onclick:D(a,x.getForeColorCols(a))},onclick:C(a)}),a.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:E(a,!1),onclick:D(a,x.getBackColorCols(a))},onclick:C(a)})},G={register:F};return b.add("textcolor",function(a){i.register(a),G.register(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-textpattern",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(a,b){var c,d;c=B.applyInlineFormatEnter(a,b),c&&(d=a.dom.createRng(),d.setStart(c,c.data.length),d.setEnd(c,c.data.length),a.selection.setRng(d)),B.applyBlockFormat(a,b)}function b(a,b){var c,d,e,f,g;c=B.applyInlineFormatSpace(a,b),c&&(g=a.dom,d=c.data.slice(-1),/[\u00a0 ]/.test(d)&&(c.deleteData(c.data.length-1,1),e=g.doc.createTextNode(d),g.insertAfter(e,c.parentNode),f=g.createRng(),f.setStart(e,1),f.setEnd(e,1),a.selection.setRng(f)))}function c(){}var d=function(a){var b=a,c=function(){return b},e=function(a){b=a},f=function(){return d(c())};return{get:c,set:e,clone:f}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=function(a){var b=function(b){a.set(b)},c=function(){return a.get()};return{setPatterns:b,getPatterns:c}},g={get:f},h=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"***",end:"***",format:["bold","italic"]},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],i=function(a){return void 0!==a.textpattern_patterns?a.textpattern_patterns:h},j={getPatterns:i},k=tinymce.util.Tools.resolve("tinymce.util.Delay"),l=tinymce.util.Tools.resolve("tinymce.util.VK"),m=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(a){return a.sort(function(a,b){return a.start.length>b.start.length?-1:a.start.length<b.start.length?1:0})},p=function(a,b){for(var c=0;c<a.length;c++)if(0===b.indexOf(a[c].start)&&(!a[c].end||b.lastIndexOf(a[c].end)===b.length-a[c].end.length))return a[c]},q=function(a,b,c,d){var e=b.substr(c-a.end.length-d,a.end.length);return e===a.end},r=function(a,b,c){return a-b-c.end.length-c.start.length>0},s=function(a,b,c,d){var e,f,g=o(a);for(f=0;f<g.length;f++)if(e=g[f],void 0!==e.end&&q(e,b,c,d)&&r(c,d,e))return e},t={findPattern:p,findEndPattern:s},u=function(a,b,c,d,e){return a=d>0?a.splitText(d):a,a.splitText(c-d+b.end.length),a.deleteData(0,b.start.length),a.deleteData(a.data.length-b.end.length,b.end.length),a},v=function(a,b,c){if(b.collapsed!==!1){var d=b.startContainer,e=d.data,f=c===!0?1:0;if(3===d.nodeType){var g=t.findEndPattern(a,e,b.startOffset,f);if(void 0!==g){var h=e.lastIndexOf(g.end,b.startOffset-f),i=e.lastIndexOf(g.start,h-g.end.length);if(h=e.indexOf(g.end,i+g.start.length),i!==-1){var j=document.createRange();j.setStart(d,i),j.setEnd(d,h+g.end.length);var k=t.findPattern(a,j.toString());if(!(void 0===g||k!==g||d.data.length<=g.start.length+g.end.length))return{pattern:g,startOffset:i,endOffset:h}}}}}},w=function(a,b,c,d){var e=n.isArray(c.pattern.format)?c.pattern.format:[c.pattern.format],f=n.grep(e,function(b){var c=a.formatter.get(b);return c&&c[0].inline});if(0!==f.length)return a.undoManager.transact(function(){b=u(b,c.pattern,c.endOffset,c.startOffset,d),e.forEach(function(c){a.formatter.apply(c,{},b)})}),b},x=function(a,b,c){var d=a.selection.getRng(!0),e=v(b,d,c);if(e)return w(a,d.startContainer,e,c)},y=function(a,b){return x(a,b,!0)},z=function(a,b){return x(a,b,!1)},A=function(a,b){var c,d,e,f,g,h,i,j,k,l,o;if(c=a.selection,d=a.dom,c.isCollapsed()&&(i=d.getParent(c.getStart(),"p"))){for(k=new m(i,i);g=k.next();)if(3===g.nodeType){f=g;break}if(f){if(j=t.findPattern(b,f.data),!j)return;if(l=c.getRng(!0),e=l.startContainer,o=l.startOffset,f===e&&(o=Math.max(0,o-j.start.length)),n.trim(f.data).length===j.start.length)return;j.format&&(h=a.formatter.get(j.format),h&&h[0].block&&(f.deleteData(0,j.start.length),a.formatter.apply(j.format,{},f),l.setStart(e,o),l.collapse(!0),c.setRng(l))),j.cmd&&a.undoManager.transact(function(){f.deleteData(0,j.start.length),a.execCommand(j.cmd)})}}},B={patternFromRng:v,applyInlineFormatSpace:y,applyInlineFormatEnter:z,applyBlockFormat:A},C=function(a,b,c){for(var d=0;d<a.length;d++)if(c(a[d],b))return!0},D=function(a,b){return C(a,b,function(a,b){return a===b.keyCode&&l.modifierPressed(b)===!1})},E=function(a,b){return C(a,b,function(a,b){return a.charCodeAt(0)===b.charCode})},F={handleEnter:a,handleInlineKey:b,checkCharCode:E,checkKeyCode:D},G=function(a,b){var c=[",",".",";",":","!","?"],d=[32];a.on("keydown",function(c){13!==c.keyCode||l.modifierPressed(c)||F.handleEnter(a,b.get())},!0),a.on("keyup",function(c){F.checkKeyCode(d,c)&&F.handleInlineKey(a,b.get())}),a.on("keypress",function(d){F.checkCharCode(c,d)&&k.setEditorTimeout(a,function(){F.handleInlineKey(a,b.get())})})},H={setup:G};return e.add("textpattern",function(a){var b=d(j.getPatterns(a.settings));return H.setup(a,b),g.get(b)}),c})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-visualblocks",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=function(a){var c=a,d=function(){return c},e=function(a){c=a},f=function(){return b(d())};return{get:d,set:e,clone:f}},c=tinymce.util.Tools.resolve("tinymce.PluginManager"),d=function(a,b){a.fire("VisualBlocks",{state:b})},e={fireVisualBlocks:d},f=function(a){return a.getParam("visualblocks_default_state",!1)},g=function(a){return a.settings.visualblocks_content_css},h={isEnabledByDefault:f,getContentCss:g},i=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),j=tinymce.util.Tools.resolve("tinymce.util.Tools"),k=i.DOM.uniqueId(),l=function(a,b){var c=j.toArray(a.getElementsByTagName("link")),d=j.grep(c,function(a){return a.id===k});if(0===d.length){var e=i.DOM.create("link",{id:k,rel:"stylesheet",href:b});a.getElementsByTagName("head")[0].appendChild(e)}},m={load:l},n=function(a,b,c){var d=a.dom,f=h.getContentCss(a);m.load(a.getDoc(),f?f:b+"/css/visualblocks.css"),d.toggleClass(a.getBody(),"mce-visualblocks"),c.set(!c.get()),e.fireVisualBlocks(a,c.get())},o={toggleVisualBlocks:n},p=function(a,b,c){a.addCommand("mceVisualBlocks",function(){o.toggleVisualBlocks(a,b,c)})},q={register:p},r=function(a,b,c){a.on("PreviewFormats AfterPreviewFormats",function(b){c.get()&&a.dom.toggleClass(a.getBody(),"mce-visualblocks","afterpreviewformats"===b.type)}),a.on("init",function(){h.isEnabledByDefault(a)&&o.toggleVisualBlocks(a,b,c)}),a.on("remove",function(){a.dom.removeClass(a.getBody(),"mce-visualblocks")})},s={setup:r},t=function(a,b){return function(c){var d=c.control;d.active(b.get()),a.on("VisualBlocks",function(a){d.active(a.state)})}},u=function(a,b){a.addButton("visualblocks",{active:!1,title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:t(a,b)}),a.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:t(a,b),selectable:!0,context:"view",
prependToContext:!0})},v={register:u};return c.add("visualblocks",function(a,c){var d=b(!1);q.register(a,c,d),v.register(a,d),s.setup(a,c,d)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-visualchars",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=function(a){var c=a,d=function(){return c},e=function(a){c=a},f=function(){return b(d())};return{get:d,set:e,clone:f}},c=tinymce.util.Tools.resolve("tinymce.PluginManager"),d=function(a){var b=function(){return a.get()};return{isEnabled:b}},e={get:d},f=function(a,b){return a.fire("VisualChars",{state:b})},g={fireVisualChars:f},h={"Â ":"nbsp","Â­":"shy"},i=function(a,b){var c,d="";for(c in a)d+=c;return new RegExp("["+d+"]",b?"g":"")},j=function(a){var b,c="";for(b in a)c&&(c+=","),c+="span.mce-"+a[b];return c},k={charMap:h,regExp:i(h),regExpGlobal:i(h,!0),selector:j(h),charMapToRegExp:i,charMapToSelector:j},l=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b]},m=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return a()}},n=function(a,b){return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a(b.apply(null,arguments))}},o=function(a){return function(){return a}},p=function(a){return a},q=function(a,b){return a===b},r=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var d=new Array(arguments.length-1),e=1;e<arguments.length;e++)d[e-1]=arguments[e];return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];for(var e=new Array(arguments.length),f=0;f<e.length;f++)e[f]=arguments[f];var g=d.concat(e);return a.apply(null,g)}},s=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return!a.apply(null,arguments)}},t=function(a){return function(){throw new Error(a)}},u=function(a){return a()},v=function(a){a()},w=o(!1),x=o(!0),y={noop:l,noarg:m,compose:n,constant:o,identity:p,tripleEquals:q,curry:r,not:s,die:t,apply:u,call:v,never:w,always:x},z=y.never,A=y.always,B=function(){return C},C=function(){var a=function(a){return a.isNone()},b=function(a){return a()},c=function(a){return a},d=function(){},e={fold:function(a,b){return a()},is:z,isSome:z,isNone:A,getOr:c,getOrThunk:b,getOrDie:function(a){throw new Error(a||"error: getOrDie called on none.")},or:c,orThunk:b,map:B,ap:B,each:d,bind:B,flatten:B,exists:z,forall:A,filter:B,equals:a,equals_:a,toArray:function(){return[]},toString:y.constant("none()")};return Object.freeze&&Object.freeze(e),e}(),D=function(a){var b=function(){return a},c=function(){return f},d=function(b){return D(b(a))},e=function(b){return b(a)},f={fold:function(b,c){return c(a)},is:function(b){return a===b},isSome:A,isNone:z,getOr:b,getOrThunk:b,getOrDie:b,or:c,orThunk:c,map:d,ap:function(b){return b.fold(B,function(b){return D(b(a))})},each:function(b){b(a)},bind:e,flatten:b,exists:e,forall:e,filter:function(b){return b(a)?f:C},equals:function(b){return b.is(a)},equals_:function(b,c){return b.fold(z,function(b){return c(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return f},E=function(a){return null===a||void 0===a?C:D(a)},F={some:D,none:B,from:E},G=function(a){if(null===a)return"null";var b=typeof a;return"object"===b&&Array.prototype.isPrototypeOf(a)?"array":"object"===b&&String.prototype.isPrototypeOf(a)?"string":b},H=function(a){return function(b){return G(b)===a}},I={isString:H("string"),isObject:H("object"),isArray:H("array"),isNull:H("null"),isBoolean:H("boolean"),isUndefined:H("undefined"),isFunction:H("function"),isNumber:H("number")},J=function(){var a=Array.prototype.indexOf,b=function(b,c){return a.call(b,c)},c=function(a,b){return Z(a,b)};return void 0===a?c:b}(),K=function(a,b){var c=J(a,b);return c===-1?F.none():F.some(c)},L=function(a,b){return J(a,b)>-1},M=function(a,b){return Y(a,b).isSome()},N=function(a,b){for(var c=[],d=0;d<a;d++)c.push(b(d));return c},O=function(a,b){for(var c=[],d=0;d<a.length;d+=b){var e=a.slice(d,d+b);c.push(e)}return c},P=function(a,b){for(var c=a.length,d=new Array(c),e=0;e<c;e++){var f=a[e];d[e]=b(f,e,a)}return d},Q=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];b(e,c,a)}},R=function(a,b){for(var c=a.length-1;c>=0;c--){var d=a[c];b(d,c,a)}},S=function(a,b){for(var c=[],d=[],e=0,f=a.length;e<f;e++){var g=a[e],h=b(g,e,a)?c:d;h.push(g)}return{pass:c,fail:d}},T=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var f=a[d];b(f,d,a)&&c.push(f)}return c},U=function(a,b){if(0===a.length)return[];for(var c=b(a[0]),d=[],e=[],f=0,g=a.length;f<g;f++){var h=a[f],i=b(h);i!==c&&(d.push(e),e=[]),c=i,e.push(h)}return 0!==e.length&&d.push(e),d},V=function(a,b,c){return R(a,function(a){c=b(c,a)}),c},W=function(a,b,c){return Q(a,function(a){c=b(c,a)}),c},X=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(b(e,c,a))return F.some(e)}return F.none()},Y=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(b(e,c,a))return F.some(c)}return F.none()},Z=function(a,b){for(var c=0,d=a.length;c<d;++c)if(a[c]===b)return c;return-1},$=Array.prototype.push,_=function(a){for(var b=[],c=0,d=a.length;c<d;++c){if(!Array.prototype.isPrototypeOf(a[c]))throw new Error("Arr.flatten item "+c+" was not an array, input: "+a);$.apply(b,a[c])}return b},aa=function(a,b){var c=P(a,b);return _(c)},ba=function(a,b){for(var c=0,d=a.length;c<d;++c){var e=a[c];if(b(e,c,a)!==!0)return!1}return!0},ca=function(a,b){return a.length===b.length&&ba(a,function(a,c){return a===b[c]})},da=Array.prototype.slice,ea=function(a){var b=da.call(a,0);return b.reverse(),b},fa=function(a,b){return T(a,function(a){return!L(b,a)})},ga=function(a,b){for(var c={},d=0,e=a.length;d<e;d++){var f=a[d];c[String(f)]=b(f,d)}return c},ha=function(a){return[a]},ia=function(a,b){var c=da.call(a,0);return c.sort(b),c},ja=function(a){return 0===a.length?F.none():F.some(a[0])},ka=function(a){return 0===a.length?F.none():F.some(a[a.length-1])},la=I.isFunction(Array.from)?Array.from:function(a){return da.call(a)},ma={map:P,each:Q,eachr:R,partition:S,filter:T,groupBy:U,indexOf:K,foldr:V,foldl:W,find:X,findIndex:Y,flatten:_,bind:aa,forall:ba,exists:M,contains:L,equal:ca,reverse:ea,chunk:O,difference:fa,mapToObject:ga,pure:ha,sort:ia,range:N,head:ja,last:ka,from:la},na=function(a,b){var c=b||document,d=c.createElement("div");if(d.innerHTML=a,!d.hasChildNodes()||d.childNodes.length>1)throw console.error("HTML does not have a single root node",a),"HTML must have a single root node";return qa(d.childNodes[0])},oa=function(a,b){var c=b||document,d=c.createElement(a);return qa(d)},pa=function(a,b){var c=b||document,d=c.createTextNode(a);return qa(d)},qa=function(a){if(null===a||void 0===a)throw new Error("Node cannot be null or undefined");return{dom:y.constant(a)}},ra=function(a,b,c){return F.from(a.dom().elementFromPoint(b,c)).map(qa)},sa={fromHtml:na,fromTag:oa,fromText:pa,fromDom:qa,fromPoint:ra},ta={ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12},ua=function(a){var b=a.dom().nodeName;return b.toLowerCase()},va=function(a){return a.dom().nodeType},wa=function(a){return a.dom().nodeValue},xa=function(a){return function(b){return va(b)===a}},ya=function(a){return va(a)===ta.COMMENT||"#comment"===ua(a)},za=xa(ta.ELEMENT),Aa=xa(ta.TEXT),Ba=xa(ta.DOCUMENT),Ca={name:ua,type:va,value:wa,isElement:za,isText:Aa,isDocument:Ba,isComment:ya},Da=function(a){return'<span data-mce-bogus="1" class="mce-'+k.charMap[a]+'">'+a+"</span>"},Ea={wrapCharWithSpan:Da},Fa=function(a){return Ca.isText(a)&&void 0!==Ca.value(a)&&k.regExp.test(Ca.value(a))},Ga=function(a,b){var c=[],d=a.dom(),e=ma.map(d.childNodes,sa.fromDom);return ma.each(e,function(a){b(a)&&(c=c.concat([a])),c=c.concat(Ga(a,b))}),c},Ha=function(a,b){for(;a.parentNode;){if(a.parentNode===b)return a;a=a.parentNode}},Ia=function(a){return a.replace(k.regExpGlobal,Ea.wrapCharWithSpan)},Ja={isMatch:Fa,filterDescendants:Ga,findParentElm:Ha,replaceWithSpans:Ia},Ka=function(a,b){var c,d,e=Ja.filterDescendants(sa.fromDom(b),Ja.isMatch);ma.each(e,function(b){var e=Ja.replaceWithSpans(Ca.value(b));for(d=a.dom.create("div",null,e);c=d.lastChild;)a.dom.insertAfter(c,b.dom());a.dom.remove(b.dom())})},La=function(a,b){var c=a.dom.select(k.selector,b);ma.each(c,function(b){a.dom.remove(b,1)})},Ma=function(a){var b=a.getBody(),c=a.selection.getBookmark(),d=Ja.findParentElm(a.selection.getNode(),b);d=void 0!==d?d:b,La(a,d),Ka(a,d),a.selection.moveToBookmark(c)},Na={show:Ka,hide:La,toggle:Ma},Oa=function(a,b){var c,d=a.getBody(),e=a.selection;b.set(!b.get()),g.fireVisualChars(a,b.get()),c=e.getBookmark(),b.get()===!0?Na.show(a,d):Na.hide(a,d),e.moveToBookmark(c)},Pa={toggleVisualChars:Oa},Qa=function(a,b){a.addCommand("mceVisualChars",function(){Pa.toggleVisualChars(a,b)})},Ra={register:Qa},Sa=tinymce.util.Tools.resolve("tinymce.util.Delay"),Ta=function(a,b){var c=Sa.debounce(function(){Na.toggle(a)},300);a.settings.forced_root_block!==!1&&a.on("keydown",function(d){b.get()===!0&&(13===d.keyCode?Na.toggle(a):c())})},Ua={setup:Ta},Va=function(a){return function(b){var c=b.control;a.on("VisualChars",function(a){c.active(a.state)})}},Wa=function(a){a.addButton("visualchars",{active:!1,title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:Va(a)}),a.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:Va(a),selectable:!0,context:"view",prependToContext:!0})};return c.add("visualchars",function(a){var c=b(!1);return Ra.register(a,c),Wa(a),Ua.setup(a,c),e.get(c)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-wordcount",["tinymce"],function(){return function(){!function(){(function(){"use strict";function a(){}var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c={aletter:"[A-Za-zÂªÂµÂºÃ€-Ã–Ã˜-Ã¶Ã¸-ËË†-Ë‘Ë -Ë¤Ë¬Ë®Í°-Í´Í¶Í·Íº-Í½Î†Îˆ-ÎŠÎŒÎŽ-Î¡Î£-ÏµÏ·-ÒÒŠ-Ô§Ô±-Õ–Õ™Õ¡-Ö‡×-×ª×°-×³Ø -ÙŠÙ®Ù¯Ù±-Û“Û•Û¥Û¦Û®Û¯Ûº-Û¼Û¿ÜÜ’-Ü¯Ý-Þ¥Þ±ßŠ-ßªß´ßµßºà €-à •à šà ¤à ¨à¡€-à¡˜à¤„-à¤¹à¤½à¥à¥˜-à¥¡à¥±-à¥·à¥¹-à¥¿à¦…-à¦Œà¦à¦à¦“-à¦¨à¦ª-à¦°à¦²à¦¶-à¦¹à¦½à§Žà§œà§à§Ÿ-à§¡à§°à§±à¨…-à¨Šà¨à¨à¨“-à¨¨à¨ª-à¨°à¨²à¨³à¨µà¨¶à¨¸à¨¹à©™-à©œà©žà©²-à©´àª…-àªàª-àª‘àª“-àª¨àªª-àª°àª²àª³àªµ-àª¹àª½à«à« à«¡à¬…-à¬Œà¬à¬à¬“-à¬¨à¬ª-à¬°à¬²à¬³à¬µ-à¬¹à¬½à­œà­à­Ÿ-à­¡à­±à®ƒà®…-à®Šà®Ž-à®à®’-à®•à®™à®šà®œà®žà®Ÿà®£à®¤à®¨-à®ªà®®-à®¹à¯à°…-à°Œà°Ž-à°à°’-à°¨à°ª-à°³à°µ-à°¹à°½à±˜à±™à± à±¡à²…-à²Œà²Ž-à²à²’-à²¨à²ª-à²³à²µ-à²¹à²½à³žà³ à³¡à³±à³²à´…-à´Œà´Ž-à´à´’-à´ºà´½àµŽàµ àµ¡àµº-àµ¿à¶…-à¶–à¶š-à¶±à¶³-à¶»à¶½à·€-à·†à¼€à½€-à½‡à½‰-à½¬à¾ˆ-à¾Œá‚ -áƒ…áƒ-áƒºáƒ¼á„€-á‰ˆá‰Š-á‰á‰-á‰–á‰˜á‰š-á‰á‰ -áŠˆáŠŠ-áŠáŠ-áŠ°áŠ²-áŠµáŠ¸-áŠ¾á‹€á‹‚-á‹…á‹ˆ-á‹–á‹˜-áŒáŒ’-áŒ•áŒ˜-ášáŽ€-áŽáŽ -á´á-á™¬á™¯-á™¿áš-áššáš -á›ªá›®-á›°áœ€-áœŒáœŽ-áœ‘áœ -áœ±á€-á‘á -á¬á®-á°á  -á¡·á¢€-á¢¨á¢ªá¢°-á£µá¤€-á¤œá¨€-á¨–á¬…-á¬³á­…-á­‹á®ƒ-á® á®®á®¯á¯€-á¯¥á°€-á°£á±-á±á±š-á±½á³©-á³¬á³®-á³±á´€-á¶¿á¸€-á¼•á¼˜-á¼á¼ -á½…á½ˆ-á½á½-á½—á½™á½›á½á½Ÿ-á½½á¾€-á¾´á¾¶-á¾¼á¾¾á¿‚-á¿„á¿†-á¿Œá¿-á¿“á¿–-á¿›á¿ -á¿¬á¿²-á¿´á¿¶-á¿¼â±â¿â‚-â‚œâ„‚â„‡â„Š-â„“â„•â„™-â„â„¤â„¦â„¨â„ª-â„­â„¯-â„¹â„¼-â„¿â……-â…‰â…Žâ… -â†ˆâ’¶-â“©â°€-â°®â°°-â±žâ± -â³¤â³«-â³®â´€-â´¥â´°-âµ¥âµ¯â¶€-â¶–â¶ -â¶¦â¶¨-â¶®â¶°-â¶¶â¶¸-â¶¾â·€-â·†â·ˆ-â·Žâ·-â·–â·˜-â·žâ¸¯ã€…ã€»ã€¼ã„…-ã„­ã„±-ã†Žã† -ã†ºê€€-ê’Œê“-ê“½ê”€-ê˜Œê˜-ê˜Ÿê˜ªê˜«ê™€-ê™®ê™¿-êš—êš -ê›¯êœ—-êœŸêœ¢-êžˆêž‹-êžŽêžêž‘êž -êž©êŸº-ê ê ƒ-ê …ê ‡-ê Šê Œ-ê ¢ê¡€-ê¡³ê¢‚-ê¢³ê£²-ê£·ê£»ê¤Š-ê¤¥ê¤°-ê¥†ê¥ -ê¥¼ê¦„-ê¦²ê§ê¨€-ê¨¨ê©€-ê©‚ê©„-ê©‹ê¬-ê¬†ê¬‰-ê¬Žê¬‘-ê¬–ê¬ -ê¬¦ê¬¨-ê¬®ê¯€-ê¯¢ê°€-íž£íž°-íŸ†íŸ‹-íŸ»ï¬€-ï¬†ï¬“-ï¬—ï¬ï¬Ÿ-ï¬¨ï¬ª-ï¬¶ï¬¸-ï¬¼ï¬¾ï­€ï­ï­ƒï­„ï­†-ï®±ï¯“-ï´½ïµ-ï¶ï¶’-ï·‡ï·°-ï·»ï¹°-ï¹´ï¹¶-ï»¼ï¼¡-ï¼ºï½-ï½šï¾ -ï¾¾ï¿‚-ï¿‡ï¿Š-ï¿ï¿’-ï¿—ï¿š-ï¿œ]",midnumlet:"[-'\\.â€˜â€™â€¤ï¹’ï¼‡ï¼Ž]",midletter:"[:Â·Â·×´â€§ï¸“ï¹•ï¼š]",midnum:"[Â±+*/,;;Ö‰ØŒØÙ¬ß¸â„ï¸ï¸”ï¹ï¹”ï¼Œï¼›]",numeric:"[0-9Ù -Ù©Ù«Û°-Û¹ß€-ß‰à¥¦-à¥¯à§¦-à§¯à©¦-à©¯à«¦-à«¯à­¦-à­¯à¯¦-à¯¯à±¦-à±¯à³¦-à³¯àµ¦-àµ¯à¹-à¹™à»-à»™à¼ -à¼©á€-á‰á‚-á‚™áŸ -áŸ©á -á ™á¥†-á¥á§-á§™áª€-áª‰áª-áª™á­-á­™á®°-á®¹á±€-á±‰á±-á±™ê˜ -ê˜©ê£-ê£™ê¤€-ê¤‰ê§-ê§™ê©-ê©™ê¯°-ê¯¹]",cr:"\\r",lf:"\\n",newline:"[\x0B\fÂ…\u2028\u2029]",extend:"[Ì€-Í¯Òƒ-Ò‰Ö‘-Ö½Ö¿××‚×„×…×‡Ø-ØšÙ‹-ÙŸÙ°Û–-ÛœÛŸ-Û¤Û§Û¨Ûª-Û­Ü‘Ü°-ÝŠÞ¦-Þ°ß«-ß³à –-à ™à ›-à £à ¥-à §à ©-à ­à¡™-à¡›à¤€-à¤ƒà¤º-à¤¼à¤¾-à¥à¥‘-à¥—à¥¢à¥£à¦-à¦ƒà¦¼à¦¾-à§„à§‡à§ˆà§‹-à§à§—à§¢à§£à¨-à¨ƒà¨¼à¨¾-à©‚à©‡à©ˆà©‹-à©à©‘à©°à©±à©µàª-àªƒàª¼àª¾-à«…à«‡-à«‰à«‹-à«à«¢à«£à¬-à¬ƒà¬¼à¬¾-à­„à­‡à­ˆà­‹-à­à­–à­—à­¢à­£à®‚à®¾-à¯‚à¯†-à¯ˆà¯Š-à¯à¯—à°-à°ƒà°¾-à±„à±†-à±ˆà±Š-à±à±•à±–à±¢à±£à²‚à²ƒà²¼à²¾-à³„à³†-à³ˆà³Š-à³à³•à³–à³¢à³£à´‚à´ƒà´¾-àµ„àµ†-àµˆàµŠ-àµàµ—àµ¢àµ£à¶‚à¶ƒà·Šà·-à·”à·–à·˜-à·Ÿà·²à·³à¸±à¸´-à¸ºà¹‡-à¹Žàº±àº´-àº¹àº»àº¼à»ˆ-à»à¼˜à¼™à¼µà¼·à¼¹à¼¾à¼¿à½±-à¾„à¾†à¾‡à¾-à¾—à¾™-à¾¼à¿†á€«-á€¾á–-á™áž-á á¢-á¤á§-á­á±-á´á‚‚-á‚á‚á‚š-á‚á-áŸáœ’-áœ”áœ²-áœ´á’á“á²á³áž¶-áŸ“áŸá ‹-á á¢©á¤ -á¤«á¤°-á¤»á¦°-á§€á§ˆá§‰á¨—-á¨›á©•-á©žá© -á©¼á©¿á¬€-á¬„á¬´-á­„á­«-á­³á®€-á®‚á®¡-á®ªá¯¦-á¯³á°¤-á°·á³-á³’á³”-á³¨á³­á³²á·€-á·¦á·¼-á·¿â€Œâ€âƒ-âƒ°â³¯-â³±âµ¿â· -â·¿ã€ª-ã€¯ã‚™ã‚šê™¯-ê™²ê™¼ê™½ê›°ê›±ê ‚ê †ê ‹ê £-ê §ê¢€ê¢ê¢´-ê£„ê£ -ê£±ê¤¦-ê¤­ê¥‡-ê¥“ê¦€-ê¦ƒê¦³-ê§€ê¨©-ê¨¶ê©ƒê©Œê©ê©»êª°êª²-êª´êª·êª¸êª¾êª¿ê«ê¯£-ê¯ªê¯¬ê¯­ï¬žï¸€-ï¸ï¸ -ï¸¦ï¾žï¾Ÿ]",format:"[Â­Ø€-ØƒÛÜáž´ážµâ€Žâ€â€ª-â€®â -â¤âª-â¯\ufeffï¿¹-ï¿»]",katakana:"[ã€±-ã€µã‚›ã‚œã‚ -ãƒºãƒ¼-ãƒ¿ã‡°-ã‡¿ã‹-ã‹¾ãŒ€-ã—ï½¦-ï¾]",extendnumlet:"[=_â€¿â€â”ï¸³ï¸´ï¹-ï¹ï¼¿âˆ€-â‹¿<>]",punctuation:"[!-#%-*,-\\/:;?@\\[-\\]_{}Â¡Â«Â·Â»Â¿;Â·Õš-ÕŸÖ‰ÖŠÖ¾×€×ƒ×†×³×´Ø‰ØŠØŒØØ›ØžØŸÙª-Ù­Û”Ü€-Üß·-ß¹à °-à ¾à¡žà¥¤à¥¥à¥°à·´à¹à¹šà¹›à¼„-à¼’à¼º-à¼½à¾…à¿-à¿”à¿™à¿šáŠ-ááƒ»á¡-á¨á€á™­á™®áš›ášœá›«-á›­áœµáœ¶áŸ”-áŸ–áŸ˜-áŸšá €-á Šá¥„á¥…á¨žá¨Ÿáª -áª¦áª¨-áª­á­š-á­ á¯¼-á¯¿á°»-á°¿á±¾á±¿á³“â€-â€§â€°-âƒâ…-â‘â“-âžâ½â¾â‚â‚Žã€ˆã€‰â¨-âµâŸ…âŸ†âŸ¦-âŸ¯â¦ƒ-â¦˜â§˜-â§›â§¼â§½â³¹-â³¼â³¾â³¿âµ°â¸€-â¸®â¸°â¸±ã€-ã€ƒã€ˆ-ã€‘ã€”-ã€Ÿã€°ã€½ã‚ ãƒ»ê“¾ê“¿ê˜-ê˜ê™³ê™¾ê›²-ê›·ê¡´-ê¡·ê£Žê£ê£¸-ê£ºê¤®ê¤¯ê¥Ÿê§-ê§ê§žê§Ÿê©œ-ê©Ÿê«žê«Ÿê¯«ï´¾ï´¿ï¸-ï¸™ï¸°-ï¹’ï¹”-ï¹¡ï¹£ï¹¨ï¹ªï¹«ï¼-ï¼ƒï¼…-ï¼Šï¼Œ-ï¼ï¼šï¼›ï¼Ÿï¼ ï¼»-ï¼½ï¼¿ï½›ï½ï½Ÿ-ï½¥]"},d={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},e=[new RegExp(c.aletter),new RegExp(c.midnumlet),new RegExp(c.midletter),new RegExp(c.midnum),new RegExp(c.numeric),new RegExp(c.cr),new RegExp(c.lf),new RegExp(c.newline),new RegExp(c.extend),new RegExp(c.format),new RegExp(c.katakana),new RegExp(c.extendnumlet),new RegExp("@")],f="",g=new RegExp("^"+c.punctuation+"$"),h=/^\s+$/,i={characterIndices:d,SETS:e,EMPTY_STRING:f,PUNCTUATION:g,WHITESPACE:h},j=function(a,b,c){var d,e;if(!a)return 0;if(c=c||a,void 0!==a.length){for(d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d,a)===!1)return 0}else for(d in a)if(a.hasOwnProperty(d)&&b.call(c,a[d],d,a)===!1)return 0;return 1},k=function(a,b){var c=[];return j(a,function(d,e){c.push(b(d,e,a))}),c},l={each:j,map:k},m=i.SETS,n=i.characterIndices.OTHER,o=function(a){var b,c,d=n,e=m.length;for(b=0;b<e;++b)if(c=m[b],c&&c.test(a)){d=b;break}return d},p=function(a){var b={};return function(c){if(b[c])return b[c];var d=a(c);return b[c]=d,d}},q=function(a){var b=p(o);return l.map(a.split(""),b)},r={classify:q},s=i.characterIndices,t=function(a,b){var c,d,e=a[b],f=a[b+1];return!(b<0||b>a.length-1&&0!==b)&&((e!==s.ALETTER||f!==s.ALETTER)&&(d=a[b+2],(e!==s.ALETTER||f!==s.MIDLETTER&&f!==s.MIDNUMLET&&f!==s.AT||d!==s.ALETTER)&&(c=a[b-1],(e!==s.MIDLETTER&&e!==s.MIDNUMLET&&f!==s.AT||f!==s.ALETTER||c!==s.ALETTER)&&((e!==s.NUMERIC&&e!==s.ALETTER||f!==s.NUMERIC&&f!==s.ALETTER)&&((e!==s.MIDNUM&&e!==s.MIDNUMLET||f!==s.NUMERIC||c!==s.NUMERIC)&&((e!==s.NUMERIC||f!==s.MIDNUM&&f!==s.MIDNUMLET||d!==s.NUMERIC)&&(e!==s.EXTEND&&e!==s.FORMAT&&c!==s.EXTEND&&c!==s.FORMAT&&f!==s.EXTEND&&f!==s.FORMAT&&((e!==s.CR||f!==s.LF)&&(e===s.NEWLINE||e===s.CR||e===s.LF||(f===s.NEWLINE||f===s.CR||f===s.LF||(e!==s.KATAKANA||f!==s.KATAKANA)&&((f!==s.EXTENDNUMLET||e!==s.ALETTER&&e!==s.NUMERIC&&e!==s.KATAKANA&&e!==s.EXTENDNUMLET)&&((e!==s.EXTENDNUMLET||f!==s.ALETTER&&f!==s.NUMERIC&&f!==s.KATAKANA)&&e!==s.AT))))))))))))},u={isWordBoundary:t},v=i.EMPTY_STRING,w=i.WHITESPACE,x=i.PUNCTUATION,y=function(a){return"http"===a||"https"===a},z=function(a,b){var c;for(c=b;c<a.length;++c){var d=a.charAt(c);if(w.test(d))break}return c},A=function(a,b,c){var d=z(b,c+1),e=b.substring(c+1,d);return"://"===e.substr(0,3)?{word:a+e,index:d}:{word:a,index:c}},B=function(a,b){var c,d,e,f=0,g=r.classify(a),h=g.length,i=[],j=[];for(b||(b={}),b.ignoreCase&&(a=a.toLowerCase()),d=b.includePunctuation,e=b.includeWhitespace;f<h;++f)if(c=a.charAt(f),i.push(c),u.isWordBoundary(g,f)){if(i=i.join(v),i&&(e||!w.test(i))&&(d||!x.test(i)))if(y(i)){var k=A(i,a,f);j.push(k.word),f=k.index}else j.push(i);i=[]}return j},C=function(a,b){return B(a.replace(/\ufeff/g,""),b)},D={getWords:C},E=function(a){return a.removed?"":a.getBody().innerText},F=function(a){return D.getWords(E(a)).length},G={getCount:F},H=function(a){var b=function(){return G.getCount(a)};return{getCount:b}},I={get:H},J=tinymce.util.Tools.resolve("tinymce.util.Delay"),K=tinymce.util.Tools.resolve("tinymce.util.I18n"),L=function(a){var b=function(a){return K.translate(["{0} words",G.getCount(a)])},c=function(){a.theme.panel.find("#wordcount").text(b(a))};a.on("init",function(){var d=a.theme.panel&&a.theme.panel.find("#statusbar")[0],e=J.debounce(c,300);d&&J.setEditorTimeout(a,function(){d.insert({type:"label",name:"wordcount",text:b(a),classes:"wordcount",disabled:a.settings.readonly},0),a.on("setcontent beforeaddundo undo redo keyup",e)},0)})},M={setup:L};return b.add("wordcount",function(a){return M.setup(a),I.get(a)}),a})()}()}.apply(a,arguments)})}(this),function(a){define("tinymce-compat3x",["tinymce"],function(){return function(){!function(a){function b(){}function c(a){!f&&window&&window.console&&(f=!0,console.log("Deprecated TinyMCE API call: "+a))}function d(a,d,e,f){a=a||this;var g=[];return d?(this.add=function(b,h,i){function j(c){var g=[];if("string"==typeof e&&(e=e.split(" ")),e&&"function"!=typeof e)for(var i=0;i<e.length;i++)g.push(c[e[i]]);("function"!=typeof e||(g=e(d,c,a)))&&(e||(g=[c]),g.unshift(f||a),b.apply(h||f||a,g)===!1&&c.stopImmediatePropagation())}c("<target>.on"+d+".add(..)"),a.on(d,j,i);var k={original:b,patched:j};return g.push(k),j},this.addToTop=function(a,b){this.add(a,b,!0)},this.remove=function(b){return g.forEach(function(c,e){if(c.original===b)return g.splice(e,1),a.off(d,c.patched)}),a.off(d,b)},void(this.dispatch=function(){return a.fire(d),!0})):void(this.add=this.addToTop=this.remove=this.dispatch=b)}function e(e){function f(b){var c=e.settings.language||"en",d=[c,b].join("."),f=a.i18n.translate(d);return d!==f?f:a.i18n.translate(b)}function g(b,c){a.each(b.split(" "),function(a){e["on"+a]=new d(e,a,c)})}function h(a,b,c){return[b.level,c]}function i(a){return function(b,c){if(!c.selection&&!a||c.selection==a)return[c]}}function j(){function b(){return j()}var d={},e="add addMenu addSeparator collapse createMenu destroy displayColor expand focus getLength hasMenus hideMenu isActive isCollapsed isDisabled isRendered isSelected mark postRender remove removeAll renderHTML renderMenu renderNode renderTo select selectByIndex setActive setAriaProperty setColor setDisabled setSelected setState showMenu update";return c("editor.controlManager.*"),a.each(e.split(" "),function(a){d[a]=b}),d}if(!e.controlManager){e.controlManager={buttons:{},setDisabled:function(a,b){c("controlManager.setDisabled(..)"),this.buttons[a]&&this.buttons[a].disabled(b)},setActive:function(a,b){c("controlManager.setActive(..)"),this.buttons[a]&&this.buttons[a].active(b)},onAdd:new d,onPostRender:new d,add:function(a){return a},createButton:j,createColorSplitButton:j,createControl:j,createDropMenu:j,createListBox:j,createMenuButton:j,createSeparator:j,createSplitButton:j,createToolbar:j,createToolbarGroup:j,destroy:b,get:b,setControlType:j},g("PreInit BeforeRenderUI PostRender Load Init Remove Activate Deactivate","editor"),g("Click MouseUp MouseDown DblClick KeyDown KeyUp KeyPress ContextMenu Paste Submit Reset"),g("BeforeExecCommand ExecCommand","command ui value args"),g("PreProcess PostProcess LoadContent SaveContent Change"),g("BeforeSetContent BeforeGetContent SetContent GetContent",i(!1)),g("SetProgressState","state time"),g("VisualAid","element hasVisual"),g("Undo Redo",h),g("NodeChange",function(a,b){return[e.controlManager,b.element,e.selection.isCollapsed(),b]});var k=e.addButton;e.addButton=function(a,b){function c(){if(e.controlManager.buttons[a]=this,d)return d.apply(this,arguments)}var d;for(var g in b)"onpostrender"===g.toLowerCase()&&(d=b[g],b.onPostRender=c);return d||(b.onPostRender=c),b.title&&(b.title=f(b.title)),k.call(this,a,b)},e.on("init",function(){var a=e.undoManager,b=e.selection;a.onUndo=new d(e,"Undo",h,null,a),a.onRedo=new d(e,"Redo",h,null,a),a.onBeforeAdd=new d(e,"BeforeAddUndo",null,a),a.onAdd=new d(e,"AddUndo",null,a),b.onBeforeGetContent=new d(e,"BeforeGetContent",i(!0),b),b.onGetContent=new d(e,"GetContent",i(!0),b),b.onBeforeSetContent=new d(e,"BeforeSetContent",i(!0),b),b.onSetContent=new d(e,"SetContent",i(!0),b)}),e.on("BeforeRenderUI",function(){var b=e.windowManager;b.onOpen=new d,b.onClose=new d,b.createInstance=function(b,d,e,f,g,h){c("windowManager.createInstance(..)");var i=a.resolve(b);return new i(d,e,f,g,h)}})}}var f;a.util.Dispatcher=d,a.onBeforeUnload=new d(a,"BeforeUnload"),a.onAddEditor=new d(a,"AddEditor","editor"),a.onRemoveEditor=new d(a,"RemoveEditor","editor"),a.util.Cookie={get:b,getHash:b,remove:b,set:b,setHash:b},a.on("SetupEditor",function(a){e(a.editor)}),a.PluginManager.add("compat3x",e),a.addI18n=function(b,c){var d=a.util.I18n,e=a.each;return"string"==typeof b&&b.indexOf(".")===-1?void d.add(b,c):void(a.is(b,"string")?e(c,function(a,c){d.data[b+"."+c]=a}):e(b,function(a,b){e(a,function(a,c){e(a,function(a,e){"common"===c?d.data[b+"."+e]=a:d.data[b+"."+c+"."+e]=a})})}))}}(tinymce)}.apply(a,arguments)})}(this),define("mockup-patterns-tinymce",["jquery","underscore","pat-base","tinymce","mockup-utils","mockup-patterns-tinymce-url/js/links","mockup-i18n","translate","tinymce-modern-theme","tinymce-advlist","tinymce-anchor","tinymce-autolink","tinymce-autoresize","tinymce-autosave","tinymce-bbcode","tinymce-charmap","tinymce-code","tinymce-colorpicker","tinymce-contextmenu","tinymce-directionality","tinymce-emoticons","tinymce-fullpage","tinymce-fullscreen","tinymce-hr","tinymce-image","tinymce-importcss","tinymce-insertdatetime","tinymce-legacyoutput","tinymce-link","tinymce-lists","tinymce-media","tinymce-nonbreaking","tinymce-noneditable","tinymce-pagebreak","tinymce-paste","tinymce-preview","tinymce-print","tinymce-save","tinymce-searchreplace","tinymce-spellchecker","tinymce-tabfocus","tinymce-table","tinymce-template","tinymce-textcolor","tinymce-textpattern","tinymce-visualblocks","tinymce-visualchars","tinymce-wordcount","tinymce-compat3x"],function(a,b,c,d,e,f,g,h){"use strict";var i=c.extend({name:"tinymce",trigger:".pat-tinymce",parser:"mockup",defaults:{upload:{uploadMultiple:!1,maxFiles:1,showTitle:!1},relatedItems:{attributes:["UID","Title","portal_type","path","getURL","getIcon","is_folderish","review_state"],batchSize:20,basePath:"/",vocabularyUrl:null,width:500,maximumSelectionSize:1,placeholder:h("Search for item on site...")},text:{insertBtn:h("Insert"),cancelBtn:h("Cancel"),insertHeading:h("Insert link"),title:h("Title"),internal:h("Internal"),external:h("External URL (can be relative within this site or absolute if it starts with http:// or https://)"),email:h("Email Address"),anchor:h("Anchor"),subject:h("Email Subject (optional)"),image:h("Image"),imageAlign:h("Align"),scale:h("Size"),alt:h("Alternative Text"),externalImage:h("External Image URL (can be relative within this site or absolute if it starts with http:// or https://)")},loadingBaseUrl:"../../../bower_components/tinymce-builded/js/tinymce/",prependToUrl:"",appendToUrl:"",linkAttribute:"path",prependToScalePart:"/imagescale/",appendToScalePart:"",appendToOriginalScalePart:"",defaultScale:"large",imageScales:[{title:"Mini",value:"mini"},{title:"Thumb",value:"thumb"},{title:"Listing",value:"listing"},{title:"Preview",value:"preview"},{title:"Tile",value:"tile"},{title:"Icon",value:"icon"},{title:"Large",value:"large"}],imageClasses:{"image-inline":"Inline","image-right":"Right","image-left":"Left"},targetList:[{text:h("Open in this window / frame"),value:""},{text:h("Open in new window"),value:"_blank"},{text:h("Open in parent window / frame"),value:"_parent"},{text:h("Open in top frame (replaces all frames)"),value:"_top"}],imageTypes:["Image"],folderTypes:["Folder","Plone Site"],tiny:{content_css:"/base/bower_components/tinymce-builded/js/tinymce/skins/lightgray/content.min.css",theme:"modern",plugins:["advlist","autolink","lists","charmap","print","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","contextmenu","paste","plonelink","ploneimage"],menubar:"edit table format tools view insert",toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | unlink plonelink ploneimage",height:400},inline:!1},addLinkClicked:function(){var b=this;if(null===b.linkModal){var c=a("<div/>").insertAfter(b.$el),d=["internal","upload","external","email","anchor"];b.options.upload||d.splice(1,1),b.linkModal=new f(c,a.extend(!0,{},b.options,{tinypattern:b,linkTypes:d})),b.linkModal.show()}else b.linkModal.reinitialize(),b.linkModal.show()},addImageClicked:function(){var b=this;if(null===b.imageModal){var c=["image","uploadImage","externalImage"];b.options.upload||c.splice(1,1);var d=a.extend(!0,{},b.options,{tinypattern:b,linkTypes:c,initialLinkType:"image",text:{insertHeading:h("Insert Image")},relatedItems:{selectableTypes:b.options.imageTypes}}),e=a("<div/>").insertAfter(b.$el);b.imageModal=new f(e,d),b.imageModal.show()}else b.imageModal.reinitialize(),b.imageModal.show()},generateUrl:function(a){var b=this,c=a[b.options.linkAttribute];return b.options.prependToUrl+c+b.options.appendToUrl},generateImageUrl:function(a,b){var c=this,d=c.generateUrl(a);return b?d=d+c.options.prependToScalePart+b+c.options.appendToScalePart:d+=c.options.appendToOriginalScalePart,d},stripGeneratedUrl:function(a){var b=this;if(a=a.split(b.options.prependToScalePart,2)[0],b.options.prependToUrl){var c=a.split(b.options.prependToUrl,2);2===c.length&&(a=c[1])}return b.options.appendToUrl&&(a=a.split(b.options.appendToUrl)[0]),a},getScaleFromUrl:function(a){var b=this,c=a.split(b.options.prependToScalePart);return 2!==c.length?null:(a=b.options.appendToScalePart?c[1].split(b.options.appendToScalePart)[0]:c[1],a.indexOf("/image_")!==-1&&(a=a.split("/image_")[1]),a)},initLanguage:function(b){var c=this,e=new g,f=e.currentLanguage;"en"!==f&&"en"!==c.options.tiny.language?(d.baseURL=c.options.loadingBaseUrl,a.ajax({url:d.baseURL+"/langs/"+f+".js",method:"GET",cache:"true",success:function(){c.options.tiny.language=f,b()},error:function(){f=f.split("_")>1?f.split("_")[0]:f.split("-")>1?f.split("-")[0]:f+"_"+f.toUpperCase(),a.ajax({url:d.baseURL+"/langs/"+f+".js",method:"GET",cache:"true",success:function(){c.options.tiny.language=f,b()},error:function(){b()}})}})):b()},init:function(){var a=this;a.linkModal=a.imageModal=a.uploadModal=a.pasteModal=null;var b=e.setId(a.$el);a.options.imageScales&&"string"==typeof a.options.imageScales&&(a.options.imageScales=JSON.parse(a.options.imageScales));var c=a.options.tiny;a.options.inline===!0&&(a.options.tiny.inline=!0),a.tinyId=a.options.inline?b+"-editable":b,c.selector="#"+a.tinyId,c.addLinkClicked=function(){a.addLinkClicked.apply(a,[])},c.addImageClicked=function(b){a.addImageClicked.apply(a,[b])},c.skin=!1,c.init_instance_callback=function(b){void 0!==a.tiny&&null!==a.tiny||(a.tiny=b)},a.initLanguage(function(){if("string"==typeof a.options.folderTypes&&(a.options.folderTypes=a.options.folderTypes.split(",")),"string"==typeof a.options.imageTypes&&(a.options.imageTypes=a.options.imageTypes.split(",")),a.options.inline===!0&&(a.$el.after('<div id="'+a.tinyId+'">'+a.$el.val()+"</div>"),a.$el.hide()),c.importcss_file_filter&&"function"==typeof c.importcss_file_filter.indexOf&&c.importcss_file_filter.indexOf(",")!==-1){var b=c.importcss_file_filter.split(",");c.importcss_file_filter=function(a){for(var c=0;c<b.length;c++)if(a.indexOf(b[c])!==-1)return!0;return!1}}if(c.importcss_selector_filter&&c.importcss_selector_filter.length&&(c.importcss_selector_filter=new RegExp(c.importcss_selector_filter)),c.importcss_groups&&c.importcss_groups.length)for(var e=0;e<c.importcss_groups.length;e++)c.importcss_groups[e].filter&&c.importcss_groups[e].filter.length&&(c.importcss_groups[e].filter=new RegExp(c.importcss_groups[e].filter));d.init(c),a.tiny=d.get(a.tinyId);var f=a.$el.parents("form");f.on("submit",function(){a.options.inline===!0?a.$el.val(a.tiny.getContent()):a.tiny.save()})})},destroy:function(){this.tiny&&(this.options.inline===!0&&(this.$el.val(this.tiny.getContent()),a("#"+this.tinyId).remove(),this.$el.show()),this.tiny.destroy(),this.tiny=void 0)}});return i}),define("mockup-patterns-textareamimetypeselector",["jquery","pat-base","pat-registry","mockup-patterns-tinymce"],function(a,b,c){"use strict";var d=b.extend({name:"textareamimetypeselector",trigger:".pat-textareamimetypeselector",parser:"mockup",textarea:void 0,currentWidget:void 0,defaults:{textareaName:"",widgets:{"text/html":{pattern:"tinymce",patternOptions:{}}}},init:function(){var b=this,c=b.$el;b.textarea=a('[name="'+b.options.textareaName+'"]'),c.change(function(a){b.initTextarea(a.target.value)}),b.initTextarea(c.val())},initTextarea:function(a){var b,d=this,e=d.options.widgets[a];d.currentWidget&&d.currentWidget.destroy(),e&&(b=new c.patterns[e.pattern](d.textarea,e.patternOptions||{}),d.currentWidget=b)}});return d}),define("mockup-patterns-querystring",["jquery","pat-base","mockup-patterns-select2","mockup-patterns-pickadate","mockup-patterns-relateditems","select2","translate","underscore"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(){this.init.apply(this,arguments)};i.prototype={defaults:{indexWidth:"20em",remove:"",classBetweenDtName:"querystring-criteria-betweendt",classWrapperName:"querystring-criteria-wrapper",classIndexName:"querystring-criteria-index",classOperatorName:"querystring-criteria-operator",classValueName:"querystring-criteria-value",classRemoveName:"querystring-criteria-remove",classResultsName:"querystring-criteria-results",classClearName:"querystring-criteria-clear",classDepthName:"querystring-criteria-depth"},init:function(b,c,d,e,f,h,i,j,k,l){var m=this;m.options=a.extend(!0,{},m.defaults,c),m.indexes=d,m.indexGroups={},m.baseUrl=i,m.advanced=!1,m.initial=h,m.$wrapper=a("<div/>").addClass(m.options.classWrapperName).appendTo(b),m.patternDateOptions=j||{},m.patternAjaxSelectOptions=k||{},m.patternRelateditemsOptions=l||{},m.patternAjaxSelectOptions=a.extend({width:"250px"},m.patternAjaxSelectOptions),m.patternRelateditemsOptions=a.extend({vocabularyUrl:m.baseUrl+"@@getVocabulary?name=plone.app.vocabularies.Catalog&field=relatedItems",width:"400px"},m.patternRelateditemsOptions),m.patternRelateditemsOptions.maximumSelectionSize=1,m.$remove=a("<div>"+m.options.remove+"</div>").addClass(m.options.classRemoveName).appendTo(m.$wrapper).on("click",function(a){m.remove()}),m.$index=a("<select><option></option></select>").attr("placeholder",g("Select criteria")),a.each(m.indexes,function(b,c){c.enabled&&(m.indexGroups[c.group]||(m.indexGroups[c.group]=a("<optgroup/>").attr("label",c.group).appendTo(m.$index)),m.indexGroups[c.group].append(a("<option/>").attr("value",b).html(c.title)))}),m.$wrapper.append(a("<div/>").addClass(m.options.classIndexName).append(m.$index)),m.$index.patternSelect2({width:m.options.indexWidth,placeholder:g("Select criteria")}).on("change",function(a){m.removeValue(),m.createOperator(a.val),m.createClear(),m.trigger("index-changed")}),"undefined"!=typeof e&&(m.$index.select2("val",e),m.createOperator(e,f,h),m.createClear()),m.trigger("create-criteria")},appendOperators:function(b){var c=this;c.$operator=a("<select/>"),c.indexes[b]&&h.each(c.indexes[b].operations,function(d){var e=c.indexes[b].operators[d];a("<option/>").attr("value",d).html(e.title).appendTo(c.$operator)}),c.$wrapper.append(a("<div/>").addClass(c.options.classOperatorName).append(c.$operator)),c.$operator.patternSelect2({width:"10em"}).on("change",function(a){c.createValue(b),c.createClear(),c.trigger("operator-changed")})},convertPathOperators:function(a){var b=this;return b.advanced?a:a=a.replace("advanced","relativePath").replace("path","relativePath")},createPathOperators:function(){var b=this;if(b.advanced)return void b.resetPathOperators();var c="plone.app.querystring.operation.string.advanced";"undefined"==typeof b.indexes.path.operators[c]&&(b.indexes.path.operations.push(c),b.indexes.path.operators[c]={title:"Advanced",widget:"AdvancedPathWidget",description:"Enter a custom path string",operation:"plone.app.querystring.queryparser._relativePath"}),a.each(b.indexes.path.operators,function(a,b){var c=b;a.indexOf("absolute")>0?c.title="Custom":a.indexOf("relative")>0?c.title="Parent (../)":a.indexOf("advanced")>0?c.title="Advanced Mode":(c.title="Current (./)",c.widget="RelativePathWidget")})},resetPathOperators:function(){var b=this;a.each(b.indexes.path.operators,function(a,b){var c=b;a.indexOf("absolute")>0?c.title="Absolute Path":a.indexOf("relative")>0?c.title="Relative Path":a.indexOf("advanced")>0?c.title="Simple Mode":(c.title="Navigation Path",c.widget="ReferenceWidget")})},createOperator:function(a,b,c){var d=this;d.removeOperator(),d.createPathOperators(),"path"===a&&c&&".::1"!==c&&"..::1"!==c&&!c.match(/^[0-9a-f]{32}::-?[0-9]+$/)&&(d.advanced=!0,d.resetPathOperators()),d.appendOperators(a),"undefined"==typeof b&&(b=d.$operator.select2("val")),d.$operator.select2("val",b),d.createValue(a,c),d.trigger("create-operator")},createValue:function(b,c){var d=this,e=d.indexes[b].operators[d.$operator.val()].widget,f=a("<div/>").addClass(d.options.classValueName).appendTo(d.$wrapper);d.removeValue();var h=function(b){for(var c="<div class='depth-select-box'><label for='depth-select'>Depth</label><select name='depth-select' class='"+d.options.classDepthName+"'><option value='-1' selected='selected'>Unlimited</option>",e=0;e<=10;e+=1)c+="<option value="+e+" ",
""+e===b&&(c+="selected='selected' "),c+=">"+e+"</option>";return c+="</select></div>",a(c).change(function(){d.trigger("depth-changed")})};if("StringWidget"===e)d.$value=a('<input type="text"/>').addClass(d.options.classValueName+"-"+e).val(c).appendTo(f).change(function(){d.trigger("value-changed")});else if("DateWidget"===e)d.$value=a('<input type="text"/>').addClass(d.options.classValueName+"-"+e).attr("data-pat-pickadate",JSON.stringify(d.patternDateOptions)).val(c).appendTo(f).patternPickadate().on("updated.pickadate.patterns",function(){d.trigger("value-changed")});else if("DateRangeWidget"===e){var i=a("<span/>").appendTo(f),j="",k="";c&&(j=c[0]?c[0]:"",k=c[1]?c[1]:"");var l=a('<input type="text"/>').addClass(d.options.classValueName+"-"+e).addClass(d.options.classValueName+"-"+e+"-start").attr("data-pat-pickadate",JSON.stringify(d.patternDateOptions)).val(j).appendTo(i).patternPickadate().on("updated.pickadate.patterns",function(){d.trigger("value-changed")});f.append(a("<span/>").html(g("to")).addClass(d.options.classBetweenDtName));var m=a("<span/>").appendTo(f),n=a('<input type="text"/>').addClass(d.options.classValueName+"-"+e).addClass(d.options.classValueName+"-"+e+"-end").attr("data-pat-pickadate",JSON.stringify(d.patternDateOptions)).val(k).appendTo(m).patternPickadate().on("updated.pickadate.patterns",function(){d.trigger("value-changed")});d.$value=[l,n]}else if("RelativeDateWidget"===e)d.$value=a('<input type="text"/>').after(a("<span/>").html(g("days"))).addClass(d.options.classValueName+"-"+e).appendTo(f).change(function(){d.trigger("value-changed")});else if("AdvancedPathWidget"===e)d.advanced?d.advanced=!1:d.advanced=!0,d.createPathOperators(),d.removeOperator(),d.appendOperators(b),d.createValue(b);else if("RelativePathWidget"===e)d.advanced?d.$value=a('<input type="text"/>').addClass(d.options.classValueName+"-"+e).appendTo(f).val(c).change(function(){d.trigger("value-changed")}):(c?".::1"===c&&d.$operator.select2("val","plone.app.querystring.operation.string.path"):(c=".::1",d.$operator.val().indexOf("relativePath")>0&&(c="..::1")),d.$value=a('<input type="hidden"/>').addClass(d.options.classValueName+"-"+e).appendTo(f).val(c));else if("ReferenceWidget"===e)if(d.advanced)d.$value=a('<input type="text"/>').addClass(d.options.classValueName+"-"+e).val(c).appendTo(f).change(function(){d.trigger("value-changed")});else{var o=["",-1];"undefined"!=typeof c&&(o=c.split("::")),d.$value=a('<input type="text"/>').addClass(d.options.classValueName+"-"+e).appendTo(f).val(o[0]).patternRelateditems(d.patternRelateditemsOptions).change(function(){d.trigger("value-changed")}),d.$value.parent().after(h(o[1])),d.$value.parents("."+d.options.classValueName).addClass("break-line")}else"MultipleSelectionWidget"===e&&(d.$value=a("<select/>").prop("multiple",!0).addClass(d.options.classValueName+"-"+e).appendTo(f).change(function(){d.trigger("value-changed")}),d.indexes[b]&&a.each(d.indexes[b].values,function(b,c){a("<option/>").attr("value",b).html(c.title).appendTo(d.$value)}),d.$value.patternSelect2(d.patternAjaxSelectOptions));if("undefined"!=typeof c&&"undefined"!=typeof d.$value)if(a.isArray(d.$value))a.each(c,function(a,b){d.$value[a].select2("val",b)});else{var p=c;"string"==typeof c&&"RelativePathWidget"!==e&&(p=c.replace(/::-?[0-9]+/,"")),d.$value.select2("val",p)}d.trigger("create-value")},createClear:function(){var b=this;b.removeClear(),b.$clear=a("<div/>").addClass(b.options.classClearName).appendTo(b.$wrapper)},remove:function(){var a=this;a.trigger("remove"),a.$remove.remove(),a.$index.parent().remove(),a.removeOperator(),a.removeValue(),a.removeClear(),a.$wrapper.remove()},removeClear:function(){var a=this;a.trigger("remove-clear"),a.$clear&&a.$clear.remove()},removeOperator:function(){var a=this;a.trigger("remove-operator"),a.$operator&&a.$operator.parent().remove()},removeValue:function(){var b=this;b.trigger("remove-value"),b.$value&&(a.isArray(b.$value)?b.$value[0].parents(".querystring-criteria-value").remove():b.$value.parents(".querystring-criteria-value").remove())},buildQueryPart:function(){var b=this,c=b.$index.select2("val");if(""===c)return"";var d="query.i:records="+c;if("undefined"==typeof b.$operator)return"";var e=b.$operator.val();if("path"===c){if(e.indexOf("advanced")>0)return"";e=b.convertPathOperators(e)}var f="query.o:records="+e,g="query.v:records=",h="query.v:records:list=",i=[];if("undefined"==typeof b.$value)i.push(g);else if(a.isArray(b.$value))a.each(b.$value,function(b,c){i.push(h+a(this).val())});else if(a.isArray(b.$value.val()))a.each(b.$value.val(),function(a,b){i.push(h+b)});else{var j=g+b.$value.val();"path"===c&&""!==b.$value.val()?j+=b.getDepthString():"undefined"!=typeof b.initial&&(j=g+b.initial,delete b.initial),i.push(j)}return d+"&"+f+"&"+i.join("&")},getJSONListStr:function(){var b=this,c=b.$index.select2("val");if(""===c)return"";if("undefined"==typeof b.$operator)return"";var d=b.$operator.val();if("path"===c){if(d.indexOf("advanced")>0)return"";d=b.convertPathOperators(d)}var e=[];if(a.isArray(b.$value))a.each(b.$value,function(b,c){e.push(a(this).val())});else if("undefined"!=typeof b.$value){var f=b.$value.val();if("path"===c&&f){var g=b.getDepthString();g&&(f+=g)}e.push(f)}var h;return h=e.length>1?'["'+e.join('","')+'"]':1===e.length?JSON.stringify(e[0]):'""',"undefined"!=typeof b.indexes[c].operators[d]?'{"i":"'+c+'", "o":"'+d+'", "v":'+h+"}":void 0},getDepthString:function(){var b=this,c="",d=a("."+b.options.classDepthName).val();return""!==d&&"undefined"!=typeof d&&(c+="::"+d),c},trigger:function(a){this.$wrapper.trigger(a+"-criteria.querystring.patterns",[this])},on:function(a,b){this.$wrapper.on(a+"-criteria.querystring.patterns",b)}};var j=b.extend({name:"querystring",trigger:".pat-querystring",parser:"mockup",defaults:{indexes:[],classWrapperName:"querystring-wrapper",criteria:{},indexOptionsUrl:null,previewURL:"portal_factory/@@querybuilder_html_results",previewCountURL:"portal_factory/@@querybuildernumberofresults",patternDateOptions:{},patternAjaxSelectOptions:{},patternRelateditemsOptions:{},classSortLabelName:"querystring-sort-label",classSortReverseName:"querystring-sortreverse",classSortReverseLabelName:"querystring-sortreverse-label",classPreviewCountWrapperName:"querystring-previewcount-wrapper",classPreviewResultsWrapperName:"querystring-previewresults-wrapper",classPreviewWrapperName:"querystring-preview-wrapper",classPreviewName:"querystring-preview",classPreviewTitleName:"querystring-preview-title",classPreviewDescriptionName:"querystring-preview-description",classSortWrapperName:"querystring-sort-wrapper",showPreviews:!0},init:function(){var b=this;b.$el.hide(),b.$wrapper=a("<div/>"),b.$el.after(b.$wrapper),b.initialized=!1,b.options.indexOptionsUrl?a.ajax({url:b.options.indexOptionsUrl,success:function(a){b.options.indexes=a.indexes,b.options.sortable_indexes=a.sortable_indexes,b._init()},error:function(a){}}):b._init()},_init:function(){var b=this;b.$criteriaWrapper=a("<div/>").addClass(b.options.classWrapperName).appendTo(b.$wrapper),b.$sortWrapper=a("<div/>").addClass(b.options.classSortWrapperName).appendTo(b.$wrapper),"false"===b.options.showPreviews&&(b.options.showPreviews=!1),b.options.showPreviews&&(b.$previewWrapper=a("<div/>").addClass(b.options.classPreviewWrapperName).appendTo(b.$wrapper),a("<div/>").addClass(b.options.classPreviewTitleName).html(g("Preview")).appendTo(b.$previewWrapper),a("<div/>").addClass(b.options.classPreviewDescriptionName).html(g("Preview of at most 10 items")).appendTo(b.$previewWrapper)),b.criterias=[],b.$el.val()&&a.each(JSON.parse(b.$el.val()),function(a,c){b.createCriteria(c.i,c.o,c.v)}),b.createCriteria(),b.createSort(),b.options.showPreviews&&b.refreshPreviewEvent(),b.$el.trigger("initialized"),b.initialized=!0},createCriteria:function(a,b,c){var d=this,e=d.options.indexOptionsUrl.replace(/(@@.*)/g,""),f=new i(d.$criteriaWrapper,d.options.criteria,d.options.indexes,a,b,c,e,d.options.patternDateOptions,d.options.patternAjaxSelectOptions,d.options.patternRelateditemsOptions);f.on("remove",function(a){d.criterias[d.criterias.length-1]===f&&d.createCriteria()}),f.on("index-changed",function(a){d.criterias[d.criterias.length-1]===f&&d.createCriteria()});var g=function(){d.refreshPreviewEvent(),d.updateValue()},h=-1,j=function(){clearTimeout(h),h=setTimeout(g,100)};f.on("remove",function(a,b){d.criterias.indexOf(b)!==-1&&d.criterias.splice(d.criterias.indexOf(b),1),j(a,b)}),f.on("remove-clear",j),f.on("remove-operator",j),f.on("remove-value",j),f.on("index-changed",j),f.on("operator-changed",j),f.on("create-criteria",j),f.on("create-operator",j),f.on("create-value",j),f.on("value-changed",j),f.on("depth-changed",j),d.criterias.push(f)},createSort:function(){var b=this,c=a('[id$="-sort_on"]').filter('[id^="formfield-"]'),d=a('[id$="-sort_reversed"]').filter('[id^="formfield-"]');a("<span/>").addClass(b.options.classSortLabelName).html(g("Sort on")).appendTo(b.$sortWrapper),b.$sortOn=a("<select/>").attr("name","sort_on").appendTo(b.$sortWrapper).change(function(){b.refreshPreviewEvent.call(b),a('[id$="sort_on"]',c).val(a(this).val())}),b.$sortOn.append(a('<option value="">No sorting</option>'));for(var e in b.options.sortable_indexes)b.$sortOn.append(a("<option/>").attr("value",e).html(b.options.indexes[e].title));if(b.$sortOn.patternSelect2({width:"150px"}),b.$sortOrder=a('<input type="checkbox" />').attr("name","sort_reversed:boolean").change(function(){b.refreshPreviewEvent.call(b),a(this).prop("checked")?a('.option input[type="checkbox"]',d).prop("checked",!0):a('.option input[type="checkbox"]',d).prop("checked",!1)}),a("<span/>").addClass(b.options.classSortReverseName).appendTo(b.$sortWrapper).append(b.$sortOrder).append(a("<span/>").html(g("Reversed Order")).addClass(b.options.classSortReverseLabelName)),c.length>=1&&d.length>=1){var f=a('.option input[type="checkbox"]',d).prop("checked"),h=a('[id$="-sort_on"]',c).val();f&&b.$sortOrder.prop("checked",!0),b.$sortOn.select2("val",h),a(c).hide(),a(d).hide()}},refreshPreviewEvent:function(b){var c=this;if(c.options.showPreviews){"undefined"!=typeof c._previewXhr&&c._previewXhr.abort(),"undefined"!=typeof c.$previewPane&&c.$previewPane.remove();var d=[];if(a.each(c.criterias,function(a,b){var c=b.buildQueryPart();""!==c&&d.push(c)}),c.$previewPane=a("<div/>").addClass(c.options.classPreviewName).appendTo(c.$previewWrapper),d.length<=0)return void a("<div/>").addClass(c.options.classPreviewCountWrapperName).html("No results to preview").prependTo(c.$previewPane);d.push("sort_on="+c.$sortOn.val()),c.$sortOrder.prop("checked")&&d.push("sort_order=reverse"),c._previewXhr=a.get(c.options.previewURL+"?"+d.join("&")).done(function(b,d){a("<div/>").addClass(c.options.classPreviewResultsWrapperName).html(b).appendTo(c.$previewPane)})}},updateValue:function(){var b=this,c=[];a.each(b.criterias,function(a,b){var d=b.getJSONListStr();""!==d&&c.push(d)});var d=(b.$el.val(),"["+c.join(",")+"]");b.$el.val(d),b.$el.trigger("change")}});return j}),define("mockup-patterns-inlinevalidation",["jquery","pat-base"],function(a,b){"use strict";var c=b.extend({name:"inlinevalidation",trigger:".pat-inlinevalidation",parser:"mockup",render_error:function(b,c){var d=a("div.fieldErrorBox",b);""!==c?(b.addClass("error"),d.html(c)):(b.removeClass("error"),d.html(""))},append_url_path:function(a,b){var c,d,e=a.split(/\?/);for(d=e[0],"/"!==d[d.length-1]&&(d+="/"),d+=b,c=1;c<e.length;c+=1)d+="?"+e[c];return d},queue:function(b,c){"undefined"==typeof c&&(c=b,b="fx"),a(window).queue(b,c)},validate_archetypes_field:function(b){var c=a(b),d=c.closest(".field"),e=d.attr("data-uid"),f=d.attr("data-fieldname"),g=c.val();c.prop("multiple")&&null===g&&(g=a([]).serialize());var h,i=a.param({uid:e,fname:f,value:g},h=!0);d&&e&&f&&this.queue(a.proxy(function(b){a.ajax({type:"POST",url:a("base").attr("href")+"/at_validate_field?"+i,iframe:!1,success:a.proxy(function(a){this.render_error(d,a.errmsg),b()},this),error:function(){b()},dataType:"json"})},this))},validate_formlib_field:function(b){var c=a(b),d=c.closest(".field"),e=d.closest("form"),f=d.attr("data-fieldname");this.queue(a.proxy(function(b){e.ajaxSubmit({url:this.append_url_path(e.attr("action"),"@@formlib_validate_field"),data:{fname:f},iframe:!1,success:a.proxy(function(a){this.render_error(d,a.errmsg),b()},this),error:function(){b()},dataType:"json"})},this))},validate_z3cform_field:function(b){var c=a(b),d=c.closest(".field"),e=d.closest("form"),f=c.closest("fieldset").attr("data-fieldset"),g=d.attr("data-fieldname");g&&this.queue(a.proxy(function(b){e.ajaxSubmit({url:this.append_url_path(e.attr("action"),"@@z3cform_validate_field"),data:{fname:g,fset:f},iframe:!1,success:a.proxy(function(a){this.render_error(d,a.errmsg),b()},this),error:function(){b()},dataType:"json"})},this))},init:function(){this.$el.find('input[type="text"], input[type="password"], input[type="checkbox"], select, textarea').on("blur",a.proxy(function(a){"archetypes"===this.options.type?this.validate_archetypes_field(a.target):"z3c.form"===this.options.type?this.validate_z3cform_field(a.target):"formlib"===this.options.type&&this.validate_formlib_field(a.target)},this))}});return c}),define("mockup-ui-url/views/container",["jquery","underscore","mockup-ui-url/views/base"],function(a,b,c){"use strict";var d=c.extend({id:"",items:[],itemContainer:null,isOffsetParent:!0,idPrefix:"container-",render:function(){return this.options.id&&this.$el.attr("id",this.idPrefix+this.options.id),this.applyTemplate(),this.renderItems(),this.bindEvents(),this.isOffsetParent&&this.$el.addClass("ui-offset-parent"),this.trigger("render",this),this.afterRender(),this.$el.data("component",this),this},renderItems:function(){var c;if(null!==this.itemContainer){if(c=a(this.itemContainer,this.$el),0===c.length)throw"Item Container element not found."}else c=this.$el;b.each(this.items,function(a){a.appendInContainer===!0?c.append(a.render().$el):a.render()},this)},bindEvents:function(){var a=this;b.each(this.items,function(b){b.on("all",function(){var b,c=[].slice,d=arguments[0],e=""!==a.id?a.id+"."+d:d;if(arguments.length>1&&(b=arguments[1]),e!==d){var f=c.call(arguments,0);f[0]=e,a.trigger.apply(a,f)}void 0!==b&&b.isUIView===!0&&b.propagateEvent(d)===!0&&a.trigger.apply(a,arguments)})})},get:function(a){return b.findWhere(this.items,{id:a})},add:function(a){if(void 0!==a.id&&this.get(a.id))throw"Another item with the same `id` already exists.";this.items.push(a)}});return d}),define("mockup-ui-url/views/toolbar",["mockup-ui-url/views/container"],function(a){"use strict";var b=a.extend({tagName:"div",className:"navbar",idPrefix:"toolbar-"});return b}),define("mockup-ui-url/views/buttongroup",["underscore","mockup-ui-url/views/container"],function(a,b){"use strict";var c=b.extend({tagName:"div",className:"btn-group",idPrefix:"btngroup-",disable:function(){a.each(this.items,function(a){a.disable()})},enable:function(){a.each(this.items,function(a){a.enable()})}});return c}),define("mockup-patterns-structure-url/js/navigation",["backbone","mockup-utils"],function(a,b){"use strict";var c=a.Model.extend({initialize:function(a){this.options=a,this.app=a.app,this.model=a.model},folderClicked:function(a){a.preventDefault();var b=this;b.app.setCurrentPath(b.model.attributes.path),b.app.collection.goTo(b.app.collection.information.firstPage)}});return c}),define("mockup-patterns-structure-url/js/models/result",["backbone"],function(a){"use strict";var b=a.Model.extend({defaults:function(){return{is_folderish:!1,review_state:"",getURL:""}},uid:function(){return this.attributes.UID}});return b}),define("mockup-patterns-structure-url/js/actions",["jquery","underscore","backbone","mockup-patterns-structure-url/js/models/result","mockup-utils","translate"],function(a,b,c,d,e,f){"use strict";var g=c.Model.extend({initialize:function(a){this.options=a,this.app=a.app,this.model=a.model,this.selectedCollection=this.app.selectedCollection},selectAll:function(c){c.preventDefault();var e=this,f=1,g=0,h=function(){e.app.loading.show(),a.ajax({url:e.app.collection.url,type:"GET",dataType:"json",data:{query:e.app.collection.queryParser({searchPath:e.model.attributes.path}),batch:JSON.stringify({page:f,size:100}),attributes:JSON.stringify(e.app.collection.queryHelper.options.attributes)}}).done(function(a){var c=e.app.collection.parse(a,g);g+=c.length,b.each(c,function(a){e.app.selectedCollection.add(new d(a))}),f+=1,a.total>g?h():(e.app.loading.hide(),e.app.tableView.render())})};h()},doAction:function(b,c,d){var g=this;a.ajax({url:g.app.buttons.get(b).options.url,data:{selection:JSON.stringify([g.model.attributes.UID]),folder:g.model.attributes.path,_authenticator:e.getAuthenticator()},dataType:"json",type:"POST"}).done(function(a){var b;"success"===a.status?(b=f(c+' "'+g.model.attributes.Title+'"'),g.app.collection.pager(),g.app.updateButtons()):b=f("Error "+d+' "'+g.model.attributes.Title+'"'),g.app.setStatus({text:b,type:a.status||"warning"})})},cutClicked:function(a){var b=this;a.preventDefault(),b.doAction("cut",f("Cut"),f("cutting"))},copyClicked:function(a){var b=this;a.preventDefault(),b.doAction("copy",f("Copied"),f("copying"))},pasteClicked:function(a){var b=this;a.preventDefault(),b.doAction("paste",f("Pasted into"),f("Error pasting into"))},moveTopClicked:function(a){a.preventDefault(),this.app.moveItem(this.model.attributes.id,"top")},moveBottomClicked:function(a){a.preventDefault(),this.app.moveItem(this.model.attributes.id,"bottom")},setDefaultPageClicked:function(b){b.preventDefault();var c=this;a.ajax({url:c.app.getAjaxUrl(c.app.setDefaultPageUrl),type:"POST",data:{_authenticator:a('[name="_authenticator"]').val(),id:this.model.attributes.id},success:function(a){c.app.ajaxSuccessResponse.apply(c.app,[a])},error:function(a){c.app.ajaxErrorResponse.apply(c.app,[a])}})}});return g}),define("mockup-patterns-structure-url/js/actionmenu",["underscore"],function(a){"use strict";var b={openItem:{url:"#",title:"Open",category:"button",iconCSS:"glyphicon glyphicon-eye-open",css:"",modal:!1},editItem:{url:"#",title:"Edit",category:"button",iconCSS:"glyphicon glyphicon-pencil",css:"",modal:!1},cutItem:{library:"mockup-patterns-structure-url/js/actions",method:"cutClicked",url:"#",title:"Cut",category:"dropdown",iconCSS:"glyphicon glyphicon-scissors",css:"",modal:!1},copyItem:{library:"mockup-patterns-structure-url/js/actions",method:"copyClicked",url:"#",title:"Copy",category:"dropdown",iconCSS:"glyphicon glyphicon-duplicate",css:"",modal:!1},pasteItem:{library:"mockup-patterns-structure-url/js/actions",method:"pasteClicked",url:"#",title:"Paste",category:"dropdown",iconCSS:"glyphicon glyphicon-open-file",css:"",modal:!1},"move-top":{library:"mockup-patterns-structure-url/js/actions",method:"moveTopClicked",url:"#",title:"Move to top of folder",category:"dropdown",iconCSS:"glyphicon glyphicon-step-backward rright",css:"",modal:!1},"move-bottom":{library:"mockup-patterns-structure-url/js/actions",method:"moveBottomClicked",url:"#",title:"Move to bottom of folder",category:"dropdown",iconCSS:"glyphicon glyphicon-step-backward rleft",css:"",modal:!1},"set-default-page":{library:"mockup-patterns-structure-url/js/actions",method:"setDefaultPageClicked",url:"#",title:"Set as default page",category:"dropdown",iconCSS:"glyphicon glyphicon-ok-circle",css:"",modal:!1},selectAll:{library:"mockup-patterns-structure-url/js/actions",method:"selectAll",url:"#",title:"Select all contained items",category:"dropdown",iconCSS:"glyphicon glyphicon-check",css:"",modal:!1}},c=function(c){if(null!==c.menuOptions)return c.menuOptions;var d=c.model.attributes,e=c.app,f=a.clone(b);e.pasteAllowed()&&d.is_folderish||delete f.pasteItem,(e.inQueryMode()||c.options.canMove===!1)&&(delete f["move-top"],delete f["move-bottom"]),!d.is_folderish&&e.setDefaultPageUrl||delete f["set-default-page"],d.is_folderish||delete f.selectAll;var g=e.options.typeToViewAction,h=g&&g[d.portal_type]||"";return f.openItem.url=d.getURL+h,f.editItem.url=d.getURL+"/edit",f};return c}),define("text!mockup-patterns-structure-url/templates/actionmenu.xml",[],function(){return'<% _.each(menuOptions.button, function(menuOption){ %>\n<a class="action <%- menuOption.name %> <%- menuOption.idx %> pat-tooltip <%- menuOption.css %>"\n    href="<%- menuOption.url %>"\n    title="<%- _t(menuOption.title) %>">\n  <% if (menuOption.iconCSS) { %>\n  <span class="<%- menuOption.iconCSS %>"></span>\n  <% } else { %>\n  <%- _t(menuOption.title) %> \n  <% } %>\n</a>&nbsp;\n<% }); %>\n\n\n<% if (menuOptions.dropdown) { %>\n<a class="dropdown-toggle"\n    data-toggle="dropdown"\n    href="#"\n    aria-haspopup="true"\n    aria-expanded="true"\n    id="<%- id %>"\n    title="Actions">\n  <span class="glyphicon glyphicon-cog"></span><span class="caret"></span>\n</a>\n<ul class="dropdown-menu pull-right" aria-labelledby="<%- id %>">\n  <% if (header) { %>\n    <li class="dropdown-header"><%- header %></li>\n    <li class="divider"></li>\n  <% } %>\n\n  <% _.each(menuOptions.dropdown, function(menuOption){ %>\n  <li>\n    <a class="action <%- menuOption.name %> <%- menuOption.idx %> <%- menuOption.css %>"\n        href="<%- menuOption.url %>">\n      <% if (menuOption.iconCSS) { %>\n      <span class="<%- menuOption.iconCSS %>"></span>\n      <% } %>\n      <%- _t(menuOption.title) %>\n    </a>\n  </li>\n  <% }); %>\n</ul>\n<% } %>\n'}),define("mockup-patterns-structure-url/js/views/actionmenu",["jquery","underscore","mockup-ui-url/views/base","mockup-utils","mockup-patterns-structure-url/js/models/result","mockup-patterns-structure-url/js/actions","mockup-patterns-structure-url/js/actionmenu","text!mockup-patterns-structure-url/templates/actionmenu.xml","pat-registry","translate","mockup-patterns-tooltip","bootstrap-dropdown"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=c.extend({className:"btn-group actionmenu",template:b.template(h),menuOptions:null,menuGenerator:"mockup-patterns-structure-url/js/actionmenu",eventConstructor:function(a){var b=this,c=a.library,d=a.method;if("string"!=typeof c||"string"!=typeof d)return!1;var e=function(a){var e=require(c),f=new e(b);return f[d]&&f[d](a)};return e},events:function(){var a=this,c={},e={};return b.each(a.menuOptions,function(b,f){var g=d.generateId();b.idx=g,b.name=f;var h=b.category||"dropdown";void 0===e[h]&&(e[h]=[]),e[h].push(b),b.css=b.css||"",b.modal===!0&&(b.css+=" pat-plone-modal");var i=a.eventConstructor(b);i&&(c["click a."+g]=i)}),a.menuOptionsCategorized=e,c},initialize:function(a){var b=this;c.prototype.initialize.apply(b,[a]),b.options=a,b.selectedCollection=b.app.selectedCollection;var d=b.options.menuGenerator||b.menuGenerator;if(d){var e=require(d),f=e(b);"object"==typeof f&&(b.menuOptions=f)}},render:function(){var b=this;b.$el.empty();var c=this.model.toJSON();return c.header=b.options.header||null,c.menuOptions=b.menuOptionsCategorized,b.$el.html(b.template(a.extend({_t:j,id:d.generateId()},c))),c.menuOptions.dropdown&&(b.$dropdown=b.$(".dropdown-toggle"),b.$dropdown.dropdown()),b.options.className&&b.$el.addClass(b.options.className),i.scan(this.$el),this}});return k}),define("text!mockup-patterns-structure-url/templates/tablerow.xml",[],function(){return'<td class="selection" data-order="<%- attributes[\'_sort\'] %>"><input type="checkbox" <% if(selected){ %> checked="checked" <% } %>/></td>\n\n<td class="title">\n  <div class="pull-left">\n    <a href="<%- viewURL %>"\n        class="manage state-<%- review_state %> contenttype-<%- contenttype %>"\n        title="<%- portal_type %>">\n        <% if(attributes["getMimeIcon"] && contenttype == \'file\'){ %>\n           <img class="mime-icon" src="<%- getMimeIcon %>"> <% } %>\n      <% if(Title){ %>\n        <%- Title %>\n      <% } else { %>\n        <em><%- id %></em>\n      <% } %>\n    </a>\n    <% if(expired){ %>\n      <span class="plone-item-expired"><%- _t(\'Expired\') %></span>\n    <% } %>\n    <% if(ineffective){ %>\n      <span class="plone-item-ineffective"><%- _t(\'Before publishing date\') %></span>\n    <% } %>\n    <% if(activeColumns.indexOf(\'Description\') !== -1 && _.has(availableColumns, \'Description\') && Description) { %>\n    <p class="Description">\n      <small>\n        <%- Description %>\n      </small>\n    </p>\n    <% } %>\n  </div>\n  <% if(attributes["getIcon"] && thumb_scale) { %>\n    <img class="thumb-<%- thumb_scale %> pull-right" src="<%- getURL %>/@@images/image/<%- thumb_scale %>">\n  <% } %>\n</td>\n\n<% _.each(activeColumns, function(column) { %>\n  <% if(column !== \'Description\' && _.has(availableColumns, column)) { %>\n    <td class="<%- column %>" data-order="<%- attributes[column] %>"><%- attributes[column] %></td>\n  <% } %>\n<% }); %>\n\n<td class="actionmenu-container"></td>\n'}),define("mockup-patterns-structure-url/js/views/tablerow",["jquery","underscore","backbone","mockup-patterns-structure-url/js/navigation","mockup-patterns-structure-url/js/views/actionmenu","text!mockup-patterns-structure-url/templates/tablerow.xml","mockup-utils","translate","moment"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=c.View.extend({tagName:"tr",className:"itemRow",template:b.template(f),events:{"change input":"itemSelected","click td.title a.manage":"itemClicked"},initialize:function(a){this.options=a,this.app=a.app,this.selectedCollection=this.app.selectedCollection,this.table=this.options.table,this.now=i()},expired:function(a){if(!a.attributes.ExpirationDate)return!1;var b=i(a.attributes.ExpirationDate);return b.diff(this.now,"seconds")<0},ineffective:function(a){if(!a.attributes.EffectiveDate)return!1;var b=i(a.attributes.EffectiveDate);return b.diff(this.now,"seconds")>0},render:function(){var b=this,c=this.model.toJSON();c.selected=!1,this.selectedCollection.findWhere({UID:c.UID})&&(c.selected=!0),c.attributes=b.model.attributes,c.activeColumns=b.app.activeColumns,c.availableColumns=b.app.availableColumns,c.portal_type=c.portal_type?c.portal_type:"",c.contenttype=c.portal_type.toLowerCase().replace(/\.| /g,"-"),c._authenticator=g.getAuthenticator(),c.thumb_scale=b.app.thumb_scale;var d=b.app.typeToViewAction&&b.app.typeToViewAction[c.attributes.portal_type]||"";c.viewURL=c.attributes.getURL+d,c._t=h,c.expired=this.expired(c),c.ineffective=this.ineffective(c),b.$el.html(b.template(c));var f=b.model.attributes;b.$el.addClass("state-"+f.review_state).addClass("type-"+f.portal_type),f.is_folderish&&b.$el.addClass("folder"),b.$el.attr("data-path",c.path),b.$el.attr("data-UID",c.UID),b.$el.attr("data-id",c.id),b.$el.attr("data-type",c.portal_type),b.$el.attr("data-folderish",c.is_folderish),b.$el.removeClass("expired"),b.$el.removeClass("ineffective"),c.expired&&b.$el.addClass("expired"),c.ineffective&&b.$el.addClass("ineffective"),b.el.model=this.model;var i=!!b.app.options.moveUrl;return b.menu=new e({app:b.app,model:b.model,menuOptions:b.app.menuOptions,menuGenerator:b.app.menuGenerator,canMove:i}),a(".actionmenu-container",b.$el).append(b.menu.render().el),this},itemClicked:function(a){var b,c=this,d=this.app.keyEvent;b=d&&d.ctrlKey||!this.model.attributes.is_folderish?"other":"folder";var e=c.app.options.tableRowItemAction[b]||[],f=e[0],g=e[1];if("string"!=typeof f||"string"!=typeof b)return null;var h=require(f),i=new h(c);return i[g]&&i[g](a)},itemSelected:function(){var b=this.$("input")[0];b.checked?this.app.selectedCollection.add(this.model.clone()):this.app.selectedCollection.removeResult(this.model);var c=this.selectedCollection,d=this.app.keyEvent;if(d&&d.shiftKey&&this.app.last_selected&&null!==this.app.last_selected.parentNode){var e=a(this.app.last_selected),f=e.index(),g=this.$el.index();this.app.tableView.$('input[type="checkbox"]').each(function(){e=a(this);var d=e.parents("tr").index();if(d>f&&d<g||d<f&&d>g){this.checked=b.checked;var h=a(this).closest("tr.itemRow");if(h.length>0){var i=h[0].model,j=c.getByUID(i.attributes.UID);this.checked?j||c.add(i.clone()):j&&c.removeResult(j)}}})}this.app.last_selected=this.el}});return j}),define("text!mockup-patterns-structure-url/templates/table.xml",[],function(){return'<div class="alert alert-<%- status.type %> status">\n  <strong><%- status.label %></strong>\n  <span><%- status.text %></span>&nbsp;<% // &nbsp; to get correct height for empty alerts %>\n</div>\n\n<div class="fc-breadcrumbs-container">\n  <div class="fc-breadcrumbs" colspan="<%- activeColumns.length + 3 %>">\n    <a href="#" data-path="/">\n      <span class="glyphicon glyphicon-home"></span> /\n    </a>\n    <% _.each(pathParts, function(part, idx, list){\n      if(part){\n        if(idx > 0){ %>\n          /\n        <% } %>\n        <a href="#" class="crumb" data-path="<%- part %>"><%- part %></a>\n      <% }\n    }); %>\n  </div>\n</div>\n\n<table class="pat-datatables table table-striped table-bordered"\n       data-pat-datatables="<%- datatables_options %>">\n  <thead>\n    <tr>\n      <th class="selection"><input type="checkbox" class="select-all" /></th>\n      <th class="title"><%- _t(\'Title\') %></th>\n      <% _.each(activeColumns, function(column){ %>\n        <% if(column !== \'Description\' && _.has(availableColumns, column)) { %>\n          <th><%- availableColumns[column] %></th>\n        <% } %>\n      <% }); %>\n      <th class="actions"><%- _t("Actions") %></th>\n    </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n'}),function(a){"use strict";"function"==typeof define&&define.amd?define("datatables.net",["jquery"],function(b){return a(b,window,document)}):"object"==typeof exports?module.exports=function(b,c){return b||(b=window),c||(c="undefined"!=typeof window?require("jquery"):require("jquery")(b)),a(c,b,b.document)}:a(jQuery,window,document)}(function(a,b,c,d){"use strict";function e(b){var c,d,f="a aa ai ao as b fn i m o s ",g={};a.each(b,function(a,h){c=a.match(/^([^A-Z]+?)([A-Z])/),c&&f.indexOf(c[1]+" ")!==-1&&(d=a.replace(c[0],c[2].toLowerCase()),g[d]=a,"o"===c[1]&&e(b[a]))}),b._hungarianMap=g}function f(b,c,g){b._hungarianMap||e(b);var h;a.each(c,function(e,i){h=b._hungarianMap[e],h===d||!g&&c[h]!==d||("o"===h.charAt(0)?(c[h]||(c[h]={}),a.extend(!0,c[h],c[e]),f(b[h],c[h],g)):c[h]=c[e])})}function g(a){var b=Wa.defaults.oLanguage,c=a.sZeroRecords;!a.sEmptyTable&&c&&"No data available in table"===b.sEmptyTable&&Ha(a,a,"sZeroRecords","sEmptyTable"),!a.sLoadingRecords&&c&&"Loading..."===b.sLoadingRecords&&Ha(a,a,"sZeroRecords","sLoadingRecords"),a.sInfoThousands&&(a.sThousands=a.sInfoThousands);var d=a.sDecimal;d&&Qa(d)}function h(a){ob(a,"ordering","bSort"),ob(a,"orderMulti","bSortMulti"),ob(a,"orderClasses","bSortClasses"),ob(a,"orderCellsTop","bSortCellsTop"),ob(a,"order","aaSorting"),ob(a,"orderFixed","aaSortingFixed"),ob(a,"paging","bPaginate"),ob(a,"pagingType","sPaginationType"),ob(a,"pageLength","iDisplayLength"),ob(a,"searching","bFilter"),"boolean"==typeof a.sScrollX&&(a.sScrollX=a.sScrollX?"100%":""),"boolean"==typeof a.scrollX&&(a.scrollX=a.scrollX?"100%":"");var b=a.aoSearchCols;if(b)for(var c=0,d=b.length;c<d;c++)b[c]&&f(Wa.models.oSearch,b[c])}function i(b){ob(b,"orderable","bSortable"),ob(b,"orderData","aDataSort"),ob(b,"orderSequence","asSorting"),ob(b,"orderDataType","sortDataType");var c=b.aDataSort;"number"!=typeof c||a.isArray(c)||(b.aDataSort=[c])}function j(c){if(!Wa.__browser){var d={};Wa.__browser=d;var e=a("<div/>").css({position:"fixed",top:0,left:a(b).scrollLeft()*-1,height:1,width:1,overflow:"hidden"}).append(a("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(a("<div/>").css({width:"100%",height:10}))).appendTo("body"),f=e.children(),g=f.children();d.barWidth=f[0].offsetWidth-f[0].clientWidth,d.bScrollOversize=100===g[0].offsetWidth&&100!==f[0].clientWidth,d.bScrollbarLeft=1!==Math.round(g.offset().left),d.bBounding=!!e[0].getBoundingClientRect().width,e.remove()}a.extend(c.oBrowser,Wa.__browser),c.oScroll.iBarWidth=Wa.__browser.barWidth}function k(a,b,c,e,f,g){var h,i=e,j=!1;for(c!==d&&(h=c,j=!0);i!==f;)a.hasOwnProperty(i)&&(h=j?b(h,a[i],i,a):a[i],j=!0,
i+=g);return h}function l(b,d){var e=Wa.defaults.column,f=b.aoColumns.length,g=a.extend({},Wa.models.oColumn,e,{nTh:d?d:c.createElement("th"),sTitle:e.sTitle?e.sTitle:d?d.innerHTML:"",aDataSort:e.aDataSort?e.aDataSort:[f],mData:e.mData?e.mData:f,idx:f});b.aoColumns.push(g);var h=b.aoPreSearchCols;h[f]=a.extend({},Wa.models.oSearch,h[f]),m(b,f,a(d).data())}function m(b,c,e){var g=b.aoColumns[c],h=b.oClasses,j=a(g.nTh);if(!g.sWidthOrig){g.sWidthOrig=j.attr("width")||null;var k=(j.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);k&&(g.sWidthOrig=k[1])}e!==d&&null!==e&&(i(e),f(Wa.defaults.column,e),e.mDataProp===d||e.mData||(e.mData=e.mDataProp),e.sType&&(g._sManualType=e.sType),e.className&&!e.sClass&&(e.sClass=e.className),e.sClass&&j.addClass(e.sClass),a.extend(g,e),Ha(g,e,"sWidth","sWidthOrig"),e.iDataSort!==d&&(g.aDataSort=[e.iDataSort]),Ha(g,e,"aDataSort"));var l=g.mData,m=B(l),n=g.mRender?B(g.mRender):null,o=function(a){return"string"==typeof a&&a.indexOf("@")!==-1};g._bAttrSrc=a.isPlainObject(l)&&(o(l.sort)||o(l.type)||o(l.filter)),g._setter=null,g.fnGetData=function(a,b,c){var e=m(a,b,d,c);return n&&b?n(e,b,a,c):e},g.fnSetData=function(a,b,c){return C(l)(a,b,c)},"number"!=typeof l&&(b._rowReadObject=!0),b.oFeatures.bSort||(g.bSortable=!1,j.addClass(h.sSortableNone));var p=a.inArray("asc",g.asSorting)!==-1,q=a.inArray("desc",g.asSorting)!==-1;g.bSortable&&(p||q)?p&&!q?(g.sSortingClass=h.sSortableAsc,g.sSortingClassJUI=h.sSortJUIAscAllowed):!p&&q?(g.sSortingClass=h.sSortableDesc,g.sSortingClassJUI=h.sSortJUIDescAllowed):(g.sSortingClass=h.sSortable,g.sSortingClassJUI=h.sSortJUI):(g.sSortingClass=h.sSortableNone,g.sSortingClassJUI="")}function n(a){if(a.oFeatures.bAutoWidth!==!1){var b=a.aoColumns;ra(a);for(var c=0,d=b.length;c<d;c++)b[c].nTh.style.width=b[c].sWidth}var e=a.oScroll;""===e.sY&&""===e.sX||pa(a),La(a,null,"column-sizing",[a])}function o(a,b){var c=r(a,"bVisible");return"number"==typeof c[b]?c[b]:null}function p(b,c){var d=r(b,"bVisible"),e=a.inArray(c,d);return e!==-1?e:null}function q(b){var c=0;return a.each(b.aoColumns,function(b,d){d.bVisible&&"none"!==a(d.nTh).css("display")&&c++}),c}function r(b,c){var d=[];return a.map(b.aoColumns,function(a,b){a[c]&&d.push(b)}),d}function s(a){var b,c,e,f,g,h,i,j,k,l=a.aoColumns,m=a.aoData,n=Wa.ext.type.detect;for(b=0,c=l.length;b<c;b++)if(i=l[b],k=[],!i.sType&&i._sManualType)i.sType=i._sManualType;else if(!i.sType){for(e=0,f=n.length;e<f;e++){for(g=0,h=m.length;g<h&&(k[g]===d&&(k[g]=y(a,g,b,"type")),j=n[e](k[g],a),j||e===n.length-1)&&"html"!==j;g++);if(j){i.sType=j;break}}i.sType||(i.sType="string")}}function t(b,c,e,f){var g,h,i,j,k,m,n,o=b.aoColumns;if(c)for(g=c.length-1;g>=0;g--){n=c[g];var p=n.targets!==d?n.targets:n.aTargets;for(a.isArray(p)||(p=[p]),i=0,j=p.length;i<j;i++)if("number"==typeof p[i]&&p[i]>=0){for(;o.length<=p[i];)l(b);f(p[i],n)}else if("number"==typeof p[i]&&p[i]<0)f(o.length+p[i],n);else if("string"==typeof p[i])for(k=0,m=o.length;k<m;k++)("_all"==p[i]||a(o[k].nTh).hasClass(p[i]))&&f(k,n)}if(e)for(g=0,h=e.length;g<h;g++)f(g,e[g])}function u(b,c,e,f){var g=b.aoData.length,h=a.extend(!0,{},Wa.models.oRow,{src:e?"dom":"data",idx:g});h._aData=c,b.aoData.push(h);for(var i=b.aoColumns,j=0,k=i.length;j<k;j++)i[j].sType=null;b.aiDisplayMaster.push(g);var l=b.rowIdFn(c);return l!==d&&(b.aIds[l]=h),!e&&b.oFeatures.bDeferRender||I(b,g,e,f),g}function v(b,c){var d;return c instanceof a||(c=a(c)),c.map(function(a,c){return d=H(b,c),u(b,d.data,c,d.cells)})}function w(a,b){return b._DT_RowIndex!==d?b._DT_RowIndex:null}function x(b,c,d){return a.inArray(d,b.aoData[c].anCells)}function y(a,b,c,e){var f=a.iDraw,g=a.aoColumns[c],h=a.aoData[b]._aData,i=g.sDefaultContent,j=g.fnGetData(h,e,{settings:a,row:b,col:c});if(j===d)return a.iDrawError!=f&&null===i&&(Ga(a,0,"Requested unknown parameter "+("function"==typeof g.mData?"{function}":"'"+g.mData+"'")+" for row "+b+", column "+c,4),a.iDrawError=f),i;if(j!==h&&null!==j||null===i||e===d){if("function"==typeof j)return j.call(h)}else j=i;return null===j&&"display"==e?"":j}function z(a,b,c,d){var e=a.aoColumns[c],f=a.aoData[b]._aData;e.fnSetData(f,d,{settings:a,row:b,col:c})}function A(b){return a.map(b.match(/(\\.|[^\.])+/g)||[""],function(a){return a.replace(/\\\./g,".")})}function B(b){if(a.isPlainObject(b)){var c={};return a.each(b,function(a,b){b&&(c[a]=B(b))}),function(a,b,e,f){var g=c[b]||c._;return g!==d?g(a,b,e,f):a}}if(null===b)return function(a){return a};if("function"==typeof b)return function(a,c,d,e){return b(a,c,d,e)};if("string"!=typeof b||b.indexOf(".")===-1&&b.indexOf("[")===-1&&b.indexOf("(")===-1)return function(a,c){return a[b]};var e=function(b,c,f){var g,h,i,j;if(""!==f)for(var k=A(f),l=0,m=k.length;l<m;l++){if(g=k[l].match(pb),h=k[l].match(qb),g){if(k[l]=k[l].replace(pb,""),""!==k[l]&&(b=b[k[l]]),i=[],k.splice(0,l+1),j=k.join("."),a.isArray(b))for(var n=0,o=b.length;n<o;n++)i.push(e(b[n],c,j));var p=g[0].substring(1,g[0].length-1);b=""===p?i:i.join(p);break}if(h)k[l]=k[l].replace(qb,""),b=b[k[l]]();else{if(null===b||b[k[l]]===d)return d;b=b[k[l]]}}return b};return function(a,c){return e(a,c,b)}}function C(b){if(a.isPlainObject(b))return C(b._);if(null===b)return function(){};if("function"==typeof b)return function(a,c,d){b(a,"set",c,d)};if("string"!=typeof b||b.indexOf(".")===-1&&b.indexOf("[")===-1&&b.indexOf("(")===-1)return function(a,c){a[b]=c};var c=function(b,e,f){for(var g,h,i,j,k,l=A(f),m=l[l.length-1],n=0,o=l.length-1;n<o;n++){if(h=l[n].match(pb),i=l[n].match(qb),h){if(l[n]=l[n].replace(pb,""),b[l[n]]=[],g=l.slice(),g.splice(0,n+1),k=g.join("."),a.isArray(e))for(var p=0,q=e.length;p<q;p++)j={},c(j,e[p],k),b[l[n]].push(j);else b[l[n]]=e;return}i&&(l[n]=l[n].replace(qb,""),b=b[l[n]](e)),null!==b[l[n]]&&b[l[n]]!==d||(b[l[n]]={}),b=b[l[n]]}m.match(qb)?b=b[m.replace(qb,"")](e):b[m.replace(pb,"")]=e};return function(a,d){return c(a,d,b)}}function D(a){return hb(a.aoData,"_aData")}function E(a){a.aoData.length=0,a.aiDisplayMaster.length=0,a.aiDisplay.length=0,a.aIds={}}function F(a,b,c){for(var e=-1,f=0,g=a.length;f<g;f++)a[f]==b?e=f:a[f]>b&&a[f]--;e!=-1&&c===d&&a.splice(e,1)}function G(a,b,c,e){var f,g,h=a.aoData[b],i=function(c,d){for(;c.childNodes.length;)c.removeChild(c.firstChild);c.innerHTML=y(a,b,d,"display")};if("dom"!==c&&(c&&"auto"!==c||"dom"!==h.src)){var j=h.anCells;if(j)if(e!==d)i(j[e],e);else for(f=0,g=j.length;f<g;f++)i(j[f],f)}else h._aData=H(a,h,e,e===d?d:h._aData).data;h._aSortData=null,h._aFilterData=null;var k=a.aoColumns;if(e!==d)k[e].sType=null;else{for(f=0,g=k.length;f<g;f++)k[f].sType=null;J(a,h)}}function H(b,c,e,f){var g,h,i,j=[],k=c.firstChild,l=0,m=b.aoColumns,n=b._rowReadObject;f=f!==d?f:n?{}:[];var o=function(a,b){if("string"==typeof a){var c=a.indexOf("@");if(c!==-1){var d=a.substring(c+1),e=C(a);e(f,b.getAttribute(d))}}},p=function(b){if(e===d||e===l)if(h=m[l],i=a.trim(b.innerHTML),h&&h._bAttrSrc){var c=C(h.mData._);c(f,i),o(h.mData.sort,b),o(h.mData.type,b),o(h.mData.filter,b)}else n?(h._setter||(h._setter=C(h.mData)),h._setter(f,i)):f[l]=i;l++};if(k)for(;k;)g=k.nodeName.toUpperCase(),"TD"!=g&&"TH"!=g||(p(k),j.push(k)),k=k.nextSibling;else{j=c.anCells;for(var q=0,r=j.length;q<r;q++)p(j[q])}var s=c.firstChild?c:c.nTr;if(s){var t=s.getAttribute("id");t&&C(b.rowId)(f,t)}return{data:f,cells:j}}function I(b,d,e,f){var g,h,i,j,k,l=b.aoData[d],m=l._aData,n=[];if(null===l.nTr){for(g=e||c.createElement("tr"),l.nTr=g,l.anCells=n,g._DT_RowIndex=d,J(b,l),j=0,k=b.aoColumns.length;j<k;j++)i=b.aoColumns[j],h=e?f[j]:c.createElement(i.sCellType),h._DT_CellIndex={row:d,column:j},n.push(h),e&&!i.mRender&&i.mData===j||a.isPlainObject(i.mData)&&i.mData._===j+".display"||(h.innerHTML=y(b,d,j,"display")),i.sClass&&(h.className+=" "+i.sClass),i.bVisible&&!e?g.appendChild(h):!i.bVisible&&e&&h.parentNode.removeChild(h),i.fnCreatedCell&&i.fnCreatedCell.call(b.oInstance,h,y(b,d,j),m,d,j);La(b,"aoRowCreatedCallback",null,[g,m,d])}l.nTr.setAttribute("role","row")}function J(b,c){var d=c.nTr,e=c._aData;if(d){var f=b.rowIdFn(e);if(f&&(d.id=f),e.DT_RowClass){var g=e.DT_RowClass.split(" ");c.__rowc=c.__rowc?nb(c.__rowc.concat(g)):g,a(d).removeClass(c.__rowc.join(" ")).addClass(e.DT_RowClass)}e.DT_RowAttr&&a(d).attr(e.DT_RowAttr),e.DT_RowData&&a(d).data(e.DT_RowData)}}function K(b){var c,d,e,f,g,h=b.nTHead,i=b.nTFoot,j=0===a("th, td",h).length,k=b.oClasses,l=b.aoColumns;for(j&&(f=a("<tr/>").appendTo(h)),c=0,d=l.length;c<d;c++)g=l[c],e=a(g.nTh).addClass(g.sClass),j&&e.appendTo(f),b.oFeatures.bSort&&(e.addClass(g.sSortingClass),g.bSortable!==!1&&(e.attr("tabindex",b.iTabIndex).attr("aria-controls",b.sTableId),Aa(b,g.nTh,c))),g.sTitle!=e[0].innerHTML&&e.html(g.sTitle),Na(b,"header")(b,e,g,k);if(j&&P(b.aoHeader,h),a(h).find(">tr").attr("role","row"),a(h).find(">tr>th, >tr>td").addClass(k.sHeaderTH),a(i).find(">tr>th, >tr>td").addClass(k.sFooterTH),null!==i){var m=b.aoFooter[0];for(c=0,d=m.length;c<d;c++)g=l[c],g.nTf=m[c].cell,g.sClass&&a(g.nTf).addClass(g.sClass)}}function L(b,c,e){var f,g,h,i,j,k,l,m,n,o=[],p=[],q=b.aoColumns.length;if(c){for(e===d&&(e=!1),f=0,g=c.length;f<g;f++){for(o[f]=c[f].slice(),o[f].nTr=c[f].nTr,h=q-1;h>=0;h--)b.aoColumns[h].bVisible||e||o[f].splice(h,1);p.push([])}for(f=0,g=o.length;f<g;f++){if(l=o[f].nTr)for(;k=l.firstChild;)l.removeChild(k);for(h=0,i=o[f].length;h<i;h++)if(m=1,n=1,p[f][h]===d){for(l.appendChild(o[f][h].cell),p[f][h]=1;o[f+m]!==d&&o[f][h].cell==o[f+m][h].cell;)p[f+m][h]=1,m++;for(;o[f][h+n]!==d&&o[f][h].cell==o[f][h+n].cell;){for(j=0;j<m;j++)p[f+j][h+n]=1;n++}a(o[f][h].cell).attr("rowspan",m).attr("colspan",n)}}}}function M(b){var c=La(b,"aoPreDrawCallback","preDraw",[b]);if(a.inArray(!1,c)!==-1)return void na(b,!1);var e=[],f=0,g=b.asStripeClasses,h=g.length,i=(b.aoOpenRows.length,b.oLanguage),j=b.iInitDisplayStart,k="ssp"==Oa(b),l=b.aiDisplay;b.bDrawing=!0,j!==d&&j!==-1&&(b._iDisplayStart=k?j:j>=b.fnRecordsDisplay()?0:j,b.iInitDisplayStart=-1);var m=b._iDisplayStart,n=b.fnDisplayEnd();if(b.bDeferLoading)b.bDeferLoading=!1,b.iDraw++,na(b,!1);else if(k){if(!b.bDestroying&&!S(b))return}else b.iDraw++;if(0!==l.length)for(var o=k?0:m,p=k?b.aoData.length:n,r=o;r<p;r++){var s=l[r],t=b.aoData[s];null===t.nTr&&I(b,s);var u=t.nTr;if(0!==h){var v=g[f%h];t._sRowStripe!=v&&(a(u).removeClass(t._sRowStripe).addClass(v),t._sRowStripe=v)}La(b,"aoRowCallback",null,[u,t._aData,f,r]),e.push(u),f++}else{var w=i.sZeroRecords;1==b.iDraw&&"ajax"==Oa(b)?w=i.sLoadingRecords:i.sEmptyTable&&0===b.fnRecordsTotal()&&(w=i.sEmptyTable),e[0]=a("<tr/>",{"class":h?g[0]:""}).append(a("<td />",{valign:"top",colSpan:q(b),"class":b.oClasses.sRowEmpty}).html(w))[0]}La(b,"aoHeaderCallback","header",[a(b.nTHead).children("tr")[0],D(b),m,n,l]),La(b,"aoFooterCallback","footer",[a(b.nTFoot).children("tr")[0],D(b),m,n,l]);var x=a(b.nTBody);x.children().detach(),x.append(a(e)),La(b,"aoDrawCallback","draw",[b]),b.bSorted=!1,b.bFiltered=!1,b.bDrawing=!1}function N(a,b){var c=a.oFeatures,d=c.bSort,e=c.bFilter;d&&xa(a),e?X(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice(),b!==!0&&(a._iDisplayStart=0),a._drawHold=b,M(a),a._drawHold=!1}function O(b){var c=b.oClasses,d=a(b.nTable),e=a("<div/>").insertBefore(d),f=b.oFeatures,g=a("<div/>",{id:b.sTableId+"_wrapper","class":c.sWrapper+(b.nTFoot?"":" "+c.sNoFooter)});b.nHolding=e[0],b.nTableWrapper=g[0],b.nTableReinsertBefore=b.nTable.nextSibling;for(var h,i,j,k,l,m,n=b.sDom.split(""),o=0;o<n.length;o++){if(h=null,i=n[o],"<"==i){if(j=a("<div/>")[0],k=n[o+1],"'"==k||'"'==k){for(l="",m=2;n[o+m]!=k;)l+=n[o+m],m++;if("H"==l?l=c.sJUIHeader:"F"==l&&(l=c.sJUIFooter),l.indexOf(".")!=-1){var p=l.split(".");j.id=p[0].substr(1,p[0].length-1),j.className=p[1]}else"#"==l.charAt(0)?j.id=l.substr(1,l.length-1):j.className=l;o+=m}g.append(j),g=a(j)}else if(">"==i)g=g.parent();else if("l"==i&&f.bPaginate&&f.bLengthChange)h=ja(b);else if("f"==i&&f.bFilter)h=W(b);else if("r"==i&&f.bProcessing)h=ma(b);else if("t"==i)h=oa(b);else if("i"==i&&f.bInfo)h=da(b);else if("p"==i&&f.bPaginate)h=ka(b);else if(0!==Wa.ext.feature.length)for(var q=Wa.ext.feature,r=0,s=q.length;r<s;r++)if(i==q[r].cFeature){h=q[r].fnInit(b);break}if(h){var t=b.aanFeatures;t[i]||(t[i]=[]),t[i].push(h),g.append(h)}}e.replaceWith(g),b.nHolding=null}function P(b,c){var d,e,f,g,h,i,j,k,l,m,n,o=a(c).children("tr"),p=function(a,b,c){for(var d=a[b];d[c];)c++;return c};for(b.splice(0,b.length),f=0,i=o.length;f<i;f++)b.push([]);for(f=0,i=o.length;f<i;f++)for(d=o[f],k=0,e=d.firstChild;e;){if("TD"==e.nodeName.toUpperCase()||"TH"==e.nodeName.toUpperCase())for(l=1*e.getAttribute("colspan"),m=1*e.getAttribute("rowspan"),l=l&&0!==l&&1!==l?l:1,m=m&&0!==m&&1!==m?m:1,j=p(b,f,k),n=1===l,h=0;h<l;h++)for(g=0;g<m;g++)b[f+g][j+h]={cell:e,unique:n},b[f+g].nTr=d;e=e.nextSibling}}function Q(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],P(c,b)));for(var e=0,f=c.length;e<f;e++)for(var g=0,h=c[e].length;g<h;g++)!c[e][g].unique||d[g]&&a.bSortCellsTop||(d[g]=c[e][g].cell);return d}function R(b,c,d){if(La(b,"aoServerParams","serverParams",[c]),c&&a.isArray(c)){var e={},f=/(.*?)\[\]$/;a.each(c,function(a,b){var c=b.name.match(f);if(c){var d=c[0];e[d]||(e[d]=[]),e[d].push(b.value)}else e[b.name]=b.value}),c=e}var g,h=b.ajax,i=b.oInstance,j=function(a){La(b,null,"xhr",[b,a,b.jqXHR]),d(a)};if(a.isPlainObject(h)&&h.data){g=h.data;var k=a.isFunction(g)?g(c,b):g;c=a.isFunction(g)&&k?k:a.extend(!0,c,k),delete h.data}var l={data:c,success:function(a){var c=a.error||a.sError;c&&Ga(b,0,c),b.json=a,j(a)},dataType:"json",cache:!1,type:b.sServerMethod,error:function(c,d,e){var f=La(b,null,"xhr",[b,null,b.jqXHR]);a.inArray(!0,f)===-1&&("parsererror"==d?Ga(b,0,"Invalid JSON response",1):4===c.readyState&&Ga(b,0,"Ajax error",7)),na(b,!1)}};b.oAjaxData=c,La(b,null,"preXhr",[b,c]),b.fnServerData?b.fnServerData.call(i,b.sAjaxSource,a.map(c,function(a,b){return{name:b,value:a}}),j,b):b.sAjaxSource||"string"==typeof h?b.jqXHR=a.ajax(a.extend(l,{url:h||b.sAjaxSource})):a.isFunction(h)?b.jqXHR=h.call(i,c,j,b):(b.jqXHR=a.ajax(a.extend(l,h)),h.data=g)}function S(a){return!a.bAjaxDataGet||(a.iDraw++,na(a,!0),R(a,T(a),function(b){U(a,b)}),!1)}function T(b){var c,d,e,f,g=b.aoColumns,h=g.length,i=b.oFeatures,j=b.oPreviousSearch,k=b.aoPreSearchCols,l=[],m=wa(b),n=b._iDisplayStart,o=i.bPaginate!==!1?b._iDisplayLength:-1,p=function(a,b){l.push({name:a,value:b})};p("sEcho",b.iDraw),p("iColumns",h),p("sColumns",hb(g,"sName").join(",")),p("iDisplayStart",n),p("iDisplayLength",o);var q={draw:b.iDraw,columns:[],order:[],start:n,length:o,search:{value:j.sSearch,regex:j.bRegex}};for(c=0;c<h;c++)e=g[c],f=k[c],d="function"==typeof e.mData?"function":e.mData,q.columns.push({data:d,name:e.sName,searchable:e.bSearchable,orderable:e.bSortable,search:{value:f.sSearch,regex:f.bRegex}}),p("mDataProp_"+c,d),i.bFilter&&(p("sSearch_"+c,f.sSearch),p("bRegex_"+c,f.bRegex),p("bSearchable_"+c,e.bSearchable)),i.bSort&&p("bSortable_"+c,e.bSortable);i.bFilter&&(p("sSearch",j.sSearch),p("bRegex",j.bRegex)),i.bSort&&(a.each(m,function(a,b){q.order.push({column:b.col,dir:b.dir}),p("iSortCol_"+a,b.col),p("sSortDir_"+a,b.dir)}),p("iSortingCols",m.length));var r=Wa.ext.legacy.ajax;return null===r?b.sAjaxSource?l:q:r?l:q}function U(a,b){var c=function(a,c){return b[a]!==d?b[a]:b[c]},e=V(a,b),f=c("sEcho","draw"),g=c("iTotalRecords","recordsTotal"),h=c("iTotalDisplayRecords","recordsFiltered");if(f){if(1*f<a.iDraw)return;a.iDraw=1*f}E(a),a._iRecordsTotal=parseInt(g,10),a._iRecordsDisplay=parseInt(h,10);for(var i=0,j=e.length;i<j;i++)u(a,e[i]);a.aiDisplay=a.aiDisplayMaster.slice(),a.bAjaxDataGet=!1,M(a),a._bInitComplete||ha(a,b),a.bAjaxDataGet=!0,na(a,!1)}function V(b,c){var e=a.isPlainObject(b.ajax)&&b.ajax.dataSrc!==d?b.ajax.dataSrc:b.sAjaxDataProp;return"data"===e?c.aaData||c[e]:""!==e?B(e)(c):c}function W(b){var d=b.oClasses,e=b.sTableId,f=b.oLanguage,g=b.oPreviousSearch,h=b.aanFeatures,i='<input type="search" class="'+d.sFilterInput+'"/>',j=f.sSearch;j=j.match(/_INPUT_/)?j.replace("_INPUT_",i):j+i;var k=a("<div/>",{id:h.f?null:e+"_filter","class":d.sFilter}).append(a("<label/>").append(j)),l=function(){var a=(h.f,this.value?this.value:"");a!=g.sSearch&&(X(b,{sSearch:a,bRegex:g.bRegex,bSmart:g.bSmart,bCaseInsensitive:g.bCaseInsensitive}),b._iDisplayStart=0,M(b))},m=null!==b.searchDelay?b.searchDelay:"ssp"===Oa(b)?400:0,n=a("input",k).val(g.sSearch).attr("placeholder",f.sSearchPlaceholder).on("keyup.DT search.DT input.DT paste.DT cut.DT",m?vb(l,m):l).on("keypress.DT",function(a){if(13==a.keyCode)return!1}).attr("aria-controls",e);return a(b.nTable).on("search.dt.DT",function(a,d){if(b===d)try{n[0]!==c.activeElement&&n.val(g.sSearch)}catch(e){}}),k[0]}function X(a,b,c){var e=a.oPreviousSearch,f=a.aoPreSearchCols,g=function(a){e.sSearch=a.sSearch,e.bRegex=a.bRegex,e.bSmart=a.bSmart,e.bCaseInsensitive=a.bCaseInsensitive},h=function(a){return a.bEscapeRegex!==d?!a.bEscapeRegex:a.bRegex};if(s(a),"ssp"!=Oa(a)){$(a,b.sSearch,c,h(b),b.bSmart,b.bCaseInsensitive),g(b);for(var i=0;i<f.length;i++)Z(a,f[i].sSearch,i,h(f[i]),f[i].bSmart,f[i].bCaseInsensitive);Y(a)}else g(b);a.bFiltered=!0,La(a,null,"search",[a])}function Y(b){for(var c,d,e=Wa.ext.search,f=b.aiDisplay,g=0,h=e.length;g<h;g++){for(var i=[],j=0,k=f.length;j<k;j++)d=f[j],c=b.aoData[d],e[g](b,c._aFilterData,d,c._aData,j)&&i.push(d);f.length=0,a.merge(f,i)}}function Z(a,b,c,d,e,f){if(""!==b){for(var g,h=[],i=a.aiDisplay,j=_(b,d,e,f),k=0;k<i.length;k++)g=a.aoData[i[k]]._aFilterData[c],j.test(g)&&h.push(i[k]);a.aiDisplay=h}}function $(a,b,c,d,e,f){var g,h,i,j=_(b,d,e,f),k=a.oPreviousSearch.sSearch,l=a.aiDisplayMaster,m=[];if(0!==Wa.ext.search.length&&(c=!0),h=aa(a),b.length<=0)a.aiDisplay=l.slice();else{for((h||c||k.length>b.length||0!==b.indexOf(k)||a.bSorted)&&(a.aiDisplay=l.slice()),g=a.aiDisplay,i=0;i<g.length;i++)j.test(a.aoData[g[i]]._sFilterRow)&&m.push(g[i]);a.aiDisplay=m}}function _(b,c,d,e){if(b=c?b:rb(b),d){var f=a.map(b.match(/"[^"]+"|[^ ]+/g)||[""],function(a){if('"'===a.charAt(0)){var b=a.match(/^"(.*)"$/);a=b?b[1]:a}return a.replace('"',"")});b="^(?=.*?"+f.join(")(?=.*?")+").*$"}return new RegExp(b,e?"i":"")}function aa(a){var b,c,d,e,f,g,h,i,j=a.aoColumns,k=Wa.ext.type.search,l=!1;for(c=0,e=a.aoData.length;c<e;c++)if(i=a.aoData[c],!i._aFilterData){for(g=[],d=0,f=j.length;d<f;d++)b=j[d],b.bSearchable?(h=y(a,c,d,"filter"),k[b.sType]&&(h=k[b.sType](h)),null===h&&(h=""),"string"!=typeof h&&h.toString&&(h=h.toString())):h="",h.indexOf&&h.indexOf("&")!==-1&&(sb.innerHTML=h,h=tb?sb.textContent:sb.innerText),h.replace&&(h=h.replace(/[\r\n]/g,"")),g.push(h);i._aFilterData=g,i._sFilterRow=g.join("  "),l=!0}return l}function ba(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,caseInsensitive:a.bCaseInsensitive}}function ca(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function da(b){var c=b.sTableId,d=b.aanFeatures.i,e=a("<div/>",{"class":b.oClasses.sInfo,id:d?null:c+"_info"});return d||(b.aoDrawCallback.push({fn:ea,sName:"information"}),e.attr("role","status").attr("aria-live","polite"),a(b.nTable).attr("aria-describedby",c+"_info")),e[0]}function ea(b){var c=b.aanFeatures.i;if(0!==c.length){var d=b.oLanguage,e=b._iDisplayStart+1,f=b.fnDisplayEnd(),g=b.fnRecordsTotal(),h=b.fnRecordsDisplay(),i=h?d.sInfo:d.sInfoEmpty;h!==g&&(i+=" "+d.sInfoFiltered),i+=d.sInfoPostFix,i=fa(b,i);var j=d.fnInfoCallback;null!==j&&(i=j.call(b.oInstance,b,e,f,g,h,i)),a(c).html(i)}}function fa(a,b){var c=a.fnFormatNumber,d=a._iDisplayStart+1,e=a._iDisplayLength,f=a.fnRecordsDisplay(),g=e===-1;return b.replace(/_START_/g,c.call(a,d)).replace(/_END_/g,c.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,c.call(a,f)).replace(/_PAGE_/g,c.call(a,g?1:Math.ceil(d/e))).replace(/_PAGES_/g,c.call(a,g?1:Math.ceil(f/e)))}function ga(a){var b,c,d,e=a.iInitDisplayStart,f=a.aoColumns,g=a.oFeatures,h=a.bDeferLoading;if(!a.bInitialised)return void setTimeout(function(){ga(a)},200);for(O(a),K(a),L(a,a.aoHeader),L(a,a.aoFooter),na(a,!0),g.bAutoWidth&&ra(a),b=0,c=f.length;b<c;b++)d=f[b],d.sWidth&&(d.nTh.style.width=va(d.sWidth));La(a,null,"preInit",[a]),N(a);var i=Oa(a);("ssp"!=i||h)&&("ajax"==i?R(a,[],function(c){var d=V(a,c);for(b=0;b<d.length;b++)u(a,d[b]);a.iInitDisplayStart=e,N(a),na(a,!1),ha(a,c)},a):(na(a,!1),ha(a)))}function ha(a,b){a._bInitComplete=!0,(b||a.oInit.aaData)&&n(a),La(a,null,"plugin-init",[a,b]),La(a,"aoInitComplete","init",[a,b])}function ia(a,b){var c=parseInt(b,10);a._iDisplayLength=c,Ma(a),La(a,null,"length",[a,c])}function ja(b){for(var c=b.oClasses,d=b.sTableId,e=b.aLengthMenu,f=a.isArray(e[0]),g=f?e[0]:e,h=f?e[1]:e,i=a("<select/>",{name:d+"_length","aria-controls":d,"class":c.sLengthSelect}),j=0,k=g.length;j<k;j++)i[0][j]=new Option("number"==typeof h[j]?b.fnFormatNumber(h[j]):h[j],g[j]);var l=a("<div><label/></div>").addClass(c.sLength);return b.aanFeatures.l||(l[0].id=d+"_length"),l.children().append(b.oLanguage.sLengthMenu.replace("_MENU_",i[0].outerHTML)),a("select",l).val(b._iDisplayLength).on("change.DT",function(c){ia(b,a(this).val()),M(b)}),a(b.nTable).on("length.dt.DT",function(c,d,e){b===d&&a("select",l).val(e)}),l[0]}function ka(b){var c=b.sPaginationType,d=Wa.ext.pager[c],e="function"==typeof d,f=function(a){M(a)},g=a("<div/>").addClass(b.oClasses.sPaging+c)[0],h=b.aanFeatures;return e||d.fnInit(b,g,f),h.p||(g.id=b.sTableId+"_paginate",b.aoDrawCallback.push({fn:function(a){if(e){var b,c,g=a._iDisplayStart,i=a._iDisplayLength,j=a.fnRecordsDisplay(),k=i===-1,l=k?0:Math.ceil(g/i),m=k?1:Math.ceil(j/i),n=d(l,m);for(b=0,c=h.p.length;b<c;b++)Na(a,"pageButton")(a,h.p[b],b,n,l,m)}else d.fnUpdate(a,f)},sName:"pagination"})),g}function la(a,b,c){var d=a._iDisplayStart,e=a._iDisplayLength,f=a.fnRecordsDisplay();0===f||e===-1?d=0:"number"==typeof b?(d=b*e,d>f&&(d=0)):"first"==b?d=0:"previous"==b?(d=e>=0?d-e:0,d<0&&(d=0)):"next"==b?d+e<f&&(d+=e):"last"==b?d=Math.floor((f-1)/e)*e:Ga(a,0,"Unknown paging action: "+b,5);var g=a._iDisplayStart!==d;return a._iDisplayStart=d,g&&(La(a,null,"page",[a]),c&&M(a)),g}function ma(b){return a("<div/>",{id:b.aanFeatures.r?null:b.sTableId+"_processing","class":b.oClasses.sProcessing}).html(b.oLanguage.sProcessing).insertBefore(b.nTable)[0]}function na(b,c){b.oFeatures.bProcessing&&a(b.aanFeatures.r).css("display",c?"block":"none"),La(b,null,"processing",[b,c])}function oa(b){var c=a(b.nTable);c.attr("role","grid");var d=b.oScroll;if(""===d.sX&&""===d.sY)return b.nTable;var e=d.sX,f=d.sY,g=b.oClasses,h=c.children("caption"),i=h.length?h[0]._captionSide:null,j=a(c[0].cloneNode(!1)),k=a(c[0].cloneNode(!1)),l=c.children("tfoot"),m="<div/>",n=function(a){return a?va(a):null};l.length||(l=null);var o=a(m,{"class":g.sScrollWrapper}).append(a(m,{"class":g.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:e?n(e):"100%"}).append(a(m,{"class":g.sScrollHeadInner}).css({"box-sizing":"content-box",width:d.sXInner||"100%"}).append(j.removeAttr("id").css("margin-left",0).append("top"===i?h:null).append(c.children("thead"))))).append(a(m,{"class":g.sScrollBody}).css({position:"relative",overflow:"auto",width:n(e)}).append(c));l&&o.append(a(m,{"class":g.sScrollFoot}).css({overflow:"hidden",border:0,width:e?n(e):"100%"}).append(a(m,{"class":g.sScrollFootInner}).append(k.removeAttr("id").css("margin-left",0).append("bottom"===i?h:null).append(c.children("tfoot")))));var p=o.children(),q=p[0],r=p[1],s=l?p[2]:null;return e&&a(r).on("scroll.DT",function(a){var b=this.scrollLeft;q.scrollLeft=b,l&&(s.scrollLeft=b)}),a(r).css(f&&d.bCollapse?"max-height":"height",f),b.nScrollHead=q,b.nScrollBody=r,b.nScrollFoot=s,b.aoDrawCallback.push({fn:pa,sName:"scrolling"}),o[0]}function pa(b){var c,e,f,g,h,i,j,k,l,m=b.oScroll,p=m.sX,q=m.sXInner,r=m.sY,s=m.iBarWidth,t=a(b.nScrollHead),u=t[0].style,v=t.children("div"),w=v[0].style,x=v.children("table"),y=b.nScrollBody,z=a(y),A=y.style,B=a(b.nScrollFoot),C=B.children("div"),D=C.children("table"),E=a(b.nTHead),F=a(b.nTable),G=F[0],H=G.style,I=b.nTFoot?a(b.nTFoot):null,J=b.oBrowser,K=J.bScrollOversize,L=hb(b.aoColumns,"nTh"),M=[],N=[],O=[],P=[],R=function(a){var b=a.style;b.paddingTop="0",b.paddingBottom="0",b.borderTopWidth="0",b.borderBottomWidth="0",b.height=0},S=y.scrollHeight>y.clientHeight;if(b.scrollBarVis!==S&&b.scrollBarVis!==d)return b.scrollBarVis=S,void n(b);b.scrollBarVis=S,F.children("thead, tfoot").remove(),I&&(i=I.clone().prependTo(F),e=I.find("tr"),g=i.find("tr")),h=E.clone().prependTo(F),c=E.find("tr"),f=h.find("tr"),h.find("th, td").removeAttr("tabindex"),p||(A.width="100%",t[0].style.width="100%"),a.each(Q(b,h),function(a,c){j=o(b,a),c.style.width=b.aoColumns[j].sWidth}),I&&qa(function(a){a.style.width=""},g),l=F.outerWidth(),""===p?(H.width="100%",K&&(F.find("tbody").height()>y.offsetHeight||"scroll"==z.css("overflow-y"))&&(H.width=va(F.outerWidth()-s)),l=F.outerWidth()):""!==q&&(H.width=va(q),l=F.outerWidth()),qa(R,f),qa(function(b){O.push(b.innerHTML),M.push(va(a(b).css("width")))},f),qa(function(b,c){a.inArray(b,L)!==-1&&(b.style.width=M[c])},c),a(f).height(0),I&&(qa(R,g),qa(function(b){P.push(b.innerHTML),N.push(va(a(b).css("width")))},g),qa(function(a,b){a.style.width=N[b]},e),a(g).height(0)),qa(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+O[b]+"</div>",a.style.width=M[b]},f),I&&qa(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+P[b]+"</div>",a.style.width=N[b]},g),F.outerWidth()<l?(k=y.scrollHeight>y.offsetHeight||"scroll"==z.css("overflow-y")?l+s:l,K&&(y.scrollHeight>y.offsetHeight||"scroll"==z.css("overflow-y"))&&(H.width=va(k-s)),""!==p&&""===q||Ga(b,1,"Possible column misalignment",6)):k="100%",A.width=va(k),u.width=va(k),I&&(b.nScrollFoot.style.width=va(k)),r||K&&(A.height=va(G.offsetHeight+s));var T=F.outerWidth();x[0].style.width=va(T),w.width=va(T);var U=F.height()>y.clientHeight||"scroll"==z.css("overflow-y"),V="padding"+(J.bScrollbarLeft?"Left":"Right");w[V]=U?s+"px":"0px",I&&(D[0].style.width=va(T),C[0].style.width=va(T),C[0].style[V]=U?s+"px":"0px"),F.children("colgroup").insertBefore(F.children("thead")),z.scroll(),!b.bSorted&&!b.bFiltered||b._drawHold||(y.scrollTop=0)}function qa(a,b,c){for(var d,e,f=0,g=0,h=b.length;g<h;){for(d=b[g].firstChild,e=c?c[g].firstChild:null;d;)1===d.nodeType&&(c?a(d,e,f):a(d,f),f++),d=d.nextSibling,e=c?e.nextSibling:null;g++}}function ra(c){var d,e,f,g=c.nTable,h=c.aoColumns,i=c.oScroll,j=i.sY,k=i.sX,l=i.sXInner,m=h.length,p=r(c,"bVisible"),s=a("th",c.nTHead),t=g.getAttribute("width"),u=g.parentNode,v=!1,w=c.oBrowser,x=w.bScrollOversize,y=g.style.width;for(y&&y.indexOf("%")!==-1&&(t=y),d=0;d<p.length;d++)e=h[p[d]],null!==e.sWidth&&(e.sWidth=sa(e.sWidthOrig,u),v=!0);if(x||!v&&!k&&!j&&m==q(c)&&m==s.length)for(d=0;d<m;d++){var z=o(c,d);null!==z&&(h[z].sWidth=va(s.eq(d).width()))}else{var A=a(g).clone().css("visibility","hidden").removeAttr("id");A.find("tbody tr").remove();var B=a("<tr/>").appendTo(A.find("tbody"));for(A.find("thead, tfoot").remove(),A.append(a(c.nTHead).clone()).append(a(c.nTFoot).clone()),A.find("tfoot th, tfoot td").css("width",""),s=Q(c,A.find("thead")[0]),d=0;d<p.length;d++)e=h[p[d]],s[d].style.width=null!==e.sWidthOrig&&""!==e.sWidthOrig?va(e.sWidthOrig):"",e.sWidthOrig&&k&&a(s[d]).append(a("<div/>").css({width:e.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(c.aoData.length)for(d=0;d<p.length;d++)f=p[d],e=h[f],a(ta(c,f)).clone(!1).append(e.sContentPadding).appendTo(B);a("[name]",A).removeAttr("name");var C=a("<div/>").css(k||j?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(A).appendTo(u);k&&l?A.width(l):k?(A.css("width","auto"),A.removeAttr("width"),A.width()<u.clientWidth&&t&&A.width(u.clientWidth)):j?A.width(u.clientWidth):t&&A.width(t);var D=0;for(d=0;d<p.length;d++){var E=a(s[d]),F=E.outerWidth()-E.width(),G=w.bBounding?Math.ceil(s[d].getBoundingClientRect().width):E.outerWidth();D+=G,h[p[d]].sWidth=va(G-F)}g.style.width=va(D),C.remove()}if(t&&(g.style.width=va(t)),(t||k)&&!c._reszEvt){var H=function(){a(b).on("resize.DT-"+c.sInstance,vb(function(){n(c)}))};x?setTimeout(H,1e3):H(),c._reszEvt=!0}}function sa(b,d){if(!b)return 0;var e=a("<div/>").css("width",va(b)).appendTo(d||c.body),f=e[0].offsetWidth;return e.remove(),f}function ta(b,c){var d=ua(b,c);if(d<0)return null;var e=b.aoData[d];return e.nTr?e.anCells[c]:a("<td/>").html(y(b,d,c,"display"))[0]}function ua(a,b){for(var c,d=-1,e=-1,f=0,g=a.aoData.length;f<g;f++)c=y(a,f,b,"display")+"",c=c.replace(ub,""),c=c.replace(/&nbsp;/g," "),c.length>d&&(d=c.length,e=f);return e}function va(a){return null===a?"0px":"number"==typeof a?a<0?"0px":a+"px":a.match(/\d$/)?a+"px":a}function wa(b){var c,e,f,g,h,i,j,k=[],l=b.aoColumns,m=b.aaSortingFixed,n=a.isPlainObject(m),o=[],p=function(b){b.length&&!a.isArray(b[0])?o.push(b):a.merge(o,b)};for(a.isArray(m)&&p(m),n&&m.pre&&p(m.pre),p(b.aaSorting),n&&m.post&&p(m.post),c=0;c<o.length;c++)for(j=o[c][0],g=l[j].aDataSort,e=0,f=g.length;e<f;e++)h=g[e],i=l[h].sType||"string",o[c]._idx===d&&(o[c]._idx=a.inArray(o[c][1],l[h].asSorting)),k.push({src:j,col:h,dir:o[c][1],index:o[c]._idx,type:i,formatter:Wa.ext.type.order[i+"-pre"]});return k}function xa(a){var b,c,d,e,f,g=[],h=Wa.ext.type.order,i=a.aoData,j=(a.aoColumns,0),k=a.aiDisplayMaster;for(s(a),f=wa(a),b=0,c=f.length;b<c;b++)e=f[b],e.formatter&&j++,Ca(a,e.col);if("ssp"!=Oa(a)&&0!==f.length){for(b=0,d=k.length;b<d;b++)g[k[b]]=b;j===f.length?k.sort(function(a,b){var c,d,e,h,j,k=f.length,l=i[a]._aSortData,m=i[b]._aSortData;for(e=0;e<k;e++)if(j=f[e],c=l[j.col],d=m[j.col],h=c<d?-1:c>d?1:0,0!==h)return"asc"===j.dir?h:-h;return c=g[a],d=g[b],c<d?-1:c>d?1:0}):k.sort(function(a,b){var c,d,e,j,k,l,m=f.length,n=i[a]._aSortData,o=i[b]._aSortData;for(e=0;e<m;e++)if(k=f[e],c=n[k.col],d=o[k.col],l=h[k.type+"-"+k.dir]||h["string-"+k.dir],j=l(c,d),0!==j)return j;return c=g[a],d=g[b],c<d?-1:c>d?1:0})}a.bSorted=!0}function ya(a){for(var b,c,d=a.aoColumns,e=wa(a),f=a.oLanguage.oAria,g=0,h=d.length;g<h;g++){var i=d[g],j=i.asSorting,k=i.sTitle.replace(/<.*?>/g,""),l=i.nTh;l.removeAttribute("aria-sort"),i.bSortable?(e.length>0&&e[0].col==g?(l.setAttribute("aria-sort","asc"==e[0].dir?"ascending":"descending"),c=j[e[0].index+1]||j[0]):c=j[0],b=k+("asc"===c?f.sSortAscending:f.sSortDescending)):b=k,l.setAttribute("aria-label",b)}}function za(b,c,e,f){var g,h=b.aoColumns[c],i=b.aaSorting,j=h.asSorting,k=function(b,c){var e=b._idx;return e===d&&(e=a.inArray(b[1],j)),e+1<j.length?e+1:c?null:0};if("number"==typeof i[0]&&(i=b.aaSorting=[i]),e&&b.oFeatures.bSortMulti){var l=a.inArray(c,hb(i,"0"));l!==-1?(g=k(i[l],!0),null===g&&1===i.length&&(g=0),null===g?i.splice(l,1):(i[l][1]=j[g],i[l]._idx=g)):(i.push([c,j[0],0]),i[i.length-1]._idx=0)}else i.length&&i[0][0]==c?(g=k(i[0]),i.length=1,i[0][1]=j[g],i[0]._idx=g):(i.length=0,i.push([c,j[0]]),i[0]._idx=0);N(b),"function"==typeof f&&f(b)}function Aa(a,b,c,d){var e=a.aoColumns[c];Ja(b,{},function(b){e.bSortable!==!1&&(a.oFeatures.bProcessing?(na(a,!0),setTimeout(function(){za(a,c,b.shiftKey,d),"ssp"!==Oa(a)&&na(a,!1)},0)):za(a,c,b.shiftKey,d))})}function Ba(b){var c,d,e,f=b.aLastSort,g=b.oClasses.sSortColumn,h=wa(b),i=b.oFeatures;if(i.bSort&&i.bSortClasses){for(c=0,d=f.length;c<d;c++)e=f[c].src,a(hb(b.aoData,"anCells",e)).removeClass(g+(c<2?c+1:3));for(c=0,d=h.length;c<d;c++)e=h[c].src,a(hb(b.aoData,"anCells",e)).addClass(g+(c<2?c+1:3))}b.aLastSort=h}function Ca(a,b){var c,d=a.aoColumns[b],e=Wa.ext.order[d.sSortDataType];e&&(c=e.call(a.oInstance,a,b,p(a,b)));for(var f,g,h=Wa.ext.type.order[d.sType+"-pre"],i=0,j=a.aoData.length;i<j;i++)f=a.aoData[i],f._aSortData||(f._aSortData=[]),f._aSortData[b]&&!e||(g=e?c[i]:y(a,i,b,"sort"),f._aSortData[b]=h?h(g):g)}function Da(b){if(b.oFeatures.bStateSave&&!b.bDestroying){var c={time:+new Date,start:b._iDisplayStart,length:b._iDisplayLength,order:a.extend(!0,[],b.aaSorting),search:ba(b.oPreviousSearch),columns:a.map(b.aoColumns,function(a,c){return{visible:a.bVisible,search:ba(b.aoPreSearchCols[c])}})};La(b,"aoStateSaveParams","stateSaveParams",[b,c]),b.oSavedState=c,
b.fnStateSaveCallback.call(b.oInstance,b,c)}}function Ea(b,c,e){var f,g,h=b.aoColumns,i=function(c){if(!c||!c.time)return void e();var i=La(b,"aoStateLoadParams","stateLoadParams",[b,c]);if(a.inArray(!1,i)!==-1)return void e();var j=b.iStateDuration;if(j>0&&c.time<+new Date-1e3*j)return void e();if(c.columns&&h.length!==c.columns.length)return void e();if(b.oLoadedState=a.extend(!0,{},c),c.start!==d&&(b._iDisplayStart=c.start,b.iInitDisplayStart=c.start),c.length!==d&&(b._iDisplayLength=c.length),c.order!==d&&(b.aaSorting=[],a.each(c.order,function(a,c){b.aaSorting.push(c[0]>=h.length?[0,c[1]]:c)})),c.search!==d&&a.extend(b.oPreviousSearch,ca(c.search)),c.columns)for(f=0,g=c.columns.length;f<g;f++){var k=c.columns[f];k.visible!==d&&(h[f].bVisible=k.visible),k.search!==d&&a.extend(b.aoPreSearchCols[f],ca(k.search))}La(b,"aoStateLoaded","stateLoaded",[b,c]),e()};if(!b.oFeatures.bStateSave)return void e();var j=b.fnStateLoadCallback.call(b.oInstance,b,i);j!==d&&i(j)}function Fa(b){var c=Wa.settings,d=a.inArray(b,hb(c,"nTable"));return d!==-1?c[d]:null}function Ga(a,c,d,e){if(d="DataTables warning: "+(a?"table id="+a.sTableId+" - ":"")+d,e&&(d+=". For more information about this error, please see http://datatables.net/tn/"+e),c)b.console&&console.log&&console.log(d);else{var f=Wa.ext,g=f.sErrMode||f.errMode;if(a&&La(a,null,"error",[a,e,d]),"alert"==g)alert(d);else{if("throw"==g)throw new Error(d);"function"==typeof g&&g(a,e,d)}}}function Ha(b,c,e,f){return a.isArray(e)?void a.each(e,function(d,e){a.isArray(e)?Ha(b,c,e[0],e[1]):Ha(b,c,e)}):(f===d&&(f=e),void(c[e]!==d&&(b[f]=c[e])))}function Ia(b,c,d){var e;for(var f in c)c.hasOwnProperty(f)&&(e=c[f],a.isPlainObject(e)?(a.isPlainObject(b[f])||(b[f]={}),a.extend(!0,b[f],e)):d&&"data"!==f&&"aaData"!==f&&a.isArray(e)?b[f]=e.slice():b[f]=e);return b}function Ja(b,c,d){a(b).on("click.DT",c,function(a){b.blur(),d(a)}).on("keypress.DT",c,function(a){13===a.which&&(a.preventDefault(),d(a))}).on("selectstart.DT",function(){return!1})}function Ka(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function La(b,c,d,e){var f=[];if(c&&(f=a.map(b[c].slice().reverse(),function(a,c){return a.fn.apply(b.oInstance,e)})),null!==d){var g=a.Event(d+".dt");a(b.nTable).trigger(g,e),f.push(g.result)}return f}function Ma(a){var b=a._iDisplayStart,c=a.fnDisplayEnd(),d=a._iDisplayLength;b>=c&&(b=c-d),b-=b%d,(d===-1||b<0)&&(b=0),a._iDisplayStart=b}function Na(b,c){var d=b.renderer,e=Wa.ext.renderer[c];return a.isPlainObject(d)&&d[c]?e[d[c]]||e._:"string"==typeof d?e[d]||e._:e._}function Oa(a){return a.oFeatures.bServerSide?"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function Pa(a,b){var c=[],d=Sb.numbers_length,e=Math.floor(d/2);return b<=d?c=jb(0,b):a<=e?(c=jb(0,d-2),c.push("ellipsis"),c.push(b-1)):a>=b-1-e?(c=jb(b-(d-2),b),c.splice(0,0,"ellipsis"),c.splice(0,0,0)):(c=jb(a-e+2,a+e-1),c.push("ellipsis"),c.push(b-1),c.splice(0,0,"ellipsis"),c.splice(0,0,0)),c.DT_el="span",c}function Qa(b){a.each({num:function(a){return Tb(a,b)},"num-fmt":function(a){return Tb(a,b,ab)},"html-num":function(a){return Tb(a,b,Za)},"html-num-fmt":function(a){return Tb(a,b,Za,ab)}},function(a,c){Sa.type.order[a+b+"-pre"]=c,a.match(/^html\-/)&&(Sa.type.search[a+b]=Sa.type.search.html)})}function Ra(a){return function(){var b=[Fa(this[Wa.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return Wa.ext.internal[a].apply(this,b)}}var Sa,Ta,Ua,Va,Wa=function(b){this.$=function(a,b){return this.api(!0).$(a,b)},this._=function(a,b){return this.api(!0).rows(a,b).data()},this.api=function(a){return new Ta(a?Fa(this[Sa.iApiIndex]):this)},this.fnAddData=function(b,c){var e=this.api(!0),f=a.isArray(b)&&(a.isArray(b[0])||a.isPlainObject(b[0]))?e.rows.add(b):e.row.add(b);return(c===d||c)&&e.draw(),f.flatten().toArray()},this.fnAdjustColumnSizing=function(a){var b=this.api(!0).columns.adjust(),c=b.settings()[0],e=c.oScroll;a===d||a?b.draw(!1):""===e.sX&&""===e.sY||pa(c)},this.fnClearTable=function(a){var b=this.api(!0).clear();(a===d||a)&&b.draw()},this.fnClose=function(a){this.api(!0).row(a).child.hide()},this.fnDeleteRow=function(a,b,c){var e=this.api(!0),f=e.rows(a),g=f.settings()[0],h=g.aoData[f[0][0]];return f.remove(),b&&b.call(this,g,h),(c===d||c)&&e.draw(),h},this.fnDestroy=function(a){this.api(!0).destroy(a)},this.fnDraw=function(a){this.api(!0).draw(a)},this.fnFilter=function(a,b,c,e,f,g){var h=this.api(!0);null===b||b===d?h.search(a,c,e,g):h.column(b).search(a,c,e,g),h.draw()},this.fnGetData=function(a,b){var c=this.api(!0);if(a!==d){var e=a.nodeName?a.nodeName.toLowerCase():"";return b!==d||"td"==e||"th"==e?c.cell(a,b).data():c.row(a).data()||null}return c.data().toArray()},this.fnGetNodes=function(a){var b=this.api(!0);return a!==d?b.row(a).node():b.rows().nodes().flatten().toArray()},this.fnGetPosition=function(a){var b=this.api(!0),c=a.nodeName.toUpperCase();if("TR"==c)return b.row(a).index();if("TD"==c||"TH"==c){var d=b.cell(a).index();return[d.row,d.columnVisible,d.column]}return null},this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()},this.fnOpen=function(a,b,c){return this.api(!0).row(a).child(b,c).show().child()[0]},this.fnPageChange=function(a,b){var c=this.api(!0).page(a);(b===d||b)&&c.draw(!1)},this.fnSetColumnVis=function(a,b,c){var e=this.api(!0).column(a).visible(b);(c===d||c)&&e.columns.adjust().draw()},this.fnSettings=function(){return Fa(this[Sa.iApiIndex])},this.fnSort=function(a){this.api(!0).order(a).draw()},this.fnSortListener=function(a,b,c){this.api(!0).order.listener(a,b,c)},this.fnUpdate=function(a,b,c,e,f){var g=this.api(!0);return c===d||null===c?g.row(b).data(a):g.cell(b,c).data(a),(f===d||f)&&g.columns.adjust(),(e===d||e)&&g.draw(),0},this.fnVersionCheck=Sa.fnVersionCheck;var c=this,e=b===d,k=this.length;e&&(b={}),this.oApi=this.internal=Sa.internal;for(var n in Wa.ext.internal)n&&(this[n]=Ra(n));return this.each(function(){var n,o={},p=k>1?Ia(o,b,!0):b,q=0,r=this.getAttribute("id"),s=!1,w=Wa.defaults,x=a(this);if("table"!=this.nodeName.toLowerCase())return void Ga(null,0,"Non-table node initialisation ("+this.nodeName+")",2);h(w),i(w.column),f(w,w,!0),f(w.column,w.column,!0),f(w,a.extend(p,x.data()));var y=Wa.settings;for(q=0,n=y.length;q<n;q++){var z=y[q];if(z.nTable==this||z.nTHead.parentNode==this||z.nTFoot&&z.nTFoot.parentNode==this){var A=p.bRetrieve!==d?p.bRetrieve:w.bRetrieve,C=p.bDestroy!==d?p.bDestroy:w.bDestroy;if(e||A)return z.oInstance;if(C){z.oInstance.fnDestroy();break}return void Ga(z,0,"Cannot reinitialise DataTable",3)}if(z.sTableId==this.id){y.splice(q,1);break}}null!==r&&""!==r||(r="DataTables_Table_"+Wa.ext._unique++,this.id=r);var D=a.extend(!0,{},Wa.models.oSettings,{sDestroyWidth:x[0].style.width,sInstance:r,sTableId:r});D.nTable=this,D.oApi=c.internal,D.oInit=p,y.push(D),D.oInstance=1===c.length?c:x.dataTable(),h(p),p.oLanguage&&g(p.oLanguage),p.aLengthMenu&&!p.iDisplayLength&&(p.iDisplayLength=a.isArray(p.aLengthMenu[0])?p.aLengthMenu[0][0]:p.aLengthMenu[0]),p=Ia(a.extend(!0,{},w),p),Ha(D.oFeatures,p,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]),Ha(D,p,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"]]),Ha(D.oScroll,p,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),Ha(D.oLanguage,p,"fnInfoCallback"),Ka(D,"aoDrawCallback",p.fnDrawCallback,"user"),Ka(D,"aoServerParams",p.fnServerParams,"user"),Ka(D,"aoStateSaveParams",p.fnStateSaveParams,"user"),Ka(D,"aoStateLoadParams",p.fnStateLoadParams,"user"),Ka(D,"aoStateLoaded",p.fnStateLoaded,"user"),Ka(D,"aoRowCallback",p.fnRowCallback,"user"),Ka(D,"aoRowCreatedCallback",p.fnCreatedRow,"user"),Ka(D,"aoHeaderCallback",p.fnHeaderCallback,"user"),Ka(D,"aoFooterCallback",p.fnFooterCallback,"user"),Ka(D,"aoInitComplete",p.fnInitComplete,"user"),Ka(D,"aoPreDrawCallback",p.fnPreDrawCallback,"user"),D.rowIdFn=B(p.rowId),j(D);var E=D.oClasses;if(a.extend(E,Wa.ext.classes,p.oClasses),x.addClass(E.sTable),D.iInitDisplayStart===d&&(D.iInitDisplayStart=p.iDisplayStart,D._iDisplayStart=p.iDisplayStart),null!==p.iDeferLoading){D.bDeferLoading=!0;var F=a.isArray(p.iDeferLoading);D._iRecordsDisplay=F?p.iDeferLoading[0]:p.iDeferLoading,D._iRecordsTotal=F?p.iDeferLoading[1]:p.iDeferLoading}var G=D.oLanguage;a.extend(!0,G,p.oLanguage),G.sUrl&&(a.ajax({dataType:"json",url:G.sUrl,success:function(b){g(b),f(w.oLanguage,b),a.extend(!0,G,b),ga(D)},error:function(){ga(D)}}),s=!0),null===p.asStripeClasses&&(D.asStripeClasses=[E.sStripeOdd,E.sStripeEven]);var H=D.asStripeClasses,I=x.children("tbody").find("tr").eq(0);a.inArray(!0,a.map(H,function(a,b){return I.hasClass(a)}))!==-1&&(a("tbody tr",this).removeClass(H.join(" ")),D.asDestroyStripes=H.slice());var J,K=[],L=this.getElementsByTagName("thead");if(0!==L.length&&(P(D.aoHeader,L[0]),K=Q(D)),null===p.aoColumns)for(J=[],q=0,n=K.length;q<n;q++)J.push(null);else J=p.aoColumns;for(q=0,n=J.length;q<n;q++)l(D,K?K[q]:null);if(t(D,p.aoColumnDefs,J,function(a,b){m(D,a,b)}),I.length){var M=function(a,b){return null!==a.getAttribute("data-"+b)?b:null};a(I[0]).children("th, td").each(function(a,b){var c=D.aoColumns[a];if(c.mData===a){var e=M(b,"sort")||M(b,"order"),f=M(b,"filter")||M(b,"search");null===e&&null===f||(c.mData={_:a+".display",sort:null!==e?a+".@data-"+e:d,type:null!==e?a+".@data-"+e:d,filter:null!==f?a+".@data-"+f:d},m(D,a))}})}var N=D.oFeatures,O=function(){if(p.aaSorting===d){var b=D.aaSorting;for(q=0,n=b.length;q<n;q++)b[q][1]=D.aoColumns[q].asSorting[0]}Ba(D),N.bSort&&Ka(D,"aoDrawCallback",function(){if(D.bSorted){var b=wa(D),c={};a.each(b,function(a,b){c[b.src]=b.dir}),La(D,null,"order",[D,b,c]),ya(D)}}),Ka(D,"aoDrawCallback",function(){(D.bSorted||"ssp"===Oa(D)||N.bDeferRender)&&Ba(D)},"sc");var c=x.children("caption").each(function(){this._captionSide=a(this).css("caption-side")}),e=x.children("thead");0===e.length&&(e=a("<thead/>").appendTo(x)),D.nTHead=e[0];var f=x.children("tbody");0===f.length&&(f=a("<tbody/>").appendTo(x)),D.nTBody=f[0];var g=x.children("tfoot");if(0===g.length&&c.length>0&&(""!==D.oScroll.sX||""!==D.oScroll.sY)&&(g=a("<tfoot/>").appendTo(x)),0===g.length||0===g.children().length?x.addClass(E.sNoFooter):g.length>0&&(D.nTFoot=g[0],P(D.aoFooter,D.nTFoot)),p.aaData)for(q=0;q<p.aaData.length;q++)u(D,p.aaData[q]);else(D.bDeferLoading||"dom"==Oa(D))&&v(D,a(D.nTBody).children("tr"));D.aiDisplay=D.aiDisplayMaster.slice(),D.bInitialised=!0,s===!1&&ga(D)};p.bStateSave?(N.bStateSave=!0,Ka(D,"aoDrawCallback",Da,"state_save"),Ea(D,p,O)):O()}),c=null,this},Xa={},Ya=/[\r\n]/g,Za=/<.*?>/g,$a=/^\d{2,4}[\.\/\-]\d{1,2}[\.\/\-]\d{1,2}([T ]{1}\d{1,2}[:\.]\d{2}([\.:]\d{2})?)?$/,_a=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g"),ab=/[',$Â£â‚¬Â¥%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi,bb=function(a){return!a||a===!0||"-"===a},cb=function(a){var b=parseInt(a,10);return!isNaN(b)&&isFinite(a)?b:null},db=function(a,b){return Xa[b]||(Xa[b]=new RegExp(rb(b),"g")),"string"==typeof a&&"."!==b?a.replace(/\./g,"").replace(Xa[b],"."):a},eb=function(a,b,c){var d="string"==typeof a;return!!bb(a)||(b&&d&&(a=db(a,b)),c&&d&&(a=a.replace(ab,"")),!isNaN(parseFloat(a))&&isFinite(a))},fb=function(a){return bb(a)||"string"==typeof a},gb=function(a,b,c){if(bb(a))return!0;var d=fb(a);return d?!!eb(lb(a),b,c)||null:null},hb=function(a,b,c){var e=[],f=0,g=a.length;if(c!==d)for(;f<g;f++)a[f]&&a[f][b]&&e.push(a[f][b][c]);else for(;f<g;f++)a[f]&&e.push(a[f][b]);return e},ib=function(a,b,c,e){var f=[],g=0,h=b.length;if(e!==d)for(;g<h;g++)a[b[g]][c]&&f.push(a[b[g]][c][e]);else for(;g<h;g++)f.push(a[b[g]][c]);return f},jb=function(a,b){var c,e=[];b===d?(b=0,c=a):(c=b,b=a);for(var f=b;f<c;f++)e.push(f);return e},kb=function(a){for(var b=[],c=0,d=a.length;c<d;c++)a[c]&&b.push(a[c]);return b},lb=function(a){return a.replace(Za,"")},mb=function(a){if(a.length<2)return!0;for(var b=a.slice().sort(),c=b[0],d=1,e=b.length;d<e;d++){if(b[d]===c)return!1;c=b[d]}return!0},nb=function(a){if(mb(a))return a.slice();var b,c,d,e=[],f=a.length,g=0;a:for(c=0;c<f;c++){for(b=a[c],d=0;d<g;d++)if(e[d]===b)continue a;e.push(b),g++}return e};Wa.util={throttle:function(a,b){var c,e,f=b!==d?b:200;return function(){var b=this,g=+new Date,h=arguments;c&&g<c+f?(clearTimeout(e),e=setTimeout(function(){c=d,a.apply(b,h)},f)):(c=g,a.apply(b,h))}},escapeRegex:function(a){return a.replace(_a,"\\$1")}};var ob=function(a,b,c){a[b]!==d&&(a[c]=a[b])},pb=/\[.*?\]$/,qb=/\(\)$/,rb=Wa.util.escapeRegex,sb=a("<div>")[0],tb=sb.textContent!==d,ub=/<.*?>/g,vb=Wa.util.throttle,wb=[],xb=Array.prototype,yb=function(b){var c,d,e=Wa.settings,f=a.map(e,function(a,b){return a.nTable});return b?b.nTable&&b.oApi?[b]:b.nodeName&&"table"===b.nodeName.toLowerCase()?(c=a.inArray(b,f),c!==-1?[e[c]]:null):b&&"function"==typeof b.settings?b.settings().toArray():("string"==typeof b?d=a(b):b instanceof a&&(d=b),d?d.map(function(b){return c=a.inArray(this,f),c!==-1?e[c]:null}).toArray():void 0):[]};Ta=function(b,c){if(!(this instanceof Ta))return new Ta(b,c);var d=[],e=function(a){var b=yb(a);b&&(d=d.concat(b))};if(a.isArray(b))for(var f=0,g=b.length;f<g;f++)e(b[f]);else e(b);this.context=nb(d),c&&a.merge(this,c),this.selector={rows:null,cols:null,opts:null},Ta.extend(this,this,wb)},Wa.Api=Ta,a.extend(Ta.prototype,{any:function(){return 0!==this.count()},concat:xb.concat,context:[],count:function(){return this.flatten().length},each:function(a){for(var b=0,c=this.length;b<c;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=this.context;return b.length>a?new Ta(b[a],this[a]):null},filter:function(a){var b=[];if(xb.filter)b=xb.filter.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new Ta(this.context,b)},flatten:function(){var a=[];return new Ta(this.context,a.concat.apply(a,this.toArray()))},join:xb.join,indexOf:xb.indexOf||function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1},iterator:function(a,b,c,e){var f,g,h,i,j,k,l,m,n=[],o=this.context,p=this.selector;for("string"==typeof a&&(e=c,c=b,b=a,a=!1),g=0,h=o.length;g<h;g++){var q=new Ta(o[g]);if("table"===b)f=c.call(q,o[g],g),f!==d&&n.push(f);else if("columns"===b||"rows"===b)f=c.call(q,o[g],this[g],g),f!==d&&n.push(f);else if("column"===b||"column-rows"===b||"row"===b||"cell"===b)for(l=this[g],"column-rows"===b&&(k=Eb(o[g],p.opts)),i=0,j=l.length;i<j;i++)m=l[i],f="cell"===b?c.call(q,o[g],m.row,m.column,g,i):c.call(q,o[g],m,g,i,k),f!==d&&n.push(f)}if(n.length||e){var r=new Ta(o,a?n.concat.apply([],n):n),s=r.selector;return s.rows=p.rows,s.cols=p.cols,s.opts=p.opts,r}return this},lastIndexOf:xb.lastIndexOf||function(a,b){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(xb.map)b=xb.map.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)b.push(a.call(this,this[c],c));return new Ta(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:xb.pop,push:xb.push,reduce:xb.reduce||function(a,b){return k(this,a,b,0,this.length,1)},reduceRight:xb.reduceRight||function(a,b){return k(this,a,b,this.length-1,-1,-1)},reverse:xb.reverse,selector:null,shift:xb.shift,slice:function(){return new Ta(this.context,this)},sort:xb.sort,splice:xb.splice,toArray:function(){return xb.slice.call(this)},to$:function(){return a(this)},toJQuery:function(){return a(this)},unique:function(){return new Ta(this.context,nb(this))},unshift:xb.unshift}),Ta.extend=function(b,c,d){if(d.length&&c&&(c instanceof Ta||c.__dt_wrapper)){var e,f,g,h=function(a,b,c){return function(){var d=b.apply(a,arguments);return Ta.extend(d,d,c.methodExt),d}};for(e=0,f=d.length;e<f;e++)g=d[e],c[g.name]="function"==typeof g.val?h(b,g.val,g):a.isPlainObject(g.val)?{}:g.val,c[g.name].__dt_wrapper=!0,Ta.extend(b,c[g.name],g.propExt)}},Ta.register=Ua=function(b,c){if(a.isArray(b))for(var d=0,e=b.length;d<e;d++)Ta.register(b[d],c);else{var f,g,h,i,j=b.split("."),k=wb,l=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c].name===b)return a[c];return null};for(f=0,g=j.length;f<g;f++){i=j[f].indexOf("()")!==-1,h=i?j[f].replace("()",""):j[f];var m=l(k,h);m||(m={name:h,val:{},methodExt:[],propExt:[]},k.push(m)),f===g-1?m.val=c:k=i?m.methodExt:m.propExt}}},Ta.registerPlural=Va=function(b,c,e){Ta.register(b,e),Ta.register(c,function(){var b=e.apply(this,arguments);return b===this?this:b instanceof Ta?b.length?a.isArray(b[0])?new Ta(b.context,b[0]):b[0]:d:b})};var zb=function(b,c){if("number"==typeof b)return[c[b]];var d=a.map(c,function(a,b){return a.nTable});return a(d).filter(b).map(function(b){var e=a.inArray(this,d);return c[e]}).toArray()};Ua("tables()",function(a){return a?new Ta(zb(a,this.context)):this}),Ua("table()",function(a){var b=this.tables(a),c=b.context;return c.length?new Ta(c[0]):b}),Va("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable},1)}),Va("tables().body()","table().body()",function(){return this.iterator("table",function(a){return a.nTBody},1)}),Va("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead},1)}),Va("tables().footer()","table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot},1)}),Va("tables().containers()","table().container()",function(){return this.iterator("table",function(a){return a.nTableWrapper},1)}),Ua("draw()",function(a){return this.iterator("table",function(b){"page"===a?M(b):("string"==typeof a&&(a="full-hold"!==a),N(b,a===!1))})}),Ua("page()",function(a){return a===d?this.page.info().page:this.iterator("table",function(b){la(b,a)})}),Ua("page.info()",function(a){if(0===this.context.length)return d;var b=this.context[0],c=b._iDisplayStart,e=b.oFeatures.bPaginate?b._iDisplayLength:-1,f=b.fnRecordsDisplay(),g=e===-1;return{page:g?0:Math.floor(c/e),pages:g?1:Math.ceil(f/e),start:c,end:b.fnDisplayEnd(),length:e,recordsTotal:b.fnRecordsTotal(),recordsDisplay:f,serverSide:"ssp"===Oa(b)}}),Ua("page.len()",function(a){return a===d?0!==this.context.length?this.context[0]._iDisplayLength:d:this.iterator("table",function(b){ia(b,a)})});var Ab=function(a,b,c){if(c){var d=new Ta(a);d.one("draw",function(){c(d.ajax.json())})}if("ssp"==Oa(a))N(a,b);else{na(a,!0);var e=a.jqXHR;e&&4!==e.readyState&&e.abort(),R(a,[],function(c){E(a);for(var d=V(a,c),e=0,f=d.length;e<f;e++)u(a,d[e]);N(a,b),na(a,!1)})}};Ua("ajax.json()",function(){var a=this.context;if(a.length>0)return a[0].json}),Ua("ajax.params()",function(){var a=this.context;if(a.length>0)return a[0].oAjaxData}),Ua("ajax.reload()",function(a,b){return this.iterator("table",function(c){Ab(c,b===!1,a)})}),Ua("ajax.url()",function(b){var c=this.context;return b===d?0===c.length?d:(c=c[0],c.ajax?a.isPlainObject(c.ajax)?c.ajax.url:c.ajax:c.sAjaxSource):this.iterator("table",function(c){a.isPlainObject(c.ajax)?c.ajax.url=b:c.ajax=b})}),Ua("ajax.url().load()",function(a,b){return this.iterator("table",function(c){Ab(c,b===!1,a)})});var Bb=function(b,c,e,f,g){var h,i,j,k,l,m,n=[],o=typeof c;for(c&&"string"!==o&&"function"!==o&&c.length!==d||(c=[c]),j=0,k=c.length;j<k;j++)for(i=c[j]&&c[j].split&&!c[j].match(/[\[\(:]/)?c[j].split(","):[c[j]],l=0,m=i.length;l<m;l++)h=e("string"==typeof i[l]?a.trim(i[l]):i[l]),h&&h.length&&(n=n.concat(h));var p=Sa.selector[b];if(p.length)for(j=0,k=p.length;j<k;j++)n=p[j](f,g,n);return nb(n)},Cb=function(b){return b||(b={}),b.filter&&b.search===d&&(b.search=b.filter),a.extend({search:"none",order:"current",page:"all"},b)},Db=function(a){for(var b=0,c=a.length;b<c;b++)if(a[b].length>0)return a[0]=a[b],a[0].length=1,a.length=1,a.context=[a.context[b]],a;return a.length=0,a},Eb=function(b,c){var d,e,f,g=[],h=b.aiDisplay,i=b.aiDisplayMaster,j=c.search,k=c.order,l=c.page;if("ssp"==Oa(b))return"removed"===j?[]:jb(0,i.length);if("current"==l)for(d=b._iDisplayStart,e=b.fnDisplayEnd();d<e;d++)g.push(h[d]);else if("current"==k||"applied"==k)g="none"==j?i.slice():"applied"==j?h.slice():a.map(i,function(b,c){return a.inArray(b,h)===-1?b:null});else if("index"==k||"original"==k)for(d=0,e=b.aoData.length;d<e;d++)"none"==j?g.push(d):(f=a.inArray(d,h),(f===-1&&"removed"==j||f>=0&&"applied"==j)&&g.push(d));return g},Fb=function(b,c,e){var f,g=function(c){var g=cb(c);if(null!==g&&!e)return[g];if(f||(f=Eb(b,e)),null!==g&&a.inArray(g,f)!==-1)return[g];if(null===c||c===d||""===c)return f;if("function"==typeof c)return a.map(f,function(a){var d=b.aoData[a];return c(a,d._aData,d.nTr)?a:null});var h=kb(ib(b.aoData,f,"nTr"));if(c.nodeName){if(c._DT_RowIndex!==d)return[c._DT_RowIndex];if(c._DT_CellIndex)return[c._DT_CellIndex.row];var i=a(c).closest("*[data-dt-row]");return i.length?[i.data("dt-row")]:[]}if("string"==typeof c&&"#"===c.charAt(0)){var j=b.aIds[c.replace(/^#/,"")];if(j!==d)return[j.idx]}return a(h).filter(c).map(function(){return this._DT_RowIndex}).toArray()};return Bb("row",c,g,b,e)};Ua("rows()",function(b,c){b===d?b="":a.isPlainObject(b)&&(c=b,b=""),c=Cb(c);var e=this.iterator("table",function(a){return Fb(a,b,c)},1);return e.selector.rows=b,e.selector.opts=c,e}),Ua("rows().nodes()",function(){return this.iterator("row",function(a,b){return a.aoData[b].nTr||d},1)}),Ua("rows().data()",function(){return this.iterator(!0,"rows",function(a,b){return ib(a.aoData,b,"_aData")},1)}),Va("rows().cache()","row().cache()",function(a){return this.iterator("row",function(b,c){var d=b.aoData[c];return"search"===a?d._aFilterData:d._aSortData},1)}),Va("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",function(b,c){G(b,c,a)})}),Va("rows().indexes()","row().index()",function(){return this.iterator("row",function(a,b){return b},1)}),Va("rows().ids()","row().id()",function(a){for(var b=[],c=this.context,d=0,e=c.length;d<e;d++)for(var f=0,g=this[d].length;f<g;f++){var h=c[d].rowIdFn(c[d].aoData[this[d][f]]._aData);b.push((a===!0?"#":"")+h)}return new Ta(c,b)}),Va("rows().remove()","row().remove()",function(){var a=this;return this.iterator("row",function(b,c,e){var f,g,h,i,j,k,l=b.aoData,m=l[c];for(l.splice(c,1),f=0,g=l.length;f<g;f++)if(j=l[f],k=j.anCells,null!==j.nTr&&(j.nTr._DT_RowIndex=f),null!==k)for(h=0,i=k.length;h<i;h++)k[h]._DT_CellIndex.row=f;F(b.aiDisplayMaster,c),F(b.aiDisplay,c),F(a[e],c,!1),b._iRecordsDisplay>0&&b._iRecordsDisplay--,Ma(b);var n=b.rowIdFn(m._aData);n!==d&&delete b.aIds[n]}),this.iterator("table",function(a){for(var b=0,c=a.aoData.length;b<c;b++)a.aoData[b].idx=b}),this}),Ua("rows.add()",function(b){var c=this.iterator("table",function(a){var c,d,e,f=[];for(d=0,e=b.length;d<e;d++)c=b[d],c.nodeName&&"TR"===c.nodeName.toUpperCase()?f.push(v(a,c)[0]):f.push(u(a,c));return f},1),d=this.rows(-1);return d.pop(),a.merge(d,c),d}),Ua("row()",function(a,b){return Db(this.rows(a,b))}),Ua("row().data()",function(a){var b=this.context;return a===d?b.length&&this.length?b[0].aoData[this[0]]._aData:d:(b[0].aoData[this[0]]._aData=a,G(b[0],this[0],"data"),this)}),Ua("row().node()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]].nTr||null:null}),Ua("row.add()",function(b){b instanceof a&&b.length&&(b=b[0]);var c=this.iterator("table",function(a){return b.nodeName&&"TR"===b.nodeName.toUpperCase()?v(a,b)[0]:u(a,b)});return this.row(c[0])});var Gb=function(b,c,d,e){var f=[],g=function(c,d){if(a.isArray(c)||c instanceof a)for(var e=0,h=c.length;e<h;e++)g(c[e],d);else if(c.nodeName&&"tr"===c.nodeName.toLowerCase())f.push(c);else{var i=a("<tr><td/></tr>").addClass(d);a("td",i).addClass(d).html(c)[0].colSpan=q(b),f.push(i[0])}};g(d,e),c._details&&c._details.detach(),c._details=a(f),c._detailsShow&&c._details.insertAfter(c.nTr)},Hb=function(a,b){var c=a.context;if(c.length){var e=c[0].aoData[b!==d?b:a[0]];e&&e._details&&(e._details.remove(),e._detailsShow=d,e._details=d)}},Ib=function(a,b){var c=a.context;if(c.length&&a.length){var d=c[0].aoData[a[0]];d._details&&(d._detailsShow=b,b?d._details.insertAfter(d.nTr):d._details.detach(),Jb(c[0]))}},Jb=function(a){var b=new Ta(a),c=".dt.DT_details",d="draw"+c,e="column-visibility"+c,f="destroy"+c,g=a.aoData;b.off(d+" "+e+" "+f),hb(g,"_details").length>0&&(b.on(d,function(c,d){a===d&&b.rows({page:"current"}).eq(0).each(function(a){var b=g[a];b._detailsShow&&b._details.insertAfter(b.nTr)})}),b.on(e,function(b,c,d,e){if(a===c)for(var f,h=q(c),i=0,j=g.length;i<j;i++)f=g[i],f._details&&f._details.children("td[colspan]").attr("colspan",h)}),b.on(f,function(c,d){if(a===d)for(var e=0,f=g.length;e<f;e++)g[e]._details&&Hb(b,e)}))},Kb="",Lb=Kb+"row().child",Mb=Lb+"()";Ua(Mb,function(a,b){var c=this.context;return a===d?c.length&&this.length?c[0].aoData[this[0]]._details:d:(a===!0?this.child.show():a===!1?Hb(this):c.length&&this.length&&Gb(c[0],c[0].aoData[this[0]],a,b),this)}),Ua([Lb+".show()",Mb+".show()"],function(a){return Ib(this,!0),this}),Ua([Lb+".hide()",Mb+".hide()"],function(){return Ib(this,!1),this}),Ua([Lb+".remove()",Mb+".remove()"],function(){return Hb(this),this}),Ua(Lb+".isShown()",function(){var a=this.context;return!(!a.length||!this.length)&&(a[0].aoData[this[0]]._detailsShow||!1)});var Nb=/^([^:]+):(name|visIdx|visible)$/,Ob=function(a,b,c,d,e){for(var f=[],g=0,h=e.length;g<h;g++)f.push(y(a,e[g],b));return f},Pb=function(b,c,d){var e=b.aoColumns,f=hb(e,"sName"),g=hb(e,"nTh"),h=function(c){var h=cb(c);if(""===c)return jb(e.length);if(null!==h)return[h>=0?h:e.length+h];if("function"==typeof c){var i=Eb(b,d);return a.map(e,function(a,d){return c(d,Ob(b,d,0,0,i),g[d])?d:null})}var j="string"==typeof c?c.match(Nb):"";if(j)switch(j[2]){case"visIdx":case"visible":var k=parseInt(j[1],10);if(k<0){var l=a.map(e,function(a,b){return a.bVisible?b:null});return[l[l.length+k]]}return[o(b,k)];case"name":return a.map(f,function(a,b){return a===j[1]?b:null});default:return[]}if(c.nodeName&&c._DT_CellIndex)return[c._DT_CellIndex.column];var m=a(g).filter(c).map(function(){return a.inArray(this,g)}).toArray();if(m.length||!c.nodeName)return m;var n=a(c).closest("*[data-dt-column]");return n.length?[n.data("dt-column")]:[]};return Bb("column",c,h,b,d)},Qb=function(b,c,e){var f,g,h,i,j=b.aoColumns,k=j[c],l=b.aoData;if(e===d)return k.bVisible;if(k.bVisible!==e){if(e){var m=a.inArray(!0,hb(j,"bVisible"),c+1);for(g=0,h=l.length;g<h;g++)i=l[g].nTr,f=l[g].anCells,i&&i.insertBefore(f[c],f[m]||null)}else a(hb(b.aoData,"anCells",c)).detach();k.bVisible=e,L(b,b.aoHeader),L(b,b.aoFooter),Da(b)}};Ua("columns()",function(b,c){b===d?b="":a.isPlainObject(b)&&(c=b,b=""),c=Cb(c);var e=this.iterator("table",function(a){return Pb(a,b,c)},1);return e.selector.cols=b,e.selector.opts=c,e}),Va("columns().header()","column().header()",function(a,b){return this.iterator("column",function(a,b){return a.aoColumns[b].nTh},1)}),Va("columns().footer()","column().footer()",function(a,b){return this.iterator("column",function(a,b){return a.aoColumns[b].nTf},1)}),Va("columns().data()","column().data()",function(){return this.iterator("column-rows",Ob,1)}),Va("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].mData},1)}),Va("columns().cache()","column().cache()",function(a){return this.iterator("column-rows",function(b,c,d,e,f){return ib(b.aoData,f,"search"===a?"_aFilterData":"_aSortData",c)},1)}),Va("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(a,b,c,d,e){return ib(a.aoData,e,"anCells",b)},1)}),Va("columns().visible()","column().visible()",function(a,b){var c=this.iterator("column",function(b,c){return a===d?b.aoColumns[c].bVisible:void Qb(b,c,a)});return a!==d&&(this.iterator("column",function(c,d){La(c,null,"column-visibility",[c,d,a,b])}),(b===d||b)&&this.columns.adjust()),c}),Va("columns().indexes()","column().index()",function(a){return this.iterator("column",function(b,c){return"visible"===a?p(b,c):c},1)}),Ua("columns.adjust()",function(){return this.iterator("table",function(a){n(a)},1)}),Ua("column.index()",function(a,b){if(0!==this.context.length){var c=this.context[0];if("fromVisible"===a||"toData"===a)return o(c,b);if("fromData"===a||"toVisible"===a)return p(c,b)}}),Ua("column()",function(a,b){return Db(this.columns(a,b))});var Rb=function(b,c,e){var f,g,h,i,j,k,l,m=b.aoData,n=Eb(b,e),o=kb(ib(m,n,"anCells")),p=a([].concat.apply([],o)),q=b.aoColumns.length,r=function(c){var e="function"==typeof c;if(null===c||c===d||e){for(g=[],h=0,i=n.length;h<i;h++)for(f=n[h],j=0;j<q;j++)k={row:f,column:j},e?(l=m[f],c(k,y(b,f,j),l.anCells?l.anCells[j]:null)&&g.push(k)):g.push(k);return g}if(a.isPlainObject(c))return[c];var o=p.filter(c).map(function(a,b){return{row:b._DT_CellIndex.row,column:b._DT_CellIndex.column}}).toArray();return o.length||!c.nodeName?o:(l=a(c).closest("*[data-dt-row]"),l.length?[{row:l.data("dt-row"),column:l.data("dt-column")}]:[])};return Bb("cell",c,r,b,e)};Ua("cells()",function(b,c,e){if(a.isPlainObject(b)&&(b.row===d?(e=b,b=null):(e=c,c=null)),a.isPlainObject(c)&&(e=c,c=null),null===c||c===d)return this.iterator("table",function(a){return Rb(a,b,Cb(e))});var f,g,h,i,j,k=this.columns(c,e),l=this.rows(b,e),m=this.iterator("table",function(a,b){for(f=[],g=0,h=l[b].length;g<h;g++)for(i=0,j=k[b].length;i<j;i++)f.push({row:l[b][g],column:k[b][i]});return f},1);return a.extend(m.selector,{cols:c,rows:b,opts:e}),m}),Va("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(a,b,c){var e=a.aoData[b];return e&&e.anCells?e.anCells[c]:d},1)}),Ua("cells().data()",function(){return this.iterator("cell",function(a,b,c){return y(a,b,c)},1)}),Va("cells().cache()","cell().cache()",function(a){return a="search"===a?"_aFilterData":"_aSortData",this.iterator("cell",function(b,c,d){return b.aoData[c][a][d]},1)}),Va("cells().render()","cell().render()",function(a){return this.iterator("cell",function(b,c,d){return y(b,c,d,a)},1)}),Va("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,b,c){return{row:b,column:c,columnVisible:p(a,c)}},1)}),Va("cells().invalidate()","cell().invalidate()",function(a){return this.iterator("cell",function(b,c,d){G(b,c,a,d)})}),Ua("cell()",function(a,b,c){return Db(this.cells(a,b,c))}),Ua("cell().data()",function(a){var b=this.context,c=this[0];return a===d?b.length&&c.length?y(b[0],c[0].row,c[0].column):d:(z(b[0],c[0].row,c[0].column,a),G(b[0],c[0].row,"data",c[0].column),this)}),Ua("order()",function(b,c){var e=this.context;return b===d?0!==e.length?e[0].aaSorting:d:("number"==typeof b?b=[[b,c]]:b.length&&!a.isArray(b[0])&&(b=Array.prototype.slice.call(arguments)),this.iterator("table",function(a){a.aaSorting=b.slice()}))}),Ua("order.listener()",function(a,b,c){return this.iterator("table",function(d){Aa(d,a,b,c)})}),Ua("order.fixed()",function(b){if(!b){var c=this.context,e=c.length?c[0].aaSortingFixed:d;return a.isArray(e)?{pre:e}:e}return this.iterator("table",function(c){c.aaSortingFixed=a.extend(!0,{},b)})}),Ua(["columns().order()","column().order()"],function(b){var c=this;return this.iterator("table",function(d,e){var f=[];a.each(c[e],function(a,c){f.push([c,b])}),d.aaSorting=f})}),Ua("search()",function(b,c,e,f){var g=this.context;return b===d?0!==g.length?g[0].oPreviousSearch.sSearch:d:this.iterator("table",function(d){d.oFeatures.bFilter&&X(d,a.extend({},d.oPreviousSearch,{sSearch:b+"",bRegex:null!==c&&c,bSmart:null===e||e,bCaseInsensitive:null===f||f}),1)})}),Va("columns().search()","column().search()",function(b,c,e,f){return this.iterator("column",function(g,h){var i=g.aoPreSearchCols;return b===d?i[h].sSearch:void(g.oFeatures.bFilter&&(a.extend(i[h],{sSearch:b+"",bRegex:null!==c&&c,bSmart:null===e||e,bCaseInsensitive:null===f||f
}),X(g,g.oPreviousSearch,1)))})}),Ua("state()",function(){return this.context.length?this.context[0].oSavedState:null}),Ua("state.clear()",function(){return this.iterator("table",function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})}),Ua("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),Ua("state.save()",function(){return this.iterator("table",function(a){Da(a)})}),Wa.versionCheck=Wa.fnVersionCheck=function(a){for(var b,c,d=Wa.version.split("."),e=a.split("."),f=0,g=e.length;f<g;f++)if(b=parseInt(d[f],10)||0,c=parseInt(e[f],10)||0,b!==c)return b>c;return!0},Wa.isDataTable=Wa.fnIsDataTable=function(b){var c=a(b).get(0),d=!1;return b instanceof Wa.Api||(a.each(Wa.settings,function(b,e){var f=e.nScrollHead?a("table",e.nScrollHead)[0]:null,g=e.nScrollFoot?a("table",e.nScrollFoot)[0]:null;e.nTable!==c&&f!==c&&g!==c||(d=!0)}),d)},Wa.tables=Wa.fnTables=function(b){var c=!1;a.isPlainObject(b)&&(c=b.api,b=b.visible);var d=a.map(Wa.settings,function(c){if(!b||b&&a(c.nTable).is(":visible"))return c.nTable});return c?new Ta(d):d},Wa.camelToHungarian=f,Ua("$()",function(b,c){var d=this.rows(c).nodes(),e=a(d);return a([].concat(e.filter(b).toArray(),e.find(b).toArray()))}),a.each(["on","one","off"],function(b,c){Ua(c+"()",function(){var b=Array.prototype.slice.call(arguments);b[0]=a.map(b[0].split(/\s/),function(a){return a.match(/\.dt\b/)?a:a+".dt"}).join(" ");var d=a(this.tables().nodes());return d[c].apply(d,b),this})}),Ua("clear()",function(){return this.iterator("table",function(a){E(a)})}),Ua("settings()",function(){return new Ta(this.context,this.context)}),Ua("init()",function(){var a=this.context;return a.length?a[0].oInit:null}),Ua("data()",function(){return this.iterator("table",function(a){return hb(a.aoData,"_aData")}).flatten()}),Ua("destroy()",function(c){return c=c||!1,this.iterator("table",function(d){var e,f=d.nTableWrapper.parentNode,g=d.oClasses,h=d.nTable,i=d.nTBody,j=d.nTHead,k=d.nTFoot,l=a(h),m=a(i),n=a(d.nTableWrapper),o=a.map(d.aoData,function(a){return a.nTr});d.bDestroying=!0,La(d,"aoDestroyCallback","destroy",[d]),c||new Ta(d).columns().visible(!0),n.off(".DT").find(":not(tbody *)").off(".DT"),a(b).off(".DT-"+d.sInstance),h!=j.parentNode&&(l.children("thead").detach(),l.append(j)),k&&h!=k.parentNode&&(l.children("tfoot").detach(),l.append(k)),d.aaSorting=[],d.aaSortingFixed=[],Ba(d),a(o).removeClass(d.asStripeClasses.join(" ")),a("th, td",j).removeClass(g.sSortable+" "+g.sSortableAsc+" "+g.sSortableDesc+" "+g.sSortableNone),m.children().detach(),m.append(o);var p=c?"remove":"detach";l[p](),n[p](),!c&&f&&(f.insertBefore(h,d.nTableReinsertBefore),l.css("width",d.sDestroyWidth).removeClass(g.sTable),e=d.asDestroyStripes.length,e&&m.children().each(function(b){a(this).addClass(d.asDestroyStripes[b%e])}));var q=a.inArray(d,Wa.settings);q!==-1&&Wa.settings.splice(q,1)})}),a.each(["column","row","cell"],function(a,b){Ua(b+"s().every()",function(a){var c=this.selector.opts,e=this;return this.iterator(b,function(f,g,h,i,j){a.call(e[b](g,"cell"===b?h:c,"cell"===b?c:d),g,h,i,j)})})}),Ua("i18n()",function(b,c,e){var f=this.context[0],g=B(b)(f.oLanguage);return g===d&&(g=c),e!==d&&a.isPlainObject(g)&&(g=g[e]!==d?g[e]:g._),g.replace("%d",e)}),Wa.version="1.10.16",Wa.settings=[],Wa.models={},Wa.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},Wa.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1},Wa.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},Wa.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((a.iStateDuration===-1?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(b){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(a.iStateDuration===-1?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,JSON.stringify(b))}catch(c){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:a.extend({},Wa.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"},e(Wa.defaults),Wa.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},e(Wa.defaults.column),Wa.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:d,oAjaxData:d,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==Oa(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==Oa(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=this._iDisplayLength,b=this._iDisplayStart,c=b+a,d=this.aiDisplay.length,e=this.oFeatures,f=e.bPaginate;return e.bServerSide?f===!1||a===-1?b+d:Math.min(b+a,this._iRecordsDisplay):!f||c>d||a===-1?d:c},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null},Wa.ext=Sa={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:Wa.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:Wa.version},a.extend(Sa,{afnFiltering:Sa.search,aTypes:Sa.type.detect,ofnSearch:Sa.type.search,oSort:Sa.type.order,afnSortData:Sa.order,aoFeatures:Sa.feature,oApi:Sa.internal,oStdClasses:Sa.classes,oPagination:Sa.pager}),a.extend(Wa.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var Sb=Wa.ext.pager;a.extend(Sb,{simple:function(a,b){return["previous","next"]},full:function(a,b){return["first","previous","next","last"]},numbers:function(a,b){return[Pa(a,b)]},simple_numbers:function(a,b){return["previous",Pa(a,b),"next"]},full_numbers:function(a,b){return["first","previous",Pa(a,b),"next","last"]},first_last_numbers:function(a,b){return["first",Pa(a,b),"last"]},_numbers:Pa,numbers_length:7}),a.extend(!0,Wa.ext.renderer,{pageButton:{_:function(b,e,f,g,h,i){var j,k,l,m=b.oClasses,n=b.oLanguage.oPaginate,o=b.oLanguage.oAria.paginate||{},p=0,q=function(c,d){var e,g,l,r,s=function(a){la(b,a.data.action,!0)};for(e=0,g=d.length;e<g;e++)if(r=d[e],a.isArray(r)){var t=a("<"+(r.DT_el||"div")+"/>").appendTo(c);q(t,r)}else{switch(j=null,k="",r){case"ellipsis":c.append('<span class="ellipsis">&#x2026;</span>');break;case"first":j=n.sFirst,k=r+(h>0?"":" "+m.sPageButtonDisabled);break;case"previous":j=n.sPrevious,k=r+(h>0?"":" "+m.sPageButtonDisabled);break;case"next":j=n.sNext,k=r+(h<i-1?"":" "+m.sPageButtonDisabled);break;case"last":j=n.sLast,k=r+(h<i-1?"":" "+m.sPageButtonDisabled);break;default:j=r+1,k=h===r?m.sPageButtonActive:""}null!==j&&(l=a("<a>",{"class":m.sPageButton+" "+k,"aria-controls":b.sTableId,"aria-label":o[r],"data-dt-idx":p,tabindex:b.iTabIndex,id:0===f&&"string"==typeof r?b.sTableId+"_"+r:null}).html(j).appendTo(c),Ja(l,{action:r},s),p++)}};try{l=a(e).find(c.activeElement).data("dt-idx")}catch(r){}q(a(e).empty(),g),l!==d&&a(e).find("[data-dt-idx="+l+"]").focus()}}}),a.extend(Wa.ext.type.detect,[function(a,b){var c=b.oLanguage.sDecimal;return eb(a,c)?"num"+c:null},function(a,b){if(a&&!(a instanceof Date)&&!$a.test(a))return null;var c=Date.parse(a);return null!==c&&!isNaN(c)||bb(a)?"date":null},function(a,b){var c=b.oLanguage.sDecimal;return eb(a,c,!0)?"num-fmt"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return gb(a,c)?"html-num"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return gb(a,c,!0)?"html-num-fmt"+c:null},function(a,b){return bb(a)||"string"==typeof a&&a.indexOf("<")!==-1?"html":null}]),a.extend(Wa.ext.type.search,{html:function(a){return bb(a)?a:"string"==typeof a?a.replace(Ya," ").replace(Za,""):""},string:function(a){return bb(a)?a:"string"==typeof a?a.replace(Ya," "):a}});var Tb=function(a,b,c,d){return 0===a||a&&"-"!==a?(b&&(a=db(a,b)),a.replace&&(c&&(a=a.replace(c,"")),d&&(a=a.replace(d,""))),1*a):-(1/0)};a.extend(Sa.type.order,{"date-pre":function(a){return Date.parse(a)||-(1/0)},"html-pre":function(a){return bb(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return bb(a)?"":"string"==typeof a?a.toLowerCase():a.toString?a.toString():""},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,b){return a<b?1:a>b?-1:0}}),Qa(""),a.extend(!0,Wa.ext.renderer,{header:{_:function(b,c,d,e){a(b.nTable).on("order.dt.DT",function(a,f,g,h){if(b===f){var i=d.idx;c.removeClass(d.sSortingClass+" "+e.sSortAsc+" "+e.sSortDesc).addClass("asc"==h[i]?e.sSortAsc:"desc"==h[i]?e.sSortDesc:d.sSortingClass)}})},jqueryui:function(b,c,d,e){a("<div/>").addClass(e.sSortJUIWrapper).append(c.contents()).append(a("<span/>").addClass(e.sSortIcon+" "+d.sSortingClassJUI)).appendTo(c),a(b.nTable).on("order.dt.DT",function(a,f,g,h){if(b===f){var i=d.idx;c.removeClass(e.sSortAsc+" "+e.sSortDesc).addClass("asc"==h[i]?e.sSortAsc:"desc"==h[i]?e.sSortDesc:d.sSortingClass),c.find("span."+e.sSortIcon).removeClass(e.sSortJUIAsc+" "+e.sSortJUIDesc+" "+e.sSortJUI+" "+e.sSortJUIAscAllowed+" "+e.sSortJUIDescAllowed).addClass("asc"==h[i]?e.sSortJUIAsc:"desc"==h[i]?e.sSortJUIDesc:d.sSortingClassJUI)}})}}});var Ub=function(a){return"string"==typeof a?a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):a};return Wa.render={number:function(a,b,c,d,e){return{display:function(f){if("number"!=typeof f&&"string"!=typeof f)return f;var g=f<0?"-":"",h=parseFloat(f);if(isNaN(h))return Ub(f);h=h.toFixed(c),f=Math.abs(h);var i=parseInt(f,10),j=c?b+(f-i).toFixed(c).substring(2):"";return g+(d||"")+i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+j+(e||"")}}},text:function(){return{display:Ub}}},a.extend(Wa.ext.internal,{_fnExternApiFunc:Ra,_fnBuildAjax:R,_fnAjaxUpdate:S,_fnAjaxParameters:T,_fnAjaxUpdateDraw:U,_fnAjaxDataSrc:V,_fnAddColumn:l,_fnColumnOptions:m,_fnAdjustColumnSizing:n,_fnVisibleToColumnIndex:o,_fnColumnIndexToVisible:p,_fnVisbleColumns:q,_fnGetColumns:r,_fnColumnTypes:s,_fnApplyColumnDefs:t,_fnHungarianMap:e,_fnCamelToHungarian:f,_fnLanguageCompat:g,_fnBrowserDetect:j,_fnAddData:u,_fnAddTr:v,_fnNodeToDataIndex:w,_fnNodeToColumnIndex:x,_fnGetCellData:y,_fnSetCellData:z,_fnSplitObjNotation:A,_fnGetObjectDataFn:B,_fnSetObjectDataFn:C,_fnGetDataMaster:D,_fnClearTable:E,_fnDeleteIndex:F,_fnInvalidate:G,_fnGetRowElements:H,_fnCreateTr:I,_fnBuildHead:K,_fnDrawHead:L,_fnDraw:M,_fnReDraw:N,_fnAddOptionsHtml:O,_fnDetectHeader:P,_fnGetUniqueThs:Q,_fnFeatureHtmlFilter:W,_fnFilterComplete:X,_fnFilterCustom:Y,_fnFilterColumn:Z,_fnFilter:$,_fnFilterCreateSearch:_,_fnEscapeRegex:rb,_fnFilterData:aa,_fnFeatureHtmlInfo:da,_fnUpdateInfo:ea,_fnInfoMacros:fa,_fnInitialise:ga,_fnInitComplete:ha,_fnLengthChange:ia,_fnFeatureHtmlLength:ja,_fnFeatureHtmlPaginate:ka,_fnPageChange:la,_fnFeatureHtmlProcessing:ma,_fnProcessingDisplay:na,_fnFeatureHtmlTable:oa,_fnScrollDraw:pa,_fnApplyToChildren:qa,_fnCalculateColumnWidths:ra,_fnThrottle:vb,_fnConvertToWidth:sa,_fnGetWidestNode:ta,_fnGetMaxLenString:ua,_fnStringToCss:va,_fnSortFlatten:wa,_fnSort:xa,_fnSortAria:ya,_fnSortListener:za,_fnSortAttachListener:Aa,_fnSortingClasses:Ba,_fnSortData:Ca,_fnSaveState:Da,_fnLoadState:Ea,_fnSettingsFromNode:Fa,_fnLog:Ga,_fnMap:Ha,_fnBindAction:Ja,_fnCallbackReg:Ka,_fnCallbackFire:La,_fnLengthOverflow:Ma,_fnRenderer:Na,_fnDataSource:Oa,_fnRowAttributes:J,_fnCalculateEnd:function(){}}),a.fn.dataTable=Wa,Wa.$=a,a.fn.dataTableSettings=Wa.settings,a.fn.dataTableExt=Wa.ext,a.fn.DataTable=function(b){return a(this).dataTable(b).api()},a.each(Wa,function(b,c){a.fn.DataTable[b]=c}),a.fn.dataTable}),function(a){"function"==typeof define&&define.amd?define("datatables.net-bs",["jquery","datatables.net"],function(b){return a(b,window,document)}):"object"==typeof exports?module.exports=function(b,c){return b||(b=window),c&&c.fn.dataTable||(c=require("datatables.net")(b,c).$),a(c,b,b.document)}:a(jQuery,window,document)}(function(a,b,c,d){"use strict";var e=a.fn.dataTable;return a.extend(!0,e.defaults,{dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",renderer:"bootstrap"}),a.extend(e.ext.classes,{sWrapper:"dataTables_wrapper form-inline dt-bootstrap",sFilterInput:"form-control input-sm",sLengthSelect:"form-control input-sm",sProcessing:"dataTables_processing panel panel-default"}),e.ext.renderer.pageButton.bootstrap=function(b,f,g,h,i,j){var k,l,m,n=new e.Api(b),o=b.oClasses,p=b.oLanguage.oPaginate,q=b.oLanguage.oAria.paginate||{},r=0,s=function(c,d){var e,f,h,m,t=function(b){b.preventDefault(),a(b.currentTarget).hasClass("disabled")||n.page()==b.data.action||n.page(b.data.action).draw("page")};for(e=0,f=d.length;e<f;e++)if(m=d[e],a.isArray(m))s(c,m);else{switch(k="",l="",m){case"ellipsis":k="&#x2026;",l="disabled";break;case"first":k=p.sFirst,l=m+(i>0?"":" disabled");break;case"previous":k=p.sPrevious,l=m+(i>0?"":" disabled");break;case"next":k=p.sNext,l=m+(i<j-1?"":" disabled");break;case"last":k=p.sLast,l=m+(i<j-1?"":" disabled");break;default:k=m+1,l=i===m?"active":""}k&&(h=a("<li>",{"class":o.sPageButton+" "+l,id:0===g&&"string"==typeof m?b.sTableId+"_"+m:null}).append(a("<a>",{href:"#","aria-controls":b.sTableId,"aria-label":q[m],"data-dt-idx":r,tabindex:b.iTabIndex}).html(k)).appendTo(c),b.oApi._fnBindAction(h,{action:m},t),r++)}};try{m=a(f).find(c.activeElement).data("dt-idx")}catch(t){}s(a(f).empty().html('<ul class="pagination"/>').children("ul"),h),m!==d&&a(f).find("[data-dt-idx="+m+"]").focus()},e}),function(a){"function"==typeof define&&define.amd?define("datatables.net-buttons",["jquery","datatables.net"],function(b){return a(b,window,document)}):"object"==typeof exports?module.exports=function(b,c){return b||(b=window),c&&c.fn.dataTable||(c=require("datatables.net")(b,c).$),a(c,b,b.document)}:a(jQuery,window,document)}(function(a,b,c,d){var e=a.fn.dataTable,f=0,g=0,h=e.ext.buttons,i=function(b,c){"undefined"==typeof c&&(c={}),!0===c&&(c={}),a.isArray(c)&&(c={buttons:c}),this.c=a.extend(!0,{},i.defaults,c),c.buttons&&(this.c.buttons=c.buttons),this.s={dt:new e.Api(b),buttons:[],listenKeys:"",namespace:"dtb"+f++},this.dom={container:a("<"+this.c.dom.container.tag+"/>").addClass(this.c.dom.container.className)},this._constructor()};a.extend(i.prototype,{action:function(a,b){var c=this._nodeToButton(a);return b===d?c.conf.action:(c.conf.action=b,this)},active:function(b,c){var e=this._nodeToButton(b),f=this.c.dom.button.active,e=a(e.node);return c===d?e.hasClass(f):(e.toggleClass(f,c===d||c),this)},add:function(a,b){var c=this.s.buttons;if("string"==typeof b){for(var d=b.split("-"),c=this.s,e=0,f=d.length-1;e<f;e++)c=c.buttons[1*d[e]];c=c.buttons,b=1*d[d.length-1]}return this._expandButton(c,a,!1,b),this._draw(),this},container:function(){return this.dom.container},disable:function(b){return b=this._nodeToButton(b),a(b.node).addClass(this.c.dom.button.disabled),this},destroy:function(){a("body").off("keyup."+this.s.namespace);var b,c,d=this.s.buttons.slice();for(b=0,c=d.length;b<c;b++)this.remove(d[b].node);for(this.dom.container.remove(),d=this.s.dt.settings()[0],b=0,c=d.length;b<c;b++)if(d.inst===this){d.splice(b,1);break}return this},enable:function(b,c){if(!1===c)return this.disable(b);var d=this._nodeToButton(b);return a(d.node).removeClass(this.c.dom.button.disabled),this},name:function(){return this.c.name},node:function(b){return b=this._nodeToButton(b),a(b.node)},processing:function(b,c){var e=this._nodeToButton(b);return c===d?a(e.node).hasClass("processing"):(a(e.node).toggleClass("processing",c),this)},remove:function(b){var c=this._nodeToButton(b),d=this._nodeToHost(b),e=this.s.dt;if(c.buttons.length)for(var f=c.buttons.length-1;0<=f;f--)this.remove(c.buttons[f].node);return c.conf.destroy&&c.conf.destroy.call(e.button(b),e,a(b),c.conf),this._removeKey(c.conf),a(c.node).remove(),b=a.inArray(c,d),d.splice(b,1),this},text:function(b,c){var e=this._nodeToButton(b),f=this.c.dom.collection.buttonLiner,f=e.inCollection&&f&&f.tag?f.tag:this.c.dom.buttonLiner.tag,g=this.s.dt,h=a(e.node),i=function(a){return"function"==typeof a?a(g,h,e.conf):a};return c===d?i(e.conf.text):(e.conf.text=c,f?h.children(f).html(i(c)):h.html(i(c)),this)},_constructor:function(){var b=this,d=this.s.dt,e=d.settings()[0],f=this.c.buttons;e._buttons||(e._buttons=[]),e._buttons.push({inst:this,name:this.c.name});for(var e=0,g=f.length;e<g;e++)this.add(f[e]);d.on("destroy",function(){b.destroy()}),a("body").on("keyup."+this.s.namespace,function(a){if(!c.activeElement||c.activeElement===c.body){var d=String.fromCharCode(a.keyCode).toLowerCase();b.s.listenKeys.toLowerCase().indexOf(d)!==-1&&b._keypress(d,a)}})},_addKey:function(b){b.key&&(this.s.listenKeys+=a.isPlainObject(b.key)?b.key.key:b.key)},_draw:function(a,b){a||(a=this.dom.container,b=this.s.buttons),a.children().detach();for(var c=0,d=b.length;c<d;c++)a.append(b[c].inserter),a.append(" "),b[c].buttons&&b[c].buttons.length&&this._draw(b[c].collection,b[c].buttons)},_expandButton:function(b,c,e,f){for(var g=this.s.dt,h=0,c=a.isArray(c)?c:[c],i=0,j=c.length;i<j;i++){var k=this._resolveExtends(c[i]);if(k)if(a.isArray(k))this._expandButton(b,k,e,f);else{var l=this._buildButton(k,e);if(l){if(f!==d?(b.splice(f,0,l),f++):b.push(l),l.conf.buttons){var m=this.c.dom.collection;l.collection=a("<"+m.tag+"/>").addClass(m.className).attr("role","menu"),l.conf._collection=l.collection,this._expandButton(l.buttons,l.conf.buttons,!0,f)}k.init&&k.init.call(g.button(l.node),g,a(l.node),k),h++}}}},_buildButton:function(b,c){var d=this.c.dom.button,e=this.c.dom.buttonLiner,f=this.c.dom.collection,h=this.s.dt,i=function(a){return"function"==typeof a?a(h,k,b):a};if(c&&f.button&&(d=f.button),c&&f.buttonLiner&&(e=f.buttonLiner),b.available&&!b.available(h,b))return!1;var j=function(b,c,d,e){e.action.call(c.button(d),b,c,d,e),a(c.table().node()).triggerHandler("buttons-action.dt",[c.button(d),c,d,e])},k=a("<"+d.tag+"/>").addClass(d.className).attr("tabindex",this.s.dt.settings()[0].iTabIndex).attr("aria-controls",this.s.dt.table().node().id).on("click.dtb",function(a){a.preventDefault(),!k.hasClass(d.disabled)&&b.action&&j(a,h,k,b),k.blur()}).on("keyup.dtb",function(a){13===a.keyCode&&!k.hasClass(d.disabled)&&b.action&&j(a,h,k,b)});return"a"===d.tag.toLowerCase()&&k.attr("href","#"),e.tag?(f=a("<"+e.tag+"/>").html(i(b.text)).addClass(e.className),"a"===e.tag.toLowerCase()&&f.attr("href","#"),k.append(f)):k.html(i(b.text)),!1===b.enabled&&k.addClass(d.disabled),b.className&&k.addClass(b.className),b.titleAttr&&k.attr("title",i(b.titleAttr)),b.namespace||(b.namespace=".dt-button-"+g++),e=(e=this.c.dom.buttonContainer)&&e.tag?a("<"+e.tag+"/>").addClass(e.className).append(k):k,this._addKey(b),{conf:b,node:k.get(0),inserter:e,buttons:[],inCollection:c,collection:null}},_nodeToButton:function(a,b){b||(b=this.s.buttons);for(var c=0,d=b.length;c<d;c++){if(b[c].node===a)return b[c];if(b[c].buttons.length){var e=this._nodeToButton(a,b[c].buttons);if(e)return e}}},_nodeToHost:function(a,b){b||(b=this.s.buttons);for(var c=0,d=b.length;c<d;c++){if(b[c].node===a)return b;if(b[c].buttons.length){var e=this._nodeToHost(a,b[c].buttons);if(e)return e}}},_keypress:function(b,c){var d=function(e){for(var f=0,g=e.length;f<g;f++){var h=e[f].conf,i=e[f].node;h.key&&(h.key===b?a(i).click():!a.isPlainObject(h.key)||h.key.key!==b||h.key.shiftKey&&!c.shiftKey||h.key.altKey&&!c.altKey||h.key.ctrlKey&&!c.ctrlKey||(!h.key.metaKey||c.metaKey)&&a(i).click()),e[f].buttons.length&&d(e[f].buttons)}};d(this.s.buttons)},_removeKey:function(b){if(b.key){var c=a.isPlainObject(b.key)?b.key.key:b.key,b=this.s.listenKeys.split(""),c=a.inArray(c,b);b.splice(c,1),this.s.listenKeys=b.join("")}},_resolveExtends:function(b){for(var c,e,f=this.s.dt,g=function(c){for(var e=0;!a.isPlainObject(c)&&!a.isArray(c);){if(c===d)return;if("function"==typeof c){if(c=c(f,b),!c)return!1}else if("string"==typeof c){if(!h[c])throw"Unknown button type: "+c;c=h[c]}if(e++,30<e)throw"Buttons: Too many iterations"}return a.isArray(c)?c:a.extend({},c)},b=g(b);b&&b.extend;){if(!h[b.extend])throw"Cannot extend unknown button type: "+b.extend;var i=g(h[b.extend]);if(a.isArray(i))return i;if(!i)return!1;c=i.className,b=a.extend({},i,b),c&&b.className!==c&&(b.className=c+" "+b.className);var j=b.postfixButtons;if(j){for(b.buttons||(b.buttons=[]),c=0,e=j.length;c<e;c++)b.buttons.push(j[c]);b.postfixButtons=null}if(j=b.prefixButtons){for(b.buttons||(b.buttons=[]),c=0,e=j.length;c<e;c++)b.buttons.splice(c,0,j[c]);b.prefixButtons=null}b.extend=i.extend}return b}}),i.background=function(b,c,e){e===d&&(e=400),b?a("<div/>").addClass(c).css("display","none").appendTo("body").fadeIn(e):a("body > div."+c).fadeOut(e,function(){a(this).removeClass(c).remove()})},i.instanceSelector=function(b,c){if(!b)return a.map(c,function(a){return a.inst});var d=[],e=a.map(c,function(a){return a.name}),f=function(b){if(a.isArray(b))for(var g=0,h=b.length;g<h;g++)f(b[g]);else"string"==typeof b?-1!==b.indexOf(",")?f(b.split(",")):(b=a.inArray(a.trim(b),e),-1!==b&&d.push(c[b].inst)):"number"==typeof b&&d.push(c[b].inst)};return f(b),d},i.buttonSelector=function(b,c){for(var e=[],f=function(a,b,c){for(var e,g,h=0,i=b.length;h<i;h++)(e=b[h])&&(g=c!==d?c+h:h+"",a.push({node:e.node,name:e.conf.name,idx:g}),e.buttons&&f(a,e.buttons,g+"-"))},g=function(b,c){var h,i,j=[];if(f(j,c.s.buttons),h=a.map(j,function(a){return a.node}),a.isArray(b)||b instanceof a)for(h=0,i=b.length;h<i;h++)g(b[h],c);else if(null===b||b===d||"*"===b)for(h=0,i=j.length;h<i;h++)e.push({inst:c,node:j[h].node});else if("number"==typeof b)e.push({inst:c,node:c.s.buttons[b].node});else if("string"==typeof b)if(-1!==b.indexOf(","))for(j=b.split(","),h=0,i=j.length;h<i;h++)g(a.trim(j[h]),c);else if(b.match(/^\d+(\-\d+)*$/))h=a.map(j,function(a){return a.idx}),e.push({inst:c,node:j[a.inArray(b,h)].node});else if(-1!==b.indexOf(":name")){var k=b.replace(":name","");for(h=0,i=j.length;h<i;h++)j[h].name===k&&e.push({inst:c,node:j[h].node})}else a(h).filter(b).each(function(){e.push({inst:c,node:this})});else"object"==typeof b&&b.nodeName&&(j=a.inArray(b,h),-1!==j&&e.push({inst:c,node:h[j]}))},h=0,i=b.length;h<i;h++)g(c,b[h]);return e},i.defaults={buttons:["copy","excel","csv","pdf","print"],name:"main",tabIndex:0,dom:{container:{tag:"div",className:"dt-buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"a",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}}},i.version="1.4.2",a.extend(h,{collection:{text:function(a){return a.i18n("buttons.collection","Collection")},className:"buttons-collection",action:function(c,d,e,f){var c=e.offset(),g=a(d.table().container()),h=!1;a("div.dt-button-background").length&&(h=a(".dt-button-collection").offset(),a("body").trigger("click.dtb-collection")),f._collection.addClass(f.collectionLayout).css("display","none").appendTo("body").fadeIn(f.fade);var j=f._collection.css("position");h&&"absolute"===j?f._collection.css({top:h.top,left:h.left}):"absolute"===j?(f._collection.css({top:c.top+e.outerHeight(),left:c.left}),h=g.offset().top+g.height(),e=c.top+e.outerHeight()+f._collection.outerHeight()-h,h=c.top-f._collection.outerHeight(),h=g.offset().top-h,e>h&&f._collection.css("top",c.top-f._collection.outerHeight()-5),e=c.left+f._collection.outerWidth(),g=g.offset().left+g.width(),e>g&&f._collection.css("left",c.left-(e-g))):(c=f._collection.height()/2,c>a(b).height()/2&&(c=a(b).height()/2),f._collection.css("marginTop",-1*c)),f.background&&i.background(!0,f.backgroundClassName,f.fade),setTimeout(function(){a("div.dt-button-background").on("click.dtb-collection",function(){}),a("body").on("click.dtb-collection",function(b){var c=a.fn.addBack?"addBack":"andSelf";a(b.target).parents()[c]().filter(f._collection).length||(f._collection.fadeOut(f.fade,function(){f._collection.detach()}),a("div.dt-button-background").off("click.dtb-collection"),i.background(!1,f.backgroundClassName,f.fade),a("body").off("click.dtb-collection"),d.off("buttons-action.b-internal"))})},10),f.autoClose&&d.on("buttons-action.b-internal",function(){a("div.dt-button-background").click()})},background:!0,collectionLayout:"",backgroundClassName:"dt-button-background",autoClose:!1,fade:400},copy:function(a,b){return h.copyHtml5?"copyHtml5":h.copyFlash&&h.copyFlash.available(a,b)?"copyFlash":void 0},csv:function(a,b){return h.csvHtml5&&h.csvHtml5.available(a,b)?"csvHtml5":h.csvFlash&&h.csvFlash.available(a,b)?"csvFlash":void 0},excel:function(a,b){return h.excelHtml5&&h.excelHtml5.available(a,b)?"excelHtml5":h.excelFlash&&h.excelFlash.available(a,b)?"excelFlash":void 0},pdf:function(a,b){return h.pdfHtml5&&h.pdfHtml5.available(a,b)?"pdfHtml5":h.pdfFlash&&h.pdfFlash.available(a,b)?"pdfFlash":void 0},pageLength:function(b){var b=b.settings()[0].aLengthMenu,c=a.isArray(b[0])?b[0]:b,d=a.isArray(b[0])?b[1]:b,e=function(a){return a.i18n("buttons.pageLength",{"-1":"Show all rows",_:"Show %d rows"},a.page.len())};return{extend:"collection",text:e,className:"buttons-page-length",autoClose:!0,buttons:a.map(c,function(a,b){return{text:d[b],className:"button-page-length",action:function(b,c){c.page.len(a).draw()},init:function(b,c,d){var e=this,c=function(){e.active(b.page.len()===a)};b.on("length.dt"+d.namespace,c),c()},destroy:function(a,b,c){a.off("length.dt"+c.namespace)}}}),init:function(a,b,c){var d=this;a.on("length.dt"+c.namespace,function(){d.text(e(a))})},destroy:function(a,b,c){a.off("length.dt"+c.namespace)}}}}),e.Api.register("buttons()",function(a,b){b===d&&(b=a,a=d),this.selector.buttonGroup=a;var c=this.iterator(!0,"table",function(c){if(c._buttons)return i.buttonSelector(i.instanceSelector(a,c._buttons),b)},!0);return c._groupSelector=a,c}),e.Api.register("button()",function(a,b){var c=this.buttons(a,b);return 1<c.length&&c.splice(1,c.length),c}),e.Api.registerPlural("buttons().active()","button().active()",function(a){return a===d?this.map(function(a){return a.inst.active(a.node)}):this.each(function(b){b.inst.active(b.node,a)})}),e.Api.registerPlural("buttons().action()","button().action()",function(a){return a===d?this.map(function(a){return a.inst.action(a.node)}):this.each(function(b){b.inst.action(b.node,a)})}),e.Api.register(["buttons().enable()","button().enable()"],function(a){return this.each(function(b){b.inst.enable(b.node,a)})}),e.Api.register(["buttons().disable()","button().disable()"],function(){return this.each(function(a){a.inst.disable(a.node)})}),e.Api.registerPlural("buttons().nodes()","button().node()",function(){var b=a();return a(this.each(function(a){b=b.add(a.inst.node(a.node))})),b}),e.Api.registerPlural("buttons().processing()","button().processing()",function(a){return a===d?this.map(function(a){return a.inst.processing(a.node)}):this.each(function(b){b.inst.processing(b.node,a)})}),e.Api.registerPlural("buttons().text()","button().text()",function(a){return a===d?this.map(function(a){return a.inst.text(a.node)}):this.each(function(b){b.inst.text(b.node,a)})}),e.Api.registerPlural("buttons().trigger()","button().trigger()",function(){return this.each(function(a){a.inst.node(a.node).trigger("click")})}),e.Api.registerPlural("buttons().containers()","buttons().container()",function(){var b=a(),c=this._groupSelector;return this.iterator(!0,"table",function(a){if(a._buttons)for(var a=i.instanceSelector(c,a._buttons),d=0,e=a.length;d<e;d++)b=b.add(a[d].container())}),b}),e.Api.register("button().add()",function(a,b){var c=this.context;return c.length&&(c=i.instanceSelector(this._groupSelector,c[0]._buttons),c.length&&c[0].add(b,a)),this.button(this._groupSelector,a)}),e.Api.register("buttons().destroy()",function(){return this.pluck("inst").unique().each(function(a){
a.destroy()}),this}),e.Api.registerPlural("buttons().remove()","buttons().remove()",function(){return this.each(function(a){a.inst.remove(a.node)}),this});var j;e.Api.register("buttons.info()",function(b,c,e){var f=this;return!1===b?(a("#datatables_buttons_info").fadeOut(function(){a(this).remove()}),clearTimeout(j),j=null,this):(j&&clearTimeout(j),a("#datatables_buttons_info").length&&a("#datatables_buttons_info").remove(),a('<div id="datatables_buttons_info" class="dt-button-info"/>').html(b?"<h2>"+b+"</h2>":"").append(a("<div/>")["string"==typeof c?"html":"append"](c)).css("display","none").appendTo("body").fadeIn(),e!==d&&0!==e&&(j=setTimeout(function(){f.buttons.info(!1)},e)),this)}),e.Api.register("buttons.exportData()",function(b){if(this.context.length){for(var c=new e.Api(this.context[0]),d=a.extend(!0,{},{rows:null,columns:"",modifier:{search:"applied",order:"applied"},orthogonal:"display",stripHtml:!0,stripNewlines:!0,decodeEntities:!0,trim:!0,format:{header:function(a){return f(a)},footer:function(a){return f(a)},body:function(a){return f(a)}}},b),f=function(a){return"string"!=typeof a?a:(a=a.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""),d.stripHtml&&(a=a.replace(/<[^>]*>/g,"")),d.trim&&(a=a.replace(/^\s+|\s+$/g,"")),d.stripNewlines&&(a=a.replace(/\n/g," ")),d.decodeEntities&&(m.innerHTML=a,a=m.value),a)},b=c.columns(d.columns).indexes().map(function(a){var b=c.column(a).header();return d.format.header(b.innerHTML,a,b)}).toArray(),g=c.table().footer()?c.columns(d.columns).indexes().map(function(a){var b=c.column(a).footer();return d.format.footer(b?b.innerHTML:"",a,b)}).toArray():null,h=c.rows(d.rows,d.modifier).indexes().toArray(),i=c.cells(h,d.columns),h=i.render(d.orthogonal).toArray(),i=i.nodes().toArray(),j=b.length,k=0<j?h.length/j:0,l=Array(k),n=0,o=0;o<k;o++){for(var p=Array(j),q=0;q<j;q++)p[q]=d.format.body(h[n],o,q,i[n]),n++;l[o]=p}return{header:b,footer:g,body:l}}}),e.Api.register("buttons.exportInfo()",function(b){b||(b={});var c,e=b;return c="*"===e.filename&&"*"!==e.title&&e.title!==d?e.title:e.filename,"function"==typeof c&&(c=c()),c===d||null===c?c=null:(-1!==c.indexOf("*")&&(c=a.trim(c.replace("*",a("title").text()))),c=c.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""),(e=k(e.extension))||(e=""),c+=e),e=k(b.title),e=null===e?null:-1!==e.indexOf("*")?e.replace("*",a("title").text()||"Exported data"):e,{filename:c,title:e,messageTop:l(this,b.messageTop||b.message,"top"),messageBottom:l(this,b.messageBottom,"bottom")}});var k=function(a){return null===a||a===d?null:"function"==typeof a?a():a},l=function(b,c,d){return c=k(c),null===c?null:(b=a("caption",b.table().container()).eq(0),"*"===c?b.css("caption-side")!==d?null:b.length?b.text():"":c)},m=a("<textarea/>")[0];return a.fn.dataTable.Buttons=i,a.fn.DataTable.Buttons=i,a(c).on("init.dt plugin-init.dt",function(a,b){if("dt"===a.namespace){var c=b.oInit.buttons||e.defaults.buttons;c&&!b._buttons&&new i(b,c).container()}}),e.ext.feature.push({fnInit:function(a){var a=new e.Api(a),b=a.init().buttons||e.defaults.buttons;return new i(a,b).container()},cFeature:"B"}),i}),function(a){"function"==typeof define&&define.amd?define("datatables.net-buttons-colvis",["jquery","datatables.net","datatables.net-buttons"],function(b){return a(b,window,document)}):"object"==typeof exports?module.exports=function(b,c){return b||(b=window),c&&c.fn.dataTable||(c=require("datatables.net")(b,c).$),c.fn.dataTable.Buttons||require("datatables.net-buttons")(b,c),a(c,b,b.document)}:a(jQuery,window,document)}(function(a,b,c,d){return b=a.fn.dataTable,a.extend(b.ext.buttons,{colvis:function(a,b){return{extend:"collection",text:function(a){return a.i18n("buttons.colvis","Column visibility")},className:"buttons-colvis",buttons:[{extend:"columnsToggle",columns:b.columns,columnText:b.columnText}]}},columnsToggle:function(a,b){return a.columns(b.columns).indexes().map(function(a){return{extend:"columnToggle",columns:a,columnText:b.columnText}}).toArray()},columnToggle:function(a,b){return{extend:"columnVisibility",columns:b.columns,columnText:b.columnText}},columnsVisibility:function(a,b){return a.columns(b.columns).indexes().map(function(a){return{extend:"columnVisibility",columns:a,visibility:b.visibility,columnText:b.columnText}}).toArray()},columnVisibility:{columns:d,text:function(a,b,c){return c._columnText(a,c)},className:"buttons-columnVisibility",action:function(a,b,c,e){a=b.columns(e.columns),b=a.visible(),a.visible(e.visibility!==d?e.visibility:!(b.length&&b[0]))},init:function(a,b,c){var d=this;a.on("column-visibility.dt"+c.namespace,function(b,e){!e.bDestroying&&e.nTable==a.settings()[0].nTable&&d.active(a.column(c.columns).visible())}).on("column-reorder.dt"+c.namespace,function(b,e,f){1===a.columns(c.columns).count()&&("number"==typeof c.columns&&(c.columns=f.mapping[c.columns]),b=a.column(c.columns),d.text(c._columnText(a,c)),d.active(b.visible()))}),this.active(a.column(c.columns).visible())},destroy:function(a,b,c){a.off("column-visibility.dt"+c.namespace).off("column-reorder.dt"+c.namespace)},_columnText:function(a,b){var c=a.column(b.columns).index(),d=a.settings()[0].aoColumns[c].sTitle.replace(/\n/g," ").replace(/<br\s*\/?>/gi," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,"");return b.columnText?b.columnText(a,c,d):d}},colvisRestore:{className:"buttons-colvisRestore",text:function(a){return a.i18n("buttons.colvisRestore","Restore visibility")},init:function(a,b,c){c._visOriginal=a.columns().indexes().map(function(b){return a.column(b).visible()}).toArray()},action:function(a,b,c,d){b.columns().every(function(a){a=b.colReorder&&b.colReorder.transpose?b.colReorder.transpose(a,"toOriginal"):a,this.visible(d._visOriginal[a])})}},colvisGroup:{className:"buttons-colvisGroup",action:function(a,b,c,d){b.columns(d.show).visible(!0,!1),b.columns(d.hide).visible(!1,!1),b.columns.adjust()},show:[],hide:[]}}),b.Buttons}),function(a){"function"==typeof define&&define.amd?define("datatables.net-buttons-flash",["jquery","datatables.net","datatables.net-buttons"],function(b){return a(b,window,document)}):"object"==typeof exports?module.exports=function(b,c){return b||(b=window),c&&c.fn.dataTable||(c=require("datatables.net")(b,c).$),c.fn.dataTable.Buttons||require("datatables.net-buttons")(b,c),a(c,b,b.document)}:a(jQuery,window,document)}(function(a,b,c,d){function e(a){for(var b="";0<=a;)b=String.fromCharCode(a%26+65)+b,a=Math.floor(a/26)-1;return b}function f(b,c,e){var f=b.createElement(c);return e&&(e.attr&&a(f).attr(e.attr),e.children&&a.each(e.children,function(a,b){f.appendChild(b)}),null!==e.text&&e.text!==d&&f.appendChild(b.createTextNode(e.text))),f}function g(a,b){var c,e=a.header[b].length;a.footer&&a.footer[b].length>e&&(e=a.footer[b].length);for(var f=0,g=a.body.length;f<g;f++)if(c=a.body[f][b],c=null!==c&&c!==d?c.toString():"",-1!==c.indexOf("\n")?(c=c.split("\n"),c.sort(function(a,b){return b.length-a.length}),c=c[0].length):c=c.length,c>e&&(e=c),40<e)return 52;return e*=1.3,6<e?e:6}function h(b){k===d&&(k=-1===r.serializeToString(a.parseXML(s["xl/worksheets/sheet1.xml"])).indexOf("xmlns:r")),a.each(b,function(c,d){if(a.isPlainObject(d))h(d);else{if(k){var e,f,g=d.childNodes[0],i=[];for(e=g.attributes.length-1;0<=e;e--){f=g.attributes[e].nodeName;var j=g.attributes[e].nodeValue;-1!==f.indexOf(":")&&(i.push({name:f,value:j}),g.removeAttribute(f))}for(e=0,f=i.length;e<f;e++)j=d.createAttribute(i[e].name.replace(":","_dt_b_namespace_token_")),j.value=i[e].value,g.setAttributeNode(j)}g=r.serializeToString(d),k&&(-1===g.indexOf("<?xml")&&(g='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+g),g=g.replace(/_dt_b_namespace_token_/g,":")),g=g.replace(/<([^<>]*?) xmlns=""([^<>]*?)>/g,"<$1 $2>"),b[c]=g}})}var i=a.fn.dataTable,j={version:"1.0.4-TableTools2",clients:{},moviePath:"",nextId:1,$:function(a){return"string"==typeof a&&(a=c.getElementById(a)),a.addClass||(a.hide=function(){this.style.display="none"},a.show=function(){this.style.display=""},a.addClass=function(a){this.removeClass(a),this.className+=" "+a},a.removeClass=function(a){this.className=this.className.replace(RegExp("\\s*"+a+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")},a.hasClass=function(a){return!!this.className.match(RegExp("\\s*"+a+"\\s*"))}),a},setMoviePath:function(a){this.moviePath=a},dispatch:function(a,b,c){(a=this.clients[a])&&a.receiveEvent(b,c)},log:function(a){console.log("Flash: "+a)},register:function(a,b){this.clients[a]=b},getDOMObjectPosition:function(a){var b={left:0,top:0,width:a.width?a.width:a.offsetWidth,height:a.height?a.height:a.offsetHeight};for(""!==a.style.width&&(b.width=a.style.width.replace("px","")),""!==a.style.height&&(b.height=a.style.height.replace("px",""));a;)b.left+=a.offsetLeft,b.top+=a.offsetTop,a=a.offsetParent;return b},Client:function(a){this.handlers={},this.id=j.nextId++,this.movieId="ZeroClipboard_TableToolsMovie_"+this.id,j.register(this.id,this),a&&this.glue(a)}};j.Client.prototype={id:0,ready:!1,movie:null,clipText:"",fileName:"",action:"copy",handCursorEnabled:!0,cssEffects:!0,handlers:null,sized:!1,sheetName:"",glue:function(a,b){this.domElement=j.$(a);var d=99;this.domElement.style.zIndex&&(d=parseInt(this.domElement.style.zIndex,10)+1);var e=j.getDOMObjectPosition(this.domElement);this.div=c.createElement("div");var f=this.div.style;f.position="absolute",f.left="0px",f.top="0px",f.width=e.width+"px",f.height=e.height+"px",f.zIndex=d,"undefined"!=typeof b&&""!==b&&(this.div.title=b),0!==e.width&&0!==e.height&&(this.sized=!0),this.domElement&&(this.domElement.appendChild(this.div),this.div.innerHTML=this.getHTML(e.width,e.height).replace(/&/g,"&amp;"))},positionElement:function(){var a=j.getDOMObjectPosition(this.domElement),b=this.div.style;b.position="absolute",b.width=a.width+"px",b.height=a.height+"px",0!==a.width&&0!==a.height&&(this.sized=!0,b=this.div.childNodes[0],b.width=a.width,b.height=a.height)},getHTML:function(a,b){var c="",d="id="+this.id+"&width="+a+"&height="+b;if(navigator.userAgent.match(/MSIE/))var e=location.href.match(/^https/i)?"https://":"http://",c=c+('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+e+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+a+'" height="'+b+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+j.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+d+'"/><param name="wmode" value="transparent"/></object>');else c+='<embed id="'+this.movieId+'" src="'+j.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+a+'" height="'+b+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+d+'" wmode="transparent" />';return c},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){var b=this;this.domElement&&this.div&&(a(this.div).remove(),this.div=this.domElement=null,a.each(j.clients,function(a,c){c===b&&delete j.clients[a]}))},reposition:function(a){if(a&&((this.domElement=j.$(a))||this.hide()),this.domElement&&this.div){var a=j.getDOMObjectPosition(this.domElement),b=this.div.style;b.left=""+a.left+"px",b.top=""+a.top+"px"}},clearText:function(){this.clipText="",this.ready&&this.movie.clearText()},appendText:function(a){this.clipText+=a,this.ready&&this.movie.appendText(a)},setText:function(a){this.clipText=a,this.ready&&this.movie.setText(a)},setFileName:function(a){this.fileName=a,this.ready&&this.movie.setFileName(a)},setSheetData:function(a){this.ready&&this.movie.setSheetData(JSON.stringify(a))},setAction:function(a){this.action=a,this.ready&&this.movie.setAction(a)},addEventListener:function(a,b){a=a.toString().toLowerCase().replace(/^on/,""),this.handlers[a]||(this.handlers[a]=[]),this.handlers[a].push(b)},setHandCursor:function(a){this.handCursorEnabled=a,this.ready&&this.movie.setHandCursor(a)},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(a,d){var e,a=a.toString().toLowerCase().replace(/^on/,"");switch(a){case"load":if(this.movie=c.getElementById(this.movieId),!this.movie)return e=this,void setTimeout(function(){e.receiveEvent("load",null)},1);if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/))return e=this,setTimeout(function(){e.receiveEvent("load",null)},100),void(this.ready=!0);this.ready=!0,this.movie.clearText(),this.movie.appendText(this.clipText),this.movie.setFileName(this.fileName),this.movie.setAction(this.action),this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":this.domElement&&this.cssEffects&&this.recoverActive&&this.domElement.addClass("active");break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[a])for(var f=0,g=this.handlers[a].length;f<g;f++){var h=this.handlers[a][f];"function"==typeof h?h(this,d):"object"==typeof h&&2==h.length?h[0][h[1]](this,d):"string"==typeof h&&b[h](this,d)}}},j.hasFlash=function(){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(a){if(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!==d&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return!0}return!1},b.ZeroClipboard_TableTools=j;var k,l=function(a,b){b.attr("id"),b.parents("html").length?a.glue(b[0],""):setTimeout(function(){l(a,b)},500)},m=function(a){var b="Sheet1";return a.sheetName&&(b=a.sheetName.replace(/[\[\]\*\/\\\?\:]/g,"")),b},n=function(a,b){var c=b.match(/[\s\S]{1,8192}/g)||[];a.clearText();for(var d=0,e=c.length;d<e;d++)a.appendText(c[d])},o=function(a){return a.newline?a.newline:navigator.userAgent.match(/Windows/)?"\r\n":"\n"},p=function(a,b){for(var c=o(b),e=a.buttons.exportData(b.exportOptions),f=b.fieldBoundary,g=b.fieldSeparator,h=RegExp(f,"g"),i=b.escapeChar!==d?b.escapeChar:"\\",j=function(a){for(var b="",c=0,d=a.length;c<d;c++)0<c&&(b+=g),b+=f?f+(""+a[c]).replace(h,i+f)+f:a[c];return b},k=b.header?j(e.header)+c:"",l=b.footer&&e.footer?c+j(e.footer):"",m=[],n=0,p=e.body.length;n<p;n++)m.push(j(e.body[n]));return{str:k+m.join(c)+l,rows:m.length}},q={available:function(){return j.hasFlash()},init:function(a,b,c){j.moviePath=i.Buttons.swfPath;var d=new j.Client;d.setHandCursor(!0),d.addEventListener("mouseDown",function(){c._fromFlash=!0,a.button(b[0]).trigger(),c._fromFlash=!1}),l(d,b),c._flash=d},destroy:function(a,b,c){c._flash.destroy()},fieldSeparator:",",fieldBoundary:'"',exportOptions:{},title:"*",messageTop:"*",messageBottom:"*",filename:"*",extension:".csv",header:!0,footer:!1},r="",r="undefined"==typeof b.XMLSerializer?new function(){this.serializeToString=function(a){return a.xml}}:new XMLSerializer,s={"_rels/.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',"xl/_rels/workbook.xml.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/></Relationships>',"[Content_Types].xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="jpeg" ContentType="image/jpeg" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /></Types>',"xl/workbook.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="24816"/><workbookPr showInkAnnotation="0" autoCompressPictures="0"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="25600" windowHeight="19020" tabRatio="500"/></bookViews><sheets><sheet name="" sheetId="1" r:id="rId1"/></sheets></workbook>',"xl/worksheets/sheet1.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><sheetData/><mergeCells count="0"/></worksheet>',"xl/styles.xml":'<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="6"><numFmt numFmtId="164" formatCode="#,##0.00_- [$$-45C]"/><numFmt numFmtId="165" formatCode="&quot;Â£&quot;#,##0.00"/><numFmt numFmtId="166" formatCode="[$â‚¬-2] #,##0.00"/><numFmt numFmtId="167" formatCode="0.0%"/><numFmt numFmtId="168" formatCode="#,##0;(#,##0)"/><numFmt numFmtId="169" formatCode="#,##0.00;(#,##0.00)"/></numFmts><fonts count="5" x14ac:knownFonts="1"><font><sz val="11" /><name val="Calibri" /></font><font><sz val="11" /><name val="Calibri" /><color rgb="FFFFFFFF" /></font><font><sz val="11" /><name val="Calibri" /><b /></font><font><sz val="11" /><name val="Calibri" /><i /></font><font><sz val="11" /><name val="Calibri" /><u /></font></fonts><fills count="6"><fill><patternFill patternType="none" /></fill><fill/><fill><patternFill patternType="solid"><fgColor rgb="FFD9D9D9" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="FFD99795" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6efce" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6cfef" /><bgColor indexed="64" /></patternFill></fill></fills><borders count="2"><border><left /><right /><top /><bottom /><diagonal /></border><border diagonalUp="false" diagonalDown="false"><left style="thin"><color auto="1" /></left><right style="thin"><color auto="1" /></right><top style="thin"><color auto="1" /></top><bottom style="thin"><color auto="1" /></bottom><diagonal /></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" /></cellStyleXfs><cellXfs count="61"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="left"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="center"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="right"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="fill"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment textRotation="90"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment wrapText="1"/></xf><xf numFmtId="9"   fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="164" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="165" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="166" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="167" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="168" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="169" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="3" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="4" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0" /></cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4" /></styleSheet>'},t=[{match:/^\-?\d+\.\d%$/,style:60,fmt:function(a){return a/100}},{match:/^\-?\d+\.?\d*%$/,style:56,fmt:function(a){return a/100}},{match:/^\-?\$[\d,]+.?\d*$/,style:57},{match:/^\-?Â£[\d,]+.?\d*$/,style:58},{match:/^\-?â‚¬[\d,]+.?\d*$/,style:59},{match:/^\([\d,]+\)$/,style:61,fmt:function(a){return-1*a.replace(/[\(\)]/g,"")}},{match:/^\([\d,]+\.\d{2}\)$/,style:62,fmt:function(a){return-1*a.replace(/[\(\)]/g,"")}},{match:/^[\d,]+$/,style:63},{match:/^[\d,]+\.\d{2}$/,style:64}];return i.Buttons.swfPath="//cdn.datatables.net/buttons/"+i.Buttons.version+"/swf/flashExport.swf",i.Api.register("buttons.resize()",function(){a.each(j.clients,function(a,b){b.domElement!==d&&b.domElement.parentNode&&b.positionElement()})}),i.ext.buttons.copyFlash=a.extend({},q,{className:"buttons-copy buttons-flash",text:function(a){return a.i18n("buttons.copy","Copy")},action:function(a,b,c,d){if(d._fromFlash){this.processing(!0);var a=d._flash,e=p(b,d),c=b.buttons.exportInfo(d),f=o(d),e=e.str;c.title&&(e=c.title+f+f+e),c.messageTop&&(e=c.messageTop+f+f+e),c.messageBottom&&(e=e+f+f+c.messageBottom),d.customize&&(e=d.customize(e,d)),a.setAction("copy"),n(a,e),this.processing(!1),b.buttons.info(b.i18n("buttons.copyTitle","Copy to clipboard"),b.i18n("buttons.copySuccess",{_:"Copied %d rows to clipboard",1:"Copied 1 row to clipboard"},data.rows),3e3)}},fieldSeparator:"\t",fieldBoundary:""}),i.ext.buttons.csvFlash=a.extend({},q,{className:"buttons-csv buttons-flash",text:function(a){return a.i18n("buttons.csv","CSV")},action:function(a,b,c,d){a=d._flash,b=p(b,d),b=d.customize?d.customize(b.str,d):b.str,a.setAction("csv"),a.setFileName(_filename(d)),n(a,b)},escapeChar:'"'}),i.ext.buttons.excelFlash=a.extend({},q,{className:"buttons-excel buttons-flash",text:function(a){return a.i18n("buttons.excel","Excel")},action:function(b,c,i,j){this.processing(!0);var k,l,b=j._flash,o=0,p=a.parseXML(s["xl/worksheets/sheet1.xml"]),q=p.getElementsByTagName("sheetData")[0],i={_rels:{".rels":a.parseXML(s["_rels/.rels"])},xl:{_rels:{"workbook.xml.rels":a.parseXML(s["xl/_rels/workbook.xml.rels"])},"workbook.xml":a.parseXML(s["xl/workbook.xml"]),"styles.xml":a.parseXML(s["xl/styles.xml"]),worksheets:{"sheet1.xml":p}},"[Content_Types].xml":a.parseXML(s["[Content_Types].xml"])},r=c.buttons.exportData(j.exportOptions),u=function(b){k=o+1,l=f(p,"row",{attr:{r:k}});for(var c=0,g=b.length;c<g;c++){var h=e(c)+""+k,i=null;if(null!==b[c]&&b[c]!==d&&""!==b[c]){b[c]=a.trim(b[c]);for(var j=0,m=t.length;j<m;j++){var n=t[j];if(b[c].match&&!b[c].match(/^0\d+/)&&b[c].match(n.match)){i=b[c].replace(/[^\d\.\-]/g,""),n.fmt&&(i=n.fmt(i)),i=f(p,"c",{attr:{r:h,s:n.style},children:[f(p,"v",{text:i})]});break}}i||("number"==typeof b[c]||b[c].match&&b[c].match(/^-?\d+(\.\d+)?$/)&&!b[c].match(/^0\d+/)?i=f(p,"c",{attr:{t:"n",r:h},children:[f(p,"v",{text:b[c]})]}):(n=b[c].replace?b[c].replace(/[\x00-\x09\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,""):b[c],i=f(p,"c",{attr:{t:"inlineStr",r:h},children:{row:f(p,"is",{children:{row:f(p,"t",{text:n})}})}}))),l.appendChild(i)}}q.appendChild(l),o++};a("sheets sheet",i.xl["workbook.xml"]).attr("name",m(j)),j.customizeData&&j.customizeData(r);var v=function(b,c){var d=a("mergeCells",p);d[0].appendChild(f(p,"mergeCell",{attr:{ref:"A"+b+":"+e(c)+b}})),d.attr("count",d.attr("count")+1),a("row:eq("+(b-1)+") c",p).attr("s","51")},c=c.buttons.exportInfo(j);c.title&&(u([c.title],o),v(o,r.header.length-1)),c.messageTop&&(u([c.messageTop],o),v(o,r.header.length-1)),j.header&&(u(r.header,o),a("row:last c",p).attr("s","2"));for(var w=0,x=r.body.length;w<x;w++)u(r.body[w],o);for(j.footer&&r.footer&&(u(r.footer,o),a("row:last c",p).attr("s","2")),c.messageBottom&&(u([c.messageBottom],o),v(o,r.header.length-1)),u=f(p,"cols"),a("worksheet",p).prepend(u),v=0,w=r.header.length;v<w;v++)u.appendChild(f(p,"col",{attr:{min:v+1,max:v+1,width:g(r,v),customWidth:1}}));j.customize&&j.customize(i),h(i),b.setAction("excel"),b.setFileName(c.filename),b.setSheetData(i),n(b,""),this.processing(!1)},extension:".xlsx"}),i.ext.buttons.pdfFlash=a.extend({},q,{className:"buttons-pdf buttons-flash",text:function(a){return a.i18n("buttons.pdf","PDF")},action:function(a,b,c,d){this.processing(!0);var a=d._flash,c=b.buttons.exportData(d.exportOptions),e=b.buttons.exportInfo(d),f=b.table().node().offsetWidth,g=b.columns(d.columns).indexes().map(function(a){return b.column(a).header().offsetWidth/f});a.setAction("pdf"),a.setFileName(e.filename),n(a,JSON.stringify({title:e.title||"",messageTop:e.messageTop||"",messageBottom:e.messageBottom||"",colWidth:g.toArray(),orientation:d.orientation,size:d.pageSize,header:d.header?c.header:null,footer:d.footer?c.footer:null,body:c.body})),this.processing(!1)},extension:".pdf",orientation:"portrait",pageSize:"A4",newline:"\n"}),i.Buttons}),function(a){"function"==typeof define&&define.amd?define("datatables.net-buttons-html5",["jquery","datatables.net","datatables.net-buttons"],function(b){return a(b,window,document)}):"object"==typeof exports?module.exports=function(b,c,d,e){
return b||(b=window),c&&c.fn.dataTable||(c=require("datatables.net")(b,c).$),c.fn.dataTable.Buttons||require("datatables.net-buttons")(b,c),a(c,b,b.document,d,e)}:a(jQuery,window,document)}(function(a,b,c,d,e,f){function g(a){for(var b="";0<=a;)b=String.fromCharCode(a%26+65)+b,a=Math.floor(a/26)-1;return b}function h(b,c){A===f&&(A=-1===B.serializeToString(a.parseXML(D["xl/worksheets/sheet1.xml"])).indexOf("xmlns:r")),a.each(c,function(c,d){if(a.isPlainObject(d)){var e=b.folder(c);h(e,d)}else{if(A){var f,g,e=d.childNodes[0],i=[];for(f=e.attributes.length-1;0<=f;f--){g=e.attributes[f].nodeName;var j=e.attributes[f].nodeValue;-1!==g.indexOf(":")&&(i.push({name:g,value:j}),e.removeAttribute(g))}for(f=0,g=i.length;f<g;f++)j=d.createAttribute(i[f].name.replace(":","_dt_b_namespace_token_")),j.value=i[f].value,e.setAttributeNode(j)}e=B.serializeToString(d),A&&(-1===e.indexOf("<?xml")&&(e='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+e),e=e.replace(/_dt_b_namespace_token_/g,":")),e=e.replace(/<([^<>]*?) xmlns=""([^<>]*?)>/g,"<$1 $2>"),b.file(c,e)}})}function i(b,c,d){var e=b.createElement(c);return d&&(d.attr&&a(e).attr(d.attr),d.children&&a.each(d.children,function(a,b){e.appendChild(b)}),null!==d.text&&d.text!==f&&e.appendChild(b.createTextNode(d.text))),e}function j(a,b){var c,d=a.header[b].length;a.footer&&a.footer[b].length>d&&(d=a.footer[b].length);for(var e=0,g=a.body.length;e<g;e++)if(c=a.body[e][b],c=null!==c&&c!==f?c.toString():"",-1!==c.indexOf("\n")?(c=c.split("\n"),c.sort(function(a,b){return b.length-a.length}),c=c[0].length):c=c.length,c>d&&(d=c),40<d)return 52;return d*=1.3,6<d?d:6}var k,l=a.fn.dataTable,m="undefined"!=typeof self&&self||"undefined"!=typeof b&&b||this.content;if("undefined"==typeof m||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))k=void 0;else{var n=m.document.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in n,p=/constructor/i.test(m.HTMLElement)||m.safari,q=/CriOS\/[\d]+/.test(navigator.userAgent),r=function(a){(m.setImmediate||m.setTimeout)(function(){throw a},0)},s=function(a){setTimeout(function(){"string"==typeof a?(m.URL||m.webkitURL||m).revokeObjectURL(a):a.remove()},4e4)},t=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a},u=function(a,b,c){c||(a=t(a));var d,e=this,c="application/octet-stream"===a.type,f=function(){for(var a=["writestart","progress","write","writeend"],a=[].concat(a),b=a.length;b--;){var c=e["on"+a[b]];if("function"==typeof c)try{c.call(e,e)}catch(d){r(d)}}};if(e.readyState=e.INIT,o)d=(m.URL||m.webkitURL||m).createObjectURL(a),setTimeout(function(){n.href=d,n.download=b;var a=new MouseEvent("click");n.dispatchEvent(a),f(),s(d),e.readyState=e.DONE});else if((q||c&&p)&&m.FileReader){var g=new FileReader;g.onloadend=function(){var a=q?g.result:g.result.replace(/^data:[^;]*;/,"data:attachment/file;");m.open(a,"_blank")||(m.location.href=a),e.readyState=e.DONE,f()},g.readAsDataURL(a),e.readyState=e.INIT}else d||(d=(m.URL||m.webkitURL||m).createObjectURL(a)),c?m.location.href=d:m.open(d,"_blank")||(m.location.href=d),e.readyState=e.DONE,f(),s(d)},v=u.prototype;"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?k=function(a,b,c){return b=b||a.name||"download",c||(a=t(a)),navigator.msSaveOrOpenBlob(a,b)}:(v.abort=function(){},v.readyState=v.INIT=0,v.WRITING=1,v.DONE=2,v.error=v.onwritestart=v.onprogress=v.onwrite=v.onabort=v.onerror=v.onwriteend=null,k=function(a,b,c){return new u(a,b||a.name||"download",c)})}l.fileSave=k;var w=function(a){var b="Sheet1";return a.sheetName&&(b=a.sheetName.replace(/[\[\]\*\/\\\?\:]/g,"")),b},x=function(a){return a.newline?a.newline:navigator.userAgent.match(/Windows/)?"\r\n":"\n"},y=function(a,b){for(var c=x(b),d=a.buttons.exportData(b.exportOptions),e=b.fieldBoundary,g=b.fieldSeparator,h=RegExp(e,"g"),i=b.escapeChar!==f?b.escapeChar:"\\",j=function(a){for(var b="",c=0,d=a.length;c<d;c++)0<c&&(b+=g),b+=e?e+(""+a[c]).replace(h,i+e)+e:a[c];return b},k=b.header?j(d.header)+c:"",l=b.footer&&d.footer?c+j(d.footer):"",m=[],n=0,o=d.body.length;n<o;n++)m.push(j(d.body[n]));return{str:k+m.join(c)+l,rows:m.length}},z=function(){if(-1===navigator.userAgent.indexOf("Safari")||-1!==navigator.userAgent.indexOf("Chrome")||-1!==navigator.userAgent.indexOf("Opera"))return!1;var a=navigator.userAgent.match(/AppleWebKit\/(\d+\.\d+)/);return!!(a&&1<a.length&&603.1>1*a[1])};try{var A,B=new XMLSerializer}catch(C){}var D={"_rels/.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',"xl/_rels/workbook.xml.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/></Relationships>',"[Content_Types].xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="jpeg" ContentType="image/jpeg" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /></Types>',"xl/workbook.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="24816"/><workbookPr showInkAnnotation="0" autoCompressPictures="0"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="25600" windowHeight="19020" tabRatio="500"/></bookViews><sheets><sheet name="" sheetId="1" r:id="rId1"/></sheets></workbook>',"xl/worksheets/sheet1.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><sheetData/><mergeCells count="0"/></worksheet>',"xl/styles.xml":'<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="6"><numFmt numFmtId="164" formatCode="#,##0.00_- [$$-45C]"/><numFmt numFmtId="165" formatCode="&quot;Â£&quot;#,##0.00"/><numFmt numFmtId="166" formatCode="[$â‚¬-2] #,##0.00"/><numFmt numFmtId="167" formatCode="0.0%"/><numFmt numFmtId="168" formatCode="#,##0;(#,##0)"/><numFmt numFmtId="169" formatCode="#,##0.00;(#,##0.00)"/></numFmts><fonts count="5" x14ac:knownFonts="1"><font><sz val="11" /><name val="Calibri" /></font><font><sz val="11" /><name val="Calibri" /><color rgb="FFFFFFFF" /></font><font><sz val="11" /><name val="Calibri" /><b /></font><font><sz val="11" /><name val="Calibri" /><i /></font><font><sz val="11" /><name val="Calibri" /><u /></font></fonts><fills count="6"><fill><patternFill patternType="none" /></fill><fill/><fill><patternFill patternType="solid"><fgColor rgb="FFD9D9D9" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="FFD99795" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6efce" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6cfef" /><bgColor indexed="64" /></patternFill></fill></fills><borders count="2"><border><left /><right /><top /><bottom /><diagonal /></border><border diagonalUp="false" diagonalDown="false"><left style="thin"><color auto="1" /></left><right style="thin"><color auto="1" /></right><top style="thin"><color auto="1" /></top><bottom style="thin"><color auto="1" /></bottom><diagonal /></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" /></cellStyleXfs><cellXfs count="67"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="left"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="center"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="right"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="fill"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment textRotation="90"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment wrapText="1"/></xf><xf numFmtId="9"   fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="164" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="165" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="166" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="167" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="168" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="169" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="3" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="4" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="1" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="2" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0" /></cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4" /></styleSheet>'},E=[{match:/^\-?\d+\.\d%$/,style:60,fmt:function(a){return a/100}},{match:/^\-?\d+\.?\d*%$/,style:56,fmt:function(a){return a/100}},{match:/^\-?\$[\d,]+.?\d*$/,style:57},{match:/^\-?Â£[\d,]+.?\d*$/,style:58},{match:/^\-?â‚¬[\d,]+.?\d*$/,style:59},{match:/^\-?\d+$/,style:65},{match:/^\-?\d+\.\d{2}$/,style:66},{match:/^\([\d,]+\)$/,style:61,fmt:function(a){return-1*a.replace(/[\(\)]/g,"")}},{match:/^\([\d,]+\.\d{2}\)$/,style:62,fmt:function(a){return-1*a.replace(/[\(\)]/g,"")}},{match:/^\-?[\d,]+$/,style:63},{match:/^\-?[\d,]+\.\d{2}$/,style:64}];return l.ext.buttons.copyHtml5={className:"buttons-copy buttons-html5",text:function(a){return a.i18n("buttons.copy","Copy")},action:function(b,d,e,f){this.processing(!0);var g=this,b=y(d,f),h=d.buttons.exportInfo(f),i=x(f),j=b.str,e=a("<div/>").css({height:1,width:1,overflow:"hidden",position:"fixed",top:0,left:0});if(h.title&&(j=h.title+i+i+j),h.messageTop&&(j=h.messageTop+i+i+j),h.messageBottom&&(j=j+i+i+h.messageBottom),f.customize&&(j=f.customize(j,f)),f=a("<textarea readonly/>").val(j).appendTo(e),c.queryCommandSupported("copy")){e.appendTo(d.table().container()),f[0].focus(),f[0].select();try{var k=c.execCommand("copy");if(e.remove(),k)return d.buttons.info(d.i18n("buttons.copyTitle","Copy to clipboard"),d.i18n("buttons.copySuccess",{1:"Copied one row to clipboard",_:"Copied %d rows to clipboard"},b.rows),2e3),void this.processing(!1)}catch(l){}}k=a("<span>"+d.i18n("buttons.copyKeys","Press <i>ctrl</i> or <i>âŒ˜</i> + <i>C</i> to copy the table data<br>to your system clipboard.<br><br>To cancel, click this message or press escape.")+"</span>").append(e),d.buttons.info(d.i18n("buttons.copyTitle","Copy to clipboard"),k,0),f[0].focus(),f[0].select();var m=a(k).closest(".dt-button-info"),n=function(){m.off("click.buttons-copy"),a(c).off(".buttons-copy"),d.buttons.info(!1)};m.on("click.buttons-copy",n),a(c).on("keydown.buttons-copy",function(a){27===a.keyCode&&(n(),g.processing(!1))}).on("copy.buttons-copy cut.buttons-copy",function(){n(),g.processing(!1)})},exportOptions:{},fieldSeparator:"\t",fieldBoundary:"",header:!0,footer:!1,title:"*",messageTop:"*",messageBottom:"*"},l.ext.buttons.csvHtml5={bom:!1,className:"buttons-csv buttons-html5",available:function(){return b.FileReader!==f&&b.Blob},text:function(a){return a.i18n("buttons.csv","CSV")},action:function(a,b,d,e){this.processing(!0),a=y(b,e).str,b=b.buttons.exportInfo(e),d=e.charset,e.customize&&(a=e.customize(a,e)),!1!==d?(d||(d=c.characterSet||c.charset),d&&(d=";charset="+d)):d="",e.bom&&(a="\ufeff"+a),k(new Blob([a],{type:"text/csv"+d}),b.filename,!0),this.processing(!1)},filename:"*",extension:".csv",exportOptions:{},fieldSeparator:",",fieldBoundary:'"',escapeChar:'"',charset:null,header:!0,footer:!1},l.ext.buttons.excelHtml5={className:"buttons-excel buttons-html5",available:function(){return b.FileReader!==f&&(d||b.JSZip)!==f&&!z()&&B},text:function(a){return a.i18n("buttons.excel","Excel")},action:function(c,e,l,m){this.processing(!0);var n,o,p=this,q=0,c=function(b){return a.parseXML(D[b])},r=c("xl/worksheets/sheet1.xml"),s=r.getElementsByTagName("sheetData")[0],c={_rels:{".rels":c("_rels/.rels")},xl:{_rels:{"workbook.xml.rels":c("xl/_rels/workbook.xml.rels")},"workbook.xml":c("xl/workbook.xml"),"styles.xml":c("xl/styles.xml"),worksheets:{"sheet1.xml":r}},"[Content_Types].xml":c("[Content_Types].xml")},l=e.buttons.exportData(m.exportOptions),t=function(b){n=q+1,o=i(r,"row",{attr:{r:n}});for(var c=0,d=b.length;c<d;c++){var e=g(c)+""+n,h=null;if(null!==b[c]&&b[c]!==f&&""!==b[c]){b[c]=a.trim(b[c]);for(var j=0,k=E.length;j<k;j++){var l=E[j];if(b[c].match&&!b[c].match(/^0\d+/)&&b[c].match(l.match)){h=b[c].replace(/[^\d\.\-]/g,""),l.fmt&&(h=l.fmt(h)),h=i(r,"c",{attr:{r:e,s:l.style},children:[i(r,"v",{text:h})]});break}}h||("number"==typeof b[c]||b[c].match&&b[c].match(/^-?\d+(\.\d+)?$/)&&!b[c].match(/^0\d+/)?h=i(r,"c",{attr:{t:"n",r:e},children:[i(r,"v",{text:b[c]})]}):(l=b[c].replace?b[c].replace(/[\x00-\x09\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,""):b[c],h=i(r,"c",{attr:{t:"inlineStr",r:e},children:{row:i(r,"is",{children:{row:i(r,"t",{text:l})}})}}))),o.appendChild(h)}}s.appendChild(o),q++};a("sheets sheet",c.xl["workbook.xml"]).attr("name",w(m)),m.customizeData&&m.customizeData(l);var u=function(b,c){var d=a("mergeCells",r);d[0].appendChild(i(r,"mergeCell",{attr:{ref:"A"+b+":"+g(c)+b}})),d.attr("count",d.attr("count")+1),a("row:eq("+(b-1)+") c",r).attr("s","51")},v=e.buttons.exportInfo(m);v.title&&(t([v.title],q),u(q,l.header.length-1)),v.messageTop&&(t([v.messageTop],q),u(q,l.header.length-1)),m.header&&(t(l.header,q),a("row:last c",r).attr("s","2"));for(var e=0,x=l.body.length;e<x;e++)t(l.body[e],q);for(m.footer&&l.footer&&(t(l.footer,q),a("row:last c",r).attr("s","2")),v.messageBottom&&(t([v.messageBottom],q),u(q,l.header.length-1)),e=i(r,"cols"),a("worksheet",r).prepend(e),t=0,u=l.header.length;t<u;t++)e.appendChild(i(r,"col",{attr:{min:t+1,max:t+1,width:j(l,t),customWidth:1}}));m.customize&&m.customize(c),m=new(d||b.JSZip),l={type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},h(m,c),m.generateAsync?m.generateAsync(l).then(function(a){k(a,v.filename),p.processing(!1)}):(k(m.generate(l),v.filename),this.processing(!1))},filename:"*",extension:".xlsx",exportOptions:{},header:!0,footer:!1,title:"*",messageTop:"*",messageBottom:"*"},l.ext.buttons.pdfHtml5={className:"buttons-pdf buttons-html5",available:function(){return b.FileReader!==f&&(e||b.pdfMake)},text:function(a){return a.i18n("buttons.pdf","PDF")},action:function(c,d,f,g){this.processing(!0);var h=this,c=d.buttons.exportData(g.exportOptions),i=d.buttons.exportInfo(g),d=[];g.header&&d.push(a.map(c.header,function(a){return{text:"string"==typeof a?a:a+"",style:"tableHeader"}}));for(var j=0,f=c.body.length;j<f;j++)d.push(a.map(c.body[j],function(a){return{text:"string"==typeof a?a:a+"",style:j%2?"tableBodyEven":"tableBodyOdd"}}));g.footer&&c.footer&&d.push(a.map(c.footer,function(a){return{text:"string"==typeof a?a:a+"",style:"tableFooter"}})),d={pageSize:g.pageSize,pageOrientation:g.orientation,content:[{table:{headerRows:1,body:d},layout:"noBorders"}],styles:{tableHeader:{bold:!0,fontSize:11,color:"white",fillColor:"#2d4154",alignment:"center"},tableBodyEven:{},tableBodyOdd:{fillColor:"#f3f3f3"},tableFooter:{bold:!0,fontSize:11,color:"white",fillColor:"#2d4154"},title:{alignment:"center",fontSize:15},message:{}},defaultStyle:{fontSize:10}},i.messageTop&&d.content.unshift({text:i.messageTop,style:"message",margin:[0,0,0,12]}),i.messageBottom&&d.content.push({text:i.messageBottom,style:"message",margin:[0,0,0,12]}),i.title&&d.content.unshift({text:i.title,style:"title",margin:[0,0,0,12]}),g.customize&&g.customize(d,g),d=(e||b.pdfMake).createPdf(d),"open"!==g.download||z()?d.getBuffer(function(a){a=new Blob([a],{type:"application/pdf"}),k(a,i.filename),h.processing(!1)}):(d.open(),this.processing(!1))},title:"*",filename:"*",extension:".pdf",exportOptions:{},orientation:"portrait",pageSize:"A4",header:!0,footer:!1,messageTop:"*",messageBottom:"*",customize:null,download:"download"},l.Buttons}),function(a){"function"==typeof define&&define.amd?define("datatables.net-buttons-print",["jquery","datatables.net","datatables.net-buttons"],function(b){return a(b,window,document)}):"object"==typeof exports?module.exports=function(b,c){return b||(b=window),c&&c.fn.dataTable||(c=require("datatables.net")(b,c).$),c.fn.dataTable.Buttons||require("datatables.net-buttons")(b,c),a(c,b,b.document)}:a(jQuery,window,document)}(function(a,b,c){var d=a.fn.dataTable,e=c.createElement("a"),f=function(a){return e.href=a,a=e.host,-1===a.indexOf("/")&&0!==e.pathname.indexOf("/")&&(a+="/"),e.protocol+"//"+a+e.pathname+e.search};return d.ext.buttons.print={className:"buttons-print",text:function(a){return a.i18n("buttons.print","Print")},action:function(c,d,e,g){var c=d.buttons.exportData(a.extend({decodeEntities:!1},g.exportOptions)),e=d.buttons.exportInfo(g),h=function(a,b){for(var c="<tr>",d=0,e=a.length;d<e;d++)c+="<"+b+">"+a[d]+"</"+b+">";return c+"</tr>"},d='<table class="'+d.table().node().className+'">';g.header&&(d+="<thead>"+h(c.header,"th")+"</thead>");for(var d=d+"<tbody>",i=0,j=c.body.length;i<j;i++)d+=h(c.body[i],"td");d+="</tbody>",g.footer&&c.footer&&(d+="<tfoot>"+h(c.footer,"th")+"</tfoot>");var d=d+"</table>",k=b.open("","");k.document.close();var l="<title>"+e.title+"</title>";a("style, link").each(function(){var b=l,c=a(this).clone()[0];"link"===c.nodeName.toLowerCase()&&(c.href=f(c.href)),l=b+c.outerHTML});try{k.document.head.innerHTML=l}catch(m){a(k.document.head).html(l)}k.document.body.innerHTML="<h1>"+e.title+"</h1><div>"+(e.messageTop||"")+"</div>"+d+"<div>"+(e.messageBottom||"")+"</div>",a(k.document.body).addClass("dt-print-view"),a("img",k.document.body).each(function(a,b){b.setAttribute("src",f(b.getAttribute("src")))}),g.customize&&g.customize(k),setTimeout(function(){g.autoPrint&&(k.print(),k.close())},1e3)},title:"*",messageTop:"*",messageBottom:"*",exportOptions:{},header:!0,footer:!1,autoPrint:!0,customize:null},d.Buttons}),function(a){"function"==typeof define&&define.amd?define("datatables.net-buttons-bs",["jquery","datatables.net-bs","datatables.net-buttons"],function(b){return a(b,window,document)}):"object"==typeof exports?module.exports=function(b,c){return b||(b=window),c&&c.fn.dataTable||(c=require("datatables.net-bs")(b,c).$),c.fn.dataTable.Buttons||require("datatables.net-buttons")(b,c),a(c,b,b.document)}:a(jQuery,window,document)}(function(a){var b=a.fn.dataTable;return a.extend(!0,b.Buttons.defaults,{dom:{container:{className:"dt-buttons btn-group"},button:{className:"btn btn-default"},collection:{tag:"ul",className:"dt-button-collection dropdown-menu",button:{tag:"li",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"a",className:""}}}}),b.ext.buttons.collection.text=function(a){return a.i18n("buttons.collection",'Collection <span class="caret"/>')},b.Buttons}),function(a){"function"==typeof define&&define.amd?define("datatables.net-colreorder",["jquery","datatables.net"],function(b){return a(b,window,document)}):"object"==typeof exports?module.exports=function(b,c){return b||(b=window),c&&c.fn.dataTable||(c=require("datatables.net")(b,c).$),a(c,b,b.document)}:a(jQuery,window,document)}(function(a,b,c,d){function e(a){for(var b=[],c=0,d=a.length;c<d;c++)b[a[c]]=c;return b}function f(a,b,c){b=a.splice(b,1)[0],a.splice(c,0,b)}function g(a,b,c){for(var d=[],e=0,f=a.childNodes.length;e<f;e++)1==a.childNodes[e].nodeType&&d.push(a.childNodes[e]);b=d[b],null!==c?a.insertBefore(b,d[c]):a.appendChild(b)}var h=a.fn.dataTable;a.fn.dataTableExt.oApi.fnColReorder=function(b,c,h,i,j){var k,l,m,n,o,p,q=b.aoColumns.length;if(o=function(a,b,c){if(a[b]&&"function"!=typeof a[b]){var d=a[b].split("."),e=d.shift();isNaN(1*e)||(a[b]=c[1*e]+"."+d.join("."))}},c!=h)if(0>c||c>=q)this.oApi._fnLog(b,1,"ColReorder 'from' index is out of bounds: "+c);else if(0>h||h>=q)this.oApi._fnLog(b,1,"ColReorder 'to' index is out of bounds: "+h);else{for(m=[],k=0,l=q;k<l;k++)m[k]=k;f(m,c,h);var r=e(m);for(k=0,l=b.aaSorting.length;k<l;k++)b.aaSorting[k][0]=r[b.aaSorting[k][0]];if(null!==b.aaSortingFixed)for(k=0,l=b.aaSortingFixed.length;k<l;k++)b.aaSortingFixed[k][0]=r[b.aaSortingFixed[k][0]];for(k=0,l=q;k<l;k++){for(p=b.aoColumns[k],m=0,n=p.aDataSort.length;m<n;m++)p.aDataSort[m]=r[p.aDataSort[m]];p.idx=r[p.idx]}for(a.each(b.aLastSort,function(a,c){b.aLastSort[a].src=r[c.src]}),k=0,l=q;k<l;k++)p=b.aoColumns[k],"number"==typeof p.mData?p.mData=r[p.mData]:a.isPlainObject(p.mData)&&(o(p.mData,"_",r),o(p.mData,"filter",r),o(p.mData,"sort",r),o(p.mData,"type",r));if(b.aoColumns[c].bVisible){for(o=this.oApi._fnColumnIndexToVisible(b,c),n=null,k=h<c?h:h+1;null===n&&k<q;)n=this.oApi._fnColumnIndexToVisible(b,k),k++;for(m=b.nTHead.getElementsByTagName("tr"),k=0,l=m.length;k<l;k++)g(m[k],o,n);if(null!==b.nTFoot)for(m=b.nTFoot.getElementsByTagName("tr"),k=0,l=m.length;k<l;k++)g(m[k],o,n);for(k=0,l=b.aoData.length;k<l;k++)null!==b.aoData[k].nTr&&g(b.aoData[k].nTr,o,n)}for(f(b.aoColumns,c,h),k=0,l=q;k<l;k++)b.oApi._fnColumnOptions(b,k,{});for(f(b.aoPreSearchCols,c,h),k=0,l=b.aoData.length;k<l;k++){if(n=b.aoData[k],p=n.anCells)for(f(p,c,h),m=0,o=p.length;m<o;m++)p[m]&&p[m]._DT_CellIndex&&(p[m]._DT_CellIndex.column=m);"dom"!==n.src&&a.isArray(n._aData)&&f(n._aData,c,h)}for(k=0,l=b.aoHeader.length;k<l;k++)f(b.aoHeader[k],c,h);if(null!==b.aoFooter)for(k=0,l=b.aoFooter.length;k<l;k++)f(b.aoFooter[k],c,h);for((j||j===d)&&a.fn.dataTable.Api(b).rows().invalidate(),k=0,l=q;k<l;k++)a(b.aoColumns[k].nTh).off("click.DT"),this.oApi._fnSortAttachListener(b,b.aoColumns[k].nTh,k);a(b.oInstance).trigger("column-reorder.dt",[b,{from:c,to:h,mapping:r,drop:i,iFrom:c,iTo:h,aiInvertMapping:r}])}};var i=function(b,c){var d=new a.fn.dataTable.Api(b).settings()[0];if(d._colReorder)return d._colReorder;!0===c&&(c={});var e=a.fn.dataTable.camelToHungarian;return e&&(e(i.defaults,i.defaults,!0),e(i.defaults,c||{})),this.s={dt:null,init:a.extend(!0,{},i.defaults,c),fixed:0,fixedRight:0,reorderCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]},this.dom={drag:null,pointer:null},this.s.dt=d,this.s.dt._colReorder=this,this._fnConstruct(),this};return a.extend(i.prototype,{fnReset:function(){return this._fnOrderColumns(this.fnOrder()),this},fnGetCurrentOrder:function(){return this.fnOrder()},fnOrder:function(b,c){var f,g,h=[],i=this.s.dt.aoColumns;if(b===d){for(f=0,g=i.length;f<g;f++)h.push(i[f]._ColReorder_iOrigCol);return h}if(c){for(i=this.fnOrder(),f=0,g=b.length;f<g;f++)h.push(a.inArray(b[f],i));b=h}return this._fnOrderColumns(e(b)),this},fnTranspose:function(b,c){c||(c="toCurrent");var d=this.fnOrder(),e=this.s.dt.aoColumns;return"toCurrent"===c?a.isArray(b)?a.map(b,function(b){return a.inArray(b,d)}):a.inArray(b,d):a.isArray(b)?a.map(b,function(a){return e[a]._ColReorder_iOrigCol}):e[b]._ColReorder_iOrigCol},_fnConstruct:function(){var b,c=this,d=this.s.dt.aoColumns.length,f=this.s.dt.nTable;for(this.s.init.iFixedColumns&&(this.s.fixed=this.s.init.iFixedColumns),this.s.init.iFixedColumnsLeft&&(this.s.fixed=this.s.init.iFixedColumnsLeft),this.s.fixedRight=this.s.init.iFixedColumnsRight?this.s.init.iFixedColumnsRight:0,this.s.init.fnReorderCallback&&(this.s.reorderCallback=this.s.init.fnReorderCallback),b=0;b<d;b++)b>this.s.fixed-1&&b<d-this.s.fixedRight&&this._fnMouseListener(b,this.s.dt.aoColumns[b].nTh),this.s.dt.aoColumns[b]._ColReorder_iOrigCol=b;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(a,b){c._fnStateSave.call(c,b)},"ColReorder_State");var g=null;if(this.s.init.aiOrder&&(g=this.s.init.aiOrder.slice()),this.s.dt.oLoadedState&&"undefined"!=typeof this.s.dt.oLoadedState.ColReorder&&this.s.dt.oLoadedState.ColReorder.length==this.s.dt.aoColumns.length&&(g=this.s.dt.oLoadedState.ColReorder),g)if(c.s.dt._bInitComplete)d=e(g),c._fnOrderColumns.call(c,d);else{var h=!1;a(f).on("draw.dt.colReorder",function(){if(!c.s.dt._bInitComplete&&!h){h=!0;var a=e(g);c._fnOrderColumns.call(c,a)}})}else this._fnSetColumnIndexes();a(f).on("destroy.dt.colReorder",function(){a(f).off("destroy.dt.colReorder draw.dt.colReorder"),a(c.s.dt.nTHead).find("*").off(".ColReorder"),a.each(c.s.dt.aoColumns,function(b,c){a(c.nTh).removeAttr("data-column-index")}),c.s.dt._colReorder=null,c.s=null})},_fnOrderColumns:function(b){var c=!1;if(b.length!=this.s.dt.aoColumns.length)this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"ColReorder - array reorder does not match known number of columns. Skipping.");else{
for(var d=0,e=b.length;d<e;d++){var g=a.inArray(d,b);d!=g&&(f(b,g,d),this.s.dt.oInstance.fnColReorder(g,d,!0,!1),c=!0)}a.fn.dataTable.Api(this.s.dt).rows().invalidate(),this._fnSetColumnIndexes(),c&&((""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY)&&this.s.dt.oInstance.fnAdjustColumnSizing(!1),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),null!==this.s.reorderCallback&&this.s.reorderCallback.call(this))}},_fnStateSave:function(b){var c,d,e,f=this.s.dt.aoColumns;if(b.ColReorder=[],b.aaSorting){for(c=0;c<b.aaSorting.length;c++)b.aaSorting[c][0]=f[b.aaSorting[c][0]]._ColReorder_iOrigCol;var g=a.extend(!0,[],b.aoSearchCols);for(c=0,d=f.length;c<d;c++)e=f[c]._ColReorder_iOrigCol,b.aoSearchCols[e]=g[c],b.abVisCols[e]=f[c].bVisible,b.ColReorder.push(e)}else if(b.order){for(c=0;c<b.order.length;c++)b.order[c][0]=f[b.order[c][0]]._ColReorder_iOrigCol;for(g=a.extend(!0,[],b.columns),c=0,d=f.length;c<d;c++)e=f[c]._ColReorder_iOrigCol,b.columns[e]=g[c],b.ColReorder.push(e)}},_fnMouseListener:function(b,c){var d=this;a(c).on("mousedown.ColReorder",function(a){d._fnMouseDown.call(d,a,c)}).on("touchstart.ColReorder",function(a){d._fnMouseDown.call(d,a,c)})},_fnMouseDown:function(b,e){var f=this,g=a(b.target).closest("th, td").offset(),h=parseInt(a(e).attr("data-column-index"),10);h!==d&&(this.s.mouse.startX=this._fnCursorPosition(b,"pageX"),this.s.mouse.startY=this._fnCursorPosition(b,"pageY"),this.s.mouse.offsetX=this._fnCursorPosition(b,"pageX")-g.left,this.s.mouse.offsetY=this._fnCursorPosition(b,"pageY")-g.top,this.s.mouse.target=this.s.dt.aoColumns[h].nTh,this.s.mouse.targetIndex=h,this.s.mouse.fromIndex=h,this._fnRegions(),a(c).on("mousemove.ColReorder touchmove.ColReorder",function(a){f._fnMouseMove.call(f,a)}).on("mouseup.ColReorder touchend.ColReorder",function(a){f._fnMouseUp.call(f,a)}))},_fnMouseMove:function(a){if(null===this.dom.drag){if(5>Math.pow(Math.pow(this._fnCursorPosition(a,"pageX")-this.s.mouse.startX,2)+Math.pow(this._fnCursorPosition(a,"pageY")-this.s.mouse.startY,2),.5))return;this._fnCreateDragNode()}this.dom.drag.css({left:this._fnCursorPosition(a,"pageX")-this.s.mouse.offsetX,top:this._fnCursorPosition(a,"pageY")-this.s.mouse.offsetY});for(var b=!1,c=this.s.mouse.toIndex,d=1,e=this.s.aoTargets.length;d<e;d++)if(this._fnCursorPosition(a,"pageX")<this.s.aoTargets[d-1].x+(this.s.aoTargets[d].x-this.s.aoTargets[d-1].x)/2){this.dom.pointer.css("left",this.s.aoTargets[d-1].x),this.s.mouse.toIndex=this.s.aoTargets[d-1].to,b=!0;break}b||(this.dom.pointer.css("left",this.s.aoTargets[this.s.aoTargets.length-1].x),this.s.mouse.toIndex=this.s.aoTargets[this.s.aoTargets.length-1].to),this.s.init.bRealtime&&c!==this.s.mouse.toIndex&&(this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex,!1),this.s.mouse.fromIndex=this.s.mouse.toIndex,this._fnRegions())},_fnMouseUp:function(){a(c).off(".ColReorder"),null!==this.dom.drag&&(this.dom.drag.remove(),this.dom.pointer.remove(),this.dom.drag=null,this.dom.pointer=null,this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex,!0),this._fnSetColumnIndexes(),(""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY)&&this.s.dt.oInstance.fnAdjustColumnSizing(!1),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),null!==this.s.reorderCallback&&this.s.reorderCallback.call(this))},_fnRegions:function(){var b=this.s.dt.aoColumns;this.s.aoTargets.splice(0,this.s.aoTargets.length),this.s.aoTargets.push({x:a(this.s.dt.nTable).offset().left,to:0});for(var c=0,d=this.s.aoTargets[0].x,e=0,f=b.length;e<f;e++)e!=this.s.mouse.fromIndex&&c++,b[e].bVisible&&"none"!==b[e].nTh.style.display&&(d+=a(b[e].nTh).outerWidth(),this.s.aoTargets.push({x:d,to:c}));0!==this.s.fixedRight&&this.s.aoTargets.splice(this.s.aoTargets.length-this.s.fixedRight),0!==this.s.fixed&&this.s.aoTargets.splice(0,this.s.fixed)},_fnCreateDragNode:function(){var b=""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY,c=this.s.dt.aoColumns[this.s.mouse.targetIndex].nTh,d=c.parentNode,e=d.parentNode,f=e.parentNode,g=a(c).clone();this.dom.drag=a(f.cloneNode(!1)).addClass("DTCR_clonedTable").append(a(e.cloneNode(!1)).append(a(d.cloneNode(!1)).append(g[0]))).css({position:"absolute",top:0,left:0,width:a(c).outerWidth(),height:a(c).outerHeight()}).appendTo("body"),this.dom.pointer=a("<div></div>").addClass("DTCR_pointer").css({position:"absolute",top:b?a("div.dataTables_scroll",this.s.dt.nTableWrapper).offset().top:a(this.s.dt.nTable).offset().top,height:b?a("div.dataTables_scroll",this.s.dt.nTableWrapper).height():a(this.s.dt.nTable).height()}).appendTo("body")},_fnSetColumnIndexes:function(){a.each(this.s.dt.aoColumns,function(b,c){a(c.nTh).attr("data-column-index",b)})},_fnCursorPosition:function(a,b){return-1!==a.type.indexOf("touch")?a.originalEvent.touches[0][b]:a[b]}}),i.defaults={aiOrder:null,bRealtime:!0,iFixedColumnsLeft:0,iFixedColumnsRight:0,fnReorderCallback:null},i.version="1.4.1",a.fn.dataTable.ColReorder=i,a.fn.DataTable.ColReorder=i,"function"==typeof a.fn.dataTable&&"function"==typeof a.fn.dataTableExt.fnVersionCheck&&a.fn.dataTableExt.fnVersionCheck("1.10.8")?a.fn.dataTableExt.aoFeatures.push({fnInit:function(a){var b=a.oInstance;return a._colReorder?b.oApi._fnLog(a,1,"ColReorder attempted to initialise twice. Ignoring second"):(b=a.oInit,new i(a,b.colReorder||b.oColReorder||{})),null},cFeature:"R",sFeature:"ColReorder"}):alert("Warning: ColReorder requires DataTables 1.10.8 or greater - www.datatables.net/download"),a(c).on("preInit.dt.colReorder",function(b,c){if("dt"===b.namespace){var d=c.oInit.colReorder,e=h.defaults.colReorder;(d||e)&&(e=a.extend({},d,e),!1!==d&&new i(c,e))}}),a.fn.dataTable.Api.register("colReorder.reset()",function(){return this.iterator("table",function(a){a._colReorder.fnReset()})}),a.fn.dataTable.Api.register("colReorder.order()",function(a,b){return a?this.iterator("table",function(c){c._colReorder.fnOrder(a,b)}):this.context.length?this.context[0]._colReorder.fnOrder():null}),a.fn.dataTable.Api.register("colReorder.transpose()",function(a,b){return this.context.length&&this.context[0]._colReorder?this.context[0]._colReorder.fnTranspose(a,b):a}),a.fn.dataTable.Api.register("colReorder.move()",function(a,b,c,d){return this.context.length&&this.context[0]._colReorder.s.dt.oInstance.fnColReorder(a,b,c,d),this}),i}),function(a){"function"==typeof define&&define.amd?define("datatables.net-rowreorder",["jquery","datatables.net"],function(b){return a(b,window,document)}):"object"==typeof exports?module.exports=function(b,c){return b||(b=window),c&&c.fn.dataTable||(c=require("datatables.net")(b,c).$),a(c,b,b.document)}:a(jQuery,window,document)}(function(a,b,c,d){var e=a.fn.dataTable,f=function(b,c){if(!e.versionCheck||!e.versionCheck("1.10.8"))throw"DataTables RowReorder requires DataTables 1.10.8 or newer";this.c=a.extend(!0,{},e.defaults.rowReorder,f.defaults,c),this.s={bodyTop:null,dt:new e.Api(b),getDataFn:e.ext.oApi._fnGetObjectDataFn(this.c.dataSrc),middles:null,scroll:{},scrollInterval:null,setDataFn:e.ext.oApi._fnSetObjectDataFn(this.c.dataSrc),start:{top:0,left:0,offsetTop:0,offsetLeft:0,nodes:[]},windowHeight:0,documentOuterHeight:0,domCloneOuterHeight:0},this.dom={clone:null,dtScroll:a("div.dataTables_scrollBody",this.s.dt.table().container())};var d=this.s.dt.settings()[0],g=d.rowreorder;return g?g:(d.rowreorder=this,void this._constructor())};a.extend(f.prototype,{_constructor:function(){var b=this,c=this.s.dt,d=a(c.table().node());"static"===d.css("position")&&d.css("position","relative"),a(c.table().container()).on("mousedown.rowReorder touchstart.rowReorder",this.c.selector,function(d){if(b.c.enable){var e=a(this).closest("tr"),f=c.row(e);if(f.any())return b._emitEvent("pre-row-reorder",{node:f.node(),index:f.index()}),b._mouseDown(d,e),!1}}),c.on("destroy.rowReorder",function(){a(c.table().container()).off(".rowReorder"),c.off(".rowReorder")})},_cachePositions:function(){var d=this.s.dt,e=a(d.table().node()).find("thead").outerHeight(),f=a.unique(d.rows({page:"current"}).nodes().toArray()),g=a.map(f,function(b){return a(b).position().top-e}),f=a.map(g,function(b,c){return g.length<c-1?(b+g[c+1])/2:(b+b+a(d.row(":last-child").node()).outerHeight())/2});this.s.middles=f,this.s.bodyTop=a(d.table().body()).offset().top,this.s.windowHeight=a(b).height(),this.s.documentOuterHeight=a(c).outerHeight()},_clone:function(b){var c=a(this.s.dt.table().node().cloneNode(!1)).addClass("dt-rowReorder-float").append("<tbody/>").append(b.clone(!1)),d=b.outerWidth(),e=b.outerHeight(),f=b.children().map(function(){return a(this).width()});c.width(d).height(e).find("tr").children().each(function(a){this.style.width=f[a]+"px"}),c.appendTo("body"),this.dom.clone=c,this.s.domCloneOuterHeight=c.outerHeight()},_clonePosition:function(a){var b=this.s.start,c=this._eventToPage(a,"Y")-b.top,a=this._eventToPage(a,"X")-b.left,d=this.c.snapX,c=c+b.offsetTop,b=!0===d?b.offsetLeft:"number"==typeof d?b.offsetLeft+d:a+b.offsetLeft;0>c?c=0:c+this.s.domCloneOuterHeight>this.s.documentOuterHeight&&(c=this.s.documentOuterHeight-this.s.domCloneOuterHeight),this.dom.clone.css({top:c,left:b})},_emitEvent:function(b,c){this.s.dt.iterator("table",function(d){a(d.nTable).triggerHandler(b+".dt",c)})},_eventToPage:function(a,b){return-1!==a.type.indexOf("touch")?a.originalEvent.touches[0]["page"+b]:a["page"+b]},_mouseDown:function(d,e){var f=this,g=this.s.dt,h=this.s.start,i=e.offset();h.top=this._eventToPage(d,"Y"),h.left=this._eventToPage(d,"X"),h.offsetTop=i.top,h.offsetLeft=i.left,h.nodes=a.unique(g.rows({page:"current"}).nodes().toArray()),this._cachePositions(),this._clone(e),this._clonePosition(d),this.dom.target=e,e.addClass("dt-rowReorder-moving"),a(c).on("mouseup.rowReorder touchend.rowReorder",function(a){f._mouseUp(a)}).on("mousemove.rowReorder touchmove.rowReorder",function(a){f._mouseMove(a)}),a(b).width()===a(c).width()&&a(c.body).addClass("dt-rowReorder-noOverflow"),g=this.dom.dtScroll,this.s.scroll={windowHeight:a(b).height(),windowWidth:a(b).width(),dtTop:g.length?g.offset().top:null,dtLeft:g.length?g.offset().left:null,dtHeight:g.length?g.outerHeight():null,dtWidth:g.length?g.outerWidth():null}},_mouseMove:function(b){this._clonePosition(b);for(var c=this._eventToPage(b,"Y")-this.s.bodyTop,d=this.s.middles,e=null,f=this.s.dt,g=f.table().body(),h=0,i=d.length;h<i;h++)if(c<d[h]){e=h;break}null===e&&(e=d.length),null!==this.s.lastInsert&&this.s.lastInsert===e||(0===e?this.dom.target.prependTo(g):(c=a.unique(f.rows({page:"current"}).nodes().toArray()),e>this.s.lastInsert?this.dom.target.insertAfter(c[e-1]):this.dom.target.insertBefore(c[e])),this._cachePositions(),this.s.lastInsert=e),this._shiftScroll(b)},_mouseUp:function(){var b,d,e=this,f=this.s.dt,g=this.c.dataSrc;this.dom.clone.remove(),this.dom.clone=null,this.dom.target.removeClass("dt-rowReorder-moving"),a(c).off(".rowReorder"),a(c.body).removeClass("dt-rowReorder-noOverflow"),clearInterval(this.s.scrollInterval),this.s.scrollInterval=null;var h=this.s.start.nodes,i=a.unique(f.rows({page:"current"}).nodes().toArray()),j={},k=[],l=[],m=this.s.getDataFn,n=this.s.setDataFn;for(b=0,d=h.length;b<d;b++)if(h[b]!==i[b]){var o=f.row(i[b]).id(),p=f.row(i[b]).data(),q=f.row(h[b]).data();o&&(j[o]=m(q)),k.push({node:i[b],oldData:m(p),newData:m(q),newPosition:b,oldPosition:a.inArray(i[b],h)}),l.push(i[b])}var r=[k,{dataSrc:g,nodes:l,values:j,triggerRow:f.row(this.dom.target)}];this._emitEvent("row-reorder",r);var s=function(){if(e.c.update){for(b=0,d=k.length;b<d;b++){var a=f.row(k[b].node).data();n(a,k[b].newData),f.columns().every(function(){this.dataSrc()===g&&f.cell(k[b].node,this.index()).invalidate("data")})}e._emitEvent("row-reordered",r),f.draw(!1)}};this.c.editor?(this.c.enable=!1,this.c.editor.edit(l,!1,a.extend({submit:"changed"},this.c.formOptions)).multiSet(g,j).one("submitUnsuccessful.rowReorder",function(){f.draw(!1)}).one("submitSuccess.rowReorder",function(){s()}).one("submitComplete",function(){e.c.enable=!0,e.c.editor.off(".rowReorder")}).submit()):s()},_shiftScroll:function(a){var b,d,e=this,f=this.s.scroll,g=!1,h=a.pageY-c.body.scrollTop;65>h?b=-5:h>f.windowHeight-65&&(b=5),null!==f.dtTop&&a.pageY<f.dtTop+65?d=-5:null!==f.dtTop&&a.pageY>f.dtTop+f.dtHeight-65&&(d=5),b||d?(f.windowVert=b,f.dtVert=d,g=!0):this.s.scrollInterval&&(clearInterval(this.s.scrollInterval),this.s.scrollInterval=null),!this.s.scrollInterval&&g&&(this.s.scrollInterval=setInterval(function(){if(f.windowVert&&(c.body.scrollTop=c.body.scrollTop+f.windowVert),f.dtVert){var a=e.dom.dtScroll[0];f.dtVert&&(a.scrollTop=a.scrollTop+f.dtVert)}},20))}}),f.defaults={dataSrc:0,editor:null,enable:!0,formOptions:{},selector:"td:first-child",snapX:!1,update:!0};var g=a.fn.dataTable.Api;return g.register("rowReorder()",function(){return this}),g.register("rowReorder.enable()",function(a){return a===d&&(a=!0),this.iterator("table",function(b){b.rowreorder&&(b.rowreorder.c.enable=a)})}),g.register("rowReorder.disable()",function(){return this.iterator("table",function(a){a.rowreorder&&(a.rowreorder.c.enable=!1)})}),f.version="1.2.3",a.fn.dataTable.RowReorder=f,a.fn.DataTable.RowReorder=f,a(c).on("init.dt.dtr",function(b,c){if("dt"===b.namespace){var d=c.oInit.rowReorder,g=e.defaults.rowReorder;(d||g)&&(g=a.extend({},d,g),!1!==d&&new f(c,g))}}),f}),function(a){"function"==typeof define&&define.amd?define("datatables.net-fixedcolumns",["jquery","datatables.net"],function(b){return a(b,window,document)}):"object"==typeof exports?module.exports=function(b,c){return b||(b=window),c&&c.fn.dataTable||(c=require("datatables.net")(b,c).$),a(c,b,b.document)}:a(jQuery,window,document)}(function(a,b,c,d){var e,f=a.fn.dataTable,g=function(b,c){var e=this;if(this instanceof g){c!==d&&!0!==c||(c={});var f=a.fn.dataTable.camelToHungarian;if(f&&(f(g.defaults,g.defaults,!0),f(g.defaults,c)),f=new a.fn.dataTable.Api(b).settings()[0],this.s={dt:f,iTableColumns:f.aoColumns.length,aiOuterWidths:[],aiInnerWidths:[],rtl:"rtl"===a(f.nTable).css("direction")},this.dom={scroller:null,header:null,body:null,footer:null,grid:{wrapper:null,dt:null,left:{wrapper:null,head:null,body:null,foot:null},right:{wrapper:null,head:null,body:null,foot:null}},clone:{left:{header:null,body:null,footer:null},right:{header:null,body:null,footer:null}}},f._oFixedColumns)throw"FixedColumns already initialised on this table";f._oFixedColumns=this,f._bInitComplete?this._fnConstruct(c):f.oApi._fnCallbackReg(f,"aoInitComplete",function(){e._fnConstruct(c)},"FixedColumns")}else alert("FixedColumns warning: FixedColumns must be initialised with the 'new' keyword.")};return a.extend(g.prototype,{fnUpdate:function(){this._fnDraw(!0)},fnRedrawLayout:function(){this._fnColCalc(),this._fnGridLayout(),this.fnUpdate()},fnRecalculateHeight:function(a){delete a._DTTC_iHeight,a.style.height="auto"},fnSetRowHeight:function(a,b){a.style.height=b+"px"},fnGetPosition:function(b){var c=this.s.dt.oInstance;if(a(b).parents(".DTFC_Cloned").length){if("tr"===b.nodeName.toLowerCase())return b=a(b).index(),c.fnGetPosition(a("tr",this.s.dt.nTBody)[b]);var d=a(b).index(),b=a(b.parentNode).index();return[c.fnGetPosition(a("tr",this.s.dt.nTBody)[b]),d,c.oApi._fnVisibleToColumnIndex(this.s.dt,d)]}return c.fnGetPosition(b)},_fnConstruct:function(e){var f=this;if("function"!=typeof this.s.dt.oInstance.fnVersionCheck||!0!==this.s.dt.oInstance.fnVersionCheck("1.8.0"))alert("FixedColumns "+g.VERSION+" required DataTables 1.8.0 or later. Please upgrade your DataTables installation");else if(""===this.s.dt.oScroll.sX)this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"FixedColumns is not needed (no x-scrolling in DataTables enabled), so no action will be taken. Use 'FixedHeader' for column fixing when scrolling is not enabled");else{this.s=a.extend(!0,this.s,g.defaults,e),e=this.s.dt.oClasses,this.dom.grid.dt=a(this.s.dt.nTable).parents("div."+e.sScrollWrapper)[0],this.dom.scroller=a("div."+e.sScrollBody,this.dom.grid.dt)[0],this._fnColCalc(),this._fnGridSetup();var h,i=!1;a(this.s.dt.nTableWrapper).on("mousedown.DTFC",function(){i=!0,a(c).one("mouseup",function(){i=!1})}),a(this.dom.scroller).on("mouseover.DTFC touchstart.DTFC",function(){i||(h="main")}).on("scroll.DTFC",function(a){!h&&a.originalEvent&&(h="main"),"main"===h&&(0<f.s.iLeftColumns&&(f.dom.grid.left.liner.scrollTop=f.dom.scroller.scrollTop),0<f.s.iRightColumns)&&(f.dom.grid.right.liner.scrollTop=f.dom.scroller.scrollTop)});var j="onwheel"in c.createElement("div")?"wheel.DTFC":"mousewheel.DTFC";0<f.s.iLeftColumns&&a(f.dom.grid.left.liner).on("mouseover.DTFC touchstart.DTFC",function(){i||(h="left")}).on("scroll.DTFC",function(a){!h&&a.originalEvent&&(h="left"),"left"===h&&(f.dom.scroller.scrollTop=f.dom.grid.left.liner.scrollTop,0<f.s.iRightColumns&&(f.dom.grid.right.liner.scrollTop=f.dom.grid.left.liner.scrollTop))}).on(j,function(a){f.dom.scroller.scrollLeft-="wheel"===a.type?-a.originalEvent.deltaX:a.originalEvent.wheelDeltaX}),0<f.s.iRightColumns&&a(f.dom.grid.right.liner).on("mouseover.DTFC touchstart.DTFC",function(){i||(h="right")}).on("scroll.DTFC",function(a){!h&&a.originalEvent&&(h="right"),"right"===h&&(f.dom.scroller.scrollTop=f.dom.grid.right.liner.scrollTop,0<f.s.iLeftColumns&&(f.dom.grid.left.liner.scrollTop=f.dom.grid.right.liner.scrollTop))}).on(j,function(a){f.dom.scroller.scrollLeft-="wheel"===a.type?-a.originalEvent.deltaX:a.originalEvent.wheelDeltaX}),a(b).on("resize.DTFC",function(){f._fnGridLayout.call(f)});var k=!0,l=a(this.s.dt.nTable);l.on("draw.dt.DTFC",function(){f._fnColCalc(),f._fnDraw.call(f,k),k=!1}).on("column-sizing.dt.DTFC",function(){f._fnColCalc(),f._fnGridLayout(f)}).on("column-visibility.dt.DTFC",function(a,b,c,e,g){(g===d||g)&&(f._fnColCalc(),f._fnGridLayout(f),f._fnDraw(!0))}).on("select.dt.DTFC deselect.dt.DTFC",function(a){"dt"===a.namespace&&f._fnDraw(!1)}).on("destroy.dt.DTFC",function(){l.off(".DTFC"),a(f.dom.scroller).off(".DTFC"),a(b).off(".DTFC"),a(f.s.dt.nTableWrapper).off(".DTFC"),a(f.dom.grid.left.liner).off(".DTFC "+j),a(f.dom.grid.left.wrapper).remove(),a(f.dom.grid.right.liner).off(".DTFC "+j),a(f.dom.grid.right.wrapper).remove()}),this._fnGridLayout(),this.s.dt.oInstance.fnDraw(!1)}},_fnColCalc:function(){var b=this,c=0,d=0;this.s.aiInnerWidths=[],this.s.aiOuterWidths=[],a.each(this.s.dt.aoColumns,function(e,f){var g,h=a(f.nTh);if(h.filter(":visible").length){var i=h.outerWidth();0===b.s.aiOuterWidths.length&&(g=a(b.s.dt.nTable).css("border-left-width"),i+="string"==typeof g?1:parseInt(g,10)),b.s.aiOuterWidths.length===b.s.dt.aoColumns.length-1&&(g=a(b.s.dt.nTable).css("border-right-width"),i+="string"==typeof g?1:parseInt(g,10)),b.s.aiOuterWidths.push(i),b.s.aiInnerWidths.push(h.width()),e<b.s.iLeftColumns&&(c+=i),b.s.iTableColumns-b.s.iRightColumns<=e&&(d+=i)}else b.s.aiInnerWidths.push(0),b.s.aiOuterWidths.push(0)}),this.s.iLeftWidth=c,this.s.iRightWidth=d},_fnGridSetup:function(){var b,c=this._fnDTOverflow();this.dom.body=this.s.dt.nTable,this.dom.header=this.s.dt.nTHead.parentNode,this.dom.header.parentNode.parentNode.style.position="relative";var d=a('<div class="DTFC_ScrollWrapper" style="position:relative; clear:both;"><div class="DTFC_LeftWrapper" style="position:absolute; top:0; left:0;"><div class="DTFC_LeftHeadWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div><div class="DTFC_LeftBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;"><div class="DTFC_LeftBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll;"></div></div><div class="DTFC_LeftFootWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div></div><div class="DTFC_RightWrapper" style="position:absolute; top:0; right:0;"><div class="DTFC_RightHeadWrapper" style="position:relative; top:0; left:0;"><div class="DTFC_RightHeadBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div></div><div class="DTFC_RightBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;"><div class="DTFC_RightBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll;"></div></div><div class="DTFC_RightFootWrapper" style="position:relative; top:0; left:0;"><div class="DTFC_RightFootBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div></div></div></div>')[0],e=d.childNodes[0],f=d.childNodes[1];this.dom.grid.dt.parentNode.insertBefore(d,this.dom.grid.dt),d.appendChild(this.dom.grid.dt),this.dom.grid.wrapper=d,0<this.s.iLeftColumns&&(this.dom.grid.left.wrapper=e,this.dom.grid.left.head=e.childNodes[0],this.dom.grid.left.body=e.childNodes[1],this.dom.grid.left.liner=a("div.DTFC_LeftBodyLiner",d)[0],d.appendChild(e)),0<this.s.iRightColumns&&(this.dom.grid.right.wrapper=f,this.dom.grid.right.head=f.childNodes[0],this.dom.grid.right.body=f.childNodes[1],this.dom.grid.right.liner=a("div.DTFC_RightBodyLiner",d)[0],f.style.right=c.bar+"px",b=a("div.DTFC_RightHeadBlocker",d)[0],b.style.width=c.bar+"px",b.style.right=-c.bar+"px",this.dom.grid.right.headBlock=b,b=a("div.DTFC_RightFootBlocker",d)[0],b.style.width=c.bar+"px",b.style.right=-c.bar+"px",this.dom.grid.right.footBlock=b,d.appendChild(f)),this.s.dt.nTFoot&&(this.dom.footer=this.s.dt.nTFoot.parentNode,0<this.s.iLeftColumns&&(this.dom.grid.left.foot=e.childNodes[2]),0<this.s.iRightColumns)&&(this.dom.grid.right.foot=f.childNodes[2]),this.s.rtl&&a("div.DTFC_RightHeadBlocker",d).css({left:-c.bar+"px",right:""})},_fnGridLayout:function(){var b=this,c=this.dom.grid;a(c.wrapper).width();var d=a(this.s.dt.nTable.parentNode).outerHeight(),e=a(this.s.dt.nTable.parentNode.parentNode).outerHeight(),f=this._fnDTOverflow(),g=this.s.iLeftWidth,h=this.s.iRightWidth,i="rtl"===a(this.dom.body).css("direction"),j=function(c,d){f.bar?b._firefoxScrollError()?34<a(c).height()&&(c.style.width=d+f.bar+"px"):c.style.width=d+f.bar+"px":(c.style.width=d+20+"px",c.style.paddingRight="20px",c.style.boxSizing="border-box")};f.x&&(d-=f.bar),c.wrapper.style.height=e+"px",0<this.s.iLeftColumns&&(e=c.left.wrapper,e.style.width=g+"px",e.style.height="1px",i?(e.style.left="",e.style.right=0):(e.style.left=0,e.style.right=""),c.left.body.style.height=d+"px",c.left.foot&&(c.left.foot.style.top=(f.x?f.bar:0)+"px"),j(c.left.liner,g),c.left.liner.style.height=d+"px",c.left.liner.style.maxHeight=d+"px"),0<this.s.iRightColumns&&(e=c.right.wrapper,e.style.width=h+"px",e.style.height="1px",this.s.rtl?(e.style.left=f.y?f.bar+"px":0,e.style.right=""):(e.style.left="",e.style.right=f.y?f.bar+"px":0),c.right.body.style.height=d+"px",c.right.foot&&(c.right.foot.style.top=(f.x?f.bar:0)+"px"),j(c.right.liner,h),c.right.liner.style.height=d+"px",c.right.liner.style.maxHeight=d+"px",c.right.headBlock.style.display=f.y?"block":"none",c.right.footBlock.style.display=f.y?"block":"none")},_fnDTOverflow:function(){var a=this.s.dt.nTable,b=a.parentNode,c={x:!1,y:!1,bar:this.s.dt.oScroll.iBarWidth};return a.offsetWidth>b.clientWidth&&(c.x=!0),a.offsetHeight>b.clientHeight&&(c.y=!0),c},_fnDraw:function(b){this._fnGridLayout(),this._fnCloneLeft(b),this._fnCloneRight(b),null!==this.s.fnDrawCallback&&this.s.fnDrawCallback.call(this,this.dom.clone.left,this.dom.clone.right),a(this).trigger("draw.dtfc",{leftClone:this.dom.clone.left,rightClone:this.dom.clone.right})},_fnCloneRight:function(a){if(!(0>=this.s.iRightColumns)){var b,c=[];for(b=this.s.iTableColumns-this.s.iRightColumns;b<this.s.iTableColumns;b++)this.s.dt.aoColumns[b].bVisible&&c.push(b);this._fnClone(this.dom.clone.right,this.dom.grid.right,c,a)}},_fnCloneLeft:function(a){if(!(0>=this.s.iLeftColumns)){var b,c=[];for(b=0;b<this.s.iLeftColumns;b++)this.s.dt.aoColumns[b].bVisible&&c.push(b);this._fnClone(this.dom.clone.left,this.dom.grid.left,c,a)}},_fnCopyLayout:function(b,c,d){for(var e=[],f=[],g=[],h=0,i=b.length;h<i;h++){var j=[];j.nTr=a(b[h].nTr).clone(d,!1)[0];for(var k=0,l=this.s.iTableColumns;k<l;k++)if(-1!==a.inArray(k,c)){var m=a.inArray(b[h][k].cell,g);-1===m?(m=a(b[h][k].cell).clone(d,!1)[0],f.push(m),g.push(b[h][k].cell),j.push({cell:m,unique:b[h][k].unique})):j.push({cell:f[m],unique:b[h][k].unique})}e.push(j)}return e},_fnClone:function(b,c,e,f){var g,h,i,j,k,l,m,n,o,p=this,q=this.s.dt;if(f){for(a(b.header).remove(),b.header=a(this.dom.header).clone(!0,!1)[0],b.header.className+=" DTFC_Cloned",b.header.style.width="100%",c.head.appendChild(b.header),n=this._fnCopyLayout(q.aoHeader,e,!0),j=a(">thead",b.header),j.empty(),g=0,h=n.length;g<h;g++)j[0].appendChild(n[g].nTr);q.oApi._fnDrawHead(q,n,!0)}else for(n=this._fnCopyLayout(q.aoHeader,e,!1),o=[],q.oApi._fnDetectHeader(o,a(">thead",b.header)[0]),g=0,h=n.length;g<h;g++)for(i=0,j=n[g].length;i<j;i++)o[g][i].cell.className=n[g][i].cell.className,a("span.DataTables_sort_icon",o[g][i].cell).each(function(){this.className=a("span.DataTables_sort_icon",n[g][i].cell)[0].className});this._fnEqualiseHeights("thead",this.dom.header,b.header),"auto"==this.s.sHeightMatch&&a(">tbody>tr",p.dom.body).css("height","auto"),null!==b.body&&(a(b.body).remove(),b.body=null),b.body=a(this.dom.body).clone(!0)[0],b.body.className+=" DTFC_Cloned",b.body.style.paddingBottom=q.oScroll.iBarWidth+"px",b.body.style.marginBottom=2*q.oScroll.iBarWidth+"px",null!==b.body.getAttribute("id")&&b.body.removeAttribute("id"),a(">thead>tr",b.body).empty(),a(">tfoot",b.body).remove();var r=a("tbody",b.body)[0];if(a(r).empty(),0<q.aiDisplay.length){for(h=a(">thead>tr",b.body)[0],m=0;m<e.length;m++)k=e[m],l=a(q.aoColumns[k].nTh).clone(!0)[0],l.innerHTML="",j=l.style,j.paddingTop="0",j.paddingBottom="0",j.borderTopWidth="0",j.borderBottomWidth="0",j.height=0,j.width=p.s.aiInnerWidths[k]+"px",h.appendChild(l);a(">tbody>tr",p.dom.body).each(function(b){var b=p.s.dt.oFeatures.bServerSide===!1?p.s.dt.aiDisplay[p.s.dt._iDisplayStart+b]:b,c=p.s.dt.aoData[b].anCells||a(this).children("td, th"),d=this.cloneNode(!1);for(d.removeAttribute("id"),d.setAttribute("data-dt-row",b),m=0;m<e.length;m++)k=e[m],c.length>0&&(l=a(c[k]).clone(!0,!0)[0],l.removeAttribute("id"),l.setAttribute("data-dt-row",b),l.setAttribute("data-dt-column",q.oApi._fnVisibleToColumnIndex(q,k)),d.appendChild(l));r.appendChild(d)})}else a(">tbody>tr",p.dom.body).each(function(){l=this.cloneNode(!0),l.className=l.className+" DTFC_NoData",a("td",l).html(""),r.appendChild(l)});if(b.body.style.width="100%",b.body.style.margin="0",b.body.style.padding="0",q.oScroller!==d&&(h=q.oScroller.dom.force,c.forcer?c.forcer.style.height=h.style.height:(c.forcer=h.cloneNode(!0),c.liner.appendChild(c.forcer))),c.liner.appendChild(b.body),this._fnEqualiseHeights("tbody",p.dom.body,b.body),null!==q.nTFoot){if(f){for(null!==b.footer&&b.footer.parentNode.removeChild(b.footer),b.footer=a(this.dom.footer).clone(!0,!0)[0],b.footer.className+=" DTFC_Cloned",b.footer.style.width="100%",c.foot.appendChild(b.footer),n=this._fnCopyLayout(q.aoFooter,e,!0),c=a(">tfoot",b.footer),c.empty(),g=0,h=n.length;g<h;g++)c[0].appendChild(n[g].nTr);q.oApi._fnDrawHead(q,n,!0)}else for(n=this._fnCopyLayout(q.aoFooter,e,!1),c=[],q.oApi._fnDetectHeader(c,a(">tfoot",b.footer)[0]),g=0,h=n.length;g<h;g++)for(i=0,j=n[g].length;i<j;i++)c[g][i].cell.className=n[g][i].cell.className;this._fnEqualiseHeights("tfoot",this.dom.footer,b.footer)}c=q.oApi._fnGetUniqueThs(q,a(">thead",b.header)[0]),a(c).each(function(a){k=e[a],this.style.width=p.s.aiInnerWidths[k]+"px"}),null!==p.s.dt.nTFoot&&(c=q.oApi._fnGetUniqueThs(q,a(">tfoot",b.footer)[0]),a(c).each(function(a){k=e[a],this.style.width=p.s.aiInnerWidths[k]+"px"}))},_fnGetTrNodes:function(a){for(var b=[],c=0,d=a.childNodes.length;c<d;c++)"TR"==a.childNodes[c].nodeName.toUpperCase()&&b.push(a.childNodes[c]);return b},_fnEqualiseHeights:function(b,c,d){if("none"!=this.s.sHeightMatch||"thead"===b||"tfoot"===b){var e,f,g=c.getElementsByTagName(b)[0],d=d.getElementsByTagName(b)[0],b=a(">"+b+">tr:eq(0)",c).children(":first");b.outerHeight(),b.height();for(var g=this._fnGetTrNodes(g),c=this._fnGetTrNodes(d),h=[],d=0,b=c.length;d<b;d++)e=g[d].offsetHeight,f=c[d].offsetHeight,e=f>e?f:e,"semiauto"==this.s.sHeightMatch&&(g[d]._DTTC_iHeight=e),h.push(e);for(d=0,b=c.length;d<b;d++)c[d].style.height=h[d]+"px",g[d].style.height=h[d]+"px"}},_firefoxScrollError:function(){if(e===d){var b=a("<div/>").css({position:"absolute",top:0,left:0,height:10,width:50,overflow:"scroll"}).appendTo("body");e=b[0].clientWidth===b[0].offsetWidth&&0!==this._fnDTOverflow().bar,b.remove()}return e}}),g.defaults={iLeftColumns:1,iRightColumns:0,fnDrawCallback:null,sHeightMatch:"semiauto"},g.version="3.2.3",f.Api.register("fixedColumns()",function(){return this}),f.Api.register("fixedColumns().update()",function(){return this.iterator("table",function(a){a._oFixedColumns&&a._oFixedColumns.fnUpdate()})}),f.Api.register("fixedColumns().relayout()",function(){return this.iterator("table",function(a){a._oFixedColumns&&a._oFixedColumns.fnRedrawLayout()})}),f.Api.register("rows().recalcHeight()",function(){return this.iterator("row",function(a,b){a._oFixedColumns&&a._oFixedColumns.fnRecalculateHeight(this.row(b).node())})}),f.Api.register("fixedColumns().rowIndex()",function(b){return b=a(b),b.parents(".DTFC_Cloned").length?this.rows({page:"current"}).indexes()[b.index()]:this.row(b).index()}),f.Api.register("fixedColumns().cellIndex()",function(b){if(b=a(b),b.parents(".DTFC_Cloned").length){var c=b.parent().index(),c=this.rows({page:"current"}).indexes()[c],b=b.parents(".DTFC_LeftWrapper").length?b.index():this.columns().flatten().length-this.context[0]._oFixedColumns.s.iRightColumns+b.index();return{row:c,column:this.column.index("toData",b),columnVisible:b}}return this.cell(b).index()}),a(c).on("init.dt.fixedColumns",function(b,c){if("dt"===b.namespace){var d=c.oInit.fixedColumns,e=f.defaults.fixedColumns;(d||e)&&(e=a.extend({},d,e),!1!==d&&new g(c,e))}}),a.fn.dataTable.FixedColumns=g,a.fn.DataTable.FixedColumns=g}),function(a){"function"==typeof define&&define.amd?define("datatables.net-fixedheader",["jquery","datatables.net"],function(b){return a(b,window,document)}):"object"==typeof exports?module.exports=function(b,c){return b||(b=window),c&&c.fn.dataTable||(c=require("datatables.net")(b,c).$),a(c,b,b.document)}:a(jQuery,window,document)}(function(a,b,c,d){var e=a.fn.dataTable,f=0,g=function(c,d){if(!(this instanceof g))throw"FixedHeader must be initialised with the 'new' keyword.";!0===d&&(d={}),c=new e.Api(c),this.c=a.extend(!0,{},g.defaults,d),this.s={dt:c,position:{theadTop:0,tbodyTop:0,tfootTop:0,tfootBottom:0,width:0,left:0,tfootHeight:0,theadHeight:0,windowHeight:a(b).height(),visible:!0},headerMode:null,footerMode:null,autoWidth:c.settings()[0].oFeatures.bAutoWidth,namespace:".dtfc"+f++,scrollLeft:{header:-1,footer:-1},enable:!0},this.dom={floatingHeader:null,thead:a(c.table().header()),tbody:a(c.table().body()),tfoot:a(c.table().footer()),header:{host:null,floating:null,placeholder:null},footer:{host:null,floating:null,placeholder:null}},this.dom.header.host=this.dom.thead.parent(),this.dom.footer.host=this.dom.tfoot.parent();var h=c.settings()[0];if(h._fixedHeader)throw"FixedHeader already initialised on table "+h.nTable.id;h._fixedHeader=this,this._constructor()};return a.extend(g.prototype,{enable:function(a){this.s.enable=a,this.c.header&&this._modeChange("in-place","header",!0),this.c.footer&&this.dom.tfoot.length&&this._modeChange("in-place","footer",!0),this.update()},headerOffset:function(a){return a!==d&&(this.c.headerOffset=a,this.update()),this.c.headerOffset},footerOffset:function(a){return a!==d&&(this.c.footerOffset=a,this.update()),this.c.footerOffset},update:function(){this._positions(),this._scroll(!0)},_constructor:function(){var c=this,d=this.s.dt;a(b).on("scroll"+this.s.namespace,function(){c._scroll()}).on("resize"+this.s.namespace,function(){c.s.position.windowHeight=a(b).height(),c.update()});var e=a(".fh-fixedHeader");!this.c.headerOffset&&e.length&&(this.c.headerOffset=e.outerHeight()),e=a(".fh-fixedFooter"),!this.c.footerOffset&&e.length&&(this.c.footerOffset=e.outerHeight()),d.on("column-reorder.dt.dtfc column-visibility.dt.dtfc draw.dt.dtfc column-sizing.dt.dtfc",function(){c.update()}),d.on("destroy.dtfc",function(){
d.off(".dtfc"),a(b).off(c.s.namespace)}),this._positions(),this._scroll()},_clone:function(b,c){var d=this.s.dt,e=this.dom[b],f="header"===b?this.dom.thead:this.dom.tfoot;!c&&e.floating?e.floating.removeClass("fixedHeader-floating fixedHeader-locked"):(e.floating&&(e.placeholder.remove(),this._unsize(b),e.floating.children().detach(),e.floating.remove()),e.floating=a(d.table().node().cloneNode(!1)).css("table-layout","fixed").removeAttr("id").append(f).appendTo("body"),e.placeholder=f.clone(!1),e.placeholder.find("*[id]").removeAttr("id"),e.host.prepend(e.placeholder),this._matchWidths(e.placeholder,e.floating))},_matchWidths:function(b,c){var d=function(c){return a(c,b).map(function(){return a(this).width()}).toArray()},e=function(b,d){a(b,c).each(function(b){a(this).css({width:d[b],minWidth:d[b]})})},f=d("th"),d=d("td");e("th",f),e("td",d)},_unsize:function(b){var c=this.dom[b].floating;c&&("footer"===b||"header"===b&&!this.s.autoWidth)?a("th, td",c).css({width:"",minWidth:""}):c&&"header"===b&&a("th, td",c).css("min-width","")},_horizontal:function(a,b){var c=this.dom[a],d=this.s.position,e=this.s.scrollLeft;c.floating&&e[a]!==b&&(c.floating.css("left",d.left-b),e[a]=b)},_modeChange:function(b,d,e){var f=this.dom[d],g=this.s.position,h=a.contains(this.dom["footer"===d?"tfoot":"thead"][0],c.activeElement)?c.activeElement:null;"in-place"===b?(f.placeholder&&(f.placeholder.remove(),f.placeholder=null),this._unsize(d),"header"===d?f.host.prepend(this.dom.thead):f.host.append(this.dom.tfoot),f.floating&&(f.floating.remove(),f.floating=null)):"in"===b?(this._clone(d,e),f.floating.addClass("fixedHeader-floating").css("header"===d?"top":"bottom",this.c[d+"Offset"]).css("left",g.left+"px").css("width",g.width+"px"),"footer"===d&&f.floating.css("top","")):"below"===b?(this._clone(d,e),f.floating.addClass("fixedHeader-locked").css("top",g.tfootTop-g.theadHeight).css("left",g.left+"px").css("width",g.width+"px")):"above"===b&&(this._clone(d,e),f.floating.addClass("fixedHeader-locked").css("top",g.tbodyTop).css("left",g.left+"px").css("width",g.width+"px")),h&&h!==c.activeElement&&h.focus(),this.s.scrollLeft.header=-1,this.s.scrollLeft.footer=-1,this.s[d+"Mode"]=b},_positions:function(){var b=this.s.dt.table(),c=this.s.position,d=this.dom,b=a(b.node()),e=b.children("thead"),f=b.children("tfoot"),d=d.tbody;c.visible=b.is(":visible"),c.width=b.outerWidth(),c.left=b.offset().left,c.theadTop=e.offset().top,c.tbodyTop=d.offset().top,c.theadHeight=c.tbodyTop-c.theadTop,f.length?(c.tfootTop=f.offset().top,c.tfootBottom=c.tfootTop+f.outerHeight(),c.tfootHeight=c.tfootBottom-c.tfootTop):(c.tfootTop=c.tbodyTop+d.outerHeight(),c.tfootBottom=c.tfootTop,c.tfootHeight=c.tfootTop)},_scroll:function(b){var d,e=a(c).scrollTop(),f=a(c).scrollLeft(),g=this.s.position;this.s.enable&&(this.c.header&&(d=!g.visible||e<=g.theadTop-this.c.headerOffset?"in-place":e<=g.tfootTop-g.theadHeight-this.c.headerOffset?"in":"below",(b||d!==this.s.headerMode)&&this._modeChange(d,"header",b),this._horizontal("header",f)),this.c.footer&&this.dom.tfoot.length)&&(e=!g.visible||e+g.windowHeight>=g.tfootBottom+this.c.footerOffset?"in-place":g.windowHeight+e>g.tbodyTop+g.tfootHeight+this.c.footerOffset?"in":"above",(b||e!==this.s.footerMode)&&this._modeChange(e,"footer",b),this._horizontal("footer",f))}}),g.version="3.1.3",g.defaults={header:!0,footer:!1,headerOffset:0,footerOffset:0},a.fn.dataTable.FixedHeader=g,a.fn.DataTable.FixedHeader=g,a(c).on("init.dt.dtfh",function(b,c){if("dt"===b.namespace){var d=c.oInit.fixedHeader,f=e.defaults.fixedHeader;!d&&!f||c._fixedHeader||(f=a.extend({},f,d),!1!==d&&new g(c,f))}}),e.Api.register("fixedHeader()",function(){}),e.Api.register("fixedHeader.adjust()",function(){return this.iterator("table",function(a){(a=a._fixedHeader)&&a.update()})}),e.Api.register("fixedHeader.enable()",function(a){return this.iterator("table",function(b){b=b._fixedHeader,a=a===d||a,b&&a!==b.s.enable&&b.enable(a)})}),e.Api.register("fixedHeader.disable()",function(){return this.iterator("table",function(a){(a=a._fixedHeader)&&a.s.enable&&a.enable(!1)})}),a.each(["header","footer"],function(a,b){e.Api.register("fixedHeader."+b+"Offset()",function(a){var c=this.context;return a===d?c.length&&c[0]._fixedHeader?c[0]._fixedHeader[b+"Offset"]():d:this.iterator("table",function(c){(c=c._fixedHeader)&&c[b+"Offset"](a)})})}),g}),function(a){"function"==typeof define&&define.amd?define("datatables.net-select",["jquery","datatables.net"],function(b){return a(b,window,document)}):"object"==typeof exports?module.exports=function(b,c){return b||(b=window),c&&c.fn.dataTable||(c=require("datatables.net")(b,c).$),a(c,b,b.document)}:a(jQuery,window,document)}(function(a,b,c,d){function e(a,b,c){var d;d=function(b,c){if(b>c)var d=c,c=b,b=d;var e=!1;return a.columns(":visible").indexes().filter(function(a){return a===b&&(e=!0),a===c?(e=!1,!0):e})};var e=function(b,c){var d=a.rows({search:"applied"}).indexes();if(d.indexOf(b)>d.indexOf(c))var e=c,c=b,b=e;var f=!1;return d.filter(function(a){return a===b&&(f=!0),a===c?(f=!1,!0):f})};a.cells({selected:!0}).any()||c?(d=d(c.column,b.column),c=e(c.row,b.row)):(d=d(0,b.column),c=e(0,b.row)),c=a.cells(c,d).flatten(),a.cells(b,{selected:!0}).any()?a.cells(c).deselect():a.cells(c).select()}function f(b){var c=b.settings()[0]._select.selector;a(b.table().container()).off("mousedown.dtSelect",c).off("mouseup.dtSelect",c).off("click.dtSelect",c),a("body").off("click.dtSelect"+b.table().node().id)}function g(c){var d=a(c.table().container()),e=c.settings()[0],f=e._select.selector;d.on("mousedown.dtSelect",f,function(a){(a.shiftKey||a.metaKey||a.ctrlKey)&&d.css("-moz-user-select","none").one("selectstart.dtSelect",f,function(){return!1})}).on("mouseup.dtSelect",f,function(){d.css("-moz-user-select","")}).on("click.dtSelect",f,function(d){var e=c.select.items();if(!b.getSelection||!a.trim(b.getSelection().toString())){var f=c.settings()[0];if(a(d.target).closest("div.dataTables_wrapper")[0]==c.table().container()){var g=c.cell(a(d.target).closest("td, th"));if(g.any()){var i=a.Event("user-select.dt");h(c,i,[e,g,d]),i.isDefaultPrevented()||(i=g.index(),"row"===e?(e=i.row,l(d,c,f,"row",e)):"column"===e?(e=g.index().column,l(d,c,f,"column",e)):"cell"===e&&(e=g.index(),l(d,c,f,"cell",e)),f._select_lastCell=i)}}}}),a("body").on("click.dtSelect"+c.table().node().id,function(b){e._select.blurable&&!a(b.target).parents().filter(c.table().container()).length&&0!==a(b.target).parents("html").length&&!a(b.target).parents("div.DTE").length&&k(e,!0)})}function h(b,c,d,e){e&&!b.flatten().length||("string"==typeof c&&(c+=".dt"),d.unshift(b),a(b.table().node()).trigger(c,d))}function i(b){var c=b.settings()[0];if(c._select.info&&c.aanFeatures.i&&"api"!==b.select.style()){var d=b.rows({selected:!0}).flatten().length,e=b.columns({selected:!0}).flatten().length,f=b.cells({selected:!0}).flatten().length,g=function(c,d,e){c.append(a('<span class="select-item"/>').append(b.i18n("select."+d+"s",{_:"%d "+d+"s selected",0:"",1:"1 "+d+" selected"},e)))};a.each(c.aanFeatures.i,function(b,c){var c=a(c),h=a('<span class="select-info"/>');g(h,"row",d),g(h,"column",e),g(h,"cell",f);var i=c.children("span.select-info");i.length&&i.remove(),""!==h.text()&&c.append(h)})}}function j(b,c,d,e){var f=b[c+"s"]({search:"applied"}).indexes(),e=a.inArray(e,f),g=a.inArray(d,f);if(b[c+"s"]({selected:!0}).any()||-1!==e){if(e>g)var h=g,g=e,e=h;f.splice(g+1,f.length),f.splice(0,e)}else f.splice(a.inArray(d,f)+1,f.length);b[c](d,{selected:!0}).any()?(f.splice(a.inArray(d,f),1),b[c+"s"](f).deselect()):b[c+"s"](f).select()}function k(a,b){if(b||"single"===a._select.style){var c=new o.Api(a);c.rows({selected:!0}).deselect(),c.columns({selected:!0}).deselect(),c.cells({selected:!0}).deselect()}}function l(a,b,c,d,f){var g=b.select.style(),h=b[d](f,{selected:!0}).any();"os"===g?a.ctrlKey||a.metaKey?b[d](f).select(!h):a.shiftKey?"cell"===d?e(b,f,c._select_lastCell||null):j(b,d,f,c._select_lastCell?c._select_lastCell[d]:null):(a=b[d+"s"]({selected:!0}),h&&1===a.flatten().length?b[d](f).deselect():(a.deselect(),b[d](f).select())):"multi+shift"==g&&a.shiftKey?"cell"===d?e(b,f,c._select_lastCell||null):j(b,d,f,c._select_lastCell?c._select_lastCell[d]:null):b[d](f).select(!h)}function m(a,b){return function(c){return c.i18n("buttons."+a,b)}}function n(a){return a=a._eventNamespace,"draw.dt.DT"+a+" select.dt.DT"+a+" deselect.dt.DT"+a}var o=a.fn.dataTable;o.select={},o.select.version="1.2.3",o.select.init=function(b){var c=b.settings()[0],e=c.oInit.select,f=o.defaults.select,e=e===d?f:e,f="row",g="api",h=!1,i=!0,j="td, th",k="selected",l=!1;c._select={},!0===e?(g="os",l=!0):"string"==typeof e?(g=e,l=!0):a.isPlainObject(e)&&(e.blurable!==d&&(h=e.blurable),e.info!==d&&(i=e.info),e.items!==d&&(f=e.items),e.style!==d&&(g=e.style,l=!0),e.selector!==d&&(j=e.selector),e.className!==d)&&(k=e.className),b.select.selector(j),b.select.items(f),b.select.style(g),b.select.blurable(h),b.select.info(i),c._select.className=k,a.fn.dataTable.ext.order["select-checkbox"]=function(b,c){return this.api().column(c,{order:"index"}).nodes().map(function(c){return"row"===b._select.items?a(c).parent().hasClass(b._select.className):"cell"===b._select.items&&a(c).hasClass(b._select.className)})},!l&&a(b.table().node()).hasClass("selectable")&&b.select.style("os")},a.each([{type:"row",prop:"aoData"},{type:"column",prop:"aoColumns"}],function(a,b){o.ext.selector[b.type].push(function(a,c,e){var f,c=c.selected,g=[];if(c===d)return e;for(var h=0,i=e.length;h<i;h++)f=a[b.prop][e[h]],(!0===c&&!0===f._select_selected||!1===c&&!f._select_selected)&&g.push(e[h]);return g})}),o.ext.selector.cell.push(function(a,b,c){var e,b=b.selected,f=[];if(b===d)return c;for(var g=0,h=c.length;g<h;g++)e=a.aoData[c[g].row],(!0===b&&e._selected_cells&&!0===e._selected_cells[c[g].column]||!1===b&&(!e._selected_cells||!e._selected_cells[c[g].column]))&&f.push(c[g]);return f});var p=o.Api.register,q=o.Api.registerPlural;p("select()",function(){return this.iterator("table",function(a){o.select.init(new o.Api(a))})}),p("select.blurable()",function(a){return a===d?this.context[0]._select.blurable:this.iterator("table",function(b){b._select.blurable=a})}),p("select.info()",function(a){return i===d?this.context[0]._select.info:this.iterator("table",function(b){b._select.info=a})}),p("select.items()",function(a){return a===d?this.context[0]._select.items:this.iterator("table",function(b){b._select.items=a,h(new o.Api(b),"selectItems",[a])})}),p("select.style()",function(b){return b===d?this.context[0]._select.style:this.iterator("table",function(c){if(c._select.style=b,!c._select_init){var e=new o.Api(c);c.aoRowCreatedCallback.push({fn:function(b,d,e){for(d=c.aoData[e],d._select_selected&&a(b).addClass(c._select.className),b=0,e=c.aoColumns.length;b<e;b++)(c.aoColumns[b]._select_selected||d._selected_cells&&d._selected_cells[b])&&a(d.anCells[b]).addClass(c._select.className)},sName:"select-deferRender"}),e.on("preXhr.dt.dtSelect",function(){var a=e.rows({selected:!0}).ids(!0).filter(function(a){return a!==d}),b=e.cells({selected:!0}).eq(0).map(function(a){var b=e.row(a.row).id(!0);return b?{row:b,column:a.column}:d}).filter(function(a){return a!==d});e.one("draw.dt.dtSelect",function(){e.rows(a).select(),b.any()&&b.each(function(a){e.cells(a.row,a.column).select()})})}),e.on("draw.dtSelect.dt select.dtSelect.dt deselect.dtSelect.dt info.dt",function(){i(e)}),e.on("destroy.dtSelect",function(){f(e),e.off(".dtSelect")})}var j=new o.Api(c);f(j),"api"!==b&&g(j),h(new o.Api(c),"selectStyle",[b])})}),p("select.selector()",function(a){return a===d?this.context[0]._select.selector:this.iterator("table",function(b){f(new o.Api(b)),b._select.selector=a,"api"!==b._select.style&&g(new o.Api(b))})}),q("rows().select()","row().select()",function(b){var c=this;return!1===b?this.deselect():(this.iterator("row",function(b,c){k(b),b.aoData[c]._select_selected=!0,a(b.aoData[c].nTr).addClass(b._select.className)}),this.iterator("table",function(a,b){h(c,"select",["row",c[b]],!0)}),this)}),q("columns().select()","column().select()",function(b){var c=this;return!1===b?this.deselect():(this.iterator("column",function(b,c){k(b),b.aoColumns[c]._select_selected=!0;var d=new o.Api(b).column(c);a(d.header()).addClass(b._select.className),a(d.footer()).addClass(b._select.className),d.nodes().to$().addClass(b._select.className)}),this.iterator("table",function(a,b){h(c,"select",["column",c[b]],!0)}),this)}),q("cells().select()","cell().select()",function(b){var c=this;return!1===b?this.deselect():(this.iterator("cell",function(b,c,e){k(b),c=b.aoData[c],c._selected_cells===d&&(c._selected_cells=[]),c._selected_cells[e]=!0,c.anCells&&a(c.anCells[e]).addClass(b._select.className)}),this.iterator("table",function(a,b){h(c,"select",["cell",c[b]],!0)}),this)}),q("rows().deselect()","row().deselect()",function(){var b=this;return this.iterator("row",function(b,c){b.aoData[c]._select_selected=!1,a(b.aoData[c].nTr).removeClass(b._select.className)}),this.iterator("table",function(a,c){h(b,"deselect",["row",b[c]],!0)}),this}),q("columns().deselect()","column().deselect()",function(){var b=this;return this.iterator("column",function(b,c){b.aoColumns[c]._select_selected=!1;var d=new o.Api(b),e=d.column(c);a(e.header()).removeClass(b._select.className),a(e.footer()).removeClass(b._select.className),d.cells(null,c).indexes().each(function(c){var d=b.aoData[c.row],e=d._selected_cells;d.anCells&&(!e||!e[c.column])&&a(d.anCells[c.column]).removeClass(b._select.className)})}),this.iterator("table",function(a,c){h(b,"deselect",["column",b[c]],!0)}),this}),q("cells().deselect()","cell().deselect()",function(){var b=this;return this.iterator("cell",function(b,c,d){c=b.aoData[c],c._selected_cells[d]=!1,c.anCells&&!b.aoColumns[d]._select_selected&&a(c.anCells[d]).removeClass(b._select.className)}),this.iterator("table",function(a,c){h(b,"deselect",["cell",b[c]],!0)}),this});var r=0;return a.extend(o.ext.buttons,{selected:{text:m("selected","Selected"),className:"buttons-selected",init:function(a,b,c){var d=this;c._eventNamespace=".select"+r++,a.on(n(c),function(){var a=d.rows({selected:!0}).any()||d.columns({selected:!0}).any()||d.cells({selected:!0}).any();d.enable(a)}),this.disable()},destroy:function(a,b,c){a.off(c._eventNamespace)}},selectedSingle:{text:m("selectedSingle","Selected single"),className:"buttons-selected-single",init:function(a,b,c){var d=this;c._eventNamespace=".select"+r++,a.on(n(c),function(){var b=a.rows({selected:!0}).flatten().length+a.columns({selected:!0}).flatten().length+a.cells({selected:!0}).flatten().length;d.enable(1===b)}),this.disable()},destroy:function(a,b,c){a.off(c._eventNamespace)}},selectAll:{text:m("selectAll","Select all"),className:"buttons-select-all",action:function(){this[this.select.items()+"s"]().select()}},selectNone:{text:m("selectNone","Deselect all"),className:"buttons-select-none",action:function(){k(this.settings()[0],!0)},init:function(a,b,c){var d=this;c._eventNamespace=".select"+r++,a.on(n(c),function(){var b=a.rows({selected:!0}).flatten().length+a.columns({selected:!0}).flatten().length+a.cells({selected:!0}).flatten().length;d.enable(0<b)}),this.disable()},destroy:function(a,b,c){a.off(c._eventNamespace)}}}),a.each(["Row","Column","Cell"],function(a,b){var c=b.toLowerCase();o.ext.buttons["select"+b+"s"]={text:m("select"+b+"s","Select "+c+"s"),className:"buttons-select-"+c+"s",action:function(){this.select.items(c)},init:function(a){var b=this;a.on("selectItems.dt.DT",function(a,d,e){b.active(e===c)})}}}),a(c).on("preInit.dt.dtSelect",function(a,b){"dt"===a.namespace&&o.select.init(new o.Api(b))}),o.select}),define("mockup-patterns-datatables",["jquery","pat-base","datatables.net","datatables.net-bs","datatables.net-buttons","datatables.net-buttons-colvis","datatables.net-buttons-flash","datatables.net-buttons-html5","datatables.net-buttons-print","datatables.net-buttons-bs","datatables.net-colreorder","datatables.net-rowreorder","datatables.net-fixedcolumns","datatables.net-fixedheader","datatables.net-select"],function(a,b,c){"use strict";var d=b.extend({name:"datatables",trigger:".pat-datatables",parser:"mockup",table:null,defaults:{},init:function(){var a=this;a.table=a.$el.DataTable(a.options)}});return d}),define("mockup-patterns-sortable",["jquery","pat-base","jquery.event.drop","jquery.event.drag"],function(a,b,c){"use strict";var d=b.extend({name:"sortable",trigger:".pat-sortable",parser:"mockup",defaults:{selector:"li",dragClass:"item-dragging",cloneClass:"dragging",createDragItem:function(a,b){return b.clone().addClass(a.options.cloneClass).css({opacity:.75,position:"absolute"}).appendTo(document.body)},drop:void 0},init:function(){var b=this,d=0;b.$el.find(b.options.selector).drag("start",function(e,f){var g=this,h=a(this);return a(g).addClass(b.options.dragClass),c({tolerance:function(c,d,e){if(0!==a(e.elem).closest(b.$el).length){var f=c.pageY>e.top+e.height/2;return a.data(e.elem,"drop+reorder",f?"insertAfter":"insertBefore"),this.contains(e,[c.pageX,c.pageY])}}}),d=h.index(),b.options.createDragItem(b,h)}).drag(function(b,c){a(c.proxy).css({top:c.offsetY,left:c.offsetX});var d=c.drop[0],e=a.data(d||{},"drop+reorder");e&&d&&(d!=c.current||e!=c.method)&&(a(this)[e](d),c.current=d,c.method=e,c.update())}).drag("end",function(c,e){var f=a(this);f.removeClass(b.options.dragClass),a(e.proxy).remove(),b.options.drop&&("string"==typeof b.options.drop?window[b.options.drop](f,f.index()-d):b.options.drop(f,f.index()-d))}).drop("init",function(a,b){return this!=b.drag})}});return d}),function(a){define("bootstrap-alert",["jquery"],function(){return function(){+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.6",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery)}.apply(a,arguments)})}(this),define("mockup-patterns-structure-url/js/views/table",["jquery","underscore","mockup-patterns-structure-url/js/views/tablerow","text!mockup-patterns-structure-url/templates/table.xml","mockup-ui-url/views/base","mockup-patterns-datatables","mockup-patterns-sortable","mockup-patterns-moment","mockup-patterns-structure-url/js/models/result","mockup-patterns-structure-url/js/views/actionmenu","translate","pat-registry","bootstrap-alert"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=e.extend({tagName:"div",template:b.template(d),initialize:function(b){var c=this;e.prototype.initialize.apply(c,[b]),c.collection=c.app.collection,c.selectedCollection=c.app.selectedCollection,c.listenTo(c.collection,"sync",c.render),c.listenTo(c.selectedCollection,"remove",c.render),c.listenTo(c.selectedCollection,"reset",c.render),c.collection.pager(),c.subsetIds=[],c.contextInfo=null,a("body").on("context-info-loaded",function(a,b){c.contextInfo=b,c.setContextInfo()}),c.dateColumns=["ModificationDate","EffectiveDate","CreationDate","ExpirationDate","start","end","last_comment_date"]},events:{"click .fc-breadcrumbs a":"breadcrumbClicked","change .select-all":"selectAll"},setContextInfo:function(){var a=this,c=a.contextInfo,d=a.$('[data-id="'+c.defaultPage+'"]');d.length>0&&d.addClass("default-page");var e=c.breadcrumbs;if(e&&e.length){var f=a.$(".fc-breadcrumbs a.crumb");b.each(e,function(a,b){f.eq(b).html(a.title)})}},render:function(){var d=this,e={aaSorting:[],aoColumnDefs:[{bSortable:!1,aTargets:[0,d.app.activeColumns.length+2]}],paging:!1,searching:!1,info:!1};if(a.extend(e,d.app.options.datatables_options),d.$el.html(d.template({_t:k,pathParts:b.filter(d.app.getCurrentPath().split("/").slice(1),function(a){return a.length>0}),status:d.app.status,activeColumns:d.app.activeColumns,availableColumns:d.app.availableColumns,datatables_options:JSON.stringify(e)})),d.collection.length){var f=d.$("tbody");d.collection.each(function(a){d.dateColumns.map(function(b){!a.attributes.hasOwnProperty(b)||"None"!==a.attributes[b]&&a.attributes[b]||(a.attributes[b]="")});var b=new c({model:a,app:d.app,table:d}).render();f.append(b.el)})}return d.moment=new h(d.$el,{selector:"."+d.dateColumns.join(",."),format:d.options.app.momentFormat}),d.app.options.moveUrl&&d.addReordering(),d.storeOrder(),l.scan(d.$el),d.$el.find("table").on("order.dt",function(b,c,e){var f=a('<button type="button" class="btn btn-danger btn-xs"></button>').text(k("Reset column sorting")).on("click",function(a){d.$el.find("table.pat-datatables").data("patternDatatables").table.order([0,"asc"]).draw().order([]).draw(),d.addReordering(),d.app.setStatus()});d.app.setStatus(k("Notice: Drag and drop reordering is disabled when viewing the contents sorted by a column."),"warning",f=f),a(".pat-datatables tbody").find("tr").off("drag"),d.$el.removeClass("order-support")}),this},breadcrumbClicked:function(b){b.preventDefault();var c=a(b.target);"A"!==c[0].tagName&&(c=c.parent("a"));var d="";a(c.prevAll("a").get().reverse()).each(function(){var b=a(this).attr("data-path");d+=b,"/"!==b&&(d+="/")}),d+=c.attr("data-path"),this.app.setCurrentPath(d),this.collection.currentPage=1,this.collection.pager()},selectAll:function(b){a(b.target).is(":checked")?a('input[type="checkbox"]',this.$("tbody")).prop("checked",!0).change():(this.selectedCollection.remove(this.collection.models,{silent:!0}),this.selectedCollection.trigger("remove")),this.setContextInfo()},toggleSelectAll:function(b){var c=a(b.target);c.is(":checked")||this.$(".select-all").prop("checked",!1)},addReordering:function(){var b=this;if(b.app.inQueryMode())return b.app.setStatus({text:k("Cannot order items while querying"),type:"warning"}),void b.$el.removeClass("order-support");b.$el.addClass("order-support");new g(b.$("tbody"),{selector:"tr",createDragItem:function(b,c){var d=c.clone(),e=a("<table><tbody></tbody></table>");return a("tbody",e).append(d),e.addClass("structure-dragging").css({opacity:.85,position:"absolute"}),e.width(c.width()),e.height(c.height()),e.appendTo(document.body),e},drop:function(a,c){0!==c&&(b.app.moveItem(a.attr("data-id"),c,b.subsetIds),b.storeOrder())}})},storeOrder:function(){var b=this,c=[];b.$("tbody tr.itemRow").each(function(){c.push(a(this).attr("data-id"))}),b.subsetIds=c}});return m}),define("text!mockup-ui-url/templates/popover.xml",[],function(){return'<div class="arrow"></div>\n<div class="popover-title">\n</div>\n<div class="items popover-content">\n</div>\n\n'}),define("mockup-ui-url/views/popover",["jquery","underscore","mockup-ui-url/views/container","mockup-patterns-backdrop","text!mockup-ui-url/templates/popover.xml"],function(a,b,c,d,e){"use strict";var f=c.extend({tagName:"div",className:"popover",eventPrefix:"popover",template:e,content:null,title:null,triggerView:null,idPrefix:"popover-",triggerEvents:{"button:click":"toggle"},placement:"bottom",events:{},opened:!1,closeOnOutClick:!0,appendInContainer:!0,backdrop:void 0,$backdrop:null,useBackdrop:!0,backdropOptions:{zIndex:"1009",opacity:"0.4",className:"backdrop backdrop-popover",classActiveName:"backdrop-active",closeOnEsc:!1,closeOnClick:!0},initialize:function(a){c.prototype.initialize.apply(this,[a]),this.bindTriggerEvents(),this.on("render",function(){this.$el.attr("role","tooltip").attr("aria-hidden","false"),this.renderTitle(),this.renderContent()},this)},afterRender:function(){},getTemplateOptions:function(){return this.options},renderTitle:function(){var a=this.title;"function"==typeof a&&(a=a(this.getTemplateOptions())),this.$(".popover-title").empty().append(a)},renderContent:function(){this.$(".popover-content").empty().append(this.content(this.getTemplateOptions()))},bindTriggerEvents:function(){this.triggerView&&b.each(this.triggerEvents,function(b,c){var d=this[b];d||a.error("Function not found."),this.stopListening(this.triggerView,c),this.listenTo(this.triggerView,c,d)},this)},getPosition:function(){var b=this.triggerView.$el;return a.extend({},{width:b[0].offsetWidth,height:b[0].offsetHeight},b.offset())},getBodyClassName:function(){var a="popover-";return this.options.id&&(a+=this.options.id+"-"),a+="active"},show:function(){a(".popover:visible").each(function(){var b=a(this).data("component");b&&b.hide()}),this.position(),this.setBackdrop(),this.useBackdrop===!0&&this.backdrop.show(),this.opened=!0,this.triggerView&&this.triggerView.$el.addClass("active"),this.uiEventTrigger("show",this),this.$el.attr("aria-hidden","false"),a("body").addClass(this.getBodyClassName())},position:function(){var a,b,c,d,e=this.getPosition(),f=this.$el;switch(b=this.placement,f.css({top:0,left:0}).addClass("active"),c=f[0].offsetWidth,d=f[0].offsetHeight,b){case"bottom":a={top:e.top+e.height,left:e.left+e.width/2-c/2};break;case"top":a={top:e.top-d,left:e.left+e.width/2-c/2};break;case"left":a={top:e.top+e.height/2-d/2,left:e.left-c};break;case"right":a={top:e.top+e.height/2-d/2,left:e.left+e.width}}this.applyPlacement(a,b)},applyPlacement:function(a,b){var c,d,e,f,g=this.$el,h=this.$el,i=h[0].offsetWidth,j=h[0].offsetHeight;g.removeClass(b),g.offset(a).addClass(b).addClass("active"),c=h[0].offsetWidth,d=h[0].offsetHeight,"top"===b&&d!==j&&(a.top=a.top+j-d,f=!0),"bottom"===b||"top"===b?(e=0,a.left<0&&(e=a.left*-2,a.left=0,g.removeClass(b),g.offset(a).addClass(b),c=h[0].offsetWidth,d=h[0].offsetHeight),this.positionArrow(e-i+c,c,"left")):this.positionArrow(d-j,d,"top"),f&&g.offset(a)},positionArrow:function(a,b,c){var d=this.$(".arrow");d.css(c,a?50*(1-a/b)+"%":"")},hide:function(){this.opened=!1,this.$el.removeClass("active"),this.triggerView&&(this.triggerView.$el.removeClass("active"),this.triggerView.$el.attr("aria-hidden","true")),this.uiEventTrigger("hide",this),this.$el.attr("aria-hidden","true"),a("body").removeClass(this.getBodyClassName())},toggle:function(a,b){this.opened?this.hide():this.show()},setBackdrop:function(){if(this.useBackdrop===!0&&void 0===this.backdrop){var b=this;this.$backdrop=this.$el.closest(".ui-backdrop-element"),0===this.$backdrop.length&&(this.$backdrop=a("body")),this.backdrop=new d(this.$backdrop,this.backdropOptions),this.backdrop.$el.on("hidden.backdrop.patterns",function(a){"backdrop.patterns"===a.namespace&&(a.stopPropagation(),b.opened===!0&&b.hide())}),this.on("popover:hide",function(){this.backdrop.hide()},this)}}});return f}),define("text!mockup-patterns-structure-url/templates/selection_item.xml",[],function(){return'<span class="selected-item">\n  <a href="#" data-uid="<%- UID %>" title="remove" class="remove">\n    <span class="glyphicon glyphicon-remove-circle"></span>\n  </a>\n  <%- Title %>\n</span>\n'}),define("mockup-patterns-structure-url/js/views/selectionwell",["jquery","underscore","mockup-ui-url/views/popover","text!mockup-patterns-structure-url/templates/selection_item.xml"],function(a,b,c,d){"use strict";var e=c.extend({className:"popover selected-items",title:b.template('<input type="text" class="filter" placeholder="Filter" /><a href="#" class=" remove-all"><span class="glyphicon glyphicon-remove-circle"></span> <%- _t("remove all") %></a>'),content:b.template("<% collection.each(function(item) { %><%= item_template(item.toJSON()) %><% }); %>"),events:{"click a.remove":"itemRemoved","keyup input.filter":"filterSelected","click .remove-all":"removeAll"},initialize:function(a){c.prototype.initialize.apply(this,[a]);var e=this,f=0;this.listenTo(this.collection,"reset all add remove",function(){clearTimeout(f),f=setTimeout(function(){e.render()},50)}),this.options.item_template=b.template(d)},render:function(){return c.prototype.render.call(this),0===this.collection.length&&this.$el.removeClass("active"),this},itemRemoved:function(b){b.preventDefault();var c=a(b.currentTarget).data("uid");this.collection.removeByUID(c),0!==this.collection.length&&this.show()},filterSelected:function(b){var c=a(b.target).val().toLowerCase();a(".selected-item",this.$el).each(function(){var b=a(this);b.text().toLowerCase().indexOf(c)===-1?b.hide():b.show()})},removeAll:function(a){a.preventDefault(),this.collection.reset(),this.hide()}});return e}),define("mockup-patterns-structure-url/js/views/generic-popover",["jquery","underscore","mockup-ui-url/views/popover","translate","pat-registry"],function(a,b,c,d,e){"use strict";var f=c.extend({events:{"click button.applyBtn":"applyButtonClicked","click button.closeBtn":"toggle"},submitText:d("Apply"),initialize:function(a){var b=this;b.app=a.app,b.className="popover "+a.id,b.title=a.form.title||a.title,b.submitText=a.form.submitText||d("Apply"),b.submitContext=a.form.submitContext||"primary",b.data={},b.options=a,b.setContent(a.form.template),c.prototype.initialize.apply(this,[a])},setContent:function(a){var c=this,d="<form>"+a+"</form>";d+='<button class="btn btn-block btn-'+c.submitContext+' applyBtn">'+c.submitText+" </button>",c.options.form.closeText&&(d+='<button class="btn btn-block btn-default closeBtn">'+c.options.form.closeText+" </button>"),this.content=b.template(d)},getTemplateOptions:function(){var b=this,c=[];return b.app.selectedCollection.each(function(a){c.push(a.toJSON())}),a.extend({},!0,b.options,{items:c,data:b.data})},applyButtonClicked:function(){var a=this,c={};b.each(a.$el.find("form").serializeArray(),function(a){a.name in c?c[a.name]+=","+a.value:c[a.name]=a.value}),a.app.buttonClickEvent(this.triggerView,c),a.hide()},afterRender:function(){var b=this;if(b.options.form.dataUrl){b.$(".popover-content").html(d("Loading...")),b.app.loading.show();var c=b.app.getAjaxUrl(b.options.form.dataUrl);a.ajax({url:c,dataType:"json",type:"POST",cache:!1,data:{selection:JSON.stringify(b.app.getSelectedUids()),transitions:!0,render:"yes"}}).done(function(a){b.data=a.data||a,b.renderContent(),e.scan(b.$el)}).fail(function(){var a=b.content;b.setContent("<p>"+d("Error loading popover from server.")+"</p>",!1),b.renderContent(),b.content=a}).always(function(){b.app.loading.hide(),b.position()})}else e.scan(b.$el),b.position()},toggle:function(a,b){c.prototype.toggle.apply(this,[a,b]);var d=this;d.opened&&(this.$el.replaceWith(this.render().el),this.position())}});return f}),define("mockup-patterns-structure-url/js/views/rearrange",["underscore","mockup-ui-url/views/popover","translate"],function(a,b,c){"use strict";var d=b.extend({className:"popover rearrange",title:a.template('<%- _t("Rearrange items in this folder") %>'),content:a.template('<div class="form-group"><label><%- _t("What to rearrange on") %></label><select name="rearrange_on" class="form-control"><% _.each(rearrangeProperties, function(title, property) { %><option value="<%- property %>"><%- title %></option><% }); %></select><p class="help-block"><b><%- _t("This permanently changes the order of items in this folder. This operation may take a long time depending on the size of the folder.") %></b></p></div><div><label> <input type="checkbox" name="reversed" /> <%- _t("Reverse") %></label></div><button class="btn btn-block btn-primary"><%- _t("Rearrange") %></button>'),events:{"click button":"rearrangeButtonClicked"},initialize:function(a){this.app=a.app,b.prototype.initialize.apply(this,[a]),this.options.rearrangeProperties=this.app.options.rearrange.properties},render:function(){return b.prototype.render.call(this),this.$rearrangeOn=this.$('[name="rearrange_on"]'),this.$reversed=this.$('[name="reversed"]'),this},rearrangeButtonClicked:function(){if("/"!==this.app.collection.queryHelper.getCurrentPath()||window.confirm(c("Sorting the content on the base of the site could affect your navigation order. Are you certain you want to do this?"))){
var a={rearrange_on:this.$rearrangeOn.val(),reversed:!1};this.$reversed[0].checked&&(a.reversed=!0),this.app.buttonClickEvent(this.triggerView,a),this.hide()}}});return d}),define("text!mockup-patterns-structure-url/templates/selection_button.xml",[],function(){return'<span class="glyphicon glyphicon-list"></span>\n<%- title %>\n<span class="label<% if (length > 0) { %> label-success<% } else { %> label-default<% } %>">\n  <%- length %>\n</span>\n'}),define("mockup-patterns-structure-url/js/views/selectionbutton",["mockup-ui-url/views/button","text!mockup-patterns-structure-url/templates/selection_button.xml"],function(a,b){"use strict";var c=a.extend({collection:null,template:b,initialize:function(b){a.prototype.initialize.apply(this,[b]);var c=this;c.timeout=0,null!==this.collection&&this.collection.on("add remove reset",function(){clearTimeout(c.timeout),c.timeout=setTimeout(function(){c.render(),0===c.collection.length&&c.$el.removeClass("active")},50)},this)},serializedModel:function(){var a={icon:"",title:this.options.title,length:0};return null!==this.collection&&(a.length=this.collection.length),a}});return c}),define("text!mockup-patterns-structure-url/templates/paging.xml",[],function(){return'  <ul class="pagination pagination-sm pagination-centered">\n    <li class="<% if (currentPage === 1) { %>disabled<% } %>">\n      <a href="#" class="serverfirst">\n        &laquo;\n      </a>\n    </li>\n    <li class="<% if (currentPage === 1) { %>disabled<% } %>">\n      <a href="#" class="serverprevious">\n        &lt;\n      </a>\n    </li>\n    <% _.each(pages, function(p){ %>\n    <li class="<% if (currentPage == p) { %>active<% } else if ( p == \'...\' ) { %>disabled<% }%>">\n      <a href="#" class="page"><%- p %></a>\n    </li>\n    <% }); %>\n    <li class="<% if (currentPage === totalPages) { %>disabled<% } %>">\n      <a href="#" class="servernext">\n        &gt;\n      </a>\n    </li>\n    <li class="<% if (currentPage === totalPages) { %>disabled<% } %>">\n      <a href="#" class="serverlast">\n        &raquo;\n      </a>\n    </li>\n  </ul>\n\n  <ul class="pagination pagination-sm">\n    <li class="disabled"><a href="#"><%- _t("Show:") %></a></li>\n    <li class="serverhowmany serverhowmany15 <% if(perPage == 15){ %>disabled<% } %>">\n      <a href="#" class="">15</a>\n    </li>\n    <li class="serverhowmany serverhowmany30 <% if(perPage == 30){ %>disabled<% } %>">\n      <a href="#" class="">30</a>\n    </li>\n    <li class="serverhowmany serverhowmany50 <% if(perPage == 50){ %>disabled<% } %>">\n      <a href="#" class="">50</a>\n    </li>\n    <li class="serverhowmany serverhowmany250 <% if(perPage == 250){ %>disabled<% } %>">\n      <a href="#" class="">250</a>\n    </li>\n  </ul>\n\n  <ul class="pagination pagination-sm">\n    <li class="disabled">\n      <a href="#">\n        <%- _t("Page:") %> <span class="current"><%- currentPage %></span>\n        <%- _t("of") %>\n        <span class="total"><%- totalPages %></span>\n              <%- _t("shown") %>\n      </a>\n    </li>\n  </ul>\n'}),define("mockup-patterns-structure-url/js/views/paging",["jquery","underscore","backbone","text!mockup-patterns-structure-url/templates/paging.xml","translate"],function(a,b,c,d,e){"use strict";var f=c.View.extend({events:{"click a.servernext":"nextResultPage","click a.serverprevious":"previousResultPage","click a.serverlast":"gotoLast","click a.page":"gotoPage","click a.serverfirst":"gotoFirst","click a.serverpage":"gotoPage","click .serverhowmany a":"changeCount"},tagName:"aside",template:b.template(d),maxPages:7,initialize:function(a){this.options=a,this.app=this.options.app,this.collection=this.app.collection,this.collection.on("reset",this.render,this),this.collection.on("sync",this.render,this),this.$el.appendTo("#pagination")},render:function(){var b=this.collection.info();b.pages=this.getPages(b);var c=this.template(a.extend({_t:e},b));return this.$el.html(c),this},getPages:function(a){var b=a.totalPages;if(!b)return[];var c=a.currentPage,d=1,e=b;b>this.maxPages&&(d=Math.max(1,Math.floor(c-this.maxPages/2)),e=Math.min(d+this.maxPages,b),e-d<this.maxPages&&(d-=Math.floor(this.maxPages/2)));for(var f=[],g=d;g<=e;g+=1)f.push(g);return f[0]>1&&(f[0]>2&&(f=["..."].concat(f)),f=[1].concat(f)),f[f.length-1]<b-1&&(f[f.length-2]<b-2&&f.push("..."),f.push(b)),f},nextResultPage:function(a){a.preventDefault(),this.app.setStatus(),this.collection.requestNextPage()},previousResultPage:function(a){a.preventDefault(),this.app.setStatus(),this.collection.requestPreviousPage()},gotoFirst:function(a){a.preventDefault(),this.app.setStatus(),this.collection.goTo(this.collection.information.firstPage)},gotoLast:function(a){a.preventDefault(),this.app.setStatus(),this.collection.goTo(this.collection.information.totalPages)},gotoPage:function(b){b.preventDefault(),this.app.setStatus();var c=a(b.target).text();this.collection.goTo(c)},changeCount:function(b){b.preventDefault(),this.app.setStatus();var c=a(b.target).text();this.collection.howManyPer(c),this.app.setCookieSetting("perPage",c)}});return f}),define("mockup-patterns-structure-url/js/views/columns",["jquery","underscore","mockup-ui-url/views/popover","mockup-patterns-sortable"],function(a,b,c,d){"use strict";var e=c.extend({className:"popover attribute-columns",title:b.template('<%- _t("Columns") %>'),content:b.template('<label><%- _t("Select columns to show, drag and drop to reorder") %></label><ul></ul><button class="btn btn-block btn-success"><%- _t("Save") %></button>'),itemTemplate:b.template('<li><label><input type="checkbox" value="<%- id %>"/><%- title %></label></li>'),events:{"click button":"applyButtonClicked"},initialize:function(a){this.app=a.app,c.prototype.initialize.apply(this,[a])},afterRender:function(){var c=this,e=function(a,b){var d=c.app.availableColumns[a],e=c.app.availableColumns[b];return d<e?-1:d==e?0:1};c.$container=c.$("ul"),b.each(c.app.activeColumns,function(b){var d=a(c.itemTemplate({title:c.app.availableColumns[b],id:b}));d.find("input")[0].checked=!0,c.$container.append(d)});var f=b.keys(b.omit(c.app.availableColumns,c.app.activeColumns)).sort(e);b.each(f,function(b){var d=a(c.itemTemplate({title:c.app.availableColumns[b],id:b}));c.$container.append(d)});new d(c.$container,{selector:"li"});return this},applyButtonClicked:function(){var b=this;this.hide(),b.app.activeColumns=[],b.$("input:checked").each(function(){b.app.activeColumns.push(a(this).val())}),b.app.setCookieSetting(b.app.activeColumnsCookie,this.app.activeColumns),b.app.tableView.render()}});return e}),define("mockup-patterns-structure-url/js/views/textfilter",["jquery","underscore","mockup-ui-url/views/base","mockup-ui-url/views/button","mockup-ui-url/views/popover","mockup-patterns-querystring","translate"],function(a,b,c,d,e,f,g){"use strict";var h=c.extend({tagName:"div",className:"navbar-search form-search ui-offset-parent",template:b.template('<div class="input-group"><input type="text" class="form-control search-query" placeholder="<%- _t("Filter") %>"><span class="input-group-btn"></span></div>'),popoverContent:b.template('<input class="pat-querystring" />'),events:{"keyup .search-query":"filter"},term:null,timeoutId:null,keyupDelay:300,initialize:function(a){c.prototype.initialize.apply(this,[a]),this.app=this.options.app},render:function(){this.$el.html(this.template({_t:g})),this.button=new d({tooltip:g("Query"),icon:"search"}),this.popover=new e({triggerView:this.button,id:"structure-query",title:b.template(g("Query")),content:this.popoverContent,placement:"left"}),this.$(".input-group-btn").append(this.button.render().el),this.$el.append(this.popover.render().el),this.popover.$el.addClass("query"),this.$queryString=this.popover.$("input.pat-querystring"),this.queryString=new f(this.$queryString,{indexOptionsUrl:this.app.options.indexOptionsUrl,showPreviews:!1});var c=this;return c.queryString.$el.on("change",function(){c.timeoutId&&clearTimeout(c.timeoutId),c.timeoutId=setTimeout(function(){var b=a.parseJSON(c.$queryString.val());c.app.additionalCriterias=b,c.app.collection.currentPage=1,c.app.collection.pager()},this.keyupDelay)}),c.queryString.$el.on("initialized",function(){c.queryString.$sortOn.on("change",function(){c.app.sort_on=c.queryString.$sortOn.val(),c.app.collection.currentPage=1,c.app.collection.pager()}),c.queryString.$sortOrder.change(function(){c.queryString.$sortOrder[0].checked?c.app.sort_order="reverse":c.app.sort_order="ascending",c.app.collection.currentPage=1,c.app.collection.pager()})}),this},filter:function(b){var c=this;c.timeoutId&&clearTimeout(c.timeoutId),c.timeoutId=setTimeout(function(){c.term=a(b.currentTarget).val(),c.app.collection.currentPage=1,c.app.collection.pager(),c.term||c.app.setStatus()},this.keyupDelay)}});return h}),define("mockup-patterns-structure-url/js/views/upload",["underscore","mockup-ui-url/views/popover","mockup-patterns-upload"],function(a,b,c){"use strict";var d=b.extend({className:"popover upload",title:a.template('<%- _t("Upload files") %>'),content:a.template('<input type="text" name="upload" style="display:none" /><div class="uploadify-me"></div>'),initialize:function(a){var c=this;c.app=a.app,b.prototype.initialize.apply(c,[a]),c.currentPathData=null,$("body").on("context-info-loaded",function(a,b){c.currentPathData=b})},render:function(){var a=this;b.prototype.render.call(this);var d=a.app.options.upload;return d.success=function(){a.app.collection.pager()},d.currentPath=a.app.getCurrentPath(),d.allowPathSelection=!1,a.upload=new c(a.$(".uploadify-me").addClass("pat-upload"),d),this},toggle:function(a,c){b.prototype.toggle.apply(this,[a,c]);var d=this;if(this.opened){var e=d.app.getCurrentPath();d.currentPathData&&e!==d.upload.currentPath&&d.upload.setPath(e)}}});return d}),function(a){define("backbone.paginator",["backbone"],function(){return function(){return Backbone.Paginator=function(a,b,c){"use strict";var d=b.map(a.VERSION.split("."),function(a){return parseInt(a,10)}),e={};e.version="<%= pkg.version %>",e.clientPager=a.Collection.extend({useDiacriticsPlugin:!0,useLevenshteinPlugin:!0,sortColumn:"",sortDirection:"desc",lastSortColumn:"",fieldFilterRules:[],lastFieldFilterRules:[],filterFields:"",filterExpression:"",lastFilterExpression:"",defaults_ui:{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4},initialize:function(){this.on("add",this.addModel,this),this.on("remove",this.removeModel,this),this.setDefaults()},setDefaults:function(){var a=b.defaults(this.paginator_ui,this.defaults_ui);b.defaults(this,a)},addModel:function(a){this.origModels.push(a)},removeModel:function(a){var c=b.indexOf(this.origModels,a);this.origModels.splice(c,1)},sync:function(e,f,g){var h=this;this.setDefaults();var i={};b.each(b.result(h,"server_api"),function(a,c){b.isFunction(a)&&(a=b.bind(a,h),a=a()),i[c]=a});var j=b.clone(h.paginator_core);b.each(j,function(a,c){b.isFunction(a)&&(a=b.bind(a,h),a=a()),j[c]=a}),j=b.defaults(j,{timeout:25e3,cache:!1,type:"GET",dataType:"jsonp"}),j=b.extend(j,{data:decodeURIComponent(c.param(i)),processData:!1,url:b.result(j,"url")},g);var k=!(0===d[0]&&9===d[1]&&10===d[2]),l=j.success;j.success=function(a,b,c){l&&(k?l(a,b,c):l(f,a,j)),f&&f.trigger&&f.trigger("sync",f,a,j)};var m=j.error;j.error=function(a){m&&m(f,a,j),f&&f.trigger&&f.trigger("error",f,a,j)};var n=j.xhr=a.ajax(j);return f&&f.trigger&&f.trigger("request",f,n,j),n},nextPage:function(a){this.currentPage<this.information.totalPages&&(this.currentPage=++this.currentPage,this.pager(a))},previousPage:function(a){this.currentPage>1&&(this.currentPage=--this.currentPage,this.pager(a))},goTo:function(a,b){void 0!==a&&(this.currentPage=parseInt(a,10),this.pager(b))},howManyPer:function(a){if(void 0!==a){var b=this.perPage;this.perPage=parseInt(a,10),this.currentPage=Math.ceil((b*(this.currentPage-1)+1)/a),this.pager()}},setSort:function(a,b){void 0!==a&&void 0!==b&&(this.lastSortColumn=this.sortColumn,this.sortColumn=a,this.sortDirection=b,this.pager(),this.info())},setFieldFilter:function(a){b.isEmpty(a)?(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules="",this.pager(),this.info()):(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules=a,this.pager(),this.info())},doFakeFieldFilter:function(a){if(!b.isEmpty(a)){var c=this.origModels;return void 0===c&&(c=this.models),c=this._fieldFilter(c,a),""!==this.filterExpression&&(c=this._filter(c,this.filterFields,this.filterExpression)),c.length}},setFilter:function(a,b){void 0!==a&&void 0!==b&&(this.filterFields=a,this.lastFilterExpression=this.filterExpression,this.filterExpression=b,this.pager(),this.info())},doFakeFilter:function(a,c){if(void 0!==a&&void 0!==c){var d=this.origModels;return void 0===d&&(d=this.models),b.isEmpty(this.fieldFilterRules)||(d=this._fieldFilter(d,this.fieldFilterRules)),d=this._filter(d,a,c),d.length}},pager:function(a){var c=this,d=this.perPage,e=(c.currentPage-1)*d,f=e+d;void 0===c.origModels&&(c.origModels=c.models),c.models=c.origModels.slice(),""!==this.sortColumn&&(c.models=c._sort(c.models,this.sortColumn,this.sortDirection)),b.isEmpty(this.fieldFilterRules)||(c.models=c._fieldFilter(c.models,this.fieldFilterRules)),""!==this.filterExpression&&(c.models=c._filter(c.models,this.filterFields,this.filterExpression)),this.lastSortColumn===this.sortColumn&&this.lastFilterExpression===this.filterExpression&&b.isEqual(this.fieldFilterRules,this.lastFieldFilterRules)||(e=0,f=e+d,c.currentPage=1,this.lastSortColumn=this.sortColumn,this.lastFieldFilterRules=this.fieldFilterRules,this.lastFilterExpression=this.filterExpression),c.sortedAndFilteredModels=c.models.slice(),c.info(),c.reset(c.models.slice(e,f)),b.result(a,"success")},_sort:function(a,c,d){return a=a.sort(function(a,e){var f=a.get(c),g=e.get(c);if(b.isUndefined(f)||b.isUndefined(g)||null===f||null===g)return 0;if(f=f.toString().toLowerCase(),g=g.toString().toLowerCase(),"desc"===d)if(!f.match(/[^\-\d\.]/)&&f.match(/-?[\d\.]+/)&&!g.match(/[^\-\d\.]/)&&g.match(/-?[\d\.]+/)){if(f-0<g-0)return 1;if(f-0>g-0)return-1}else{if(f<g)return 1;if(f>g)return-1}else if(!f.match(/[^\-\d\.]/)&&f.match(/-?[\d\.]+/)&&!g.match(/[^\-\d\.]/)&&g.match(/-?[\d\.]+/)){if(f-0<g-0)return-1;if(f-0>g-0)return 1}else{if(f<g)return-1;if(f>g)return 1}if(a.cid&&e.cid){var h=a.cid,i=e.cid;if(h<i)return-1;if(h>i)return 1}return 0})},_fieldFilter:function(a,c){if(b.isEmpty(c))return a;var d=[];return b.each(a,function(a){var e=!0;b.each(c,function(c){if(!e)return!1;if(e=!1,"function"===c.type){var d=b.wrap(c.value,function(b){return b(a.get(c.field))});d()&&(e=!0)}else"required"===c.type?b.isEmpty(a.get(c.field).toString())||(e=!0):"min"===c.type?!b.isNaN(Number(a.get(c.field)))&&!b.isNaN(Number(c.value))&&Number(a.get(c.field))>=Number(c.value)&&(e=!0):"max"===c.type?!b.isNaN(Number(a.get(c.field)))&&!b.isNaN(Number(c.value))&&Number(a.get(c.field))<=Number(c.value)&&(e=!0):"range"===c.type?!b.isNaN(Number(a.get(c.field)))&&b.isObject(c.value)&&!b.isNaN(Number(c.value.min))&&!b.isNaN(Number(c.value.max))&&Number(a.get(c.field))>=Number(c.value.min)&&Number(a.get(c.field))<=Number(c.value.max)&&(e=!0):"minLength"===c.type?a.get(c.field).toString().length>=c.value&&(e=!0):"maxLength"===c.type?a.get(c.field).toString().length<=c.value&&(e=!0):"rangeLength"===c.type?b.isObject(c.value)&&!b.isNaN(Number(c.value.min))&&!b.isNaN(Number(c.value.max))&&a.get(c.field).toString().length>=c.value.min&&a.get(c.field).toString().length<=c.value.max&&(e=!0):"oneOf"===c.type?b.isArray(c.value)&&b.include(c.value,a.get(c.field))&&(e=!0):"equalTo"===c.type?c.value===a.get(c.field)&&(e=!0):"containsAllOf"===c.type?b.isArray(c.value)&&b.isArray(a.get(c.field))&&b.intersection(c.value,a.get(c.field)).length===c.value.length&&(e=!0):"pattern"===c.type?a.get(c.field).toString().match(c.value)&&(e=!0):e=!1}),e&&d.push(a)}),d},_filter:function(c,d,e){var f=this,g={};if(b.isString(d)?g[d]={cmp_method:"regexp"}:b.isArray(d)?b.each(d,function(a){g[a]={cmp_method:"regexp"}}):b.each(d,function(a,c){g[c]=b.defaults(a,{cmp_method:"regexp"})}),d=g,b.has(a.Paginator,"removeDiacritics")&&f.useDiacriticsPlugin&&(e=a.Paginator.removeDiacritics(e)),""===e||!b.isString(e))return c;var h=b.map(e.match(/\w+/gi),function(a){return a.toLowerCase()}),i="("+b.uniq(h).join("|")+")",j=new RegExp(i,"igm"),k=[];return b.each(c,function(c){var g=[];b.each(d,function(d,i){var k=c.get(i);if(k){var l=[];if(k=b.has(a.Paginator,"removeDiacritics")&&f.useDiacriticsPlugin?a.Paginator.removeDiacritics(k.toString()):k.toString(),"levenshtein"===d.cmp_method&&b.has(a.Paginator,"levenshtein")&&f.useLevenshteinPlugin){var m=a.Paginator.levenshtein(k,e);b.defaults(d,{max_distance:0}),m<=d.max_distance&&(l=b.uniq(h))}else l=k.match(j);l=b.map(l,function(a){return a.toString().toLowerCase()}),b.each(l,function(a){g.push(a)})}}),g=b.uniq(b.without(g,"")),b.isEmpty(b.difference(h,g))&&k.push(c)}),k},info:function(){var a=this,b={},c=a.sortedAndFilteredModels?a.sortedAndFilteredModels.length:a.length,d=Math.ceil(c/a.perPage);return b={totalUnfilteredRecords:a.origModels.length,totalRecords:c,currentPage:a.currentPage,perPage:this.perPage,totalPages:d,lastPage:d,previous:!1,next:!1,startRecord:0===c?0:(a.currentPage-1)*this.perPage+1,endRecord:Math.min(c,a.currentPage*this.perPage)},a.currentPage>1&&(b.previous=a.currentPage-1),a.currentPage<b.totalPages&&(b.next=a.currentPage+1),b.pageSet=a.setPagination(b),a.information=b,b},setPagination:function(a){var b=[],c=0,d=0,e=2*this.pagesInRange,f=Math.ceil(a.totalRecords/a.perPage);if(f>1)if(f<=1+e)for(c=1,d=f;c<=d;c++)b.push(c);else if(a.currentPage<=this.pagesInRange+1)for(c=1,d=2+e;c<d;c++)b.push(c);else if(f-this.pagesInRange>a.currentPage&&a.currentPage>this.pagesInRange)for(c=a.currentPage-this.pagesInRange;c<=a.currentPage+this.pagesInRange;c++)b.push(c);else for(c=f-e;c<=f;c++)b.push(c);return b},bootstrap:function(a){return b.extend(this,a),this.goTo(1),this.info(),this}}),e.clientPager.prototype.prevPage=e.clientPager.prototype.previousPage;var f=function(){var a=new c.Deferred;return a.reject(),a.promise()};return e.requestPager=a.Collection.extend({sync:function(e,f,g){var h=this;h.setDefaults();var i={};b.each(b.result(h,"server_api"),function(a,c){b.isFunction(a)&&(a=b.bind(a,h),a=a()),i[c]=a});var j=b.clone(h.paginator_core);b.each(j,function(a,c){b.isFunction(a)&&(a=b.bind(a,h),a=a()),j[c]=a}),j=b.defaults(j,{timeout:25e3,cache:!1,type:"GET",dataType:"jsonp"}),g.data?g.data=decodeURIComponent(c.param(b.extend(i,g.data))):g.data=decodeURIComponent(c.param(i)),j=b.extend(j,{data:decodeURIComponent(c.param(i)),processData:!1,url:b.result(j,"url")},g);var k=!(0===d[0]&&9===d[1]&&10===d[2]),l=j.success;j.success=function(a,b,c){l&&(k?l(a,b,c):l(f,a,j)),d[0]<1&&f&&f.trigger&&f.trigger("sync",f,a,j)};var m=j.error;j.error=function(a){m&&m(a),f&&f.trigger&&f.trigger("error",f,a,j)};var n=j.xhr=a.ajax(j);return f&&f.trigger&&f.trigger("request",f,n,j),n},setDefaults:function(){var a=this;b.defaults(a.paginator_ui,{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4}),b.each(a.paginator_ui,function(c,d){b.isUndefined(a[d])&&(a[d]=a.paginator_ui[d])})},requestNextPage:function(a){return void 0!==this.currentPage?(this.currentPage+=1,this.pager(a)):f()},requestPreviousPage:function(a){return void 0!==this.currentPage?(this.currentPage-=1,this.pager(a)):f()},updateOrder:function(a,b){return void 0!==a?(this.sortField=a,this.pager(b)):f()},goTo:function(a,b){return void 0!==a?(this.currentPage=parseInt(a,10),this.pager(b)):f()},howManyPer:function(a,b){return void 0!==a?(this.currentPage=this.firstPage,this.perPage=a,this.pager(b)):f()},info:function(){var a={totalRecords:this.totalRecords||0,currentPage:this.currentPage,firstPage:this.firstPage,totalPages:Math.ceil(this.totalRecords/this.perPage),lastPage:this.totalPages,perPage:this.perPage,previous:!1,next:!1};return this.currentPage>1&&(a.previous=this.currentPage-1),this.currentPage<a.totalPages&&(a.next=this.currentPage+1),a.hasNext=a.next,a.hasPrevious=a.next,a.pageSet=this.setPagination(a),this.information=a,a},setPagination:function(a){var b=[],c=0,d=0,e=2*this.pagesInRange,f=Math.ceil(a.totalRecords/a.perPage);if(f>1)if(f<=1+e)for(c=1,d=f;c<=d;c++)b.push(c);else if(a.currentPage<=this.pagesInRange+1)for(c=1,d=2+e;c<d;c++)b.push(c);else if(f-this.pagesInRange>a.currentPage&&a.currentPage>this.pagesInRange)for(c=a.currentPage-this.pagesInRange;c<=a.currentPage+this.pagesInRange;c++)b.push(c);else for(c=f-e;c<=f;c++)b.push(c);return b},pager:function(a){return b.isObject(a)||(a={}),this.fetch(a)},url:function(){return void 0!==this.paginator_core&&void 0!==this.paginator_core.url?this.paginator_core.url:null},bootstrap:function(a){return b.extend(this,a),this.setDefaults(),this.info(),this}}),e.requestPager.prototype.nextPage=e.requestPager.prototype.requestNextPage,e.requestPager.prototype.prevPage=e.requestPager.prototype.requestPreviousPage,e}(Backbone,_,jQuery),window.Backbone.Paginator}.apply(a,arguments)})}(this),define("mockup-patterns-structure-url/js/collections/result",["jquery","underscore","backbone","mockup-patterns-structure-url/js/models/result","mockup-utils","backbone.paginator"],function(a,b,c,d,e){"use strict";var f=c.Paginator.requestPager.extend({model:d,initialize:function(b,d){this.options=d,this.view=d.view,this.url=d.url,this.queryHelper=e.QueryHelper(a.extend(!0,{},this.view.options,{attributes:this.view.options.queryHelperAttributes})),this.queryParser=function(b){var c=this;void 0===b&&(b={});var d=null;c.view.toolbar&&(d=c.view.toolbar.get("filter").term);var e=c.view.sort_on,f=c.view.sort_order;return e||(e="getObjPositionInParent"),JSON.stringify({criteria:c.queryHelper.getCriterias(d,a.extend({},b,{additionalCriterias:c.view.additionalCriterias})),sort_on:e,sort_order:f})},"#/"===window.location.hash.substring(0,2)&&(this.queryHelper.currentPath=window.location.hash.substring(1)),c.Paginator.requestPager.prototype.initialize.apply(this,[b,d])},getCurrentPath:function(){return this.queryHelper.getCurrentPath()},setCurrentPath:function(a){this.queryHelper.currentPath=a},pager:function(){this.trigger("pager"),c.Paginator.requestPager.prototype.pager.apply(this,[])},paginator_core:{type:"GET",dataType:"json",url:function(){return this.url}},paginator_ui:{firstPage:1,currentPage:1,perPage:15},server_api:{query:function(){return this.queryParser()},batch:function(){return this.queryHelper.options.batchSize=this.perPage,JSON.stringify(this.queryHelper.getBatch(this.currentPage))},attributes:function(){return JSON.stringify(this.queryHelper.options.attributes)}},parse:function(a,c){void 0===c&&(c=0),this.totalRecords=a.total;var d=a.results;return b.each(d,function(a,b){a._sort=b}),d},comparator:"_sort"});return f}),define("mockup-patterns-structure-url/js/collections/selected",["backbone","mockup-patterns-structure-url/js/models/result"],function(a,b){"use strict";var c=a.Collection.extend({model:b,removeResult:function(a){return this.removeByUID(a.uid())},removeByUID:function(a){var b=this.getByUID(a);return b&&this.remove(b),b},getByUID:function(a){return this.findWhere({UID:a})}});return c}),function(a){"function"==typeof define&&define.amd?define("jquery.cookie",["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;n<o;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0!==a.cookie(b)&&(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}}),define("mockup-patterns-structure-url/js/views/app",["jquery","underscore","mockup-ui-url/views/toolbar","mockup-ui-url/views/buttongroup","mockup-ui-url/views/button","mockup-ui-url/views/base","mockup-patterns-structure-url/js/views/table","mockup-patterns-structure-url/js/views/selectionwell","mockup-patterns-structure-url/js/views/generic-popover","mockup-patterns-structure-url/js/views/rearrange","mockup-patterns-structure-url/js/views/selectionbutton","mockup-patterns-structure-url/js/views/paging","mockup-patterns-structure-url/js/views/columns","mockup-patterns-structure-url/js/views/textfilter","mockup-patterns-structure-url/js/views/upload","mockup-patterns-structure-url/js/collections/result","mockup-patterns-structure-url/js/collections/selected","mockup-utils","translate","pat-logger","jquery.cookie"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";var u=t.getLogger("pat-structure"),v=f.extend({tagName:"div",status:{type:"none",text:"",label:""},sort_on:"getObjPositionInParent",sort_order:"ascending",additionalCriterias:[],cookieSettingPrefix:"_fc_",pasteAllowed:function(){return!!a.cookie("__cp")},initialize:function(b){var c=this;f.prototype.initialize.apply(c,[b]),c.loading=new r.Loading,c.loading.show(),a(document).click(function(b){var c=a(b.target);if(c.is(":visible")&&"hidden"!==c.css("visibility")&&"0"!==c.css("opacity")&&!c.is("a")&&!c.parent().is("a")){var d=a(".popover:visible");if(d.length>0&&!a.contains(d[0],c[0])){var e=d.data("component");e&&e.hide()}}});var d=require(b.collectionConstructor);c.collection=new d([],{view:c,url:c.options.collectionUrl}),c.setAllCookieSettings(),c.selectedCollection=new q,c.tableView=new g({app:c}),c.pagingView=new l({app:c}),c.setupButtons(),c.wellView=new h({collection:c.selectedCollection,triggerView:c.toolbar.get("selected-items"),app:c,id:"structure-well"}),c.toolbar.get("selected-items").disable(),c.buttons.disable();var e=0;c.selectedCollection.on("add remove reset",function(){clearTimeout(e),e=setTimeout(function(){c.updateButtons()},100)},c),c.collection.on("sync",function(){c.contextInfoUrl&&a.ajax({url:c.getAjaxUrl(c.contextInfoUrl),dataType:"json",success:function(b){a("body").trigger("context-info-loaded",[b])},error:function(a){404===a.status&&u.info("context info url not found")}}),c.loading.hide()}),c.collection.on("pager",function(){if(c.loading.show(),c.updateButtons(),window.history&&window.history.pushState){if(c.doNotPushState)return void(c.doNotPushState=!1);var b,d=c.getCurrentPath();if("/"===d&&(d=""),c.options.pushStateUrl){var e=c.options.pushStateUrl.replace("/{path}","{path}");b=e.replace("{path}",d),window.history.pushState(null,null,b)}else c.options.urlStructure&&(b=c.options.urlStructure.base+d+c.options.urlStructure.appended,window.history.pushState(null,null,b));c.options.traverseView&&(d=""),a("body").trigger("structure-url-changed",[d])}}),(c.options.pushStateUrl||c.options.urlStructure)&&r.featureSupport.history()&&(a(window).bind("popstate",function(){var b,d,e=r.getWindow(),f=e.location.href;if(f.indexOf("?")!==-1&&(f=f.split("?")[0]),f.indexOf("#")!==-1&&(f=f.split("#")[0]),c.options.pushStateUrl){var g=c.options.pushStateUrl.split("{path}");b=g[0],d=g[1]}else b=c.options.urlStructure.base,d=c.options.urlStructure.appended;var h=f.substring(b.length);h.substring(h.length-d.length)===d&&(h=h.substring(0,h.length-d.length)),h||(h="/"),c.setCurrentPath(h),a("body").trigger("structure-url-changed",[h]),c.doNotPushState=!0,c.collection.goTo(c.collection.information.firstPage)}),a(document).bind("keyup keydown",function(a){c.keyEvent=a})),c.togglePasteBtn()},updateButtons:function(){var a=this;a.selectedCollection.length?(a.toolbar.get("selected-items").enable(),a.buttons.enable()):(this.toolbar.get("selected-items").disable(),a.buttons.disable()),a.togglePasteBtn()},togglePasteBtn:function(){var a=this;b.find(a.buttons.items,function(a){return"paste"===a.id})&&(a.pasteAllowed()?a.buttons.get("paste").enable():a.buttons.get("paste").disable())},inQueryMode:function(){if(this.toolbar){var a=this.toolbar.get("filter").term;if(a)return!0}return this.additionalCriterias.length>0||(!(!this.sort_on||"getObjPositionInParent"===this.sort_on)||"ascending"!==this.sort_order)},getSelectedUids:function(a){var b=this;void 0===a&&(a=b.selectedCollection);var c=[];return a.each(function(a){c.push(a.uid())}),c},getCurrentPath:function(){return this.collection.getCurrentPath()},setCurrentPath:function(a){this.collection.setCurrentPath(a)},getAjaxUrl:function(a){return a.replace("{path}",this.getCurrentPath())},buttonClickEvent:function(b){var c=this,d=null,e=null;if(b.url){if(c.loading.show(),arguments.length>1){var f=arguments[1];f.preventDefault||(d=f)}if(arguments.length>2){var g=arguments[2];"function"==typeof g&&(e=g)}null===d&&(d={}),void 0===d.selection&&(d.selection=JSON.stringify(c.getSelectedUids())),d._authenticator=r.getAuthenticator(),void 0===d.folder&&(d.folder=c.getCurrentPath());var h=c.getAjaxUrl(b.url);a.ajax({url:h,type:"POST",data:d,success:function(a){c.ajaxSuccessResponse.apply(c,[a,e]),c.loading.hide()},error:function(a){c.ajaxErrorResponse.apply(c,[a,h]),c.loading.hide()}},c)}},ajaxSuccessResponse:function(a,b){var c=this;c.selectedCollection.reset(),"success"===a.status&&c.collection.reset(),a.msg&&c.setStatus(a.msg,a.status||"warning"),null!==b&&void 0!==b&&b(a),c.collection.pager()},ajaxErrorResponse:function(a,b){404===a.status?window.alert(s("operation url ${url} is not valid",{url:b})):window.alert(s("there was an error performing the action"))},setupButtons:function(){var a=this,f=[],g=new e({id:"attribute-columns",tooltip:s("Configure displayed columns"),icon:"th"});if(a.columnsView=new m({app:a,triggerView:g,id:"structure-columns"}),f.push(g),f.push(new k({title:s("Selected"),id:"selected-items",tooltip:s("Manage selection"),collection:this.selectedCollection})),a.options.rearrange){var h=new e({id:"rearrange",title:s("Rearrange"),icon:"sort-by-attributes",tooltip:s("Rearrange folder contents"),url:a.options.rearrange.url});a.rearrangeView=new j({triggerView:h,app:a,id:"structure-rearrange"}),f.push(h)}if(a.options.upload&&r.featureSupport.dragAndDrop()&&r.featureSupport.fileApi()){var l=new e({id:"upload",title:s("Upload"),tooltip:s("Upload files"),icon:"upload"});a.uploadView=new o({triggerView:l,app:a}),f.push(l)}var p=[];b.each(a.options.buttons,function(b){try{var c=new e(b);if(p.push(c),c.form){b.triggerView=c,b.app=a;var d=new i(b);a.$el.append(d.el)}else c.on("button:click",a.buttonClickEvent,a)}catch(f){u.error("Error initializing button "+b.title+" "+f)}}),a.buttons=new d({items:p,id:"mainbuttons",app:a}),f.push(a.buttons),f.push(new n({id:"filter",app:this})),this.toolbar=new c({items:f})},moveItem:function(b,c,d){var e=this;a.ajax({url:this.getAjaxUrl(this.options.moveUrl),type:"POST",data:{delta:c,id:b,_authenticator:r.getAuthenticator(),subsetIds:JSON.stringify(d)},dataType:"json",success:function(a){a.msg?e.setStatus(a.msg):"success"!==a.status&&e.setStatus({text:"error moving item",type:"error"}),e.collection.pager()},error:function(){e.setStatus({text:"error moving item",type:"error"})}})},setStatus:function(b,c,d){b?"string"==typeof b?(this.status.text=b,this.status.label="",this.status.type=c||"warning"):(this.status.label=b.label||"",this.status.text=b.text,this.status.type=b.type||"warning"):(this.status.text="",this.status.label="",this.status.type="none");var e=this.$(".status");if(e.length>0){e[0].className="alert alert-"+this.status.type+" status";var f=a("<span></span>");f.text(this.status.text);
var g=a("<strong></strong>");g.text(this.status.label),e.empty().append(g).append(f),d&&e.append(d)}},render:function(){var b=this;return b.$el.append(b.toolbar.render().el),b.$el.append(b.wellView.render().el),b.$el.append(b.columnsView.render().el),b.rearrangeView&&b.$el.append(b.rearrangeView.render().el),b.uploadView&&b.$el.append(b.uploadView.render().el),b.$el.append(b.tableView.render().el),b.$el.append(b.pagingView.render().el),null!==b.options.backdropSelector?a(b.options.backdropSelector).addClass("ui-backdrop-element"):b.$el.addClass("ui-backdrop-element"),b},getCookieSetting:function(b,c){void 0===c&&(c=null);var d;try{d=a.cookie(this.cookieSettingPrefix+b),d=a.parseJSON(d).value}catch(e){return c}return void 0===d||null===d?c:d},setCookieSetting:function(b,c){a.cookie(this.cookieSettingPrefix+b,JSON.stringify({value:c}))},setAllCookieSettings:function(){this.activeColumns=this.getCookieSetting(this.activeColumnsCookie,this.activeColumns);var a=this.getCookieSetting("perPage",15);"string"==typeof a&&(a=parseInt(a)),this.collection.howManyPer(a)}});return v}),define("mockup-patterns-structure",["jquery","underscore","pat-base","mockup-patterns-structure-url/js/views/app"],function(a,b,c,d){"use strict";var e=c.extend({name:"structure",trigger:".pat-structure",parser:"mockup",defaults:{urlStructure:null,vocabularyUrl:null,indexOptionsUrl:null,contextInfoUrl:null,setDefaultPageUrl:null,menuOptions:null,menuGenerator:"mockup-patterns-structure-url/js/actionmenu",backdropSelector:".plone-modal",activeColumnsCookie:"activeColumns",attributes:null,_default_attributes:["CreationDate","EffectiveDate","ExpirationDate","exclude_from_nav","getIcon","getMimeIcon","getObjSize","getURL","id","is_folderish","last_comment_date","ModificationDate","path","portal_type","review_state","Subject","Title","total_comments","UID"],activeColumns:null,_default_activeColumns:["ModificationDate","EffectiveDate","review_state"],availableColumns:null,_default_availableColumns:{id:"ID",ModificationDate:"Last modified",EffectiveDate:"Published",ExpirationDate:"Expiration",CreationDate:"Created",review_state:"Review state",Subject:"Tags",portal_type:"Type",is_folderish:"Folder",exclude_from_nav:"Excluded from navigation",getObjSize:"Object Size",last_comment_date:"Last comment date",total_comments:"Total comments"},tableRowItemAction:null,_default_tableRowItemAction:{folder:["mockup-patterns-structure-url/js/navigation","folderClicked"],other:[]},typeToViewAction:null,_default_typeToViewAction:{File:"/view",Image:"/view",Blob:"/view"},collectionConstructor:"mockup-patterns-structure-url/js/collections/result",momentFormat:"L LT",rearrange:{properties:{id:"ID",sortable_title:"Title"},url:"/rearrange"},moveUrl:null,buttons:null,_default_buttons:[{tooltip:"Cut",title:"Cut",url:"/cut"},{tooltip:"Copy",title:"Copy",url:"/copy"},{tooltip:"Paste",title:"Paste",url:"/paste"},{tooltip:"Delete",title:"Delete",url:"/delete",context:"danger",icon:"trash"},{tooltip:"Workflow",title:"Workflow",url:"/workflow"},{tooltip:"Tags",title:"Tags",url:"/tags"},{tooltip:"Properties",title:"Properties",url:"/properties"},{tooltip:"Rename",title:"Rename",url:"/rename"}],datatables_options:{},upload:{uploadMultiple:!0,showTitle:!0}},init:function(){var c=this,e=["attributes","activeColumns","availableColumns","buttons","typeToViewAction"];b.each(e,function(a){null===c.options[a]&&(c.options[a]=c.options["_default_"+a])});var f=["tableRowItemAction"];b.each(f,function(b){var d=c.options[b];c.options[b]=a.extend(!1,c.options["_default_"+b],d)}),c.browsing=!0,c.options.collectionUrl=c.options.vocabularyUrl,c.options.pattern=c,c.options.queryHelperAttributes=c.options.attributes,delete c.options.attributes,c.view=new d(c.options),c.$el.append(c.view.render().$el)}});return e}),define("mockup-patterns-structureupdater",["jquery","pat-base"],function(a,b){"use strict";var c=b.extend({name:"structureupdater",trigger:".template-folder_contents",parser:"mockup",defaults:{titleSelector:"",descriptionSelector:""},init:function(){a("body").on("context-info-loaded",function(b,c){this.options.titleSelector&&a(this.options.titleSelector,this.$el).html(c.object&&c.object.Title||"&nbsp;"),this.options.descriptionSelector&&a(this.options.descriptionSelector,this.$el).html(c.object&&c.object.Description||"&nbsp;")}.bind(this))}});return c}),function(a){define("resource-plone-app-jquerytools-js",["jquery"],function(){return function(){!function(a){function b(b,e){var f,g,h,i=this,j=b.add(i),k=a(window),l=a.tools.expose&&(e.mask||e.expose),m=Math.random().toString().slice(10);l&&("string"==typeof l&&(l={color:l}),l.closeOnClick=l.closeOnEsc=!1);var n=e.target||b.attr("rel");if(g=n?a(n):b,!g.length)throw"Could not find Overlay: "+n;b&&b.index(g)==-1&&b.click(function(a){return i.load(a),a.preventDefault()}),a.extend(i,{load:function(b){if(i.isOpened())return i;var f=d[e.effect];if(!f)throw'Overlay: cannot find effect : "'+e.effect+'"';if(e.oneInstance&&a.each(c,function(){this.close(b)}),b=b||a.Event(),b.type="onBeforeLoad",j.trigger(b),b.isDefaultPrevented())return i;h=!0,l&&a(g).expose(l);var n=e.top,o=e.left,p=g.outerWidth(!0),q=g.outerHeight(!0);return"string"==typeof n&&(n="center"==n?Math.max((k.height()-q)/2,0):parseInt(n,10)/100*k.height()),"center"==o&&(o=Math.max((k.width()-p)/2,0)),f[0].call(i,{top:n,left:o},function(){h&&(b.type="onLoad",j.trigger(b))}),l&&e.closeOnClick&&a.mask.getMask().one("click",i.close),e.closeOnClick&&a(document).on("click."+m,function(b){a(b.target).parents(g).length||i.close(b)}),e.closeOnEsc&&a(document).on("keydown."+m,function(a){27==a.keyCode&&i.close(a)}),i},close:function(b){return i.isOpened()?(b=b||a.Event(),b.type="onBeforeClose",j.trigger(b),b.isDefaultPrevented()?void 0:(h=!1,d[e.effect][1].call(i,function(){b.type="onClose",j.trigger(b)}),a(document).off("click."+m+" keydown."+m),l&&a.mask.close(),i)):i},getOverlay:function(){return g},getTrigger:function(){return b},getClosers:function(){return f},isOpened:function(){return h},getConf:function(){return e}}),a.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(b,c){a.isFunction(e[c])&&a(i).on(c,e[c]),i[c]=function(b){return b&&a(i).on(c,b),i}}),f=g.find(e.close||".close"),f.length||e.close||(f=a('<a class="close"></a>'),g.prepend(f)),f.click(function(a){i.close(a)}),e.load&&i.load()}a.tools=a.tools||{version:"@VERSION"},a.tools.overlay={addEffect:function(a,b,c){d[a]=[b,c]},conf:{close:null,closeOnClick:!0,closeOnEsc:!0,closeSpeed:"fast",effect:"default",fixed:!/msie/.test(navigator.userAgent.toLowerCase())||navigator.appVersion>6,left:"center",load:!1,mask:null,oneInstance:!0,speed:"normal",target:null,top:"10%"}};var c=[],d={};a.tools.overlay.addEffect("default",function(b,c){var d=this.getConf(),e=a(window);d.fixed||(b.top+=e.scrollTop(),b.left+=e.scrollLeft()),b.position=d.fixed?"fixed":"absolute",this.getOverlay().css(b).fadeIn(d.speed,c)},function(a){this.getOverlay().fadeOut(this.getConf().closeSpeed,a)}),a.fn.overlay=function(d){var e=this.data("overlay");return e?e:(a.isFunction(d)&&(d={onBeforeLoad:d}),d=a.extend(!0,{},a.tools.overlay.conf,d),this.each(function(){e=new b(a(this),d),c.push(e),a(this).data("overlay",e)}),d.api?e:this)}}(jQuery),function(a){function b(b,c){var d=a(c);return d.length<2?d:b.parent().find(c)}function c(c,e){var f=this,g=c.add(f),h=c.children(),i=0,j=e.vertical;if(d||(d=f),h.length>1&&(h=a(e.items,c)),e.size>1&&(e.circular=!1),a.extend(f,{getConf:function(){return e},getIndex:function(){return i},getSize:function(){return f.getItems().size()},getNaviButtons:function(){return n.add(o)},getRoot:function(){return c},getItemWrap:function(){return h},getItems:function(){return h.find(e.item).not("."+e.clonedClass)},move:function(a,b){return f.seekTo(i+a,b)},next:function(a){return f.move(e.size,a)},prev:function(a){return f.move(-e.size,a)},begin:function(a){return f.seekTo(0,a)},end:function(a){return f.seekTo(f.getSize()-1,a)},focus:function(){return d=f,f},addItem:function(b){return b=a(b),e.circular?(h.children().last().before(b),h.children().first().replaceWith(b.clone().addClass(e.clonedClass))):(h.append(b),o.removeClass("disabled")),g.trigger("onAddItem",[b]),f},seekTo:function(b,c,k){if(b.jquery||(b*=1),e.circular&&0===b&&i==-1&&0!==c)return f;if(!e.circular&&b<0||b>f.getSize()||b<-1)return f;var l=b;b.jquery?b=f.getItems().index(b):l=f.getItems().eq(b);var m=a.Event("onBeforeSeek");if(!k&&(g.trigger(m,[b,c]),m.isDefaultPrevented()||!l.length))return f;var n=j?{top:-l.position().top}:{left:-l.position().left};return i=b,d=f,void 0===c&&(c=e.speed),h.animate(n,c,e.easing,k||function(){g.trigger("onSeek",[b])}),f}}),a.each(["onBeforeSeek","onSeek","onAddItem"],function(b,c){a.isFunction(e[c])&&a(f).on(c,e[c]),f[c]=function(b){return b&&a(f).on(c,b),f}}),e.circular){var k=f.getItems().slice(-1).clone().prependTo(h),l=f.getItems().eq(1).clone().appendTo(h);k.add(l).addClass(e.clonedClass),f.onBeforeSeek(function(a,b,c){if(!a.isDefaultPrevented())return b==-1?(f.seekTo(k,c,function(){f.end(0)}),a.preventDefault()):void(b==f.getSize()&&f.seekTo(l,c,function(){f.begin(0)}))});var m=c.parents().add(c).filter(function(){if("none"===a(this).css("display"))return!0});m.length?(m.show(),f.seekTo(0,0,function(){}),m.hide()):f.seekTo(0,0,function(){})}var n=b(c,e.prev).click(function(a){a.stopPropagation(),f.prev()}),o=b(c,e.next).click(function(a){a.stopPropagation(),f.next()});if(e.circular||(f.onBeforeSeek(function(a,b){setTimeout(function(){a.isDefaultPrevented()||(n.toggleClass(e.disabledClass,b<=0),o.toggleClass(e.disabledClass,b>=f.getSize()-1))},1)}),e.initialIndex||n.addClass(e.disabledClass)),f.getSize()<2&&n.add(o).addClass(e.disabledClass),e.mousewheel&&a.fn.mousewheel&&c.mousewheel(function(a,b){if(e.mousewheel)return f.move(b<0?1:-1,e.wheelSpeed||50),!1}),e.touch){var p={};h[0].ontouchstart=function(a){var b=a.touches[0];p.x=b.clientX,p.y=b.clientY},h[0].ontouchmove=function(a){if(1==a.touches.length&&!h.is(":animated")){var b=a.touches[0],c=p.x-b.clientX,d=p.y-b.clientY;f[j&&d>0||!j&&c>0?"next":"prev"](),a.preventDefault()}}}e.keyboard&&a(document).on("keydown.scrollable",function(b){if(!(!e.keyboard||b.altKey||b.ctrlKey||b.metaKey||a(b.target).is(":input")||"static"!=e.keyboard&&d!=f)){var c=b.keyCode;return!j||38!=c&&40!=c?j||37!=c&&39!=c?void 0:(f.move(37==c?-1:1),b.preventDefault()):(f.move(38==c?-1:1),b.preventDefault())}}),e.initialIndex&&f.seekTo(e.initialIndex,0,function(){})}a.tools=a.tools||{version:"@VERSION"},a.tools.scrollable={conf:{activeClass:"active",circular:!1,clonedClass:"cloned",disabledClass:"disabled",easing:"swing",initialIndex:0,item:"> *",items:".items",keyboard:!0,mousewheel:!1,next:".next",prev:".prev",size:1,speed:400,vertical:!1,touch:!0,wheelSpeed:0}};var d;a.fn.scrollable=function(b){var d=this.data("scrollable");return d?d:(b=a.extend({},a.tools.scrollable.conf,b),this.each(function(){d=new c(a(this),b),a(this).data("scrollable",d)}),b.api?d:this)}}(jQuery),function(a){function b(b,c,d){var f,g=this,h=b.add(this),i=b.find(d.tabs),j=c.jquery?c:b.children(c);i.length||(i=b.children()),j.length||(j=b.parent().find(c)),j.length||(j=a(c)),a.extend(this,{click:function(c,j){var k=i.eq(c),l=!b.data("tabs");if("string"==typeof c&&c.replace("#","")&&(k=i.filter('[href*="'+c.replace("#","")+'"]'),c=Math.max(i.index(k),0)),d.rotate){var m=i.length-1;if(c<0)return g.click(m,j);if(c>m)return g.click(0,j)}if(!k.length){if(f>=0)return g;c=d.initialIndex,k=i.eq(c)}if(c===f)return g;if(j=j||a.Event(),j.type="onBeforeClick",h.trigger(j,[c]),!j.isDefaultPrevented()){var n=l?d.initialEffect&&d.effect||"default":d.effect;return e[n].call(g,c,function(){f=c,j.type="onClick",h.trigger(j,[c])}),i.removeClass(d.current),k.addClass(d.current),g}},getConf:function(){return d},getTabs:function(){return i},getPanes:function(){return j},getCurrentPane:function(){return j.eq(f)},getCurrentTab:function(){return i.eq(f)},getIndex:function(){return f},next:function(){return g.click(f+1)},prev:function(){return g.click(f-1)},destroy:function(){return i.off(d.event).removeClass(d.current),j.find('a[href^="#"]').off("click.T"),g}}),a.each("onBeforeClick,onClick".split(","),function(b,c){a.isFunction(d[c])&&a(g).on(c,d[c]),g[c]=function(b){return b&&a(g).on(c,b),g}}),d.history&&a.fn.history&&(a.tools.history.init(i),d.event="history"),i.each(function(b){a(this).on(d.event,function(a){return g.click(b,a),a.preventDefault()})}),j.find('a[href^="#"]').on("click.T",function(b){g.click(a(this).attr("href"),b)}),location.hash&&"a"==d.tabs&&b.find('[href="'+location.hash+'"]').length?g.click(location.hash):(0===d.initialIndex||d.initialIndex>0)&&g.click(d.initialIndex)}a.tools=a.tools||{version:"@VERSION"},a.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialEffect:!1,initialIndex:0,event:"click",rotate:!1,slideUpSpeed:400,slideDownSpeed:400,history:!1},addEffect:function(a,b){e[a]=b}};var c,d,e={"default":function(a,b){this.getPanes().hide().eq(a).show(),b.call()},fade:function(a,b){var c=this.getConf(),d=c.fadeOutSpeed,e=this.getPanes();d?e.fadeOut(d):e.hide(),e.eq(a).fadeIn(c.fadeInSpeed,b)},slide:function(a,b){var c=this.getConf();this.getPanes().slideUp(c.slideUpSpeed),this.getPanes().eq(a).slideDown(c.slideDownSpeed,b)},ajax:function(a,b){this.getPanes().eq(0).load(this.getTabs().eq(a).attr("href"),b)}};a.tools.tabs.addEffect("horizontal",function(b,e){if(!c){var f=this.getPanes().eq(b),g=this.getCurrentPane();d||(d=this.getPanes().eq(0).width()),c=!0,f.show(),g.animate({width:0},{step:function(a){f.css("width",d-a)},complete:function(){a(this).hide(),e.call(),c=!1}}),g.length||(e.call(),c=!1)}}),a.fn.tabs=function(c,d){var e=this.data("tabs");return e&&(e.destroy(),this.removeData("tabs")),a.isFunction(d)&&(d={onBeforeClick:d}),d=a.extend({},a.tools.tabs.conf,d),this.each(function(){e=new b(a(this),c,d),a(this).data("tabs",e)}),d.api?e:this}}(jQuery),function(a){function b(a){if(a){var b=d.contentWindow.document;b.open().close(),b.location.hash=a}}var c,d,e,f;a.tools=a.tools||{version:"@VERSION"},a.tools.history={init:function(g){f||(a.browser.msie&&a.browser.version<"8"?d||(d=a("<iframe/>").attr("src","javascript:false;").hide().get(0),a("body").append(d),setInterval(function(){var b=d.contentWindow.document,e=b.location.hash;c!==e&&a(window).trigger("hash",e)},100),b(location.hash||"#")):setInterval(function(){var b=location.hash;b!==c&&a(window).trigger("hash",b)},100),e=e?e.add(g):g,g.click(function(c){var e=a(this).attr("href");if(d&&b(e),"#"!=e.slice(0,1))return location.href="#"+e,c.preventDefault()}),f=!0)}},a(window).on("hash",function(b,d){d?e.filter(function(){var b=a(this).attr("href");return b==d||b==d.replace("#","")}).trigger("history",[d]):e.eq(0).trigger("history",[d]),c=d}),a.fn.history=function(b){return a.tools.history.init(this),this.on("history",b)}}(jQuery),function(a){function b(){if(/msie/.test(navigator.userAgent.toLowerCase())){var b=a(document).height(),c=a(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,b-c<20?c:b]}return[a(document).width(),a(document).height()]}function c(b){if(b)return b.call(a.mask)}a.tools=a.tools||{version:"@VERSION"};var d;d=a.tools.expose={conf:{maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",closeOnClick:!0,closeOnEsc:!0,zIndex:9998,opacity:.8,startOpacity:0,color:"#fff",onLoad:null,onClose:null}};var e,f,g,h,i;a.mask={load:function(j,k){if(g)return this;"string"==typeof j&&(j={color:j}),j=j||h,h=j=a.extend(a.extend({},d.conf),j),e=a("#"+j.maskId),e.length||(e=a("<div/>").attr("id",j.maskId),a("body").append(e));var l=b();return e.css({position:"absolute",top:0,left:0,width:l[0],height:l[1],display:"none",opacity:j.startOpacity,zIndex:j.zIndex}),j.color&&e.css("backgroundColor",j.color),c(j.onBeforeLoad)===!1?this:(j.closeOnEsc&&a(document).on("keydown.mask",function(b){27==b.keyCode&&a.mask.close(b)}),j.closeOnClick&&e.on("click.mask",function(b){a.mask.close(b)}),a(window).on("resize.mask",function(){a.mask.fit()}),k&&k.length&&(i=k.eq(0).css("zIndex"),a.each(k,function(){var b=a(this);/relative|absolute|fixed/i.test(b.css("position"))||b.css("position","relative")}),f=k.css({zIndex:Math.max(j.zIndex+1,"auto"==i?0:i)})),e.css({display:"block"}).fadeTo(j.loadSpeed,j.opacity,function(){a.mask.fit(),c(j.onLoad),g="full"}),g=!0,this)},close:function(){if(g){if(c(h.onBeforeClose)===!1)return this;e.fadeOut(h.closeSpeed,function(){f&&f.css({zIndex:i}),g=!1,c(h.onClose)}),a(document).off("keydown.mask"),e.off("click.mask"),a(window).off("resize.mask")}return this},fit:function(){if(g){var a=b();e.css({width:a[0],height:a[1]})}},getMask:function(){return e},isLoaded:function(a){return a?"full"==g:g},getConf:function(){return h},getExposed:function(){return f}},a.fn.mask=function(b){return a.mask.load(b),this},a.fn.expose=function(b){return a.mask.load(b,this),this}}(jQuery),function(a){function b(b,c,d){var e=d.relative?b.position().top:b.offset().top,f=d.relative?b.position().left:b.offset().left,g=d.position[0];e-=c.outerHeight()-d.offset[0],f+=b.outerWidth()+d.offset[1],/iPad/i.test(navigator.userAgent)&&(e-=a(window).scrollTop());var h=c.outerHeight()+b.outerHeight();"center"==g&&(e+=h/2),"bottom"==g&&(e+=h),g=d.position[1];var i=c.outerWidth()+b.outerWidth();return"center"==g&&(f-=i/2),"left"==g&&(f-=i),{top:e,left:f}}function c(c,e){var f,g,h=this,i=c.add(h),j=0,k=0,l=c.attr("title"),m=c.attr("data-tooltip"),n=d[e.effect],o=c.is(":input"),p=o&&c.is(":checkbox, :radio, select, :button, :submit"),q=c.attr("type"),r=e.events[q]||e.events[o?p?"widget":"input":"def"];if(!n)throw'Nonexistent effect "'+e.effect+'"';if(r=r.split(/,\s*/),2!=r.length)throw"Tooltip: bad events configuration for "+q;c.on(r[0],function(a){clearTimeout(j),e.predelay?k=setTimeout(function(){h.show(a)},e.predelay):h.show(a)}).on(r[1],function(a){clearTimeout(k),e.delay?j=setTimeout(function(){h.hide(a)},e.delay):h.hide(a)}),l&&e.cancelDefault&&(c.removeAttr("title"),c.data("title",l)),a.extend(h,{show:function(d){if(!f&&(m?f=a(m):e.tip?f=a(e.tip).eq(0):l?f=a(e.layout).addClass(e.tipClass).appendTo(document.body).hide().append(l):(f=c.find("."+e.tipClass),f.length||(f=c.next()),f.length||(f=c.parent().next())),!f.length))throw"Cannot find tooltip for "+c;if(h.isShown())return h;f.stop(!0,!0);var o=b(c,f,e);if(e.tip&&f.html(c.data("title")),d=a.Event(),d.type="onBeforeShow",i.trigger(d,[o]),d.isDefaultPrevented())return h;o=b(c,f,e),f.css({position:"absolute",top:o.top,left:o.left}),g=!0,n[0].call(h,function(){d.type="onShow",g="full",i.trigger(d)});var p=e.events.tooltip.split(/,\s*/);return f.data("__set")||(f.off(p[0]).on(p[0],function(){clearTimeout(j),clearTimeout(k)}),p[1]&&!c.is("input:not(:checkbox, :radio), textarea")&&f.off(p[1]).on(p[1],function(a){a.relatedTarget!=c[0]&&c.trigger(r[1].split(" ")[0])}),e.tip||f.data("__set",!0)),h},hide:function(b){return f&&h.isShown()?(b=a.Event(),b.type="onBeforeHide",i.trigger(b),b.isDefaultPrevented()?void 0:(g=!1,d[e.effect][1].call(h,function(){b.type="onHide",i.trigger(b)}),h)):h},isShown:function(a){return a?"full"==g:g},getConf:function(){return e},getTip:function(){return f},getTrigger:function(){return c}}),a.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(b,c){a.isFunction(e[c])&&a(h).on(c,e[c]),h[c]=function(b){return b&&a(h).on(c,b),h}})}a.tools=a.tools||{version:"@VERSION"},a.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,fadeIE:!1,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(a,b,c){d[a]=[b,c]}};var d={toggle:[function(a){var b=this.getConf(),c=this.getTip(),d=b.opacity;d<1&&c.css({opacity:d}),c.show(),a.call()},function(a){this.getTip().hide(),a.call()}],fade:[function(a){var b=this.getConf();!/msie/.test(navigator.userAgent.toLowerCase())||b.fadeIE?this.getTip().fadeTo(b.fadeInSpeed,b.opacity,a):(this.getTip().show(),a())},function(a){var b=this.getConf();!/msie/.test(navigator.userAgent.toLowerCase())||b.fadeIE?this.getTip().fadeOut(b.fadeOutSpeed,a):(this.getTip().hide(),a())}]};a.fn.tooltip=function(b){var d=this.data("tooltip");return d?d:(b=a.extend(!0,{},a.tools.tooltip.conf,b),"string"==typeof b.position&&(b.position=b.position.split(/,?\s/)),this.each(function(){d=new c(a(this),b),a(this).data("tooltip",d)}),b.api?d:this)}}(jQuery)}.apply(a,arguments)})}(this),function(a){define("resource-plone-app-jquerytools-dateinput-js",["jquery"],function(){return function(){!function(a,b){function c(a,b){return new Date(a,b+1,0).getDate()}function d(a,b){for(a=""+a,b=b||2;a.length<b;)a="0"+a;return a}function e(a,b,c,e){var f=b.getDate(),g=b.getDay(),h=b.getMonth(),i=b.getFullYear(),j={d:f,dd:d(f),ddd:n[e].shortDays[g],dddd:n[e].days[g],m:h+1,mm:d(h+1),mmm:n[e].shortMonths[h],mmmm:n[e].months[h],yy:String(i).slice(2),yyyy:i},k=l[a](c,b,j,e);return o.html(k).html()}function f(a){return parseInt(a,10)}function g(a,b){return a.getFullYear()===b.getFullYear()&&a.getMonth()==b.getMonth()&&a.getDate()==b.getDate()}function h(a){if(a!==b){if(a.constructor==Date)return a;if("string"==typeof a){var c=a.split("-");if(3==c.length)return new Date(f(c[0]),f(c[1])-1,f(c[2]));if(!/^-?\d+$/.test(a))return;a=f(a)}var d=new Date;return d.setDate(d.getDate()+a),d}}function i(d,i){function j(b,c,f){return d.attr("readonly")?void w.hide(f):(D=b,r=b.getFullYear(),s=b.getMonth(),t=b.getDate(),f||(f=a.Event("api")),"click"!=f.type||/msie/.test(navigator.userAgent.toLowerCase())||d.focus(),f.type="beforeChange",I.trigger(f,[b]),void(f.isDefaultPrevented()||(d.val(e(c.formatter,b,c.format,c.lang)),f.type="change",f.target=d[0],I.trigger(f),d.data("date",b),w.hide(f))))}function l(b){b.type="onShow",I.trigger(b),a(document).on("keydown.d",function(b){if(b.ctrlKey)return!0;var c=b.keyCode;if(8==c||46==c)return d.val(""),w.hide(b);if(27==c||9==c)return w.hide(b);if(a(m).index(c)>=0){if(!u)return w.show(b),b.preventDefault();var e=a("#"+z.weeks+" a"),f=a("."+z.focus),g=e.index(f);return f.removeClass(z.focus),74==c||40==c?g+=7:75==c||38==c?g-=7:76==c||39==c?g+=1:(72==c||37==c)&&(g-=1),g>41?(w.addMonth(),f=a("#"+z.weeks+" a:eq("+(g-42)+")")):0>g?(w.addMonth(-1),f=a("#"+z.weeks+" a:eq("+(g+42)+")")):f=e.eq(g),f.addClass(z.focus),b.preventDefault()}return 34==c?w.addMonth():33==c?w.addMonth(-1):36==c?w.today():(13==c&&(a(b.target).is("select")||a("."+z.focus).click()),a([16,17,18,9]).index(c)>=0)}),a(document).on("click.d",function(b){var c=b.target;c.id==z.root||a(c).parents("#"+z.root).length||c==d[0]||o&&c==o[0]||w.hide(b)})}var o,p,q,r,s,t,u,v,w=this,x=new Date,y=x.getFullYear(),z=i.css,A=n[i.lang],B=a("#"+z.root),C=B.find("#"+z.title),D=d.attr("data-value")||i.value||d.val(),E=d.attr("min")||i.min,F=d.attr("max")||i.max;if(0===E&&(E="0"),D=h(D)||x,E=h(E||new Date(y+i.yearRange[0],1,1)),F=h(F||new Date(y+i.yearRange[1]+1,1,(-1))),!A)throw"Dateinput: invalid language: "+i.lang;if("date"==d.attr("type")){var v=d.clone(),G=v.wrap("<div/>").parent().html(),H=a(G.replace(/type/i,"type=text data-orig-type"));i.value&&H.val(i.value),d.replaceWith(H),d=H}d.addClass(z.input);var I=d.add(w);if(!B.length){if(B=a("<div><div><a/><div/><a/></div><div><div/><div/></div></div>").hide().css({position:"absolute"}).attr("id",z.root),B.children().eq(0).attr("id",z.head).end().eq(1).attr("id",z.body).children().eq(0).attr("id",z.days).end().eq(1).attr("id",z.weeks).end().end().end().find("a").eq(0).attr("id",z.prev).end().eq(1).attr("id",z.next),C=B.find("#"+z.head).find("div").attr("id",z.title),i.selectors){var J=a("<select/>").attr("id",z.month),K=a("<select/>").attr("id",z.year);C.html(J.add(K))}for(var L=B.find("#"+z.days),M=0;7>M;M++)L.append(a("<span/>").text(A.shortDays[(M+i.firstDay)%7]));a("body").append(B)}i.trigger&&(o=a("<a/>").attr("href","#").addClass(z.trigger).click(function(a){return i.toggle?w.toggle():w.show(),a.preventDefault()}).insertAfter(d));var N=B.find("#"+z.weeks);K=B.find("#"+z.year),J=B.find("#"+z.month),a.extend(w,{show:function(b){if(!d.attr("disabled")&&!u&&(b=b||a.Event(),b.type="onBeforeShow",I.trigger(b),!b.isDefaultPrevented())){a.each(k,function(){this.hide()}),u=!0,J.off("change").change(function(){w.setValue(f(K.val()),f(a(this).val()))}),K.off("change").change(function(){w.setValue(f(a(this).val()),f(J.val()))}),p=B.find("#"+z.prev).off("click").click(function(){return p.hasClass(z.disabled)||w.addMonth(-1),!1}),q=B.find("#"+z.next).off("click").click(function(){return q.hasClass(z.disabled)||w.addMonth(),!1}),w.setValue(D);var c=d.offset();return/iPad/i.test(navigator.userAgent)&&(c.top-=a(window).scrollTop()),B.css({top:c.top+d.outerHeight(!0)+i.offset[0],left:c.left+i.offset[1]}),i.speed?B.show(i.speed,function(){l(b)}):(B.show(),l(b)),w}},setValue:function(d,e,k){var l=f(e)>=-1?new Date(f(d),f(e),f(k==b||isNaN(k)?1:k)):d||D;if(E>l?l=E:l>F&&(l=F),"string"==typeof d&&(l=h(d)),d=l.getFullYear(),e=l.getMonth(),k=l.getDate(),-1==e?(e=11,d--):12==e&&(e=0,d++),!u)return j(l,i),w;s=e,r=d,t=k;var m,n=new Date(d,e,1-i.firstDay),o=n.getDay(),v=c(d,e),y=c(d,e-1);if(i.selectors){J.empty(),a.each(A.months,function(b,c){E<new Date(d,b+1,1)&&F>new Date(d,b,0)&&J.append(a("<option/>").html(c).attr("value",b))}),K.empty();for(var B=x.getFullYear(),G=B+i.yearRange[0];G<B+i.yearRange[1];G++)E<new Date(G+1,0,1)&&F>new Date(G,0,0)&&K.append(a("<option/>").text(G));J.val(e),K.val(d)}else C.html(A.months[e]+" "+d);N.empty(),p.add(q).removeClass(z.disabled);for(var H,I,L=o?0:-7;(o?42:35)>L;L++)H=a("<a/>"),L%7===0&&(m=a("<div/>").addClass(z.week),N.append(m)),o>L?(H.addClass(z.off),I=y-o+L+1,l=new Date(d,e-1,I)):L>=o+v?(H.addClass(z.off),I=L-v-o+1,l=new Date(d,e+1,I)):(I=L-o+1,l=new Date(d,e,I),g(D,l)?H.attr("id",z.current).addClass(z.focus):g(x,l)&&H.attr("id",z.today)),E&&E>l&&H.add(p).addClass(z.disabled),F&&l>F&&H.add(q).addClass(z.disabled),H.attr("href","#"+I).text(I).data("date",l),m.append(H);return N.find("a").click(function(b){var c=a(this);return c.hasClass(z.disabled)||(a("#"+z.current).removeAttr("id"),c.attr("id",z.current),j(c.data("date"),i,b)),!1}),z.sunday&&N.find("."+z.week).each(function(){var b=i.firstDay?7-i.firstDay:0;a(this).children().slice(b,b+1).addClass(z.sunday)}),w},setMin:function(a,b){return E=h(a),b&&E>D&&w.setValue(E),w},setMax:function(a,b){return F=h(a),b&&D>F&&w.setValue(F),w},today:function(){return w.setValue(x)},addDay:function(a){return this.setValue(r,s,t+(a||1))},addMonth:function(a){var b=s+(a||1),d=c(r,b),e=d>=t?t:d;return this.setValue(r,b,e)},addYear:function(a){return this.setValue(r+(a||1),s,t)},destroy:function(){d.add(document).off("click.d keydown.d"),B.add(o).remove(),d.removeData("dateinput").removeClass(z.input),v&&d.replaceWith(v)},hide:function(b){if(u){if(b=a.Event(),b.type="onHide",I.trigger(b),b.isDefaultPrevented())return;a(document).off("click.d keydown.d"),B.hide(),u=!1}return w},toggle:function(){return w.isOpen()?w.hide():w.show()},getConf:function(){return i},getInput:function(){return d},getCalendar:function(){return B},getValue:function(a){return a?e(i.formatter,D,a,i.lang):D},isOpen:function(){return u}}),a.each(["onBeforeShow","onShow","change","onHide"],function(b,c){a.isFunction(i[c])&&a(w).on(c,i[c]),w[c]=function(b){return b&&a(w).on(c,b),w}}),i.editable||d.on("focus.d click.d",w.show).keydown(function(b){var c=b.keyCode;return!u&&a(m).index(c)>=0?(w.show(b),b.preventDefault()):((8==c||46==c)&&d.val(""),!!(b.shiftKey||b.ctrlKey||b.altKey||9==c)||b.preventDefault())}),h(d.val())&&j(D,i)}a.tools=a.tools||{version:"@VERSION"};var j,k=[],l={},m=[75,76,38,39,74,72,40,37],n={};j=a.tools.dateinput={conf:{format:"mm/dd/yy",formatter:"default",selectors:!1,yearRange:[-5,5],lang:"en",offset:[0,0],speed:0,firstDay:0,min:b,max:b,trigger:0,toggle:0,editable:0,css:{prefix:"cal",input:"date",root:0,head:0,title:0,prev:0,next:0,month:0,year:0,days:0,body:0,weeks:0,today:0,current:0,week:0,off:0,sunday:0,focus:0,disabled:0,trigger:0}},addFormatter:function(a,b){l[a]=b},localize:function(b,c){a.each(c,function(a,b){c[a]=b.split(",")}),n[b]=c}},j.localize("en",{months:"January,February,March,April,May,June,July,August,September,October,November,December",shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",days:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",shortDays:"Sun,Mon,Tue,Wed,Thu,Fri,Sat"});var o=a("<a/>");j.addFormatter("default",function(a,b,c){return a.replace(/d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*'/g,function(a){return a in c?c[a]:a})}),j.addFormatter("prefixed",function(a,b,c){return a.replace(/%(d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*')/g,function(a,b){return b in c?c[b]:a})}),a.expr[":"].date=function(b){var c=b.getAttribute("type");return c&&"date"==c||!!a(b).data("dateinput")},a.fn.dateinput=function(b){if(this.data("dateinput"))return this;b=a.extend(!0,{},j.conf,b),a.each(b.css,function(a,c){c||"prefix"==a||(b.css[a]=(b.css.prefix||"")+(c||a))});var c;return this.each(function(){var d=new i(a(this),b);k.push(d);var e=d.getInput().data("dateinput",d);c=c?c.add(e):e}),c?c:this}}(jQuery)}.apply(a,arguments)})}(this),function(a){define("jquery.tmpl",["jquery"],function(){return function(){!function(a,b){function c(b,c,d,e){var f={data:e||(c?c.data:{}),_wrap:c?c._wrap:null,tmpl:null,parent:c||null,nodes:[],calls:k,nest:l,wrap:m,html:n,update:o};return b&&a.extend(f,b,{nodes:[],parent:c}),d&&(f.tmpl=d,f._ctnt=f._ctnt||f.tmpl(a,f),f.key=++w,(y.length?u:t)[w]=f),f}function d(b,c,f){var g,h=f?a.map(f,function(a){return"string"==typeof a?b.key?a.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+r+'="'+b.key+'" $2'):a:d(a,b,a._ctnt)}):b;return c?h:(h=h.join(""),h.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(b,c,d,f){g=a(d).get(),j(g),c&&(g=e(c).concat(g)),f&&(g=g.concat(e(f)))}),g?g:e(h))}function e(b){var c=document.createElement("div");return c.innerHTML=b,a.makeArray(c.childNodes)}function f(b){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+a.trim(b).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(b,c,d,e,f,g,i){var j,k,l,m=a.tmpl.tag[d];if(!m)throw"Template command not found: "+d;return j=m._default||[],g&&!/\w$/.test(f)&&(f+=g,g=""),f?(f=h(f),i=i?","+h(i)+")":g?")":"",k=g?f.indexOf(".")>-1?f+g:"("+f+").call($item"+i:f,l=g?k:"(typeof("+f+")==='function'?("+f+").call($item):("+f+"))"):l=k=j.$1||"null",e=h(e),"');"+m[c?"close":"open"].split("$notnull_1").join(f?"typeof("+f+")!=='undefined' && ("+f+")!=null":"true").split("$1a").join(l).split("$1").join(k).split("$2").join(e?e.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(a,b,c,d){return d=d?","+d+")":c?")":"",d?"("+b+").call($item"+d:a}):j.$2||"")+"_.push('"})+"');}return _;")}function g(b,c){b._wrap=d(b,!0,a.isArray(c)?c:[s.test(c)?c:a(c).html()]).join("")}function h(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function i(a){var b=document.createElement("div");return b.appendChild(a.cloneNode(!0)),b.innerHTML}function j(b){function d(b){function d(a){a+=j,g=k[a]=k[a]||c(g,t[g.parent.key+j]||g.parent,null,!0)}var e,f,g,h,i=b;if(h=b.getAttribute(r)){for(;i.parentNode&&1===(i=i.parentNode).nodeType&&!(e=i.getAttribute(r)););e!==h&&(i=i.parentNode?11===i.nodeType?0:i.getAttribute(r)||0:0,(g=t[h])||(g=u[h],g=c(g,t[i]||u[i],null,!0),g.key=++w,t[w]=g),x&&d(h)),b.removeAttribute(r)}else x&&(g=a.data(b,"tmplItem"))&&(d(g.key),t[g.key]=g,i=a.data(b.parentNode,"tmplItem"),i=i?i.key:0);if(g){for(f=g;f&&f.key!=i;)f.nodes.push(b),f=f.parent;delete g._ctnt,delete g._wrap,a.data(b,"tmplItem",g)}}var e,f,g,h,i,j="_"+x,k={};for(g=0,h=b.length;g<h;g++)if(1===(e=b[g]).nodeType){for(f=e.getElementsByTagName("*"),
i=f.length-1;i>=0;i--)d(f[i]);d(e)}}function k(a,b,c,d){return a?void y.push({_:a,tmpl:b,item:this,data:c,options:d}):y.pop()}function l(b,c,d){return a.tmpl(a.template(b),c,d,this)}function m(b,c){var d=b.options||{};return d.wrapped=c,a.tmpl(a.template(b.tmpl),b.data,d,b.item)}function n(b,c){var d=this._wrap;return a.map(a(a.isArray(d)?d.join(""):d).filter(b||"*"),function(a){return c?a.innerText||a.textContent:a.outerHTML||i(a)})}function o(){var b=this.nodes;a.tmpl(null,null,null,this).insertBefore(b[0]),a(b).remove()}var p,q=a.fn.domManip,r="_tmplitem",s=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,t={},u={},v={key:0,data:{}},w=0,x=0,y=[];a.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,c){a.fn[b]=function(d){var e,f,g,h,i=[],j=a(d),k=1===this.length&&this[0].parentNode;if(p=t||{},k&&11===k.nodeType&&1===k.childNodes.length&&1===j.length)j[c](this[0]),i=this;else{for(f=0,g=j.length;f<g;f++)x=f,e=(f>0?this.clone(!0):this).get(),a.fn[c].apply(a(j[f]),e),i=i.concat(e);x=0,i=this.pushStack(i,b,j.selector)}return h=p,p=null,a.tmpl.complete(h),i}}),a.fn.extend({tmpl:function(b,c,d){return a.tmpl(this[0],b,c,d)},tmplItem:function(){return a.tmplItem(this[0])},template:function(b){return a.template(b,this[0])},domManip:function(b,c,d,e){if(b[0]&&b[0].nodeType){for(var f,g=a.makeArray(arguments),h=b.length,i=0;i<h&&!(f=a.data(b[i++],"tmplItem")););h>1&&(g[0]=[a.makeArray(b)]),f&&x&&(g[2]=function(b){a.tmpl.afterManip(this,b,d)}),q.apply(this,g)}else q.apply(this,arguments);return x=0,p||a.tmpl.complete(t),this}}),a.extend({tmpl:function(b,e,f,h){var i,j=!h;if(j)h=v,b=a.template[b]||a.template(null,b),u={};else if(!b)return b=h.tmpl,t[h.key]=h,h.nodes=[],h.wrapped&&g(h,h.wrapped),a(d(h,null,h.tmpl(a,h)));return b?("function"==typeof e&&(e=e.call(h||{})),f&&f.wrapped&&g(f,f.wrapped),i=a.isArray(e)?a.map(e,function(a){return a?c(f,h,b,a):null}):[c(f,h,b,e)],j?a(d(h,null,i)):i):[]},tmplItem:function(b){var c;for(b instanceof a&&(b=b[0]);b&&1===b.nodeType&&!(c=a.data(b,"tmplItem"))&&(b=b.parentNode););return c||v},template:function(b,c){return c?("string"==typeof c?c=f(c):c instanceof a&&(c=c[0]||{}),c.nodeType&&(c=a.data(c,"tmpl")||a.data(c,"tmpl",f(c.innerHTML))),"string"==typeof b?a.template[b]=c:c):b?"string"!=typeof b?a.template(null,b):a.template[b]||a.template(null,s.test(b)?b:a(b)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),a.extend(a.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(a){t={}},afterManip:function(b,c,d){var e=11===c.nodeType?a.makeArray(c.childNodes):1===c.nodeType?[c]:[];d.call(b,c),j(e),x++}})}(jQuery)}.apply(a,arguments)})}(this),function(a){define("jquery.recurrenceinput",["jquery","resource-plone-app-jquerytools-js","resource-plone-app-jquerytools-dateinput-js","jquery.tmpl"],function(){return function(){!function(a){function b(a,b){for(a=a.toString(),b=b||2;a.length<b;)a="0"+a;return a}function c(a,c,d){var e=a.getDate(),f=a.getDay(),g=a.getMonth(),h=a.getFullYear(),i={d:e,dd:b(e),ddd:d.i18n.shortWeekdays[f],dddd:d.i18n.weekdays[f],m:g+1,mm:b(g+1),mmm:d.i18n.shortMonths[g],mmmm:d.i18n.months[g],yy:String(h).slice(2),yyyy:h},j=c.replace(o,function(a){return i.hasOwnProperty(a)?i[a]:a.slice(1,a.length-1)});return j}function d(b,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=b.find("select[name=rirtemplate]").val(),v=d.rtemplate[u],w=v.rrule,x=d.i18n.rtemplate[u];for(j=0;j<v.fields.length;j++)switch(f=b.find("#"+v.fields[j]),f.attr("id")){case"ridailyinterval":q=f.find("input[name=ridailyinterval]").val(),"1"!==q&&(w+=";INTERVAL="+q),x=q+" "+d.i18n.dailyInterval2;break;case"riweeklyinterval":q=f.find("input[name=riweeklyinterval]").val(),"1"!==q&&(w+=";INTERVAL="+q),x=q+" "+d.i18n.weeklyInterval2;break;case"riweeklyweekdays":for(h="",i="",k=0;k<d.weekdays.length;k++)g=f.find("input[name=riweeklyweekdays"+d.weekdays[k]+"]"),g.is(":checked")&&(h&&(h+=",",i+=", "),h+=d.weekdays[k],i+=d.i18n.weekdays[k]);h&&(w+=";BYDAY="+h,x+=" "+d.i18n.weeklyWeekdaysHuman+" "+i);break;case"rimonthlyinterval":q=f.find("input[name=rimonthlyinterval]").val(),"1"!==q&&(w+=";INTERVAL="+q),x=q+" "+d.i18n.monthlyInterval2;break;case"rimonthlyoptions":var y=a("input[name=rimonthlytype]:checked",b).val();switch(y){case"DAYOFMONTH":n=a("select[name=rimonthlydayofmonthday]",b).val(),w+=";BYMONTHDAY="+n,x+=", "+d.i18n.monthlyDayOfMonth1Human+" "+n+" "+d.i18n.monthlyDayOfMonth2;break;case"WEEKDAYOFMONTH":l=a("select[name=rimonthlyweekdayofmonthindex]",b).val(),n=a("select[name=rimonthlyweekdayofmonth]",b).val(),a.inArray(n,["MO","TU","WE","TH","FR","SA","SU"])>-1&&(w+=";BYDAY="+l+n,x+=", "+d.i18n.monthlyWeekdayOfMonth1Human+" ",x+=" "+d.i18n.orderIndexes[a.inArray(l,d.orderIndexes)],x+=" "+d.i18n.monthlyWeekdayOfMonth2,x+=" "+d.i18n.weekdays[a.inArray(n,d.weekdays)],x+=" "+d.i18n.monthlyDayOfMonth2)}break;case"riyearlyinterval":q=f.find("input[name=riyearlyinterval]").val(),"1"!==q&&(w+=";INTERVAL="+q),x=q+" "+d.i18n.yearlyInterval2;break;case"riyearlyoptions":switch(r=a("input[name=riyearlyType]:checked",b).val()){case"DAYOFMONTH":o=a("select[name=riyearlydayofmonthmonth]",b).val(),n=a("select[name=riyearlydayofmonthday]",b).val(),w+=";BYMONTH="+o,w+=";BYMONTHDAY="+n,x+=", "+d.i18n.yearlyDayOfMonth1Human+" "+d.i18n.months[o-1]+" "+n;break;case"WEEKDAYOFMONTH":l=a("select[name=riyearlyweekdayofmonthindex]",b).val(),n=a("select[name=riyearlyweekdayofmonthday]",b).val(),o=a("select[name=riyearlyweekdayofmonthmonth]",b).val(),w+=";BYMONTH="+o,a.inArray(n,["MO","TU","WE","TH","FR","SA","SU"])>-1&&(w+=";BYDAY="+l+n,x+=", "+d.i18n.yearlyWeekdayOfMonth1Human,x+=" "+d.i18n.orderIndexes[a.inArray(l,d.orderIndexes)],x+=" "+d.i18n.yearlyWeekdayOfMonth2,x+=" "+d.i18n.weekdays[a.inArray(n,d.weekdays)],x+=" "+d.i18n.yearlyWeekdayOfMonth3,x+=" "+d.i18n.months[o-1],x+=" "+d.i18n.yearlyWeekdayOfMonth4)}break;case"rirangeoptions":var z=b.find("input[name=rirangetype]:checked").val();switch(z){case"BYOCCURRENCES":s=b.find("input[name=rirangebyoccurrencesvalue]").val(),w+=";COUNT="+s,x+=", "+d.i18n.rangeByOccurrences1Human,x+=" "+s,x+=" "+d.i18n.rangeByOccurrences2;break;case"BYENDDATE":f=b.find("input[name=rirangebyenddatecalendar]"),t=f.data("dateinput").getValue("yyyymmdd"),w+=";UNTIL="+t+"T000000",e===!0&&(w+="Z"),x+=", "+d.i18n.rangeByEndDateHuman,x+=" "+f.data("dateinput").getValue(d.i18n.longDateFormat)}}if(void 0!==b.ical.RDATE&&b.ical.RDATE.length>0){for(b.ical.RDATE.sort(),m=[],j=0;j<b.ical.RDATE.length;j++)""!==b.ical.RDATE[j]&&(p=parseInt(b.ical.RDATE[j].substring(0,4),10),o=parseInt(b.ical.RDATE[j].substring(4,6),10)-1,n=parseInt(b.ical.RDATE[j].substring(6,8),10),m.push(c(new Date(p,o,n),d.i18n.longDateFormat,d)));0!==m.length&&(x=x+d.i18n.including+" "+m.join("; "))}if(void 0!==b.ical.EXDATE&&b.ical.EXDATE.length>0){for(b.ical.EXDATE.sort(),m=[],j=0;j<b.ical.EXDATE.length;j++)""!==b.ical.EXDATE[j]&&(p=parseInt(b.ical.EXDATE[j].substring(0,4),10),o=parseInt(b.ical.EXDATE[j].substring(4,6),10)-1,n=parseInt(b.ical.EXDATE[j].substring(6,8),10),m.push(c(new Date(p,o,n),d.i18n.longDateFormat,d)));0!==m.length&&(x=x+d.i18n.except+" "+m.join("; "))}return w="RRULE:"+w,void 0!==b.ical.EXDATE&&""!==b.ical.EXDATE.join()&&(m=a.map(b.ical.EXDATE,function(a){return 8===a.length&&(a+="T000000"),e===!0&&(a+="Z"),a}),w=w+"\nEXDATE:"+m),void 0!==b.ical.RDATE&&""!==b.ical.RDATE.join()&&(m=a.map(b.ical.RDATE,function(a){return 8===a.length&&(a+="T000000"),e===!0&&(a+="Z"),a}),w=w+"\nRDATE:"+m),{result:w,description:x}}function e(a){var b={},c=a.indexOf(":"),d=a.substring(0,c);return b.value=a.substring(c+1),d.indexOf(";")!==-1?(c=d.indexOf(";"),b.parameters=d.substring(c+1),b.property=d.substring(0,c)):(b.parameters=null,b.property=d),b}function f(a){var b,c=[],d=a.split(",");for(b in d)d.hasOwnProperty(b)&&(d[b].indexOf("Z")!==-1?c.push(d[b].substring(0,15)):c.push(d[b]));return c}function g(a){var b,c=[],d={},g=null;for(c=a.split("\n"),c.reverse();;){if(c.length>0){if(b=c.pop()," "===b.charAt(0)||"\t"===b.charAt(0)){g+=b;continue}}else b="";if(null!==g&&(g=e(g),"RDATE"===g.property||"EXDATE"===g.property?d[g.property]=f(g.value):d[g.property]=g.value),g=b,""===g)break}return d}function h(b,c,d,e){var f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=[];if(b.ical=g(d),void 0===b.ical.RRULE){if(C.push(c.i18n.noRule),!e)return-1}else{h=/INTERVAL=([0-9]+);?/.exec(b.ical.RRULE),s=h?h[1]:"1",h=/BYDAY=([^;]+);?/.exec(b.ical.RRULE),t=h?h[1]:"",h=/BYMONTHDAY=([^;]+);?/.exec(b.ical.RRULE),v=h?h[1].split(","):null,h=/BYMONTH=([^;]+);?/.exec(b.ical.RRULE),u=h?h[1].split(","):null,h=/COUNT=([0-9]+);?/.exec(b.ical.RRULE),w=h?h[1]:null,h=/UNTIL=([0-9T]+);?/.exec(b.ical.RRULE),x=h?h[1]:null,h=/BYSETPOS=([^;]+);?/.exec(b.ical.RRULE),h&&C.push(c.i18n.bysetpos),i="",j=null;for(f in c.rtemplate)c.rtemplate.hasOwnProperty(f)&&(k=c.rtemplate[f],0===b.ical.RRULE.indexOf(k.rrule)&&b.ical.RRULE.length>i.length&&(i=b.ical.RRULE,j=f));if(i)k=c.rtemplate[j],o=b.find("select[name=rirtemplate]").val(j);else{for(k in c.rtemplate)if(c.rtemplate.hasOwnProperty(k)){k=c.rtemplate[k];break}C.push(c.i18n.noTemplateMatch)}for(f=0;f<k.fields.length;f++)switch(q=b.find("#"+k.fields[f]),q.attr("id")){case"ridailyinterval":q.find("input[name=ridailyinterval]").val(s);break;case"riweeklyinterval":q.find("input[name=riweeklyinterval]").val(s);break;case"riweeklyweekdays":for(t=t.split(","),l=0;l<c.weekdays.length;l++)y=c.weekdays[l],m=q.find("input[name=riweeklyweekdays"+y+"]"),m.attr("checked",a.inArray(y,t)!==-1);break;case"rimonthlyinterval":q.find("input[name=rimonthlyinterval]").val(s);break;case"rimonthlyoptions":var D="DAYOFMONTH";for(v&&(D="DAYOFMONTH",v.length>1&&(C.push(c.i18n.multipleDayOfMonth),v=v[0]),q.find("select[name=rimonthlydayofmonthday]").val(v)),t&&(D="WEEKDAYOFMONTH",t.indexOf(",")!==-1&&(C.push(c.i18n.multipleDayOfMonth),t=t.split(",")[0]),n=t.slice(0,-2),"+"!==n.charAt(0)&&"-"!==n.charAt(0)&&(n="+"+n),B=t.slice(-2),q.find("select[name=rimonthlyweekdayofmonthindex]").val(n),q.find("select[name=rimonthlyweekdayofmonth]").val(B)),p=q.find("input[name=rimonthlytype]"),n=0;n<p.length;n++)r=p[n],a(r).attr("checked",r.value===D);break;case"riyearlyinterval":q.find("input[name=riyearlyinterval]").val(s);break;case"riyearlyoptions":var E="DAYOFMONTH";for(v&&(E="DAYOFMONTH",v.length>1&&(C.push(c.i18n.multipleDayOfMonth),v=v[0]),q.find("select[name=riyearlydayofmonthmonth]").val(u),q.find("select[name=riyearlydayofmonthday]").val(v)),t&&(E="WEEKDAYOFMONTH",t.indexOf(",")!==-1&&(C.push(c.i18n.multipleDayOfMonth),t=t.split(",")[0]),n=t.slice(0,-2),"+"!==n.charAt(0)&&"-"!==n.charAt(0)&&(n="+"+n),B=t.slice(-2),q.find("select[name=riyearlyweekdayofmonthindex]").val(n),q.find("select[name=riyearlyweekdayofmonthday]").val(B),q.find("select[name=riyearlyweekdayofmonthmonth]").val(u)),p=q.find("input[name=riyearlyType]"),n=0;n<p.length;n++)r=p[n],a(r).attr("checked",r.value===E);break;case"rirangeoptions":var F="NOENDDATE";for(w&&(F="BYOCCURRENCES",q.find("input[name=rirangebyoccurrencesvalue]").val(w)),x&&(F="BYENDDATE",m=q.find("input[name=rirangebyenddatecalendar]"),A=x.slice(0,4),z=x.slice(4,6),z=parseInt(z,10)-1,y=x.slice(6,8),m.data("dateinput").setValue(new Date(A,z,y))),p=q.find("input[name=rirangetype]"),n=0;n<p.length;n++)r=p[n],a(r).attr("checked",r.value===F)}}var G=b.find("#messagearea");return 0!==C.length?(G.text(c.i18n.unsupportedFeatures+" "+C.join("; ")),G.show(),1):(G.text(""),G.hide(),0)}function i(b,e){function f(a){var c;y.find(".rifield").hide();var d=a.val();if(d){var e=b.rtemplate[d];for(c=0;c<e.fields.length;c++)y.find("#"+e.fields[c]).show()}}function g(b){b.preventDefault(),void 0===y.ical.EXDATE&&(y.ical.EXDATE=[]),y.ical.EXDATE.push(this.attributes.date.value);var c=a(this);c.attr("class","exdate"),c.parent().parent().addClass("exdate"),c.unbind(b),c.click(i)}function i(b){b.preventDefault(),y.ical.EXDATE.splice(a.inArray(this.attributes.date.value,y.ical.EXDATE),1);var c=a(this);c.attr("class","rrule"),c.parent().parent().removeClass("exdate"),c.unbind(b),c.click(g)}function j(b){b.preventDefault(),y.ical.RDATE.splice(a.inArray(this.attributes.date.value,y.ical.RDATE),1),a(this).parent().parent().hide("slow",function(){a(this).remove()})}function l(c){c.preventDefault();var d=y.find(".riaddoccurrence input#adddate").data("dateinput"),e=d.getValue("yyyymmddT000000");void 0===y.ical.RDATE&&(y.ical.RDATE=[]);var f=y.find(".riaddoccurrence div.errorarea");if(f.text(""),f.hide(),a.inArray(e,y.ical.RDATE)===-1){y.ical.RDATE.push(e);var g=['<div class="occurrence rdate" style="display: none;">','<span class="rdate">',d.getValue(b.i18n.longDateFormat),'<span class="rlabel">'+b.i18n.additionalDate+"</span>","</span>",'<span class="action">','<a date="'+e+'" href="#" class="rdate" >',"Include","</a>","</span>","</div>"].join("\n");y.find("div.rioccurrences").prepend(g),a(y.find("div.rioccurrences div")[0]).slideDown(),a(y.find("div.rioccurrences .action a.rdate")[0]).click(j)}else f.text(b.i18n.alreadyAdded).show()}function m(d,e,f,h){var k,l;k=h?z:y,l=k.find(".rioccurrences"),l.hide();var n,o,p;n=d.getFullYear(),o=d.getMonth()+1,p=d.getDate();var q={year:n,month:o,day:p,rrule:e,format:b.i18n.longDateFormat,start:f},r={url:b.ajaxURL,async:!1,type:"post",dataType:"json",contentType:b.ajaxContentType,cache:!1,data:q,success:function(f,k,n){var o,p;p=h?z:y,f.readOnly=h,f.i18n=b.i18n;var q,r,s,t,u,v;for(v in f.occurrences)f.occurrences.hasOwnProperty(v)&&(q=f.occurrences[v],r=q.date,s=parseInt(r.substring(0,4),10),t=parseInt(r.substring(4,6),10)-1,u=parseInt(r.substring(6,8),10),q.formattedDate=c(new Date(s,t,u),b.i18n.longDateFormat,b));o=a.tmpl("occurrenceTmpl",f),l=p.find(".rioccurrences"),l.replaceWith(o),p.find(".rioccurrences .batching a").click(function(a){a.preventDefault(),m(d,e,this.attributes.start.value,h)}),h||(p.find(".rioccurrences .action a.rrule").click(g),p.find(".rioccurrences .action a.exdate").click(i),p.find(".rioccurrences .action a.rdate").click(j)),p.find(".rioccurrences").show()},error:function(a,b,c){alert(b)}};a.ajax(r)}function n(b){var c=a(b);return c.length||(c=a("#"+b)),c.length||(c=a("input[name='"+b+"']")),c}function o(){var a,c,d,e,f=null;if(b.startField){if(a=n(b.startField),!a.length)return null;f=a.data("dateinput"),f?f=f.getValue():(f=a.val(),""===f&&(f=a.text())),"string"==typeof f&&(f=f.replace(" ","T")),f=new Date(f)}else if(b.startFieldYear&&b.startFieldMonth&&b.startFieldDay){if(c=n(b.startFieldYear),d=n(b.startFieldMonth),e=n(b.startFieldDay),!c.length&&!d.length&&!e.length)return null;f=new Date(c.val(),d.val()-1,e.val())}return null===f?null:isNaN(f)?null:f}function p(a){var b,c;return b=a.find("input[name=rirangebyenddatecalendar]"),c=b.data("dateinput"),c=c?c.getValue():b.val(),c=new Date(c),isNaN(c)||""===b.val()?null:c}function q(a,b){var c,d;return c=b.find("input[name="+a+"]"),d=c.val(),isNaN(d)||d.toString().indexOf(".")!==-1||""===c.val()?null:d}function r(a){var c,e,g,i;a&&h(y,b,a,!0),e=o(),null!==e?(y.find("select[name=rimonthlydayofmonthday]").val(e.getDate()),g=b.orderIndexes[Math.floor((e.getDate()-1)/7)],i=b.weekdays[e.getDay()],y.find("select[name=rimonthlyweekdayofmonthindex]").val(g),y.find("select[name=rimonthlyweekdayofmonth]").val(i),y.find("select[name=riyearlydayofmonthmonth]").val(e.getMonth()+1),y.find("select[name=riyearlydayofmonthday]").val(e.getDate()),y.find("select[name=riyearlyweekdayofmonthindex]").val(g),y.find("select[name=riyearlyweekdayofmonthday]").val(i),y.find("select[name=riyearlyweekdayofmonthmonth]").val(e.getMonth()+1),m(e,d(y,b,!1).result,0,!1),y.find("div.rioccurrencesactions").show()):y.find("div.rioccurrencesactions").hide(),c=y.find("select[name=rirtemplate]"),f(c)}function s(){var a=d(y,b,!1),c=z.find("label[class=ridisplay]");c.text(b.i18n.displayActivate+" "+a.description),e.val(a.result).change();var f=o();null!==f&&m(f,d(y,b,!1).result,0,!0),z.find('button[name="riedit"]').text(b.i18n.edit_rules),z.find('button[name="ridelete"]').show()}function t(){var a=z.find("label[class=ridisplay]");a.text(b.i18n.displayUnactivate),e.val("").change(),z.find(".rioccurrences").hide(),z.find('button[name="riedit"]').text(b.i18n.add_rules),z.find('button[name="ridelete"]').hide()}function u(a){var c,d,e,f;if(c=o(),f=a.find("#messagearea"),f.text(""),f.hide(),a.find(".riaddoccurrence div.errorarea").text("").hide(),"block"===a.find("#ridailyinterval").css("display")&&(e=q("ridailyinterval",a),!e||e<1||e>1e3))return f.text(b.i18n.noRepeatEvery).show(),!1;if("block"===a.find("#riweeklyinterval").css("display")&&(e=q("riweeklyinterval",a),!e||e<1||e>1e3))return f.text(b.i18n.noRepeatEvery).show(),!1;if("block"===a.find("#rimonthlyinterval").css("display")){if(e=q("rimonthlyinterval",a),!e||e<1||e>1e3)return f.text(b.i18n.noRepeatEvery).show(),!1;if(0===a.find("#rimonthlyoptions input:checked").length)return f.text(b.i18n.noRepeatOn).show(),!1}if("block"===a.find("#riyearlyinterval").css("display")){if(e=q("riyearlyinterval",a),!e||e<1||e>1e3)return f.text(b.i18n.noRepeatEvery).show(),!1;if(0===a.find("#riyearlyoptions input:checked").length)return f.text(b.i18n.noRepeatOn).show(),!1}if(a.find('input[value="BYOCCURRENCES"]:visible:checked').length>0&&(e=q("rirangebyoccurrencesvalue",a),!e||e<1||e>1e3))return f.text(b.i18n.noEndAfterNOccurrences).show(),!1;if(a.find('input[value="BYENDDATE"]:visible:checked').length>0){if(d=p(a),!d)return f.text(b.i18n.noEndDate).show(),!1;if(d<c)return f.text(b.i18n.pastEndDate).show(),!1}return!0}function v(a){a.preventDefault(),u(y)&&(y.overlay().close(),s())}function w(a){a.preventDefault(),y.overlay().close()}function x(){var a;a=o(),u(y)&&m(a,d(y,b,!1).result,0,!1)}var y,z,A,B,C=this,D=[];for(B=0;B<7;B++)A=B+b.firstDay,A>6&&(A-=7),D.push(A);if(a.extend(b,{orderIndexes:["+1","+2","+3","+4","-1"],weekdays:["SU","MO","TU","WE","TH","FR","SA"],orderedWeekdays:D}),z=a.tmpl("displayTmpl",b),y=a.tmpl("formTmpl",b),y.overlay(b.formOverlay).hide(),y.ical={RDATE:[],EXDATE:[]},a.tools.dateinput.localize(b.lang,{months:k[b.lang].months.join(),shortMonths:k[b.lang].shortMonths.join(),days:k[b.lang].weekdays.join(),shortDays:k[b.lang].shortWeekdays.join()}),y.find("input[name=rirangebyenddatecalendar]").dateinput({selectors:!0,lang:b.lang,format:b.i18n.shortDateFormat,firstDay:b.firstDay,yearRange:[-5,10]}).data("dateinput").setValue(new Date),e.val()){var E=h(y,b,e.val(),!1);if(E===-1){var F=z.find("label[class=ridisplay]");F.text(b.i18n.noRule)}else s()}z.find("button[name=ridelete]").click(function(a){a.preventDefault(),t()}),z.find("button[name=riedit]").click(function(a){r(e.val()),a.preventDefault(),y.overlay().load()}),y.find("div.riaddoccurrence input#adddate").dateinput({selectors:!0,lang:b.lang,format:b.i18n.shortDateFormat,firstDay:b.firstDay,yearRange:[-5,10]}).data("dateinput").setValue(new Date),y.find("input#addaction").click(l),y.find("a.rirefreshbutton").click(function(a){a.preventDefault(),x()}),y.find("select[name=rirtemplate]").change(function(b){f(a(this))}),y.find("select").change(function(b){a(this).parent().find("> input").click().change()}),y.find("input[name=rirangebyoccurrencesvalue]").change(function(b){a(this).parent().find("input[name=rirangetype]").click().change()}),y.find("input[name=rirangebyenddatecalendar]").change(function(){a(this).parent().find("input[name=rirangetype]").click(),0!==y.find(".rioccurrencesactions:visible").length&&x()}),y.find("input:radio, .riweeklyweekday > input, input[name=ridailyinterval], input[name=riweeklyinterval], input[name=rimonthlyinterval], input[name=riyearlyinterval]").change(function(a){0!==y.find(".rioccurrencesactions:visible").length&&x()}),y.find(".ricancelbutton").click(w),y.find(".risavebutton").click(v),a.extend(C,{display:z,form:y,loadData:r,save:v})}a.tools=a.tools||{version:"@VERSION"};var j,k={};j=a.tools.recurrenceinput={conf:{lang:"en",readOnly:!1,firstDay:0,startField:null,startFieldYear:null,startFieldMonth:null,startFieldDay:null,ajaxURL:null,ajaxContentType:"application/json; charset=utf8",ributtonExtraClass:"",hasRepeatForeverButton:!0,formOverlay:{speed:"fast",fixed:!1},template:{form:"#jquery-recurrenceinput-form-tmpl",display:"#jquery-recurrenceinput-display-tmpl"},rtemplate:{daily:{rrule:"FREQ=DAILY",fields:["ridailyinterval","rirangeoptions"]},mondayfriday:{rrule:"FREQ=WEEKLY;BYDAY=MO,FR",fields:["rirangeoptions"]},weekdays:{rrule:"FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR",fields:["rirangeoptions"]},weekly:{rrule:"FREQ=WEEKLY",fields:["riweeklyinterval","riweeklyweekdays","rirangeoptions"]},monthly:{rrule:"FREQ=MONTHLY",fields:["rimonthlyinterval","rimonthlyoptions","rirangeoptions"]},yearly:{rrule:"FREQ=YEARLY",fields:["riyearlyinterval","riyearlyoptions","rirangeoptions"]}}},localize:function(a,b){k[a]=b},setTemplates:function(a,b){var c,d;j.conf.rtemplate=a;for(c in b)if(b.hasOwnProperty(c))for(d in b[c])b[c].hasOwnProperty(d)&&(k[c].rtemplate[d]=b[c][d])}},j.localize("en",{displayUnactivate:"Does not repeat",displayActivate:"Repeats every",add_rules:"Add",edit_rules:"Edit",delete_rules:"Delete",add:"Add",refresh:"Refresh",title:"Repeat",preview:"Selected dates",addDate:"Add date",recurrenceType:"Repeats:",dailyInterval1:"Repeat every:",dailyInterval2:"days",weeklyInterval1:"Repeat every:",weeklyInterval2:"week(s)",weeklyWeekdays:"Repeat on:",weeklyWeekdaysHuman:"on:",monthlyInterval1:"Repeat every:",monthlyInterval2:"month(s)",monthlyDayOfMonth1:"Day",monthlyDayOfMonth1Human:"on day",monthlyDayOfMonth2:"of the month",monthlyDayOfMonth3:"month(s)",monthlyWeekdayOfMonth1:"The",monthlyWeekdayOfMonth1Human:"on the",monthlyWeekdayOfMonth2:"",monthlyWeekdayOfMonth3:"of the month",monthlyRepeatOn:"Repeat on:",yearlyInterval1:"Repeat every:",yearlyInterval2:"year(s)",yearlyDayOfMonth1:"Every",yearlyDayOfMonth1Human:"on",yearlyDayOfMonth2:"",yearlyDayOfMonth3:"",yearlyWeekdayOfMonth1:"The",yearlyWeekdayOfMonth1Human:"on the",yearlyWeekdayOfMonth2:"",yearlyWeekdayOfMonth3:"of",yearlyWeekdayOfMonth4:"",yearlyRepeatOn:"Repeat on:",range:"End recurrence:",rangeNoEnd:"Never",rangeByOccurrences1:"After",rangeByOccurrences1Human:"ends after",rangeByOccurrences2:"occurrence(s)",rangeByEndDate:"On",rangeByEndDateHuman:"ends on",including:", and also",except:", except for",cancel:"Cancel",save:"Save",recurrenceStart:"Start of the recurrence",additionalDate:"Additional date",include:"Include",exclude:"Exclude",remove:"Remove",orderIndexes:["first","second","third","fourth","last"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortWeekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDateFormat:"mmmm dd, yyyy",shortDateFormat:"mm/dd/yyyy",unsupportedFeatures:"Warning: This event uses recurrence features not supported by this widget. Saving the recurrence may change the recurrence in unintended ways:",noTemplateMatch:"No matching recurrence template",multipleDayOfMonth:"This widget does not support multiple days in monthly or yearly recurrence",bysetpos:"BYSETPOS is not supported",noRule:"No RRULE in RRULE data",noRepeatEvery:'Error: The "Repeat every"-field must be between 1 and 1000',noEndDate:"Error: End date is not set. Please set a correct value",noRepeatOn:'Error: "Repeat on"-value must be selected',pastEndDate:"Error: End date cannot be before start date",noEndAfterNOccurrences:'Error: The "After N occurrences"-field must be between 1 and 1000',alreadyAdded:"This date was already added",rtemplate:{daily:"Daily",mondayfriday:"Monday and Friday",weekdays:"Weekday",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly"}});var l=['<div class="rioccurrences">',"{{each occurrences}}",'<div class="occurrence ${occurrences[$index].type}">',"<span>","${occurrences[$index].formattedDate}",'{{if occurrences[$index].type === "start"}}','<span class="rlabel">${i18n.recurrenceStart}</span>',"{{/if}}",'{{if occurrences[$index].type === "rdate"}}','<span class="rlabel">${i18n.additionalDate}</span>',"{{/if}}","</span>","{{if !readOnly}}",'<span class="action">','{{if occurrences[$index].type === "rrule"}}','<a date="${occurrences[$index].date}" href="#"','class="${occurrences[$index].type}" title="${i18n.exclude}">',"${i18n.exclude}","</a>","{{/if}}",'{{if occurrences[$index].type === "rdate"}}','<a date="${occurrences[$index].date}" href="#"','class="${occurrences[$index].type}" title="${i18n.remove}" >',"${i18n.remove}","</a>","{{/if}}",'{{if occurrences[$index].type === "exdate"}}','<a date="${occurrences[$index].date}" href="#"','class="${occurrences[$index].type}" title="${i18n.include}">',"${i18n.include}","</a>","{{/if}}","</span>","{{/if}}","</div>","{{/each}}",'<div class="batching">',"{{each batch.batches}}",'{{if $index === batch.currentBatch}}<span class="current">{{/if}}','<a href="#" start="${batch.batches[$index][0]}">[${batch.batches[$index][0]} - ${batch.batches[$index][1]}]</a>',"{{if $index === batch.currentBatch}}</span>{{/if}}","{{/each}}","</div></div>"].join("\n");a.template("occurrenceTmpl",l);var m=['<div class="ridisplay">','<div class="rimain">',"{{if !readOnly}}",'<button name="riedit">${i18n.add_rules}</button>','<button name="ridelete" style="display:none">${i18n.delete_rules}</button>',"{{/if}}",'<label class="ridisplay">${i18n.displayUnactivate}</label>',"</div>",'<div class="rioccurrences" style="display:none" /></div>'].join("\n");a.template("displayTmpl",m);var n=['<div class="riform">',"<form>","<h1>${i18n.title}</h1>",'<div id="messagearea" style="display: none;">',"</div>",'<div id="rirtemplate">','<label for="${name}rtemplate" class="label">',"${i18n.recurrenceType}","</label>",'<select id="rirtemplate" name="rirtemplate" class="field">',"{{each rtemplate}}",'<option value="${$index}">${i18n.rtemplate[$index]}</value>',"{{/each}}","</select>","<div>",'<div id="riformfields">','<div id="ridailyinterval" class="rifield">','<label for="${name}dailyinterval" class="label">',"${i18n.dailyInterval1}","</label>",'<div class="field">','<input type="text" size="2"','value="1"','name="ridailyinterval"','id="${name}dailyinterval" />',"${i18n.dailyInterval2}","</div>","</div>",'<div id="riweeklyinterval" class="rifield">','<label for="${name}weeklyinterval" class="label">',"${i18n.weeklyInterval1}","</label>",'<div class="field">','<input type="text" size="2"','value="1"','name="riweeklyinterval"','id="${name}weeklyinterval"/>',"${i18n.weeklyInterval2}","</div>","</div>",'<div id="riweeklyweekdays" class="rifield">','<label for="${name}weeklyinterval" class="label">${i18n.weeklyWeekdays}</label>','<div class="field">',"{{each orderedWeekdays}}",'<div class="riweeklyweekday">','<input type="checkbox"','name="riweeklyweekdays${weekdays[$value]}"','id="${name}weeklyWeekdays${weekdays[$value]}"','value="${weekdays[$value]}" />','<label for="${name}weeklyWeekdays${weekdays[$value]}">${i18n.shortWeekdays[$value]}</label>',"</div>","{{/each}}","</div>","</div>",'<div id="rimonthlyinterval" class="rifield">','<label for="rimonthlyinterval" class="label">${i18n.monthlyInterval1}</label>','<div class="field">','<input type="text" size="2"','value="1" ','name="rimonthlyinterval"/>',"${i18n.monthlyInterval2}","</div>","</div>",'<div id="rimonthlyoptions" class="rifield">','<label for="rimonthlytype" class="label">${i18n.monthlyRepeatOn}</label>','<div class="field">',"<div>","<input",'type="radio"','value="DAYOFMONTH"','name="rimonthlytype"','id="${name}monthlytype:DAYOFMONTH" />','<label for="${name}monthlytype:DAYOFMONTH">',"${i18n.monthlyDayOfMonth1}","</label>",'<select name="rimonthlydayofmonthday"','id="${name}monthlydayofmonthday">',"{{each [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,","18,19,20,21,22,23,24,25,26,27,28,29,30,31]}}",'<option value="${$value}">${$value}</option>',"{{/each}}","</select>","${i18n.monthlyDayOfMonth2}","</div>","<div>","<input",'type="radio"','value="WEEKDAYOFMONTH"','name="rimonthlytype"','id="${name}monthlytype:WEEKDAYOFMONTH" />','<label for="${name}monthlytype:WEEKDAYOFMONTH">',"${i18n.monthlyWeekdayOfMonth1}","</label>",'<select name="rimonthlyweekdayofmonthindex">',"{{each i18n.orderIndexes}}",'<option value="${orderIndexes[$index]}">${$value}</option>',"{{/each}}","</select>","${i18n.monthlyWeekdayOfMonth2}",'<select name="rimonthlyweekdayofmonth">',"{{each orderedWeekdays}}",'<option value="${weekdays[$value]}">${i18n.weekdays[$value]}</option>',"{{/each}}","</select>","${i18n.monthlyWeekdayOfMonth3}","</div>","</div>","</div>",'<div id="riyearlyinterval" class="rifield">','<label for="riyearlyinterval" class="label">${i18n.yearlyInterval1}</label>','<div class="field">','<input type="text" size="2"','value="1" ','name="riyearlyinterval"/>',"${i18n.yearlyInterval2}","</div>","</div>",'<div id="riyearlyoptions" class="rifield">','<label for="riyearlyType" class="label">${i18n.yearlyRepeatOn}</label>','<div class="field">',"<div>","<input",'type="radio"','value="DAYOFMONTH"','name="riyearlyType"','id="${name}yearlytype:DAYOFMONTH" />','<label for="${name}yearlytype:DAYOFMONTH">',"${i18n.yearlyDayOfMonth1}","</label>",'<select name="riyearlydayofmonthmonth">',"{{each i18n.months}}",'<option value="${$index+1}">${$value}</option>',"{{/each}}","</select>","${i18n.yearlyDayOfMonth2}",'<select name="riyearlydayofmonthday">',"{{each [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,","18,19,20,21,22,23,24,25,26,27,28,29,30,31]}}",'<option value="${$value}">${$value}</option>',"{{/each}}","</select>","${i18n.yearlyDayOfMonth3}","</div>","<div>","<input",'type="radio"','value="WEEKDAYOFMONTH"','name="riyearlyType"','id="${name}yearlytype:WEEKDAYOFMONTH"/>','<label for="${name}yearlytype:WEEKDAYOFMONTH">',"${i18n.yearlyWeekdayOfMonth1}","</label>",'<select name="riyearlyweekdayofmonthindex">',"{{each i18n.orderIndexes}}",'<option value="${orderIndexes[$index]}">${$value}</option>',"{{/each}}","</select>",'<label for="${name}yearlytype:WEEKDAYOFMONTH">',"${i18n.yearlyWeekdayOfMonth2}","</label>",'<select name="riyearlyweekdayofmonthday">',"{{each orderedWeekdays}}",'<option value="${weekdays[$value]}">${i18n.weekdays[$value]}</option>',"{{/each}}","</select>","${i18n.yearlyWeekdayOfMonth3}",'<select name="riyearlyweekdayofmonthmonth">',"{{each i18n.months}}",'<option value="${$index+1}">${$value}</option>',"{{/each}}","</select>","${i18n.yearlyWeekdayOfMonth4}","</div>","</div>","</div>",'<div id="rirangeoptions" class="rifield">','<label class="label">${i18n.range}</label>','<div class="field">',"{{if hasRepeatForeverButton}}","<div>","<input",'type="radio"','value="NOENDDATE"','name="rirangetype"','id="${name}rangetype:NOENDDATE"/>','<label for="${name}rangetype:NOENDDATE">',"${i18n.rangeNoEnd}","</label>","</div>","{{/if}}","<div>","<input",'type="radio"','checked="checked"','value="BYOCCURRENCES"','name="rirangetype"','id="${name}rangetype:BYOCCURRENCES"/>','<label for="${name}rangetype:BYOCCURRENCES">',"${i18n.rangeByOccurrences1}","</label>","<input",'type="text" size="3"','value="7"','name="rirangebyoccurrencesvalue" />',"${i18n.rangeByOccurrences2}","</div>","<div>","<input",'type="radio"','value="BYENDDATE"','name="rirangetype"','id="${name}rangetype:BYENDDATE"/>','<label for="${name}rangetype:BYENDDATE">',"${i18n.rangeByEndDate}","</label>","<input",'type="date"','name="rirangebyenddatecalendar" />',"</div>","</div>","</div>","</div>",'<div class="rioccurrencesactions">','<div class="rioccurancesheader">',"<h2>${i18n.preview}</h2>",'<span class="refreshbutton action">','<a class="rirefreshbutton" href="#" title="${i18n.refresh}">',"${i18n.refresh}","</a>","</span>","</div>","</div>",'<div class="rioccurrences">',"</div>",'<div class="rioccurrencesactions">','<div class="rioccurancesheader">',"<h2>${i18n.addDate}</h2>","</div>",'<div class="riaddoccurrence">','<div class="errorarea"></div>','<input type="date" name="adddate" id="adddate" />','<input type="button" name="addaction" id="addaction" value="${i18n.add}">',"</div>","</div>",'<div class="ributtons">',"<input",'type="submit"','class="ricancelbutton ${ributtonExtraClass}"','value="${i18n.cancel}" />',"<input",'type="submit"','class="risavebutton ${ributtonExtraClass}"','value="${i18n.save}" />',"</div>","</form></div>"].join("\n");
a.template("formTmpl",n);var o=/d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*'/g;a.fn.recurrenceinput=function(b){if(this.data("recurrenceinput"))return this.data("recurrenceinput");var c=a.extend({},j.conf);a.extend(c,b),a.extend(c,{i18n:k[c.lang],name:this.attr("name")});var d=new i(c,this);return d.form.appendTo("body"),this.after(d.display),this.hide(),this.data("recurrenceinput",d),d}}(jQuery)}.apply(a,arguments)})}(this),define("mockup-patterns-recurrence",["jquery","pat-base","jquery.recurrenceinput"],function(a,b){"use strict";var c=b.extend({name:"recurrence",trigger:".pat-recurrence",parser:"mockup",defaults:{language:"en",localization:null,configuration:{}},init:function(){this.$el.addClass("recurrence-widget"),this.options.localization&&a.tools.recurrenceinput.localize(this.options.language,this.options.localization),this.$el.recurrenceinput(this.options.configuration)}});return c}),define("plone-patterns-portletmanager",["jquery","pat-base","mockup-utils","mockup-patterns-modal","translate","pat-logger","jquery.form"],function(a,b,c,d,e,f){"use strict";var g=f.getLogger("pat-manage-portlets"),h=b.extend({name:"manage-portlets",trigger:".pat-manage-portlets",parser:"mockup",messageTimeout:0,submitTimeout:0,switchTimeout:0,isModal:!1,dirty:!1,init:function(){var a=this,b=a.$el.parents(".plone-modal");if(1===b.size()){this.isModal=!0;var d=b.data("pattern-plone-modal");d.on("hide",function(){a.dirty&&window.location.reload()}),a.loading=d.loading}else a.loading=c.loading;a.bind()},bind:function(){var b=this;b.setupAddDropdown(),b.setupSwitchPortletManager(),b.setupSavePortletsSettings(),b.setupPortletEdit(),b.isModal&&a(".portlets-link-to-parent").off("click").click(function(d){b.loading.show();var e=a(this);d.preventDefault(),a.ajax({url:e.attr("href"),data:{ajax_load:1}}).done(function(d){var f=a(c.parseBodyTag(d)),g=e.parents(".plone-modal-body");g.empty();var h=a("#content",f),i=a("h1",h);a(".plone-modal-header",g.parent()).find("h2").html(i.html()),i.remove(),g.append(h),b.rebind(a(".pat-manage-portlets",h),!0),b.loading.hide()})})},rebind:function(b,c){g.info("rebind"),a.contains(document,this.$el[0])&&this.$el.replaceWith(b),this.$el=b,this.bind(),c||this.statusMessage(),this.dirty=!0},statusMessage:function(b){void 0===b&&(b=e("Portlet changes saved"));var c=this,d=a("#portlet-message");0===d.size()&&(d=a('<div class="portalMessage info" id="portlet-message" style="opacity: 0"></div>'),c.isModal?a(".plone-modal-body:visible").prepend(d):a("#content-core").prepend(d)),d.html("<strong>"+e("Info")+"</strong>"+b),clearTimeout(c.messageTimeout),d.fadeTo(500,1),c.messageTimeout=window.setTimeout(function(){d.fadeTo(500,.6)},3e3)},showEditPortlet:function(b){g.info("show edit portlet in modal");var f=this,h=a("<a/>");a("body").append(h);var i=new d(h,{ajaxUrl:b,actionOptions:{displayInModal:!1,reloadWindowOnClose:!1,isForm:!0,onSuccess:function(b,d){i.hide();var g=a(c.parseBodyTag(d));f.rebind(a("#"+f.$el.attr("id"),g).eq(0)),f.statusMessage(e("Portlet added"))}}});i.on("after-render",function(){var b=a("#"+f.$el.attr("id"),i.$raw);1===b.size()&&(b=b.clone(),i.on("shown",function(){i.hide()}),f.rebind(b),f.statusMessage(e("Portlet added")))}),i.show()},setupPortletEdit:function(){var b=this;a(".managedPortlet .portletHeader > a",b.$el).click(function(c){c.preventDefault(),b.showEditPortlet(a(this).attr("href"))})},setupAddDropdown:function(){var b=this;a(".add-portlet",b.$el).change(function(c){c.preventDefault();var d=a(this),e=d.parents("form"),f=d.attr("data-context-url"),g=f+d.val()+"?_authenticator="+a('[name="_authenticator"]').val()+"&referer="+a('[name="referer"]',e).val();b.showEditPortlet(g)})},setupSavePortletsSettings:function(){var b=this;a(".portlets-settings, form.portlet-action",b.$el).ajaxForm({beforeSubmit:function(){b.loading.show()},success:function(d){b.loading.hide(),g.info("form submit");var e=a(c.parseBodyTag(d));b.rebind(a("#"+b.$el.attr("id"),e).eq(0))}}),a(".portlets-settings select",b.$el).change(function(){g.info("select change"),clearTimeout(b.submitTimeout),b.submitTimeout=window.setTimeout(function(){a(".portlets-settings",b.$el).submit()},100)})},setupSwitchPortletManager:function(){var b=this;a("#main-container").on("change",".switch-portlet-manager",function(c){c.stopImmediatePropagation(),g.info("switch portlet manager");var d=a(this).val();clearTimeout(b.switchTimeout),b.switchTimeout=window.setTimeout(function(){b._reloadPortletManager(d)},100)}),a(window).on("popstate",function(a){if(a.stopImmediatePropagation(),a&&void 0===a.state){var c=window.location.href;g.info("redirecting to: "+c),b._reloadPortletManager(c,!0)}})},_reloadPortletManager:function(b,d){var e=this;e.loading.show(),a.get(b,{ajax_load:1}).done(function(f){var g=a(c.parseBodyTag(f)),h=g;a("#content").html(h),e.rebind(a(".pat-manage-portlets",h),!0),d?window.history.replaceState(null,null,b):window.history.pushState(null,null,b),e.loading.hide()})}});return h}),define("plone-patterns-toolbar",["jquery","pat-base","pat-registry","mockup-utils","translate","jquery.cookie"],function(a,b,c,d,e){"use strict";var f=b.extend({name:"toolbar",trigger:".pat-toolbar",parser:"mockup",defaults:{containerSelector:"#edit-zone",classNames:{logo:"plone-toolbar-logo",left:"plone-toolbar-left",leftDefault:"plone-toolbar-left-default",leftExpanded:"plone-toolbar-left-expanded",top:"plone-toolbar-top",topDefault:"plone-toolbar-top-default",topExpanded:"plone-toolbar-top-expanded","default":"plone-toolbar-default",expanded:"plone-toolbar-expanded",active:"active"},cookieName:"plone-toolbar",toolbar_width:"120px",submenu_width:"180px",desktop_width:"768px"},pxToInt:function(a){return parseInt(a.split("px")[0],10)},setupMobile:function(){var b=this;b.$container.css("right","-"+b.options.toolbar_width),a("body").addClass(b.options.classNames.leftExpanded),a("body").addClass(b.options.classNames.expanded),a("body").addClass(b.options.classNames.left),a("body").removeClass(b.options.classNames.topExpanded),a("body").removeClass(b.options.classNames.top),a("body").removeClass(b.options.classNames.topDefault),a("body").removeClass(b.options.classNames["default"]),a("."+b.options.classNames.logo,b.$container).off("click").on("click",function(){var c=a(b.$el);c.hasClass("open")?(b.$container.css("right","-"+b.options.toolbar_width),a("html").css("margin-left","0"),a("html").css("margin-right","0"),c.removeClass("open"),a("nav li",b.$container).removeClass(b.options.classNames.active)):(b.$container.css("right","0"),c.addClass("open"),a("html").css("margin-left","-"+b.options.toolbar_width),a("html").css("margin-right",b.options.toolbar_width))}),a("nav > ul > li",b.$container).has("a .plone-toolbar-caret").off("click"),a("nav li a",b.$container).has(".plone-toolbar-caret").off("click").on("click",function(c){c.preventDefault(),c.stopPropagation();var d=a(this).parent();if(d.hasClass(b.options.classNames.active))b.$container.css("right","0"),a("html").css("margin-left","-"+b.options.toolbar_width),a("html").css("margin-right",b.options.toolbar_width),a("nav li",b.$container).removeClass(b.options.classNames.active);else{a("nav li",b.$container).removeClass(b.options.classNames.active),d.addClass(b.options.classNames.active),b.$container.css("right",b.options.submenu_width);var e=b.pxToInt(b.options.toolbar_width)+b.pxToInt(b.options.submenu_width);a("html").css("margin-left","-"+e+"px"),a("html").css("margin-right",+e+"px")}})},setupDesktop:function(){var b=this;b.state.expanded?(a("body").addClass(b.options.classNames.expanded),a("body").addClass(b.state.left?b.options.classNames.leftExpanded:b.options.classNames.topExpanded),a("body").removeClass(b.options.classNames["default"]),a("body").removeClass(b.options.classNames.leftDefault),a("body").removeClass(b.options.classNames.topDefault)):(a("body").addClass(b.options.classNames["default"]),a("body").addClass(b.state.left?b.options.classNames.leftDefault:b.options.classNames.topDefault),a("body").removeClass(b.options.classNames.expanded),a("body").removeClass(b.options.classNames.leftExpanded),a("body").removeClass(b.options.classNames.topExpanded)),b.state.left||(a("body").addClass(b.options.classNames.top),a("body").addClass(b.state.expanded?b.options.classNames.topExpanded:b.options.classNames.topDefault),a("body").removeClass(b.options.classNames.left),a("body").removeClass(b.options.classNames.leftDefault),a("body").removeClass(b.options.classNames.leftExpanded)),a("."+b.options.classNames.logo,b.$container).off("click").on("click",function(){b.state.expanded?(b.setState({expanded:!1}),a("body").removeClass(b.options.classNames.expanded),a("body").addClass(b.options.classNames["default"]),a("nav li",b.$container).removeClass(b.options.classNames.active),b.state.left?(a("body").addClass(b.options.classNames.leftDefault),a("body").removeClass(b.options.classNames.leftExpanded)):(a("body").addClass(b.options.classNames.topDefault),a("body").removeClass(b.options.classNames.topExpanded))):(b.setState({expanded:!0}),a("body").addClass(b.options.classNames.expanded),a("body").removeClass(b.options.classNames["default"]),a("nav li",b.$container).removeClass(b.options.classNames.active),b.state.left?(a("body").addClass(b.options.classNames.leftExpanded),a("body").removeClass(b.options.classNames.leftDefault)):(a("body").addClass(b.options.classNames.topExpanded),a("body").removeClass(b.options.classNames.topDefault))),b.hideElements()}),a("nav > ul > li li",b.$container).off("click").on("click",function(a){a.stopImmediatePropagation()}),a("nav li a",b.$container).has(".plone-toolbar-caret").off("click"),a("nav > ul > li",b.$container).has("a .plone-toolbar-caret").off("click").on("click",function(c){var d=a(this),e=b.options.classNames.active;c.preventDefault(),c.stopPropagation();var f=d.hasClass(e),g=d.parent("#plone-toolbar-more-subset");g.length?g.find("li").filter('[id*="contentmenu-"]').removeClass(e):(a("."+e+"> ul",b.$container).attr("aria-hidden","true"),a("."+e,b.$container).removeClass(e),a("#plone-toolbar-more-subset").hide()),a("nav li > ul",a(this)).css({"margin-top":""}),f||(d.addClass(e),b.padPulloutContent(d))}),a("body").on("click",function(c){var d=b.$container.find(c.target);d.length&&"NAV"!==d.prop("tagName")||(a("nav > ul > li",b.$container).each(function(c,d){a(d).removeClass(b.options.classNames.active)}),a("#plone-toolbar-more-subset").hide())}),b.setHeight()},padPulloutContent:function(b){if(this.state.left&&this.isDesktop()){var c=a("> ul",b),d=c.find("> *"),e=d.first(),f=d.last(),g=f.position().top-e.position().top+f.outerHeight(),h=c.outerHeight(),i=b.position().top>1?b.position().top:b.offset().top;c.css({"margin-top":Math.min(i,h-g)}),c.attr("aria-hidden","false")}},isDesktop:function(){return a(window).width()>this.pxToInt(this.options.desktop_width)},_setHeight:function(){var b=a(".plone-toolbar-main",this.$container);b.css({height:""});var c=b.outerHeight();a(".scroll-btn",this.$container).remove(),b.css({"padding-top":""});var d=a(window).height()-a("#personal-bar-container").height()-a(".plone-toolbar-logo").height();if(d<c){var e=a('<li class="scroll-btn up"><a href="#"><span class="icon-up"></span><span>&nbsp;</span></a></li>'),f=a('<li class="scroll-btn down"><a href="#"><span class="icon-down"></span><span>&nbsp;</span></a></li>');b.prepend(e),b.append(f),d-=f.height(),b.height(d),b.css({"padding-top":e.height()}),e.click(function(a){a.preventDefault(),b.scrollTop(b.scrollTop()-50)}),f.click(function(a){a.preventDefault(),b.scrollTop(b.scrollTop()+50)})}var g=a("li.active ul:visible",this.$container);g.size()>0&&this.padPulloutContent(g)},setHeight:function(){if(this.state.left&&this.isDesktop()){var a=this;clearTimeout(a.heightTimeout),a.heightTimeout=setTimeout(function(){a._setHeight()},50)}},setState:function(b){var c=this;c.state=a.extend({},c.state,b),a.cookie(c.options.cookieName,JSON.stringify({expanded:c.state.expanded}),{path:"/"})},cloneViewsIntoSubset:function(a,b,c){var d,e,f=a[0],g=b.length-1,h=0!==f.offsetTop;if(h)for(d=g;g>=0&&(e=b.eq(d),e.is(":hidden")||(e.hide().clone(!0,!0).appendTo(c).show(),0!==f.offsetTop));g-=1);},hideElements:function(){var b=this;if(!b.state.left){var c=a(".plone-toolbar-container").width(),d=a(".plone-toolbar-logo").width(),f=a(".plone-toolbar-main"),g=f.find("> li");g.each(function(){d+=a(this).width()});var h=a("#personal-bar-container");h.find("> li").each(function(){d+=a(this).width()});var i=a("#plone-toolbar-more-options");d-=i.width();var j=g.filter('[id^="plone-contentmenu-"]'),k=g.filter('[id^="contentview-"]');c<d?i.length||!function(){j.hide(),i=a('<li id="plone-toolbar-more-options"><a href="#"><span class="icon-moreOptions" aria-hidden="true"></span><span>'+e("More")+'</span><span class="plone-toolbar-caret"></span></a></li>'),f.append(i);var c=a('<ul id="plone-toolbar-more-subset" style="display: none"></ul>');h.after(c),j.each(function(){a(this).clone(!0,!0).show().appendTo(c)}),b.cloneViewsIntoSubset(h,k,c);var d=b.options.classNames.active;i.find("a").on("click",function(e){a("."+d,b.$container).removeClass(d);var f=a(this).parent();f.toggleClass("active",c.is(":hidden")),c.toggle(),e.preventDefault()})}():(i.remove(),a("#plone-toolbar-more-subset").remove(),f.children().show()),0!==h[0].offsetTop&&b.cloneViewsIntoSubset(h,k,a("#plone-toolbar-more-subset"))}},init:function(){var b=this;b.heightTimeout=0,b.$container=a(b.options.containerSelector);var e=a.cookie(b.options.cookieName);if(b.state={expanded:!0,left:a("body").hasClass(b.options.classNames.left)},e)try{b.state=a.extend({},b.state,a.parseJSON(e))}catch(f){}b.isDesktop()?(b.setupDesktop(),b.state.left||b.hideElements()):b.setupMobile(),b.$el.addClass("initialized"),a("body").off("structure-url-changed").on("structure-url-changed",function(e,f){a.ajax({url:a("body").attr("data-portal-url")+f+"/@@render-toolbar"}).done(function(e){var f=a(d.parseBodyTag(e));b.$el.replaceWith(f),c.scan(f)})}),a(window).on("resize",function(){b.isDesktop()?(b.setupDesktop(),b.state.left||b.hideElements()):b.setupMobile()})}});return f}),window.jQuery&&define("jquery",[],function(){"use strict";return window.jQuery}),require(["mockup-patterns-textareamimetypeselector","mockup-patterns-relateditems","mockup-patterns-querystring","mockup-patterns-tinymce","mockup-patterns-inlinevalidation","mockup-patterns-structure","mockup-patterns-structureupdater","mockup-patterns-recurrence","plone-patterns-portletmanager","plone-patterns-toolbar"],function(){"use strict"}),define("/home/_thet/data/dev/plone/buildout.coredev/src/Products.CMFPlone/Products/CMFPlone/static/plone-logged-in.js",function(){});
//# sourceMappingURL=plone-logged-in-compiled.min.js.map