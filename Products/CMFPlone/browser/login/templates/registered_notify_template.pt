<tal:root define="
            lt string:&lt;;
            gt string:&gt;;
            member python:options['member'];
            reset python:options.get('reset', None) or here.portal_password_reset.requestReset(member.getId());
            email_from_name python:context.portal_registry['plone.email_from_name'];
          ">From:
  <span tal:replace="structure view/encoded_mail_sender"></span>
To:
  <span tal:replace="python:member.getProperty('email')"></span>
Subject:
  <span tal:replace="view/registered_notify_subject"></span>
Content-Type: text/plain
Precedence: bulk

  <div tal:define="
         fullname python:member.getProperty('fullname');
       "
       tal:omit-tag=""
       i18n:domain="plone"
       i18n:translate="mailtemplate_registered_user_body"
  >
    Welcome
    <span tal:replace="fullname"
          i18n:name="fullname"
    ></span>,

    Your user account has been created.
  Your username is
    <span tal:replace="python:member.getUserName()"
          i18n:name="member"
    ></span>.
  Please activate it by visiting

    <span tal:replace="python:view.construct_url(reset['randomstring'])+'?userid='+member.getUserName()"
          i18n:name="set_password"
    ></span>

    Please activate your account before
    <span tal:replace="python:
    context.toLocalizedTime(reset['expires'], long_format=1)"
          i18n:name="expirationdate"
    ></span>

  </div>

  <div tal:omit-tag=""
       i18n:domain="plone"
       i18n:translate="greetings"
  >
    With kind regards,
  </div>
--

  <span tal:replace="email_from_name"></span>
</tal:root>
